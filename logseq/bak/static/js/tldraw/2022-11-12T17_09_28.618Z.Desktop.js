(function(){
shadow$provide[609]=function(pa,S,Pa,F){function n(q,A,z){var a,G={},t=null,h=null;void 0!==z&&(t=""+z);void 0!==A.key&&(t=""+A.key);void 0!==A.ref&&(h=A.ref);for(a in A)p.call(A,a)&&!b.hasOwnProperty(a)&&(G[a]=A[a]);if(q&&q.defaultProps)for(a in A=q.defaultProps,A)void 0===G[a]&&(G[a]=A[a]);return{$$typeof:Q,type:q,key:t,ref:h,props:G,_owner:y.current}}S(0);pa=S(3);var Q=60103;F.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(S=Symbol.for,Q=S("react.element"),F.Fragment=S("react.fragment"));
var y=pa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};F.jsx=n;F.jsxs=n};
shadow$provide[611]=function(pa,S,Pa,F){Pa.exports=S(609)};
shadow$provide[612]=function(pa,S,Pa,F){function n(lc){for(var Cd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+lc,td=1;td<arguments.length;td++)Cd+="\x26args[]\x3d"+encodeURIComponent(arguments[td]);return"Minified React error #"+lc+"; visit "+Cd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Q(lc){if(null==lc)return null;if("function"===typeof lc)return lc.displayName||lc.name||null;if("string"===typeof lc)return lc;
switch(lc){case J:return"Fragment";case T:return"Portal";case C:return"Profiler";case N:return"StrictMode";case X:return"Suspense";case I:return"SuspenseList"}if("object"===typeof lc)switch(lc.$$typeof){case O:return(lc.displayName||"Context")+".Consumer";case M:return(lc._context.displayName||"Context")+".Provider";case Z:var Cd=lc.render;Cd=Cd.displayName||Cd.name||"";return lc.displayName||(""!==Cd?"ForwardRef("+Cd+")":"ForwardRef");case fa:return Q(lc.type);case ba:return Q(lc._render);case L:Cd=
lc._payload;lc=lc._init;try{return Q(lc(Cd))}catch(td){}}return null}function y(lc,Cd){for(var td=lc._threadCount|0;td<=Cd;td++)lc[td]=lc._currentValue2,lc._threadCount=td+1}function p(lc,Cd,td,Yd){if(Yd&&(Yd=lc.contextType,"object"===typeof Yd&&null!==Yd))return y(Yd,td),Yd[td];if(lc=lc.contextTypes){td={};for(var pd in lc)td[pd]=Cd[pd];Cd=td}else Cd=xa;return Cd}function b(lc){if(Da.call(Wa,lc))return!0;if(Da.call(Na,lc))return!1;if(Sa.test(lc))return Wa[lc]=!0;Na[lc]=!0;return!1}function q(lc,
Cd,td,Yd){if(null!==td&&0===td.type)return!1;switch(typeof Cd){case "function":case "symbol":return!0;case "boolean":if(Yd)return!1;if(null!==td)return!td.acceptsBooleans;lc=lc.toLowerCase().slice(0,5);return"data-"!==lc&&"aria-"!==lc;default:return!1}}function A(lc,Cd,td,Yd){if(null===Cd||"undefined"===typeof Cd||q(lc,Cd,td,Yd))return!0;if(Yd)return!1;if(null!==td)switch(td.type){case 3:return!Cd;case 4:return!1===Cd;case 5:return isNaN(Cd);case 6:return isNaN(Cd)||1>Cd}return!1}function z(lc,Cd,
td,Yd,pd,Hd,gd){this.acceptsBooleans=2===Cd||3===Cd||4===Cd;this.attributeName=Yd;this.attributeNamespace=pd;this.mustUseProperty=td;this.propertyName=lc;this.type=Cd;this.sanitizeURL=Hd;this.removeEmptyString=gd}function a(lc){return lc[1].toUpperCase()}function G(lc){if("boolean"===typeof lc||"number"===typeof lc)return""+lc;lc=""+lc;var Cd=cb.exec(lc);if(Cd){var td="",Yd,pd=0;for(Yd=Cd.index;Yd<lc.length;Yd++){switch(lc.charCodeAt(Yd)){case 34:Cd="\x26quot;";break;case 38:Cd="\x26amp;";break;case 39:Cd=
"\x26#x27;";break;case 60:Cd="\x26lt;";break;case 62:Cd="\x26gt;";break;default:continue}pd!==Yd&&(td+=lc.substring(pd,Yd));pd=Yd+1;td+=Cd}lc=pd!==Yd?td+lc.substring(pd,Yd):td}return lc}function t(lc,Cd){var td=La.hasOwnProperty(lc)?La[lc]:null,Yd;if(Yd="style"!==lc)Yd=null!==td?0===td.type:!(2<lc.length)||"o"!==lc[0]&&"O"!==lc[0]||"n"!==lc[1]&&"N"!==lc[1]?!1:!0;if(Yd||A(lc,Cd,td,!1))return"";if(null!==td){lc=td.attributeName;Yd=td.type;if(3===Yd||4===Yd&&!0===Cd)return lc+'\x3d""';td.sanitizeURL&&
(Cd=""+Cd);return lc+'\x3d"'+(G(Cd)+'"')}return b(lc)?lc+'\x3d"'+(G(Cd)+'"'):""}function h(lc,Cd){return lc===Cd&&(0!==lc||1/lc===1/Cd)||lc!==lc&&Cd!==Cd}function g(){if(null===na)throw Error(n(321));return na}function f(){if(0<zb)throw Error(n(312));return{memoizedState:null,queue:null,next:null}}function r(){null===ra?null===Ba?(za=!1,Ba=ra=f()):(za=!0,ra=Ba):null===ra.next?(za=!1,ra=ra.next=f()):(za=!0,ra=ra.next);return ra}function w(lc,Cd,td,Yd){for(;Ia;)Ia=!1,zb+=1,ra=null,td=lc(Cd,Yd);H();
return td}function H(){na=null;Ia=!1;Ba=null;zb=0;ra=Ra=null}function x(lc,Cd){return"function"===typeof Cd?Cd(lc):Cd}function v(lc,Cd,td){na=g();ra=r();if(za){var Yd=ra.queue;Cd=Yd.dispatch;if(null!==Ra&&(td=Ra.get(Yd),void 0!==td)){Ra.delete(Yd);Yd=ra.memoizedState;do Yd=lc(Yd,td.action),td=td.next;while(null!==td);ra.memoizedState=Yd;return[Yd,Cd]}return[ra.memoizedState,Cd]}lc=lc===x?"function"===typeof Cd?Cd():Cd:void 0!==td?td(Cd):Cd;ra.memoizedState=lc;lc=ra.queue={last:null,dispatch:null};
lc=lc.dispatch=m.bind(null,na,lc);return[ra.memoizedState,lc]}function u(lc,Cd){na=g();ra=r();Cd=void 0===Cd?null:Cd;if(null!==ra){var td=ra.memoizedState;if(null!==td&&null!==Cd){var Yd=td[1];a:if(null===Yd)Yd=!1;else{for(var pd=0;pd<Yd.length&&pd<Cd.length;pd++)if(!Ma(Cd[pd],Yd[pd])){Yd=!1;break a}Yd=!0}if(Yd)return td[0]}}lc=lc();ra.memoizedState=[lc,Cd];return lc}function m(lc,Cd,td){if(!(25>zb))throw Error(n(301));if(lc===na)if(Ia=!0,lc={action:td,next:null},null===Ra&&(Ra=new Map),td=Ra.get(Cd),
void 0===td)Ra.set(Cd,lc);else{for(Cd=td;null!==Cd.next;)Cd=Cd.next;Cd.next=lc}}function R(){}function ha(lc){switch(lc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K(lc){if(void 0===lc||null===lc)return lc;var Cd="";D.Children.forEach(lc,function(td){null!=td&&(Cd+=td)});return Cd}function ka(lc,Cd){if(void 0===lc)throw Error(n(152,Q(Cd)||"Component"));}function W(lc,Cd,td){function Yd(gd,
Wd){var Lb=Wd.prototype&&Wd.prototype.isReactComponent,ac=p(Wd,Cd,td,Lb),Sb=[],ob=!1,kb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Sb)return null},enqueueReplaceState:function(te,nd){ob=!0;Sb=[nd]},enqueueSetState:function(te,nd){if(null===Sb)return null;Sb.push(nd)}};if(Lb){if(Lb=new Wd(gd.props,ac,kb),"function"===typeof Wd.getDerivedStateFromProps){var Yb=Wd.getDerivedStateFromProps.call(null,gd.props,Lb.state);null!=Yb&&(Lb.state=aa({},Lb.state,Yb))}}else if(na={},
Lb=Wd(gd.props,ac,kb),Lb=w(Wd,gd.props,Lb,ac),null==Lb||null==Lb.render){lc=Lb;ka(lc,Wd);return}Lb.props=gd.props;Lb.context=ac;Lb.updater=kb;kb=Lb.state;void 0===kb&&(Lb.state=kb=null);if("function"===typeof Lb.UNSAFE_componentWillMount||"function"===typeof Lb.componentWillMount)if("function"===typeof Lb.componentWillMount&&"function"!==typeof Wd.getDerivedStateFromProps&&Lb.componentWillMount(),"function"===typeof Lb.UNSAFE_componentWillMount&&"function"!==typeof Wd.getDerivedStateFromProps&&Lb.UNSAFE_componentWillMount(),
Sb.length){kb=Sb;var nc=ob;Sb=null;ob=!1;if(nc&&1===kb.length)Lb.state=kb[0];else{Yb=nc?kb[0]:Lb.state;var Nc=!0;for(nc=nc?1:0;nc<kb.length;nc++){var Vc=kb[nc];Vc="function"===typeof Vc?Vc.call(Lb,Yb,gd.props,ac):Vc;null!=Vc&&(Nc?(Nc=!1,Yb=aa({},Yb,Vc)):aa(Yb,Vc))}Lb.state=Yb}}else Sb=null;lc=Lb.render();ka(lc,Wd);if("function"===typeof Lb.getChildContext&&(gd=Wd.childContextTypes,"object"===typeof gd)){var Md=Lb.getChildContext(),ee;for(ee in Md)if(!(ee in gd))throw Error(n(108,Q(Wd)||"Unknown",
ee));}Md&&(Cd=aa({},Cd,Md))}for(;D.isValidElement(lc);){var pd=lc,Hd=pd.type;if("function"!==typeof Hd)break;Yd(pd,Hd)}return{child:lc,context:Cd}}var aa=S(0),D=S(3),T=60106,J=60107,N=60108,C=60114,M=60109,O=60110,Z=60112,X=60113,I=60120,fa=60115,L=60116,ba=60121,ea=60117,ca=60119,oa=60129,ya=60131;"function"===typeof Symbol&&Symbol.for&&(pa=Symbol.for,T=pa("react.portal"),J=pa("react.fragment"),N=pa("react.strict_mode"),C=pa("react.profiler"),M=pa("react.provider"),O=pa("react.context"),Z=pa("react.forward_ref"),
X=pa("react.suspense"),I=pa("react.suspense_list"),fa=pa("react.memo"),L=pa("react.lazy"),ba=pa("react.block"),ea=pa("react.fundamental"),ca=pa("react.scope"),oa=pa("react.debug_trace_mode"),ya=pa("react.legacy_hidden"));pa=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var xa={},Ga=new Uint16Array(16);for(S=0;15>S;S++)Ga[S]=S+1;Ga[15]=0;var Sa=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Da=Object.prototype.hasOwnProperty,Na={},Wa={},La={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(lc){La[lc]=new z(lc,0,!1,lc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(lc){var Cd=lc[0];La[Cd]=new z(Cd,1,!1,lc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(lc){La[lc]=
new z(lc,2,!1,lc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(lc){La[lc]=new z(lc,2,!1,lc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(lc){La[lc]=new z(lc,3,!1,lc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(lc){La[lc]=new z(lc,3,!0,lc,null,!1,!1)});["capture","download"].forEach(function(lc){La[lc]=new z(lc,4,!1,lc,null,!1,!1)});["cols","rows","size","span"].forEach(function(lc){La[lc]=new z(lc,6,!1,lc,null,!1,!1)});["rowSpan","start"].forEach(function(lc){La[lc]=new z(lc,5,!1,lc.toLowerCase(),null,!1,!1)});var db=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(lc){var Cd=
lc.replace(db,a);La[Cd]=new z(Cd,1,!1,lc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(lc){var Cd=lc.replace(db,a);La[Cd]=new z(Cd,1,!1,lc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(lc){var Cd=lc.replace(db,a);La[Cd]=new z(Cd,1,!1,lc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(lc){La[lc]=new z(lc,1,!1,lc.toLowerCase(),null,!1,!1)});
La.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(lc){La[lc]=new z(lc,1,!1,lc.toLowerCase(),null,!0,!0)});var cb=/["'&<>]/,Ma="function"===typeof Object.is?Object.is:h,na=null,Ba=null,ra=null,za=!1,Ia=!1,Ra=null,zb=0,gb=null,Kb={readContext:function(lc){var Cd=gb.threadID;y(lc,Cd);return lc[Cd]},useContext:function(lc){g();var Cd=gb.threadID;y(lc,Cd);return lc[Cd]},useMemo:u,useReducer:v,useRef:function(lc){na=
g();ra=r();var Cd=ra.memoizedState;return null===Cd?(lc={current:lc},ra.memoizedState=lc):Cd},useState:function(lc){return v(x,lc)},useLayoutEffect:function(){},useCallback:function(lc,Cd){return u(function(){return lc},Cd)},useImperativeHandle:R,useEffect:R,useDebugValue:R,useDeferredValue:function(lc){g();return lc},useTransition:function(){g();return[function(lc){lc()},!1]},useOpaqueIdentifier:function(){return(gb.identifierPrefix||"")+"R:"+(gb.uniqueID++).toString(36)},useMutableSource:function(lc,
Cd){g();return Cd(lc._source)}},Rb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},cc=aa({menuitem:!0},Rb),Oa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lb=["Webkit","ms","Moz","O"];Object.keys(Oa).forEach(function(lc){lb.forEach(function(Cd){Cd=Cd+lc.charAt(0).toUpperCase()+lc.substring(1);Oa[Cd]=Oa[lc]})});var nb=/([A-Z])/g,Tb=/^ms-/,Dc=D.Children.toArray,
Tc=pa.ReactCurrentDispatcher,Ic={listing:!0,pre:!0,textarea:!0},Bb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,qc={},Oc={},cd=Object.prototype.hasOwnProperty,Jd={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Fd=function(){function lc(td,Yd,pd){D.isValidElement(td)?td.type!==J?td=[td]:(td=td.props.children,td=D.isValidElement(td)?[td]:Dc(td)):td=Dc(td);td={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:td,childIndex:0,context:xa,footer:""};
var Hd=Ga[0];if(0===Hd){var gd=Ga;Hd=gd.length;var Wd=2*Hd;if(!(65536>=Wd))throw Error(n(304));var Lb=new Uint16Array(Wd);Lb.set(gd);Ga=Lb;Ga[0]=Hd+1;for(gd=Hd;gd<Wd-1;gd++)Ga[gd]=gd+1;Ga[Wd-1]=0}else Ga[0]=Ga[Hd];this.threadID=Hd;this.stack=[td];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Yd;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=pd&&pd.identifierPrefix||""}
var Cd=lc.prototype;Cd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var td=this.threadID;Ga[td]=Ga[0];Ga[0]=td}};Cd.pushProvider=function(td){var Yd=++this.contextIndex,pd=td.type._context,Hd=this.threadID;y(pd,Hd);var gd=pd[Hd];this.contextStack[Yd]=pd;this.contextValueStack[Yd]=gd;pd[Hd]=td.props.value};Cd.popProvider=function(){var td=this.contextIndex,Yd=this.contextStack[td],pd=this.contextValueStack[td];this.contextStack[td]=null;this.contextValueStack[td]=
null;this.contextIndex--;Yd[this.threadID]=pd};Cd.clearProviders=function(){for(var td=this.contextIndex;0<=td;td--)this.contextStack[td][this.threadID]=this.contextValueStack[td]};Cd.read=function(td){if(this.exhausted)return null;var Yd=gb;gb=this;var pd=Tc.current;Tc.current=Kb;try{for(var Hd=[""],gd=!1;Hd[0].length<td;){if(0===this.stack.length){this.exhausted=!0;var Wd=this.threadID;Ga[Wd]=Ga[0];Ga[0]=Wd;break}var Lb=this.stack[this.stack.length-1];if(gd||Lb.childIndex>=Lb.children.length){var ac=
Lb.footer;""!==ac&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Lb.type)this.currentSelectValue=null;else if(null!=Lb.type&&null!=Lb.type.type&&Lb.type.type.$$typeof===M)this.popProvider(Lb.type);else if(Lb.type===X){this.suspenseDepth--;var Sb=Hd.pop();if(gd){gd=!1;var ob=Lb.fallbackFrame;if(!ob)throw Error(n(303));this.stack.push(ob);Hd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Hd[this.suspenseDepth]+=Sb}Hd[this.suspenseDepth]+=ac}else{var kb=Lb.children[Lb.childIndex++],
Yb="";try{Yb+=this.render(kb,Lb.context,Lb.domNamespace)}catch(nc){if(null!=nc&&"function"===typeof nc.then)throw Error(n(294));throw nc;}finally{}Hd.length<=this.suspenseDepth&&Hd.push("");Hd[this.suspenseDepth]+=Yb}}return Hd[0]}finally{Tc.current=pd,gb=Yd,H()}};Cd.render=function(td,Yd,pd){if("string"===typeof td||"number"===typeof td){pd=""+td;if(""===pd)return"";if(this.makeStaticMarkup)return G(pd);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+G(pd);this.previousWasTextNode=!0;return G(pd)}Yd=
W(td,Yd,this.threadID);td=Yd.child;Yd=Yd.context;if(null===td||!1===td)return"";if(!D.isValidElement(td)){if(null!=td&&null!=td.$$typeof){pd=td.$$typeof;if(pd===T)throw Error(n(257));throw Error(n(258,pd.toString()));}td=Dc(td);this.stack.push({type:null,domNamespace:pd,children:td,childIndex:0,context:Yd,footer:""});return""}var Hd=td.type;if("string"===typeof Hd)return this.renderDOM(td,Yd,pd);switch(Hd){case ya:case oa:case N:case C:case I:case J:return td=Dc(td.props.children),this.stack.push({type:null,
domNamespace:pd,children:td,childIndex:0,context:Yd,footer:""}),"";case X:throw Error(n(294));case ca:throw Error(n(343));}if("object"===typeof Hd&&null!==Hd)switch(Hd.$$typeof){case Z:na={};var gd=Hd.render(td.props,td.ref);gd=w(Hd.render,td.props,gd,td.ref);gd=Dc(gd);this.stack.push({type:null,domNamespace:pd,children:gd,childIndex:0,context:Yd,footer:""});return"";case fa:return td=[D.createElement(Hd.type,aa({ref:td.ref},td.props))],this.stack.push({type:null,domNamespace:pd,children:td,childIndex:0,
context:Yd,footer:""}),"";case M:return Hd=Dc(td.props.children),pd={type:td,domNamespace:pd,children:Hd,childIndex:0,context:Yd,footer:""},this.pushProvider(td),this.stack.push(pd),"";case O:Hd=td.type;gd=td.props;var Wd=this.threadID;y(Hd,Wd);Hd=Dc(gd.children(Hd[Wd]));this.stack.push({type:td,domNamespace:pd,children:Hd,childIndex:0,context:Yd,footer:""});return"";case ea:throw Error(n(338));case L:return Hd=td.type,gd=Hd._init,Hd=gd(Hd._payload),td=[D.createElement(Hd,aa({ref:td.ref},td.props))],
this.stack.push({type:null,domNamespace:pd,children:td,childIndex:0,context:Yd,footer:""}),""}throw Error(n(130,null==Hd?Hd:typeof Hd,""));};Cd.renderDOM=function(td,Yd,pd){var Hd=td.type.toLowerCase();"http://www.w3.org/1999/xhtml"===pd&&ha(Hd);if(!qc.hasOwnProperty(Hd)){if(!Bb.test(Hd))throw Error(n(65,Hd));qc[Hd]=!0}var gd=td.props;if("input"===Hd)gd=aa({type:void 0},gd,{defaultChecked:void 0,defaultValue:void 0,value:null!=gd.value?gd.value:gd.defaultValue,checked:null!=gd.checked?gd.checked:
gd.defaultChecked});else if("textarea"===Hd){var Wd=gd.value;if(null==Wd){Wd=gd.defaultValue;var Lb=gd.children;if(null!=Lb){if(null!=Wd)throw Error(n(92));if(Array.isArray(Lb)){if(!(1>=Lb.length))throw Error(n(93));Lb=Lb[0]}Wd=""+Lb}null==Wd&&(Wd="")}gd=aa({},gd,{value:void 0,children:""+Wd})}else if("select"===Hd)this.currentSelectValue=null!=gd.value?gd.value:gd.defaultValue,gd=aa({},gd,{value:void 0});else if("option"===Hd){Lb=this.currentSelectValue;var ac=K(gd.children);if(null!=Lb){var Sb=
null!=gd.value?gd.value+"":ac;Wd=!1;if(Array.isArray(Lb))for(var ob=0;ob<Lb.length;ob++){if(""+Lb[ob]===Sb){Wd=!0;break}}else Wd=""+Lb===Sb;gd=aa({selected:void 0,children:void 0},gd,{selected:Wd,children:ac})}}if(Wd=gd){if(cc[Hd]&&(null!=Wd.children||null!=Wd.dangerouslySetInnerHTML))throw Error(n(137,Hd));if(null!=Wd.dangerouslySetInnerHTML){if(null!=Wd.children)throw Error(n(60));if(!("object"===typeof Wd.dangerouslySetInnerHTML&&"__html"in Wd.dangerouslySetInnerHTML))throw Error(n(61));}if(null!=
Wd.style&&"object"!==typeof Wd.style)throw Error(n(62));}Wd=gd;Lb=this.makeStaticMarkup;ac=1===this.stack.length;Sb="\x3c"+td.type;a:if(-1===Hd.indexOf("-"))ob="string"===typeof Wd.is;else switch(Hd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":ob=!1;break a;default:ob=!0}for(nd in Wd)if(cd.call(Wd,nd)){var kb=Wd[nd];if(null!=kb){if("style"===nd){var Yb=void 0,nc="",Nc="";for(Yb in kb)if(kb.hasOwnProperty(Yb)){var Vc=
0===Yb.indexOf("--"),Md=kb[Yb];if(null!=Md){if(Vc)var ee=Yb;else if(ee=Yb,Oc.hasOwnProperty(ee))ee=Oc[ee];else{var te=ee.replace(nb,"-$1").toLowerCase().replace(Tb,"-ms-");ee=Oc[ee]=te}nc+=Nc+ee+":";Nc=Yb;Vc=null==Md||"boolean"===typeof Md||""===Md?"":Vc||"number"!==typeof Md||0===Md||Oa.hasOwnProperty(Nc)&&Oa[Nc]?(""+Md).trim():Md+"px";nc+=Vc;Nc=";"}}kb=nc||null}Yb=null;ob?Jd.hasOwnProperty(nd)||(Yb=nd,Yb=b(Yb)&&null!=kb?Yb+'\x3d"'+(G(kb)+'"'):""):Yb=t(nd,kb);Yb&&(Sb+=" "+Yb)}}Lb||ac&&(Sb+=' data-reactroot\x3d""');
var nd=Sb;Wd="";Rb.hasOwnProperty(Hd)?nd+="/\x3e":(nd+="\x3e",Wd="\x3c/"+td.type+"\x3e");a:{Lb=gd.dangerouslySetInnerHTML;if(null!=Lb){if(null!=Lb.__html){Lb=Lb.__html;break a}}else if(Lb=gd.children,"string"===typeof Lb||"number"===typeof Lb){Lb=G(Lb);break a}Lb=null}null!=Lb?(gd=[],Ic.hasOwnProperty(Hd)&&"\n"===Lb.charAt(0)&&(nd+="\n"),nd+=Lb):gd=Dc(gd.children);td=td.type;pd=null==pd||"http://www.w3.org/1999/xhtml"===pd?ha(td):"http://www.w3.org/2000/svg"===pd&&"foreignObject"===td?"http://www.w3.org/1999/xhtml":
pd;this.stack.push({domNamespace:pd,type:Hd,children:gd,childIndex:0,context:Yd,footer:Wd});this.previousWasTextNode=!1;return nd};return lc}();F.renderToNodeStream=function(){throw Error(n(207));};F.renderToStaticMarkup=function(lc,Cd){lc=new Fd(lc,!0,Cd);try{return lc.read(Infinity)}finally{lc.destroy()}};F.renderToStaticNodeStream=function(){throw Error(n(208));};F.renderToString=function(lc,Cd){lc=new Fd(lc,!1,Cd);try{return lc.read(Infinity)}finally{lc.destroy()}};F.version="17.0.2"};
shadow$provide[614]=function(pa,S,Pa,F){Pa.exports=S(612)};
shadow$provide[615]=function(pa,S,Pa,F){function n(){if(!th&&(th="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!th))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return th(di)}function Q(d){let l=0;var E=0;for(var Y of d)l+=Y.w*Y.h,E=Math.max(E,Y.w);d.sort((Ea,Ua)=>
Ua.h-Ea.h);E=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),E),h:Infinity}];let la=Y=0;for(const Ea of d)for(d=E.length-1;0<=d;d--){var sa=E[d];if(!(Ea.w>sa.w||Ea.h>sa.h)){Ea.x=sa.x;Ea.y=sa.y;la=Math.max(la,Ea.y+Ea.h);Y=Math.max(Y,Ea.x+Ea.w);Ea.w===sa.w&&Ea.h===sa.h?(sa=E.pop(),d<E.length&&(E[d]=sa)):Ea.h===sa.h?(sa.x+=Ea.w,sa.w-=Ea.w):(Ea.w!==sa.w&&E.push({x:sa.x+Ea.w,y:sa.y,w:sa.w-Ea.w,h:Ea.h}),sa.y+=Ea.h,sa.h-=Ea.h);break}}return{w:Y,h:la,fill:l/(Y*la)||0}}function y(d,...l){return{didIntersect:0<
l.length,message:d,points:l}}function p(d,l,E=0){const Y=[d[0]+l[0]/2,d[1]+l[1]/2],la=od.rotWith(d,Y,E),sa=od.rotWith(od.add(d,[l[0],0]),Y,E),Ea=od.rotWith(od.add(d,l),Y,E);d=od.rotWith(od.add(d,[0,l[1]]),Y,E);return[["top",[la,sa]],["right",[sa,Ea]],["bottom",[Ea,d]],["left",[d,la]]]}function b(d,l,E,Y){const [la,sa]=d,[Ea,Ua]=l,[jb,sb]=E,[Ub,gc]=Y;return Ua/Ea!==(gc-sb)/(Ub-jb)&&(l=Ea*(gc-sb)-Ua*(Ub-jb),0!==l&&(d=((sa-sb)*(Ub-jb)-(la-jb)*(gc-sb))/l,l=((sa-sb)*Ea-(la-jb)*Ua)/l,0<=d&&0<=l&&1>=l))?
y("intersection",[la+d*Ea,sa+d*Ua]):y("no intersection")}function q(d,l,E,Y,la=0){return h(E,Y,la,d,l)}function A(d,l,E,Y=0){const {minX:la,minY:sa,width:Ea,height:Ua}=E;return q(d,l,[la,sa],[Ea,Ua],Y)}function z(d,l,E,Y){var la=od.sub(d,E);E=od.sub(Y,E);l=od.sub(l,d);Y=E[0]*la[1]-E[1]*la[0];la=l[0]*la[1]-l[1]*la[0];E=E[1]*l[0]-E[0]*l[1];return 0===Y||0===la?y("coincident"):0===E?y("parallel"):0!==E&&(Y/=E,la/=E,0<=Y&&1>=Y&&0<=la&&1>=la)?y("intersection",od.add(d,od.mul(l,Y))):y("no intersection")}
function a(d,l,E,Y){var la=(l[0]-d[0])*(l[0]-d[0])+(l[1]-d[1])*(l[1]-d[1]),sa=2*((l[0]-d[0])*(d[0]-E[0])+(l[1]-d[1])*(d[1]-E[1]));E=sa*sa-4*la*(E[0]*E[0]+E[1]*E[1]+d[0]*d[0]+d[1]*d[1]-2*(E[0]*d[0]+E[1]*d[1])-Y*Y);if(0>E)return y("outside");if(0===E)return y("tangent");Y=Math.sqrt(E);E=(-sa+Y)/(2*la);la=(-sa-Y)/(2*la);if((0>E||1<E)&&(0>la||1<la))return 0>E&&0>la||1<E&&1<la?y("outside"):y("inside");sa=[];0<=E&&1>=E&&sa.push(od.lrp(d,l,E));0<=la&&1>=la&&sa.push(od.lrp(d,l,la));return y("intersection",
...sa)}function G(d,l,E,Y,la,sa=0){if(0===Y||0===la||od.isEqual(d,l))return y("no intersection");Y=0>Y?Y:-Y;la=0>la?la:-la;d=od.sub(od.rotWith(d,E,-sa),E);l=od.sub(od.rotWith(l,E,-sa),E);var Ea=od.sub(l,d),Ua=Ea[0]*Ea[0]/Y/Y+Ea[1]*Ea[1]/la/la;Ea=2*d[0]*Ea[0]/Y/Y+2*d[1]*Ea[1]/la/la;const jb=[];Y=Ea*Ea-4*Ua*(d[0]*d[0]/Y/Y+d[1]*d[1]/la/la-1);0===Y?jb.push(-Ea/2/Ua):0<Y&&(Y=Math.sqrt(Y),jb.push((-Ea+Y)/2/Ua),jb.push((-Ea-Y)/2/Ua));Ua=jb.filter(sb=>0<=sb&&1>=sb).map(sb=>od.add(E,od.add(d,od.mul(od.sub(l,
d),sb)))).map(sb=>od.rotWith(sb,E,sa));return y("intersection",...Ua)}function t(d,l,E){const Y=[];for(let la=1;la<E.length;la++){const sa=z(d,l,E[la-1],E[la]);sa&&Y.push(...sa.points)}return 0===Y.length?y("no intersection"):y("intersection",...E)}function h(d,l,E,Y,la){return p(d,l,E).reduce((sa,[Ea,[Ua,jb]])=>{(Ua=b(Y,la,Ua,jb))&&sa.push(y(Ea,...Ua.points));return sa},[]).filter(sa=>sa.didIntersect)}function g(d,l,E,Y){return p(d,l).reduce((la,[sa,[Ea,Ua]])=>{(Ea=z(E,Y,Ea,Ua))&&la.push(y(sa,...Ea.points));
return la},[]).filter(la=>la.didIntersect)}function f(d,l,E,Y){return p(d,l).reduce((la,[sa,[Ea,Ua]])=>{(Ea=a(Ea,Ua,E,Y))&&la.push(Id(me({},Ea),{message:sa}));return la},[]).filter(la=>la.didIntersect)}function r(d,l,E,Y,la,sa=0){return p(d,l).reduce((Ea,[Ua,[jb,sb]])=>{(jb=G(jb,sb,E,Y,la,sa))&&Ea.push(Id(me({},jb),{message:Ua}));return Ea},[]).filter(Ea=>Ea.didIntersect)}function w(d,l,E){return p(d,l).reduce((Y,[la,[sa,Ea]])=>{sa=t(sa,Ea,E);sa.didIntersect&&Y.push(y(la,...sa.points));return Y},
[]).filter(Y=>Y.didIntersect)}function H(d,l,E){return p(d,l).reduce((Y,[la,[sa,Ea]])=>{{const Ua=[];for(let jb=1;jb<E.length+1;jb++){const sb=z(sa,Ea,E[jb-1],E[jb%E.length]);sb&&Ua.push(...sb.points)}sa=0===Ua.length?y("no intersection"):y("intersection",...E)}sa.didIntersect&&Y.push(y(la,...sa.points));return Y},[]).filter(Y=>Y.didIntersect)}function x(d,l,E,Y=0,la,sa){return l===E?f(la,sa,d,l):r(la,sa,d,l,E,Y)}function v(d,l,E){const {minX:Y,minY:la,width:sa,height:Ea}=d;return g([Y,la],[sa,Ea],
l,E)}function u(d){for(var l=arguments.length,E=Array(1<l?l-1:0),Y=1;Y<l;Y++)E[Y-1]=arguments[Y];throw Error("number"===typeof d?"[MobX] minified error nr: "+d+(E.length?" "+E.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+d);}function m(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof pa?pa:"undefined"!==typeof self?self:qb}function R(){De||u("Proxy not available")}
function ha(d){var l=!1;return function(){if(!l)return l=!0,d.apply(this,arguments)}}function K(d){return"function"===typeof d}function ka(d){switch(typeof d){case "string":case "symbol":case "number":return!0}return!1}function W(d){return null!==d&&"object"===typeof d}function aa(d){if(!W(d))return!1;d=Object.getPrototypeOf(d);if(null==d)return!0;d=Object.hasOwnProperty.call(d,"constructor")&&d.constructor;return"function"===typeof d&&d.toString()===zf}function D(d){return(d=null==d?void 0:d.constructor)?
"GeneratorFunction"===d.name||"GeneratorFunction"===d.displayName?!0:!1:!1}function T(d,l,E){wc(d,l,{enumerable:!1,writable:!0,configurable:!0,value:E})}function J(d,l,E){wc(d,l,{enumerable:!1,writable:!1,configurable:!0,value:E})}function N(d,l){var E="isMobX"+d;l.prototype[E]=!0;return function(Y){return W(Y)&&!0===Y[E]}}function C(d){return d instanceof Map}function M(d){return d instanceof Set}function O(d){var l=Object.keys(d);if(!kj)return l;var E=Object.getOwnPropertySymbols(d);return E.length?
[].concat(l,E.filter(function(Y){return Gd.propertyIsEnumerable.call(d,Y)})):l}function Z(d){return null===d?null:"object"===typeof d?""+d:d}function X(d,l){return Gd.hasOwnProperty.call(d,l)}function I(d,l){for(var E=0;E<l.length;E++){var Y=l[E];Y.enumerable=Y.enumerable||!1;Y.configurable=!0;"value"in Y&&(Y.writable=!0);Object.defineProperty(d,Y.key,Y)}}function fa(d,l,E){l&&I(d.prototype,l);E&&I(d,E);Object.defineProperty(d,"prototype",{writable:!1});return d}function L(){L=Object.assign||function(d){for(var l=
1;l<arguments.length;l++){var E=arguments[l],Y;for(Y in E)Object.prototype.hasOwnProperty.call(E,Y)&&(d[Y]=E[Y])}return d};return L.apply(this,arguments)}function ba(d,l){d.prototype=Object.create(l.prototype);d.prototype.constructor=d;ea(d,l)}function ea(d,l){ea=Object.setPrototypeOf||function(E,Y){E.__proto__=Y;return E};return ea(d,l)}function ca(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function oa(d,l){if(d){if("string"===
typeof d)return ya(d,l);var E=Object.prototype.toString.call(d).slice(8,-1);"Object"===E&&d.constructor&&(E=d.constructor.name);if("Map"===E||"Set"===E)return Array.from(d);if("Arguments"===E||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return ya(d,l)}}function ya(d,l){if(null==l||l>d.length)l=d.length;for(var E=0,Y=Array(l);E<l;E++)Y[E]=d[E];return Y}function xa(d,l){var E="undefined"!==typeof Symbol&&d[Symbol.iterator]||d["@@iterator"];if(E)return(E=E.call(d)).next.bind(E);if(Array.isArray(d)||
(E=oa(d))||l&&d&&"number"===typeof d.length){E&&(d=E);var Y=0;return function(){return Y>=d.length?{done:!0}:{done:!1,value:d[Y++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ga(d){return Object.assign(function(l,E){Sa(l,E,d)},d)}function Sa(d,l,E){X(d,hh)||T(d,hh,L({},d[hh]));E.annotationType_!==xh&&(d[hh][l]=E)}function Da(d){X(d,hh)||T(d,hh,L({},d[hh]));return d[hh]}function Na(d,
l,E){void 0===l&&(l=xg);void 0===E&&(E=xg);d=new yh(d);l!==xg&&oc(Nn,d,l,void 0);E!==xg&&nd(d,E);return d}function Wa(d,l,E){return Fc(d)?d:Array.isArray(d)?cg.array(d,{name:E}):aa(d)?cg.object(d,void 0,{name:E}):C(d)?cg.map(d,{name:E}):M(d)?cg.set(d,{name:E}):"function"!==typeof d||Nc(d)||Ob(d)?d:D(d)?yn(d):ek(E,d)}function La(d){return d}function db(d,l){return{annotationType_:d,options_:l,make_:cb,extend_:Ma}}function cb(d,l,E,Y){var la;if(null!=(la=this.options_)&&la.bound)return null===this.extend_(d,
l,E,!1)?0:1;if(Y===d.target_)return null===this.extend_(d,l,E,!1)?0:2;if(Nc(E.value))return 1;d=na(d,this,l,E,!1);wc(Y,l,d);return 2}function Ma(d,l,E,Y){E=na(d,this,l,E);return d.defineProperty_(l,E,Y)}function na(d,l,E,Y,la){var sa,Ea,Ua,jb,sb,Ub,gc;void 0===la&&(la=nf.safeDescriptors);Y=Y.value;if(null!=(sa=l.options_)&&sa.bound){var yc;Y=Y.bind(null!=(yc=d.proxy_)?yc:d.target_)}return{value:Tc(null!=(Ea=null==(Ua=l.options_)?void 0:Ua.name)?Ea:E.toString(),Y,null!=(jb=null==(sb=l.options_)?void 0:
sb.autoAction)?jb:!1,null!=(Ub=l.options_)&&Ub.bound?null!=(gc=d.proxy_)?gc:d.target_:void 0),configurable:la?d.isPlainObject_:!0,enumerable:!1,writable:la?!1:!0}}function Ba(d,l){return{annotationType_:d,options_:l,make_:ra,extend_:za}}function ra(d,l,E,Y){var la;if(Y===d.target_)return null===this.extend_(d,l,E,!1)?0:2;if(null!=(la=this.options_)&&la.bound&&(!X(d.target_,l)||!Ob(d.target_[l]))&&null===this.extend_(d,l,E,!1))return 0;if(Ob(E.value))return 1;d=Ia(d,this,l,E,!1,!1);wc(Y,l,d);return 2}
function za(d,l,E,Y){var la;E=Ia(d,this,l,E,null==(la=this.options_)?void 0:la.bound);return d.defineProperty_(l,E,Y)}function Ia(d,l,E,Y,la,sa){void 0===sa&&(sa=nf.safeDescriptors);l=Y.value;Ob(l)||(l=yn(l));if(la){var Ea;l=l.bind(null!=(Ea=d.proxy_)?Ea:d.target_);l.isMobXFlow=!0}return{value:l,configurable:sa?d.isPlainObject_:!0,enumerable:!1,writable:sa?!1:!0}}function Ra(d,l){return{annotationType_:d,options_:l,make_:zb,extend_:gb}}function zb(d,l,E){return null===this.extend_(d,l,E,!1)?0:1}function gb(d,
l,E,Y){return d.defineComputedProperty_(l,L({},this.options_,{get:E.get,set:E.set}),Y)}function Kb(d,l){return{annotationType_:d,options_:l,make_:Rb,extend_:cc}}function Rb(d,l,E){return null===this.extend_(d,l,E,!1)?0:1}function cc(d,l,E,Y){var la,sa;return d.defineObservableProperty_(l,E.value,null!=(la=null==(sa=this.options_)?void 0:sa.enhancer)?la:Wa,Y)}function Oa(d){return{annotationType_:"true",options_:d,make_:lb,extend_:nb}}function lb(d,l,E,Y){var la,sa;if(E.get)return ng.make_(d,l,E,Y);
if(E.set){E=Tc(l.toString(),E.set);if(Y===d.target_)return null===d.defineProperty_(l,{configurable:nf.safeDescriptors?d.isPlainObject_:!0,set:E})?0:2;wc(Y,l,{configurable:!0,set:E});return 2}if(Y!==d.target_&&"function"===typeof E.value){var Ea;if(D(E.value)){var Ua;return(null!=(Ua=this.options_)&&Ua.autoBind?yn.bound:yn).make_(d,l,E,Y)}return(null!=(Ea=this.options_)&&Ea.autoBind?ek.bound:ek).make_(d,l,E,Y)}Ea=!1===(null==(la=this.options_)?void 0:la.deep)?cg.ref:cg;if("function"===typeof E.value&&
null!=(sa=this.options_)&&sa.autoBind){var jb;E.value=E.value.bind(null!=(jb=d.proxy_)?jb:d.target_)}return Ea.make_(d,l,E,Y)}function nb(d,l,E,Y){var la,sa;if(E.get)return ng.extend_(d,l,E,Y);if(E.set)return d.defineProperty_(l,{configurable:nf.safeDescriptors?d.isPlainObject_:!0,set:Tc(l.toString(),E.set)},Y);if("function"===typeof E.value&&null!=(la=this.options_)&&la.autoBind){var Ea;E.value=E.value.bind(null!=(Ea=d.proxy_)?Ea:d.target_)}return(!1===(null==(sa=this.options_)?void 0:sa.deep)?cg.ref:
cg).extend_(d,l,E,Y)}function Tb(d){if(!0===d.deep)var l=Wa;else{if(!1===d.deep)d=La;else{d=d.defaultDecorator;var E;d=d?null!=(l=null==(E=d.options_)?void 0:E.enhancer)?l:Wa:Wa}l=d}return l}function Dc(d,l,E){if(ka(l))Sa(d,l,ii);else return Fc(d)?d:aa(d)?cg.object(d,l,E):Array.isArray(d)?cg.array(d,l):C(d)?cg.map(d,l):M(d)?cg.set(d,l):"object"===typeof d&&null!==d?d:cg.box(d,l)}function Tc(d,l,E,Y){function la(){a:{var sa=Y||this,Ea=arguments,Ua=nf.trackingDerivation,jb=!E||!Ua;Hd();var sb=nf.allowStateChanges;
jb&&(Fd(),sb=Bb(!0));var Ub=lc(!0),gc=Mn++,yc=Pm;Pm=gc;try{var Qc=l.apply(sa,Ea);break a}catch(kd){var Jc=kd;throw kd;}finally{Pm!==gc&&u(30),Pm=yc,void 0!==Jc&&(nf.suppressReactionErrors=!0),nf.allowStateChanges=sb,nf.allowStateReads=Ub,gd(),jb&&(nf.trackingDerivation=Ua),nf.suppressReactionErrors=!1}Qc=void 0}return Qc}void 0===E&&(E=!1);la.isMobxAction=!0;Sl&&(im.value=d,Object.defineProperty(la,"name",im));return la}function Ic(d,l){d=Bb(d);try{return l()}finally{nf.allowStateChanges=d}}function Bb(d){var l=
nf.allowStateChanges;nf.allowStateChanges=d;return l}function qc(d){switch(d.dependenciesState_){case Uh.UP_TO_DATE_:return!1;case Uh.NOT_TRACKING_:case Uh.STALE_:return!0;case Uh.POSSIBLY_STALE_:for(var l=lc(!0),E=Fd(),Y=d.observing_,la=Y.length,sa=0;sa<la;sa++){var Ea=Y[sa];if(dn(Ea)){if(nf.disableErrorBoundaries)Ea.get();else try{Ea.get()}catch(Ua){return nf.trackingDerivation=E,nf.allowStateReads=l,!0}if(d.dependenciesState_===Uh.STALE_)return nf.trackingDerivation=E,nf.allowStateReads=l,!0}}Cd(d);
nf.trackingDerivation=E;nf.allowStateReads=l;return!1}}function Oc(d,l,E){var Y=lc(!0);Cd(d);d.newObserving_=Array(d.observing_.length+100);d.unboundDepsCount_=0;d.runId_=++nf.runId;var la=nf.trackingDerivation;nf.trackingDerivation=d;nf.inBatch++;if(!0===nf.disableErrorBoundaries)var sa=l.call(E);else try{sa=l.call(E)}catch(Ub){sa=new Tj(Ub)}nf.inBatch--;nf.trackingDerivation=la;var Ea=d.observing_;l=d.observing_=d.newObserving_;E=Uh.UP_TO_DATE_;la=0;for(var Ua=d.unboundDepsCount_,jb=0;jb<Ua;jb++){var sb=
l[jb];0===sb.diffValue_&&(sb.diffValue_=1,la!==jb&&(l[la]=sb),la++);sb.dependenciesState_>E&&(E=sb.dependenciesState_)}l.length=la;d.newObserving_=null;for(Ua=Ea.length;Ua--;)jb=Ea[Ua],0===jb.diffValue_&&Yd(jb,d),jb.diffValue_=0;for(;la--;)Ea=l[la],1===Ea.diffValue_&&(Ea.diffValue_=0,Ua=d,Ea.observers_.add(Ua),Ea.lowestObserverState_>Ua.dependenciesState_&&(Ea.lowestObserverState_=Ua.dependenciesState_));E!==Uh.UP_TO_DATE_&&(d.dependenciesState_=E,d.onBecomeStale_());nf.allowStateReads=Y;return sa}
function cd(d){var l=d.observing_;d.observing_=[];for(var E=l.length;E--;)Yd(l[E],d);d.dependenciesState_=Uh.NOT_TRACKING_}function Jd(d){var l=Fd();try{return d()}finally{nf.trackingDerivation=l}}function Fd(){var d=nf.trackingDerivation;nf.trackingDerivation=null;return d}function lc(d){var l=nf.allowStateReads;nf.allowStateReads=d;return l}function Cd(d){if(d.dependenciesState_!==Uh.UP_TO_DATE_){d.dependenciesState_=Uh.UP_TO_DATE_;d=d.observing_;for(var l=d.length;l--;)d[l].lowestObserverState_=
Uh.UP_TO_DATE_}}function td(){(nf.pendingReactions.length||nf.inBatch||nf.isRunningReactions)&&u(36);jm=!0;if(jn){var d=m();0===--d.__mobxInstanceCount&&(d.__mobxGlobals=void 0);nf=new Bn}}function Yd(d,l){d.observers_["delete"](l);0===d.observers_.size&&pd(d)}function pd(d){!1===d.isPendingUnobservation_&&(d.isPendingUnobservation_=!0,nf.pendingUnobservations.push(d))}function Hd(){nf.inBatch++}function gd(){if(0===--nf.inBatch){0<nf.inBatch||nf.isRunningReactions||bn(ob);for(var d=nf.pendingUnobservations,
l=0;l<d.length;l++){var E=d[l];E.isPendingUnobservation_=!1;0===E.observers_.size&&(E.isBeingObserved_&&(E.isBeingObserved_=!1,E.onBUO()),E instanceof Ll&&E.suspend_())}nf.pendingUnobservations=[]}}function Wd(d){var l=nf.trackingDerivation;if(null!==l)return l.runId_!==d.lastAccessedBy_&&(d.lastAccessedBy_=l.runId_,l.newObserving_[l.unboundDepsCount_++]=d,!d.isBeingObserved_&&nf.trackingContext&&(d.isBeingObserved_=!0,d.onBO())),!0;0===d.observers_.size&&0<nf.inBatch&&pd(d);return!1}function Lb(d){d.lowestObserverState_!==
Uh.STALE_&&(d.lowestObserverState_=Uh.STALE_,d.observers_.forEach(function(l){if(l.dependenciesState_===Uh.UP_TO_DATE_)l.onBecomeStale_();l.dependenciesState_=Uh.STALE_}))}function ac(d){d.lowestObserverState_!==Uh.STALE_&&(d.lowestObserverState_=Uh.STALE_,d.observers_.forEach(function(l){l.dependenciesState_===Uh.POSSIBLY_STALE_?l.dependenciesState_=Uh.STALE_:l.dependenciesState_===Uh.UP_TO_DATE_&&(d.lowestObserverState_=Uh.UP_TO_DATE_)}))}function Sb(d){d.lowestObserverState_===Uh.UP_TO_DATE_&&
(d.lowestObserverState_=Uh.POSSIBLY_STALE_,d.observers_.forEach(function(l){l.dependenciesState_===Uh.UP_TO_DATE_&&(l.dependenciesState_=Uh.POSSIBLY_STALE_,l.onBecomeStale_())}))}function ob(){nf.isRunningReactions=!0;for(var d=nf.pendingReactions,l=0;0<d.length;){++l===co&&(console.error("[mobx] cycle in reaction: "+d[0]),d.splice(0));for(var E=d.splice(0),Y=0,la=E.length;Y<la;Y++)E[Y].runReaction_()}nf.isRunningReactions=!1}function kb(d){var l=bn;bn=function(E){return d(function(){return l(E)})}}
function Yb(d){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function nc(d){return function(l,E){if(K(l))return Tc(l.name||"\x3cunnamed action\x3e",l,d);if(K(E))return Tc(l,E,d);if(ka(E))return Sa(l,E,d?wn:xl);if(ka(l))return Ga(db(d?"autoAction":Pn,{name:l,autoAction:d}))}}function Nc(d){return K(d)&&!0===d.isMobxAction}function Vc(d,l){function E(){d(jb)}var Y,la;void 0===l&&(l=ld);var sa=null!=(Y=null==(la=l)?void 0:la.name)?Y:"Autorun";if(l.scheduler||l.delay){var Ea=
Md(l),Ua=!1;var jb=new Gl(sa,function(){Ua||(Ua=!0,Ea(function(){Ua=!1;jb.isDisposed_||jb.track(E)}))},l.onError,l.requiresObservable)}else jb=new Gl(sa,function(){this.track(E)},l.onError,l.requiresObservable);jb.schedule_();return jb.getDisposer_()}function Md(d){return d.scheduler?d.scheduler:d.delay?function(l){return setTimeout(l,d.delay)}:go}function ee(d,l,E){function Y(){Ub=!1;if(!Jc.isDisposed_){var kd=!1;Jc.track(function(){var ad=Ic(!1,function(){return d(Jc)});kd=sb||!Qc(gc,ad);yc=gc;
gc=ad});sb&&E.fireImmediately?Ea(gc,yc,Jc):!sb&&kd&&Ea(gc,yc,Jc);sb=!1}}var la;void 0===E&&(E=ld);var sa=null!=(la=E.name)?la:"Reaction",Ea=Vf(sa,E.onError?te(E.onError,l):l),Ua=!E.scheduler&&!E.delay,jb=Md(E),sb=!0,Ub=!1,gc,yc,Qc=E.compareStructural?Df.structural:E.equals||Df["default"],Jc=new Gl(sa,function(){sb||Ua?Y():Ub||(Ub=!0,jb(Y))},E.onError,E.requiresObservable);Jc.schedule_();return Jc.getDisposer_()}function te(d,l){return function(){try{return l.apply(this,arguments)}catch(E){d.call(this,
E)}}}function nd(d,l,E){return oc(xn,d,l,E)}function oc(d,l,E,Y){var la="function"===typeof Y?se(l,E):se(l),sa=K(Y)?Y:E,Ea=d+"L";la[Ea]?la[Ea].add(sa):la[Ea]=new Set([sa]);return function(){var Ua=la[Ea];Ua&&(Ua["delete"](sa),0===Ua.size&&delete la[Ea])}}function Gc(d){!0===d.isolateGlobalState&&td();var l=d.useProxies,E=d.enforceActions;void 0!==l&&(nf.useProxies="always"===l?!0:"never"===l?!1:"undefined"!==typeof Proxy);"ifavailable"===l&&(nf.verifyProxies=!0);void 0!==E&&(l="always"===E?"always":
"observed"===E,nf.enforceActions=l,nf.allowStateChanges=!0===l||"always"===l?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(Y){Y in d&&(nf[Y]=!!d[Y])});nf.allowStateReads=!nf.observableRequiresReaction;d.reactionScheduler&&kb(d.reactionScheduler)}function Ke(d,l,E,Y){var la=gh(l),sa=hb(d,Y)[If];Hd();try{jg(la).forEach(function(Ea){sa.extend_(Ea,la[Ea],E?Ea in E?E[Ea]:!0:!0)})}finally{gd()}return d}
function ic(d){var l={name:d.name_};d.observing_&&0<d.observing_.length&&(l.dependencies=Array.from(new Set(d.observing_)).map(ic));return l}function Je(){this.message="FLOW_CANCELLED"}function Ob(d){return!0===(null==d?void 0:d.isMobXFlow)}function Fc(d,l){return d?void 0!==l?zd(d)?d[If].values_.has(l):!1:zd(d)||!!d[If]||$f(d)||cn(d)||dn(d):!1}function Qb(d){if(zd(d))return d[If].ownKeys_();u(38)}function Xc(d,l,E){d.set(l,E);return E}function oe(d,l){if(null==d||"object"!==typeof d||d instanceof
Date||!Fc(d))return d;if(Bm(d)||dn(d))return oe(d.get(),l);if(l.has(d))return l.get(d);if(Cb(d)){var E=Xc(l,d,Array(d.length));d.forEach(function(Ea,Ua){E[Ua]=oe(Ea,l)});return E}if(tb(d)){var Y=Xc(l,d,new Set);d.forEach(function(Ea){Y.add(oe(Ea,l))});return Y}if(de(d)){var la=Xc(l,d,new Map);d.forEach(function(Ea,Ua){la.set(Ua,oe(Ea,l))});return la}var sa=Xc(l,d,{});Qb(d).forEach(function(Ea){Gd.propertyIsEnumerable.call(d,Ea)&&(sa[Ea]=oe(d[Ea],l))});return sa}function ne(){u("trace() is not available in production builds");
for(var d=!1,l=arguments.length,E=Array(l),Y=0;Y<l;Y++)E[Y]=arguments[Y];"boolean"===typeof E[E.length-1]&&(d=E.pop());a:{switch(E.length){case 0:l=nf.trackingDerivation;break a;case 1:l=se(E[0]);break a;case 2:l=se(E[0],E[1]);break a}l=void 0}if(!l)return u("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");l.isTracing_===Cm.NONE&&console.log("[mobx.trace] '"+l.name_+"' tracing enabled");l.isTracing_=d?
Cm.BREAK:Cm.LOG}function xc(d,l){void 0===l&&(l=void 0);Hd();try{return d.apply(l)}finally{gd()}}function yb(d){return void 0!==d.interceptors_&&0<d.interceptors_.length}function Nd(d,l){var E=d.interceptors_||(d.interceptors_=[]);E.push(l);return ha(function(){var Y=E.indexOf(l);-1!==Y&&E.splice(Y,1)})}function fe(d,l){var E=Fd();try{var Y=[].concat(d.interceptors_||[]);d=0;for(var la=Y.length;d<la&&((l=Y[d](l))&&!l.type&&u(14),l);d++);return l}finally{nf.trackingDerivation=E}}function hd(d){return void 0!==
d.changeListeners_&&0<d.changeListeners_.length}function jc(d,l){var E=d.changeListeners_||(d.changeListeners_=[]);E.push(l);return ha(function(){var Y=E.indexOf(l);-1!==Y&&E.splice(Y,1)})}function Le(d,l){var E=Fd();if(d=d.changeListeners_){d=d.slice();for(var Y=0,la=d.length;Y<la;Y++)d[Y](l);nf.trackingDerivation=E}}function vf(d,l,E){var Y=hb(d,E)[If];Hd();try{var la;null!=(la=l)?la:l=Da(d);jg(l).forEach(function(sa){return Y.make_(sa,l[sa])})}finally{gd()}return d}function pf(d,l,E,Y){void 0===
E&&(E="ObservableArray");void 0===Y&&(Y=!1);R();l=new Ya(E,l,Y,!1);J(l.values_,If,l);E=new Proxy(l.values_,Ka);l.proxy_=E;d&&d.length&&(Y=Bb(!0),l.spliceWithArray_(0,0,d),nf.allowStateChanges=Y);return E}function wg(d,l){"function"===typeof Array.prototype[d]&&(Ja[d]=l(d))}function Za(d){return function(){var l=this[If];l.atom_.reportObserved();l=l.dehanceValues_(l.values_);return l[d].apply(l,arguments)}}function Ab(d){return function(l,E){var Y=this,la=this[If];la.atom_.reportObserved();return la.dehanceValues_(la.values_)[d](function(sa,
Ea){return l.call(E,sa,Ea,Y)})}}function bb(d){return function(){var l=this,E=this[If];E.atom_.reportObserved();E=E.dehanceValues_(E.values_);var Y=arguments[0];arguments[0]=function(la,sa,Ea){return Y(la,sa,Ea,l)};return E[d].apply(E,arguments)}}function Cb(d){return W(d)&&fb(d[If])}function bc(d){if(C(d)||de(d))return d;if(Array.isArray(d))return new Map(d);if(aa(d)){var l=new Map,E;for(E in d)l.set(E,d[E]);return l}return u(21,d)}function hb(d,l){var E;if(X(d,If))return d;var Y=null!=(E=null==
l?void 0:l.name)?E:"ObservableObject";E=pc;var la=new Map;Y=String(Y);var sa;var Ea=l?null!=(sa=l.defaultDecorator)?sa:Oa(l):void 0;l=new E(d,la,Y,Ea);T(d,If,l);return d}function bd(d){return Xb[d]||(Xb[d]={get:function(){return this[If].getObservablePropValue_(d)},set:function(l){return this[If].setObservablePropValue_(d,l)}})}function zd(d){return W(d)?Pc(d[If]):!1}function le(d){return{enumerable:!1,configurable:!0,get:function(){return this[If].get_(d)},set:function(l){this[If].set_(d,l)}}}function ae(d){if(d>
xd){for(var l=xd;l<d+100;l++)wc(we.prototype,""+l,le(l));xd=d}}function Ye(d,l,E){return new we(d,l,E)}function se(d,l){if("object"===typeof d&&null!==d){if(Cb(d))return void 0!==l&&u(23),d[If].atom_;if(tb(d))return d[If];if(de(d)){if(void 0===l)return d.keysAtom_;var E=d.data_.get(l)||d.hasMap_.get(l);E||u(25,l,Hg(d));return E}if(zd(d)){if(!l)return u(26);(E=d[If].values_.get(l))||u(27,l,Hg(d));return E}if($f(d)||dn(d)||cn(d))return d}else if(K(d)&&cn(d[If]))return d[If];u(28)}function df(d,l){d||
u(29);if(void 0!==l)return df(se(d,l));if($f(d)||dn(d)||cn(d)||de(d)||tb(d))return d;if(d[If])return d[If];u(24,d)}function Hg(d,l){if(void 0!==l)d=se(d,l);else{if(Nc(d))return d.name;d=zd(d)||de(d)||tb(d)?df(d):se(d)}return d.name_}function of(d,l,E){void 0===E&&(E=-1);return xb(d,l,E)}function xb(d,l,E,Y,la){if(d===l)return 0!==d||1/d===1/l;if(null==d||null==l)return!1;if(d!==d)return l!==l;var sa=typeof d;if("function"!==sa&&"object"!==sa&&"object"!=typeof l)return!1;sa=Ze.call(d);if(sa!==Ze.call(l))return!1;
switch(sa){case "[object RegExp]":case "[object String]":return""+d===""+l;case "[object Number]":return+d!==+d?+l!==+l:0===+d?1/+d===1/l:+d===+l;case "[object Date]":case "[object Boolean]":return+d===+l;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(d)===Symbol.valueOf.call(l);case "[object Map]":case "[object Set]":0<=E&&E++}d=ta(d);l=ta(l);sa="[object Array]"===sa;if(!sa){if("object"!=typeof d||"object"!=typeof l)return!1;var Ea=d.constructor,Ua=l.constructor;if(Ea!==
Ua&&!(K(Ea)&&Ea instanceof Ea&&K(Ua)&&Ua instanceof Ua)&&"constructor"in d&&"constructor"in l)return!1}if(0===E)return!1;0>E&&(E=-1);Y=Y||[];la=la||[];for(Ea=Y.length;Ea--;)if(Y[Ea]===d)return la[Ea]===l;Y.push(d);la.push(l);if(sa){Ea=d.length;if(Ea!==l.length)return!1;for(;Ea--;)if(!xb(d[Ea],l[Ea],E-1,Y,la))return!1}else{sa=Object.keys(d);Ea=sa.length;if(Object.keys(l).length!==Ea)return!1;for(;Ea--;)if(Ua=sa[Ea],!X(l,Ua)||!xb(d[Ua],l[Ua],E-1,Y,la))return!1}Y.pop();la.pop();return!0}function ta(d){return Cb(d)?
d.slice():C(d)||de(d)||M(d)||tb(d)?Array.from(d.entries()):d}function qa(d){d[Symbol.iterator]=Ha;return d}function Ha(){return this}function ab(d,l){const E=new Set(l),Y=Object.values(d),la=new Set(Y.filter(sa=>E.has(sa.toId)||E.has(sa.fromId)));d=la.size;for(l=-1;0!==l;)la.forEach(sa=>{sa=sa.fromId;for(const Ea of Y)Ea.fromId===sa&&la.add(Ea),Ea.toId===sa&&la.add(Ea)}),l=la.size-d,d=la.size;return Array.from(la.values())}function Gb(d,l,E,Y,la,sa,Ea,Ua){if(la=l.getBindingPoint(la,sa,Ea,Ua))return{id:Y,
type:"line",fromId:d.id,toId:l.id,handleId:E,point:$d.toFixed(la.point),distance:la.distance}}function fc(d,l){const E=d.getCenter(),Y=l.getCenter();var la=Pg();la=Id(me({},Qn.defaultProps),{id:la,type:Qn.id,parentId:d.props.parentId,point:E});d=Gb(la,d,"start",Pg(),E,E,$d.uni($d.sub(Y,E)),!1);l=Gb(la,l,"end",Pg(),Y,Y,$d.uni($d.sub(E,Y)),!1);return d&&l?(la.handles.start.point=[0,0],la.handles.end.point=$d.sub(Y,E),la.handles.start.bindingId=d.id,la.handles.end.bindingId=l.id,[la,[d,l]]):null}function Lc(d,
l){return(0,yg.default)(d,l,{arrayMerge:(E,Y,la)=>Y})}function fd(d,l,E,Y=!1){const [la,sa]=l,[Ea,Ua]=E;d=Ea+(d-la)/(sa-la)*(Ua-Ea);return Y?Ea<Ua?Math.max(Math.min(d,Ua),Ea):Math.max(Math.min(d,Ea),Ua):d}function ve(d,l){return new Promise((E,Y)=>{if(l){const la=document.createElement("video");la.addEventListener("loadedmetadata",function(){E([this.videoWidth,this.videoHeight])},!1);la.src=d}else{const la=new Image;la.onload=()=>E([la.width,la.height]);la.src=d;la.onerror=sa=>Y(sa)}})}function Ve(){var d;
null==(d=document.getElementById("__textLabelMeasure"))?void 0:d.remove();d=document.createElement("pre");d.id="__textLabelMeasure";Object.assign(d.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none"});d.tabIndex=-1;document.body.appendChild(d);return d}function Cf(d,l,E=
0){var Y,la,sa;if(!d)return[16,32];let Ea;Ea="string"===typeof l?l:`${null!=(Y=l.fontStyle)?Y:"normal"} ${null!=(la=l.fontVariant)?la:"normal"} ${null!=(sa=l.fontWeight)?sa:"normal"} ${l.fontSize}px/${l.fontSize*l.lineHeight}px ${l.fontFamily}`;if(!lr.has(`${d}-${Ea}-${E}`)){if(!Ul)return[10,10];Ul.parent||document.body.appendChild(Ul);Ul.innerHTML=`${d}&#8203;`;Ul.style.font=Ea;Ul.style.padding=E+"px";lr.set(`${d}-${Ea}-${E}`,[Ul.offsetWidth||1,Ul.offsetHeight||1])}return lr.get(`${d}-${Ea}-${E}`)}
function ag(d){try{if("string"!==typeof d||!Gm.test(d))throw TypeError("Invalid UUID");var l,E=new Uint8Array(16);E[0]=(l=parseInt(d.slice(0,8),16))>>>24;E[1]=l>>>16&255;E[2]=l>>>8&255;E[3]=l&255;E[4]=(l=parseInt(d.slice(9,13),16))>>>8;E[5]=l&255;E[6]=(l=parseInt(d.slice(14,18),16))>>>8;E[7]=l&255;E[8]=(l=parseInt(d.slice(19,23),16))>>>8;E[9]=l&255;E[10]=(l=parseInt(d.slice(24,36),16))/1099511627776&255;E[11]=l/4294967296&255;E[12]=l>>>24&255;E[13]=l>>>16&255;E[14]=l>>>8&255;E[15]=l&255;return!0}catch(Y){return!1}}
function Af(d,l=0,E){let Y;return function(...la){null==E?void 0:E(...la);clearTimeout(Y);Y=setTimeout(()=>d.apply(la),l)}}function sf(d,l){return Wf(d,["symbol"===typeof l?l:l+""])}function Of(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function zg(d){return!!d}function Yh(d=0){return new Promise(l=>setTimeout(l,d))}function nh(d="noid"){Nt[d]||(Nt[d]=Nv.createContext({}));return Nt[d]}function Tg(d="noid"){return Nv.useContext(nh(d))}function Ah(d){const {callbacks:l}=Tg(),E=
Mv.useRef(-1);return Mv.useMemo(()=>{const Y=la=>{var sa,Ea;const {order:Ua=0}=la;if(!Ua){var jb=la.target;jb.removeEventListener("pointerup",Y);jb.releasePointerCapture(la.pointerId);null==(sa=l.onPointerUp)?void 0:sa.call(l,{type:"selection",handle:d,order:Ua},la);sa=Date.now();jb=sa-E.current;300<jb?E.current=sa:300>=jb&&(null==(Ea=l.onDoubleClick)?void 0:Ea.call(l,{type:"selection",handle:d,order:Ua},la),E.current=-1);la.order=Ua+1}};return{onPointerDown:la=>{var sa;const {order:Ea=0}=la;if(!Ea){var Ua=
ug(la.currentTarget);Ua.setPointerCapture(la.pointerId);Ua.addEventListener("pointerup",Y);null==(sa=l.onPointerDown)?void 0:sa.call(l,{type:"selection",handle:d,order:Ea},la);la.order=Ea+1}},onPointerMove:la=>{var sa;const {order:Ea=0}=la;Ea||(null==(sa=l.onPointerMove)?void 0:sa.call(l,{type:"selection",handle:d,order:Ea},la),la.order=Ea+1)},onPointerEnter:la=>{var sa;const {order:Ea=0}=la;Ea||(null==(sa=l.onPointerEnter)?void 0:sa.call(l,{type:"selection",handle:d,order:Ea},la),la.order=Ea+1)},
onPointerLeave:la=>{var sa;const {order:Ea=0}=la;Ea||(null==(sa=l.onPointerLeave)?void 0:sa.call(l,{type:"selection",handle:d,order:Ea},la),la.order=Ea+1)},onKeyDown:la=>{var sa;null==(sa=l.onKeyDown)?void 0:sa.call(l,{type:"selection",handle:d,order:-1},la)},onKeyUp:la=>{var sa;null==(sa=l.onKeyUp)?void 0:sa.call(l,{type:"selection",handle:d,order:-1},la)}}},[l])}function ug(d){var l;if(null==(l=d.namespaceURI)?0:l.endsWith("svg")){if(d.parentElement)return ug(d.parentElement);throw Error("Could not find a parent element of an HTML type!");
}return d}function Vh(d,l,E){const Y=qr.useRef(!1),la=qr.useCallback(()=>{var sa;if(Y.current){const Ea=null==(sa=d.current)?void 0:sa.getBoundingClientRect();Ea&&(sa={minX:Ea.left,maxX:Ea.left+Ea.width,minY:Ea.top,maxY:Ea.top+Ea.height,width:Ea.width,height:Ea.height},l.updateBounds(sa),null==E?void 0:E(sa))}else Y.current=!0},[d,E]);qr.useEffect(()=>{const sa=d.current?sz(d.current):document,Ea=Af(la,100);sa.addEventListener("scroll",Ea);window.addEventListener("resize",Ea);return()=>{sa.removeEventListener("scroll",
Ea);window.removeEventListener("resize",Ea)}},[]);qr.useLayoutEffect(()=>{const sa=new ResizeObserver(Ea=>{Ea[0].contentRect&&la()});d.current&&sa.observe(d.current);return()=>{sa.disconnect()}},[d]);qr.useEffect(()=>{la();setTimeout(()=>{var sa,Ea;null==(Ea=null==(sa=d.current)?void 0:sa.querySelector(".tl-canvas"))?void 0:Ea.focus()})},[d])}function ef(d,l){return Object.keys(l).reduce((E,Y)=>{const la=l[Y];return la?E+`${`--${d}-${Y}`}: ${la};
`:E},"")}function Nh(d,l,E=".logseq-tldraw"){Ot.useLayoutEffect(()=>{const Y=document.createElement("style"),la=ef(d,l);Y.setAttribute("id",`${d}-theme`);Y.setAttribute("data-selector",E);Y.innerHTML=`
        ${E} {
          ${la}
        }
      `;document.head.appendChild(Y);return()=>{Y&&document.head.contains(Y)&&document.head.removeChild(Y)}},[d,l,E])}function Li(d,l){Ot.useLayoutEffect(()=>{if(Pt.get(d))return()=>{};const E=document.createElement("style");E.innerHTML=l;E.setAttribute("id",d);document.head.appendChild(E);Pt.set(d,E);return()=>{E&&document.head.contains(E)&&(document.head.removeChild(E),Pt.delete(d))}},[d,l])}function el(d,l){const E=Ot.useMemo(()=>me(me({},yz),d),[d]);Nh("tl",E,l);Li("tl-canvas",zz)}function ej(d=
"noid"){Qt[d]||(Qt[d]=Rv.createContext({}));return Qt[d]}function qf(d="noid"){return Rv.useContext(ej(d))}function tj(){const d=qf(),{callbacks:l}=Tg(),E=Qv.useRef(-1);return Qv.useMemo(()=>({onPointerDown:Y=>{var la,sa,Ea;const {order:Ua=0}=Y;Ua||(null==(la=Y.currentTarget)?void 0:la.setPointerCapture(Y.pointerId));null==(sa=l.onPointerDown)?void 0:sa.call(l,{type:"canvas",order:Ua},Y);la=Date.now();sa=la-E.current;300<sa?E.current=la:300>=sa&&(null==(Ea=l.onDoubleClick)?void 0:Ea.call(l,{type:"canvas",
order:Ua},Y),E.current=-1)},onPointerMove:Y=>{var la;const {order:sa=0}=Y;null==(la=l.onPointerMove)?void 0:la.call(l,{type:"canvas",order:sa},Y)},onPointerUp:Y=>{var la,sa;const {order:Ea=0}=Y;Ea||(null==(la=Y.currentTarget)?void 0:la.releasePointerCapture(Y.pointerId));null==(sa=l.onPointerUp)?void 0:sa.call(l,{type:"canvas",order:Ea},Y)},onPointerEnter:Y=>{var la;const {order:sa=0}=Y;null==(la=l.onPointerEnter)?void 0:la.call(l,{type:"canvas",order:sa},Y)},onPointerLeave:Y=>{var la;const {order:sa=
0}=Y;null==(la=l.onPointerLeave)?void 0:la.call(l,{type:"canvas",order:sa},Y)},onDrop:Y=>Rf(this,null,function*(){Y.preventDefault();d.drop(Y.dataTransfer,[Y.clientX,Y.clientY])}),onDragOver:Y=>{Y.preventDefault()}}),[l])}function Yj(d,l,E){return 0===l||Infinity===Math.abs(l)?Math.pow(d,5*E):d*l*E/(l+E*d)}function hi(d,l,E,Y=.15){return 0===Y?Math.max(l,Math.min(d,E)):d<l?-Yj(l-d,E-l,Y)+l:d>E?+Yj(d-E,E-l,Y)+E:d}function fl(d,[l,E],[Y,la]){const [[sa,Ea],[Ua,jb]]=d;return[hi(l,sa,Ea,Y),hi(E,Ua,jb,
la)]}function Oh(d,l,E){l in d?Object.defineProperty(d,l,{value:E,enumerable:!0,configurable:!0,writable:!0}):d[l]=E;return d}function vk(d,l){var E=Object.keys(d);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(d);l&&(Y=Y.filter(function(la){return Object.getOwnPropertyDescriptor(d,la).enumerable}));E.push.apply(E,Y)}return E}function rg(d){for(var l=1;l<arguments.length;l++){var E=null!=arguments[l]?arguments[l]:{};l%2?vk(Object(E),!0).forEach(function(Y){Oh(d,Y,E[Y])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(d,Object.getOwnPropertyDescriptors(E)):vk(Object(E)).forEach(function(Y){Object.defineProperty(d,Y,Object.getOwnPropertyDescriptor(E,Y))})}return d}function Jj(d){return d?d[0].toUpperCase()+d.slice(1):""}function Ej(d=!1,l){return d&&!Az.includes(l)}function Tl(d,l="",E=!1){const Y=Sv[d];l=Y?Y[l]||l:l;return"on"+Jj(d)+Jj(l)+(Ej(E,l)?"Capture":"")}function Uk(d){d=d.substring(2).toLowerCase();const l=!!~d.indexOf("passive");l&&(d=d.replace("passive",""));var E=Bz.includes(d)?
"capturecapture":"capture";(E=!!~d.indexOf(E))&&(d=d.replace("capture",""));return{device:d,capture:E,passive:l}}function Zj(d,l=""){const E=Sv[d];return d+(E?E[l]||l:l)}function uj(d){return"touches"in d?"touch":"pointerType"in d?d.pointerType:"mouse"}function Vk(d){return Array.from(d.touches).filter(l=>{var E,Y;return l.target===d.currentTarget||(null===(E=d.currentTarget)||void 0===E?void 0:null===(Y=E.contains)||void 0===Y?void 0:Y.call(E,l.target))})}function wk(d){return"touches"in d?("touchend"===
d.type||"touchcancel"===d.type?d.changedTouches:d.targetTouches)[0]:d}function Mk(d,l){const E=l.clientX-d.clientX,Y=l.clientY-d.clientY;return{angle:-(180*Math.atan2(E,Y))/Math.PI,distance:Math.hypot(E,Y),origin:[(l.clientX+d.clientX)/2,(l.clientY+d.clientY)/2]}}function Mj(d){return Vk(d).map(l=>l.identifier)}function Fj(d,l){const [E,Y]=Array.from(d.touches).filter(la=>l.includes(la.identifier));return Mk(E,Y)}function Nj(d){const l=wk(d);return"touches"in d?l.identifier:l.pointerId}function Xf(d){d=
wk(d);return[d.clientX,d.clientY]}function mg(d){let {deltaX:l,deltaY:E,deltaMode:Y}=d;1===Y?(l*=40,E*=40):2===Y&&(l*=800,E*=800);return[l,E]}function Ei(d,...l){return"function"===typeof d?d(...l):d}function Bh(){}function ji(...d){return 0===d.length?Bh:1===d.length?d[0]:function(){let l;for(const E of d)l=E.apply(this,arguments)||l;return l}}function ak([d,l],E){d=Math.abs(d);l=Math.abs(l);if(d>l&&d>E)return"x";if(l>d&&l>E)return"y"}function Wh(d){Mt.set(d.key,d.engine);Lt.set(d.key,d.resolver)}
function Ch(d={},l){const E={};for(const [Y,la]of Object.entries(l))switch(typeof la){case "function":E[Y]=la.call(E,d[Y],Y,d);break;case "object":E[Y]=Ch(d[Y],la);break;case "boolean":la&&(E[Y]=d[Y])}return E}function bk(d,l,E={}){const {target:Y,eventOptions:la,window:sa,enabled:Ea,transform:Ua}=d;var jb=Vy;if(null==d)d={};else{if(null==d)var sb={};else{sb={};var Ub=Object.keys(d),gc;for(gc=0;gc<Ub.length;gc++){var yc=Ub[gc];0<=jb.indexOf(yc)||(sb[yc]=d[yc])}}if(Object.getOwnPropertySymbols)for(gc=
Object.getOwnPropertySymbols(d),yc=0;yc<gc.length;yc++)Ub=gc[yc],0<=jb.indexOf(Ub)||Object.prototype.propertyIsEnumerable.call(d,Ub)&&(sb[Ub]=d[Ub]);d=sb}E.shared=Ch({target:Y,eventOptions:la,window:sa,enabled:Ea,transform:Ua},Uy);if(l){var Qc=Lt.get(l);E[l]=Ch(rg({shared:E.shared},d),Qc)}else for(Qc in d)(l=Lt.get(Qc))&&(E[Qc]=Ch(rg({shared:E.shared},d[Qc]),l));return E}function mj(d,l){d.gestures.add(l);d.gestureEventStores[l]=new Bv(d,l);d.gestureTimeoutStores[l]=new Wy}function kh(d,l,E,Y,la,
sa){if(d.has(E)&&Mt.has(Y)){var Ea=E+"Start",Ua=E+"End";la[Y]=jb=>{let sb=void 0;if(jb.first&&Ea in l)l[Ea](jb);E in l&&(sb=l[E](jb));if(jb.last&&Ua in l)l[Ua](jb);return sb};sa[Y]=sa[Y]||{}}}function pi(d,l={},E,Y){const la=Kt.default.useMemo(()=>new Xy(d),[]);la.applyHandlers(d,Y);la.applyConfig(l,E);Kt.default.useEffect(la.effect.bind(la));Kt.default.useEffect(()=>la.clean.bind(la),[]);if(void 0===l.target)return la.bind.bind(la)}function Jh(d){d.forEach(Wh);return function(l,E){E=E||{};const Y=
{},la={},sa=new Set;for(let yc in l)Yy.test(yc)?(sa.add(RegExp.lastMatch),la[yc]=l[yc]):Y[yc]=l[yc];const [Ea,Ua,jb]=[la,Y,sa];l={};kh(jb,Ea,"onDrag","drag",l,E);kh(jb,Ea,"onWheel","wheel",l,E);kh(jb,Ea,"onScroll","scroll",l,E);kh(jb,Ea,"onPinch","pinch",l,E);kh(jb,Ea,"onMove","move",l,E);kh(jb,Ea,"onHover","hover",l,E);const {handlers:sb,nativeHandlers:Ub,config:gc}={handlers:l,config:E,nativeHandlers:Ua};return pi(sb,gc,void 0,Ub)}}function Nk(d,l){return Jh([fz,Ry,Sy,Ty,Qy,gz])(d,l||{})}function ck(d){const {viewport:l,
inputs:E,callbacks:Y}=Tg(),la=Zy.useMemo(()=>({onWheel:sa=>{var Ea;const {event:Ua,delta:jb}=sa;Ua.preventDefault();"pinching"===E.state||$d.isEqual(jb,[0,0])||(null==(Ea=Y.onWheel)?void 0:Ea.call(Y,{type:"canvas",order:0,delta:sa.delta,point:E.currentPoint},Ua))},onPinchStart:sa=>{var Ea;const Ua=d.current,{event:jb}=sa;(jb.target===Ua||null!=Ua&&Ua.contains(jb.target))&&["idle","panning"].includes(E.state)&&(null==(Ea=Y.onPinchStart)?void 0:Ea.call(Y,{type:"canvas",order:0,delta:sa.delta,offset:sa.offset,
point:$d.sub(sa.origin,E.containerOffset)},jb))},onPinchEnd:sa=>{var Ea;const Ua=d.current,{event:jb}=sa;(jb.target===Ua||null!=Ua&&Ua.contains(jb.target))&&"pinching"===E.state&&(null==(Ea=Y.onPinchEnd)?void 0:Ea.call(Y,{type:"canvas",order:0,delta:sa.delta,offset:sa.offset,point:$d.sub(sa.origin,E.containerOffset)},jb))},onPinch:sa=>{var Ea;const Ua=d.current,{event:jb}=sa;(jb.target===Ua||null!=Ua&&Ua.contains(jb.target))&&"pinching"===E.state&&(null==(Ea=Y.onPinch)?void 0:Ea.call(Y,{type:"canvas",
order:0,delta:sa.delta,offset:sa.offset,point:$d.sub(sa.origin,E.containerOffset)},jb))}}),[Y]);Nk(la,{target:d,eventOptions:{passive:!1},pinch:{from:[l.camera.zoom,l.camera.zoom],scaleBounds:()=>({from:l.camera.zoom,max:pg.maxZoom,min:pg.minZoom})}})}function vj(d,l,E,Y){Jt.useLayoutEffect(()=>{d.current.style.transform=`translate(
        calc(${l.minX}px - var(--tl-padding)),
        calc(${l.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[l.minX,l.minY,E,l.rotation]);Jt.useLayoutEffect(()=>{const la=d.current;la.style.width=`calc(${Math.floor(l.width)}px + (var(--tl-padding) * 2))`;la.style.height=`calc(${Math.floor(l.height)}px + (var(--tl-padding) * 2))`},[l.width,l.height]);Jt.useLayoutEffect(()=>{const la=d.current;void 0!==Y&&(la.style.zIndex=Y.toString())},[Y])}function gl(d,l){const {onPersist:E,onSave:Y,onSaveAs:la,onError:sa,onMount:Ea,onCreateAssets:Ua,onCreateShapes:jb,onDeleteAssets:sb,
onDeleteShapes:Ub,onDrop:gc,onPaste:yc,onCanvasDBClick:Qc}=l;xv.useLayoutEffect(()=>{const Jc=[];if(d)return d.history.reset(),window.tln=d,Ea&&Ea(d,null),()=>{Jc.forEach(kd=>kd());window.tln=void 0}},[d]);xv.useLayoutEffect(()=>{const Jc=[];E&&Jc.push(d.subscribe("persist",E));Y&&Jc.push(d.subscribe("save",Y));la&&Jc.push(d.subscribe("saveAs",la));sa&&Jc.push(d.subscribe("error",sa));jb&&Jc.push(d.subscribe("create-shapes",jb));Ua&&Jc.push(d.subscribe("create-assets",Ua));Ub&&Jc.push(d.subscribe("delete-shapes",
Ub));sb&&Jc.push(d.subscribe("delete-assets",sb));gc&&Jc.push(d.subscribe("drop",gc));yc&&Jc.push(d.subscribe("paste",yc));Qc&&Jc.push(d.subscribe("canvas-dbclick",Qc));return()=>Jc.forEach(kd=>kd())},[d,E,Y,la,sa])}function mm(d){if("app"in d)return d.app;const [l]=yv.useState(()=>new uz(d.model,d.Shapes,d.Tools));yv.useLayoutEffect(()=>{l.initKeyboardShortcuts();return()=>{l.dispose()}},[l]);return l}function dk(d,l){Jy.useEffect(()=>{"model"in l&&l.model&&d.loadDocumentModel(l.model)},[l.model])}
function qi(d){const l=Tg(),{viewport:{bounds:E}}=l;Ky.useEffect(()=>{const Y=Ea=>{Ea.preventDefault()},la=Ea=>{const Ua=Ea.touches[0].pageX,jb=Ea.touches[0].radiusX||0;(10>Ua-jb||Ua+jb>E.width-10)&&Ea.preventDefault()},sa=d.current;if(!sa)return()=>{};sa.addEventListener("touchstart",Y,{passive:!0});sa.addEventListener("gestureend",Y,{passive:!0});sa.addEventListener("gesturechange",Y,{passive:!0});sa.addEventListener("gesturestart",Y,{passive:!0});sa.addEventListener("touchstart",la,{passive:!0});
return()=>{sa&&(sa.removeEventListener("touchstart",Y),sa.removeEventListener("gestureend",Y),sa.removeEventListener("gesturechange",Y),sa.removeEventListener("gesturestart",Y),sa.removeEventListener("touchstart",la))}},[d,E.width])}function Oj(d,l){const {inputs:E,callbacks:Y}=Tg();return Ly.useMemo(()=>({onPointerDown:la=>{var sa,Ea;const {order:Ua=0}=la;Ua||(null==(sa=la.currentTarget)?void 0:sa.setPointerCapture(la.pointerId));sa=d.props.handles[l];null==(Ea=Y.onPointerDown)?void 0:Ea.call(Y,
{type:"handle",shape:d,handle:sa,id:l,order:Ua},la);la.order=Ua+1},onPointerMove:la=>{var sa;const {order:Ea=0}=la,Ua=d.props.handles[l];null==(sa=Y.onPointerMove)?void 0:sa.call(Y,{type:"handle",shape:d,handle:Ua,id:l,order:Ea},la);la.order=Ea+1},onPointerUp:la=>{var sa,Ea;const {order:Ua=0}=la;Ua||(null==(sa=la.currentTarget)?void 0:sa.releasePointerCapture(la.pointerId));sa=d.props.handles[l];null==(Ea=Y.onPointerUp)?void 0:Ea.call(Y,{type:"handle",shape:d,handle:sa,id:l,order:Ua},la);la.order=
Ua+1},onPointerEnter:la=>{var sa;const {order:Ea=0}=la,Ua=d.props.handles[l];null==(sa=Y.onPointerEnter)?void 0:sa.call(Y,{type:"handle",shape:d,handle:Ua,id:l,order:Ea},la);la.order=Ea+1},onPointerLeave:la=>{var sa;const {order:Ea=0}=la,Ua=d.props.handles[l];null==(sa=Y.onPointerLeave)?void 0:sa.call(Y,{type:"handle",shape:d,handle:Ua,id:l,order:Ea},la);la.order=Ea+1},onKeyUp:la=>{var sa;const Ea=d.props.handles[l];null==(sa=Y.onKeyUp)?void 0:sa.call(Y,{type:"handle",shape:d,handle:Ea,id:l,order:-1},
la)},onKeyDown:la=>{var sa;const Ea=d.props.handles[l];null==(sa=Y.onKeyDown)?void 0:sa.call(Y,{type:"handle",shape:d,handle:Ea,id:l,order:-1},la)}}),[d.id,E,Y])}function Ug(d,l,E=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${l})${E?" scale(-1,-1) translate(0, -32)":""}'>`+d.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Vi(d,l,E=
0){My.useEffect(()=>{const Y=d.current;Y&&Y.style.setProperty("--tl-cursor",Ny[l](Fa.radiansToDegrees(E)))},[l,E])}function Hh(d){const {viewport:l}=Tg(),E=qf();Oy.useLayoutEffect(()=>Vc(()=>{var Y;const la=l.camera.zoom;"pinching"!==E.inputs.state&&(null==(Y=d.current)?void 0:Y.style.setProperty("--tl-zoom",la.toString()))}),[])}function Mi(d,l=0){const [E,Y]=(0,zv.useState)(d);(0,zv.useEffect)(()=>{const la=setTimeout(()=>{Y(d)},l);return()=>{clearTimeout(la)}},[d,l]);return E}function ei(){const d=
qf();Av.useEffect(()=>{ee(()=>me({},d.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+d.currentPageId,JSON.stringify(d.viewport.camera))})},[d.viewport.camera]);Av.useEffect(()=>{var l;const E=JSON.parse(null!=(l=window.sessionStorage.getItem("logseq.tldraw.camera:"+d.currentPageId))?l:"null");E?d.viewport.update(E):d.selectedIds.size?d.api.zoomToSelection():d.api.zoomToFit()},[d])}function Pk(d){d()}function xk(d){return ic(se(d,void 0))}function Ni(d){return{reaction:d,
mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+$y}}function Ng(d){var l=new Map,E=1,Y=new d(function(la){var sa=l.get(la);sa&&(sa.reaction.dispose(),l.delete(la))});return{addReactionToTrack:function(la,sa,Ea){var Ua=E++;Y.register(Ea,Ua,la);la.current=Ni(sa);la.current.finalizationRegistryCleanupToken=Ua;l.set(Ua,la.current);return la.current},recordReactionAsCommitted:function(la){Y.unregister(la);la.current&&la.current.finalizationRegistryCleanupToken&&l.delete(la.current.finalizationRegistryCleanupToken)},
forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function fj(){function d(){void 0===Y&&(Y=setTimeout(l,1E4))}function l(){Y=void 0;var la=Date.now();E.forEach(function(sa){var Ea=sa.current;Ea&&la>=Ea.cleanAt&&(Ea.reaction.dispose(),sa.current=null,E.delete(sa))});0<E.size&&d()}var E=new Set,Y;return{addReactionToTrack:function(la,sa,Ea){la.current=Ni(sa);E.add(la);d();return la.current},recordReactionAsCommitted:function(la){E.delete(la)},forceCleanupTimerToRunNowForTests:function(){Y&&
(clearTimeout(Y),l())},resetCleanupScheduleForTests:function(){var la;if(0<E.size){try{for(var sa=az(E),Ea=sa.next();!Ea.done;Ea=sa.next()){var Ua=Ea.value,jb=Ua.current;jb&&(jb.reaction.dispose(),Ua.current=null)}}catch(Ub){var sb={error:Ub}}finally{try{Ea&&!Ea.done&&(la=sa.return)&&la.call(sa)}finally{if(sb)throw sb.error;}}E.clear()}Y&&(clearTimeout(Y),Y=void 0)}}}function Zh(){return new dz}function nj(d,l){void 0===l&&(l="observed");var E=Fv(or.default.useState(Zh),1)[0],Y=Fv(or.default.useState(),
2)[1],la=or.default.useRef(null);if(!la.current)var sa=new Gl("observer".concat(l),function(){Ea.mounted?Y([]):Ea.changedBeforeMount=!0}),Ea=bz(la,sa,E);E=la.current.reaction;or.default.useDebugValue(E,xk);or.default.useEffect(function(){cz(la);la.current?(la.current.mounted=!0,la.current.changedBeforeMount&&(la.current.changedBeforeMount=!1,Y([]))):(la.current={reaction:new Gl("observer".concat(l),function(){Y([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},Y([]));return function(){la.current.reaction.dispose();
la.current=null}},[]);var Ua,jb;E.track(function(){try{Ua=d()}catch(sb){jb=sb}});if(jb)throw jb;return Ua}function We(d,l){var E;if(Iv&&d.$$typeof===Iv)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");l=null!==(E=null===l||void 0===l?void 0:l.forwardRef)&&void 0!==E?E:!1;var Y=d,la=d.displayName||d.name;if(Hv&&d.$$typeof===Hv&&(l=!0,Y=d.render,"function"!==
typeof Y))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");E=function(sa,Ea){return nj(function(){return Y(sa,Ea)},la)};""!==la&&(E.displayName=la);d.contextTypes&&(E.contextTypes=d.contextTypes);l&&(E=(0,sq.forwardRef)(E));E=(0,sq.memo)(E);ki(d,E);return E}function ki(d,l){Object.keys(d).forEach(function(E){ez[E]||Object.defineProperty(l,E,Object.getOwnPropertyDescriptor(d,E))})}function Pj(d){var l=d.render;d=d.children||l;return"function"!==typeof d?null:nj(d)}
function Xi(d){const l=qf(),{callbacks:E}=Tg(),Y=vv.useRef(!1);vv.useEffect(()=>{const la=jb=>{var sb,Ub;if(null==(sb=d.current)?0:sb.contains(document.activeElement))null==(Ub=E.onKeyDown)?void 0:Ub.call(E,{type:"canvas",order:-1},jb),Y.current=jb.shiftKey},sa=jb=>{var sb,Ub;if(null==(sb=d.current)?0:sb.contains(document.activeElement))null==(Ub=E.onKeyUp)?void 0:Ub.call(E,{type:"canvas",order:-1},jb),Y.current=jb.shiftKey},Ea=jb=>{var sb,Ub,gc;!l.editingShape&&(null==(sb=d.current)?0:sb.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(gc=null==(Ub=document.activeElement)?void 0:Ub.tagName)?gc:"")&&(jb.preventDefault(),l.paste(jb,Y.current))},Ua=jb=>{var sb,Ub,gc;!l.editingShape&&0<l.selectedShapes.size&&(null==(sb=d.current)?0:sb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(gc=null==(Ub=document.activeElement)?void 0:Ub.tagName)?gc:"")&&(jb.preventDefault(),l.copy())};window.addEventListener("keydown",la);window.addEventListener("keyup",sa);document.addEventListener("paste",
Ea);document.addEventListener("copy",Ua);return()=>{window.removeEventListener("keydown",la);window.removeEventListener("keyup",sa);document.removeEventListener("paste",Ea);document.removeEventListener("copy",Ua)}},[])}function gj(d){const {inputs:l,callbacks:E}=Tg(),Y=rv.useRef(-1);return rv.useMemo(()=>({onPointerDown:la=>{var sa,Ea;const {order:Ua=0}=la;Ua||(null==(sa=la.currentTarget)?void 0:sa.setPointerCapture(la.pointerId));null==(Ea=E.onPointerDown)?void 0:Ea.call(E,{type:"shape",shape:d,
order:Ua},la);la.order=Ua+1},onPointerMove:la=>{var sa;const {order:Ea=0}=la;null==(sa=E.onPointerMove)?void 0:sa.call(E,{type:"shape",shape:d,order:Ea},la);la.order=Ea+1},onPointerUp:la=>{var sa,Ea,Ua;const {order:jb=0}=la;jb||(null==(sa=la.currentTarget)?void 0:sa.releasePointerCapture(la.pointerId));null==(Ea=E.onPointerUp)?void 0:Ea.call(E,{type:"shape",shape:d,order:jb},la);sa=Date.now();Ea=sa-Y.current;300<Ea?Y.current=sa:300>=Ea&&(null==(Ua=E.onDoubleClick)?void 0:Ua.call(E,{type:"shape",shape:d,
order:jb},la),Y.current=-1);la.order=jb+1},onPointerEnter:la=>{var sa;const {order:Ea=0}=la;null==(sa=E.onPointerEnter)?void 0:sa.call(E,{type:"shape",shape:d,order:Ea},la);la.order=Ea+1},onPointerLeave:la=>{var sa;const {order:Ea=0}=la;null==(sa=E.onPointerLeave)?void 0:sa.call(E,{type:"shape",shape:d,order:Ea},la);la.order=Ea+1},onKeyUp:la=>{var sa;null==(sa=E.onKeyUp)?void 0:sa.call(E,{type:"shape",shape:d,order:-1},la)},onKeyDown:la=>{var sa;null==(sa=E.onKeyDown)?void 0:sa.call(E,{type:"shape",
shape:d,order:-1},la)}}),[d.id,l,E])}function Dm(d){var {viewport:l,inputs:E,callbacks:Y,components:la}=d;d=Wf(d,["viewport","inputs","callbacks","components"]);return(0,wb.jsx)(Ez,{id:d.id,viewport:l,inputs:E,callbacks:Y,components:la,meta:d.meta,children:(0,wb.jsx)(Hz,me({},d))})}function nk(){return(0,wb.jsx)("img",{className:"logseq-img-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAIAAACxN37FAAAcXElEQVR4nOyde2xb13nAzzmXXkk6D1GiFNN6xFQt6+HYnZTVSqWgduR4qZ1C7qoAzRYPLdJ0W4egWIdh6ApsK9YAHfLH9kdTLN6S9LV0eVhe4yaxk0ZK4lhqrdhSmtikFDmmHo6ViJTIthFJz9I9wznnXpKOX5RM3nN57veroMoOxftZ+vHjd77zuC60cQsCAFUgsgMAgEICQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNKAUIDSgFCA0oBQgNK4ZIdAHABbq/H7fHm/k1ibk5eOKUHCC2TQG1NoK56TW21z1+xtq7a7fG4vZ6LH5ZOpmam308lU5HR8cjYqZnpMzKCLQ0w3OvbYtxeT1tHe7Cpob5x/SX1vSrx2HxkbHx4YCgyNl6EAEsbENoi3F7PrZ3tza2bg43rC/Wc8dh8/4GDwwNHC/WECgBCFx2319O5Y1vHndtWlo+vSjw23/vEk5CtBSUgdFlFRX3T+jW11R6v1+cvz/x9KpmKx+YSsfmZ6fft+et0e72dO7YWT+Vc+g8c6nvuxWJfxf7YV2iR2No628sqyvN5fGTs1PEjRyNj44m5+eJHd3U6d9zR1f05C1TOEBp5u/eJJ9PJlGVXtCF2FDpQW333n/asuNYcHjja99xBiVr7/OU99+8pYK2cP8MDR3ufeNL669oHDVVVy44hi9vrueue7p779+SWFsslUFfTuWObz1/+wfRZ69NVS9vmr/zN1ysDN1l8XUGgriadTJ2JTEq5uh2wkdBr62oe+PtvNNzSXJBnC9TVdOzY5lntnT49sXh+sSDPeVW27965+8+/5Fq1yprLXZINm5qPHzmaTjm08LCL0M2tm/c8+MB1N95Q2KetrV+3ecutkbFTH/3ud4V95ovZvntnV/fOYl8lP+j4iVHZMchBvtAY47bO2+79yy8XKbF5vJ4t2zoxxkXthNjJZlQVWDP02pHFRYvel2yF/MVJa2rW3n3vnxT7Kl3dn7v73i8W6clv7Wy3j81iKLK2tgZRKjsQCcgUGmPs85fvefBr1vS2OnZsu+/BBwp+LZ+/YlfRXiorJlBXjWXHIAWZQlNKt3fvLLuGhsZyaeGVungtFeo5t1vbbM4Tt8fjxPwsV+jm1k2tne0WXzTY2NBz/320EG/HGOP6xvXW/xPyg2LkRKXlCU3p5+/tkXLlts727bt3XnuSprresWNbgYIqMGcnp9mL1nlltCShKa1varCy2PgYXd0712345LU8A0ao3F/R3Lq5cEEVkpnJaRGk05CWoaXnNjYY9bhX/O2U0ptq1xY0ooIRj8bEPhfH5WdZQnu8Hum5ze313PPVPdeSw9bW1RQwngLSt/8XwmWMHZekZQhN6ToZC3cuZsXL7TH/8OW3DNBi4tHYxOi7LD5eQDstScvJ0BvbPiXluhfT1b1zuSMnrop9x1v9+w8kYvO8B0PsGmMRsVxoSjGia2ptsYAEIRRsaqhvalje9/D+CEU0tZAsVlgr5XRodPiNQcreQTB1WrXBkZChKaXXsjq04Cw3SVMOonRmarqYcS2beDTWu/cJ/oLDRllUuPmjUkGC0B6v1+31Wn/dy7HiJB06/laxYlo+6WTy8YceZsUGJtSRKgusF5peS7OsSDS3blpuTUy5Q5HwWNGCWgbC5ji3mbc2CE/TTnTaWqHtOpZq67xtRb983Lv3h4WPZpnEo7FH/uE7ZyemmcqEIEIwYTbb8QddfKwT2kwY2IZOu72eYON6PmDNCyx6vAjFY3Mv/OSpYod3BSKh0Ue+9Z1EbA4TYiZmXnI4FeuENtYDsc+2E1qst8y/a2s8jNsz+NIrI4cHixrbJUknky/+5GePfffhdCpFMaaYYI2lZ8rqZ4emZxk7VqiOEf7s5++y9KJ5cP78+XeGjudZd7KHZZWh4WPDbq+3tuGaFocsi0ho9Ef/+m/jb580KmaiITNDGx9OxdLDGjFCFONUciGdTNqq0SE21RozJnnYQA2pCWWZkdAl+sJPn4pHY9vv2V3sf1ckNNrX+1wkNIpFgUE0VmAIm4lDW3W5WCc0znlDn5k6E2zaYNml88Hnr8jTZiEzpdSYv+Dv8YjSwUO/DB8b7urZ3bb19mJEaKrM+yqYUGYzoZm2BiFOrjQyWCd0zs8az0xO201ofuZYeWI+kc8jDfUp4iYZf4kpjcfm9u99or/3ue09X2jd2lmQqCKh0dCx4eHXB9LJJDYrCuauqJsJN5v7DTZbm6H5hDHV2deR8HjHXdstu3S+sDdvJmmeZoiMKAoP9qZPKdaZ6/Ho3L5HH+vb9/NgS1Pb1s7Aurrl1iGJaOx0aPSDyanjpse8yMmWyNSoN/jf5B2wE7AwQ/P3ZvGefjpsx1MjfJXlifl4/iWo0Ii/9WuIEqovsWxNKaI6ojgxNzd8eGDk8ABFtL6lac3NtWV+v6/K7/F6yyr9uRdJJZOJaCy1kJyZnIpHYzMTU4lY5tR+zGf+kOmxkYxZYuaXhqL5Y1g6KGRO84FhOpmKhMeCzY1WXj0f8h8Xmt+AzX8VYlojQpeWkNFtp2LdB0I4Eh47HRoVelLxQqAX7CcRX1JjoCGmRXImR4zuMuJdOW42ynYzREFf6J9EqWLtTCH/DfFfMRp541eWXjoPEtEV3c1E2G8UtRhpGtJcRh+NEPZHw0KSOy9tdtmMD5qZryYaMotjJD6zp9Ko+VRmQ4NkXnVgcy7Wr+XgmygwPnlsJJ201/LLVDJJMx25ZSGSJSHYEFFMQWs4ozX/AhtfE2Etfxg2S2FCiTlxbbwGCNUIJRp/hWhCa/ZIlE3MxfpBlDJWC41FKkI4nUoNHnrF4qtfgXQyyYZf4g8rynmi85Cd5iCEChF5wsaaRkWiJYQKxTVmPP97gjUXJiKvm9+iideDlvs6yV1GB4n5klgqdLba46OZgUOv2CdJz0xOI2qO81b0DDSz5SlbYBAjMXPLeeo1NMXccpaGTWszRQU1Xg9apvBA0JLLG0uF5sMnLNaCIcyGhgMH7ZKkI6PvmsmvMPIYPWOExUyeaBtnKgdWYGBipmFi/CdWTJNsXWF6DDbnj9UlhxgUUjNJDx56ZYVDsUJzOjQmBneFOs0i06AwPwg2W2/862z2RcbcNb7gA1gRMjbJYnMkRMi5VGrf3sclxHAhfKf0eFbB4kBzvsisOaQXXRGK42tBgtBixxtv3rF0FQm/O3jol9aHkUskPGamRrmBANeKnE2yKPtezN5q+3oPyC08+vb/wsiKkBxLHElHgV1QL5JzqfRjDz0sq+MxfHiA7y2F4lUFpJ7gj43JMIpwIjb3+HclOB2Pxvp6D2BiegxClzjShM6shKRIrOvFZ6emrXe6r/e5RGxexGDP/Y7AspB/06CccRj9feK34785sbljizV3Rhs4+PIbz7+ERWM4M2sNlDKyhTZX9mBzQ8tHicSJwaGWP2p1ry7uXqaZiekn//0HfO1E1mZYIFHqyBZawBdKixWVGOPUwkL42IjH6w2sqyvSBWcmph576OHFxSUxP8dn77CTd/8rg3yhWWqkH5+eSycXQnw5XtXaQMFT9fDrR57+/t50Om2uxtQgPSuDfKFRtreAMWF5GptMj783WtBUnU4mX/qfZ19+undxaZGv4eRrNcVqT0AJMNq4RXYMxio8zE/tQJRSfQnpFOk6QrpY+eGrrLj23dSnQ6O9jz6ebTnzdck0s1EPUAJbCJ1FHH5nbMvTka4Ly6nOBozllf6unu5gS1NZpT//p0wnk5GTowMHX46E3xWT29xjbCxzQ849Bk5JbCS0sVpadIKZypTqOj//Qs+KzlshweamYEtjsKVp7eU3VCeisfdCoxOhsfCx4VQyhXIn24mx+99c7CaNsooKj9fj9nrEgdluj+fie3gm5ub5IXrGZ3E3IOBy2EhogbEkmR/0T3VTZVZ+0Byts6suPF6vr9L/CaY1Fa2/RGwu9dFCOpUSz8dncMT+U3OVZs6pWZbtMGXWVlQE6qrX1Fb7/BVr66rLVnqLlnQyNTP9fjqZOjt1Zmb6/URsfmb6TKHjLVVsJ7R5cpzYL00xRTkZWiTsHKdpbn/k4o3URpM7uyJZ1BgEW1NplFVU1DetDzY21DetX7G++SAUPzt1Jjzyzsz0mbR4R3IkdhRaYMy0iDIjW1tTUZcYohtQJE4yMs8zMrbiGkJnkjHhh3fxhkbRKg231xOorWlp3dTStrmoEl+ByNip06PjkbFTkbFxKQFIxL5CZ8k5h5efanFBPZ3zXwVikgZnDmdBhtM5p1sUAeFxx45t9Y3r7XMv+3hsPjI2Pjww5ByzS0FoQUZZfiAv01qnRiLmdYiYFsn6ijHK1BXmBHsxjmUJNja0tG1q62i3j8cXw80+1X/gYDym+JiyZITOisg/m9tZqXncEM3Z4GpuDkQ4ewJdEQZ/t97e3trRvrJbd8oiMnbq+JGjI4NHZQdSLEpG6Fw+LjfGmS3l2e0w4o9FuLrb6+nccUfHnVvtnJKvTDw233/g4PCAglqXpNAXYzRGinzQm9vr7dyxtePObaWrci7x2Hzfcwff+tWQSttyFRHaAm69vX3Xl76ohsq5iGw9MqiI1iD0VcAYBxvXd3XvLK1aebnEY/NP/uCxmamSn6ABoS8Lxtjt9XR17+y4c6vsWCxieGCo1Dsh9lg+akvqmxq+8s2vN9zSLDsQ6wjUVTe3bk6n0qU7lw5CX5rtu3f23H+fehXzVfF4PS2tm3z+8sjYqcXzi7LDWTYg9Mfx+cv3PPi1ts522YHIJFBXs3nLreG33jmXSsuOZXmA0Bewtq7mK9/8eqAWfiYsVbd1ti+eXzwTmZQdyzIAobM0t27e8+AD1914g+xA7IJr1So+hMAT756SHUu+gNAGnTu29dx/nzXngZQWwcb1ZRXl4ZF3ZAeSFyA0Ihh37d75xz3dsgOxL4G6mpa2TW8PDdt/mAhCo67dO7u6d8qOwu5cf+MNGza1vPPmyOL587JjuRLOFVosaWrr3HL3vT2yYykNrr/xhoZbmm2epx19HsXa2uqe+/fIjqKUCNRW73nwAdlRXAknZmhxio2vwvflb/61A6dOrhGfv6LcXxEaeVt2IJfGiUKLveJ/9e2/LfPL2fNX6gTqqjGikTE79vIcV3KI9NzVfRfYfC107d5Vb8vlh44TGiHa2vHpjh13yA6j5Lnvwa+VlfvsdsKlg4QWP/qyct/27l2yY1EBt9dzz1f3IHN7sk1wkNCUUsKKjV1QbBSKYFPDZ2y2WNwpQossclN1oO12Ry+jKzjbd++yVeHhFKFZekZozzf+QnYgquH2enruv88+hYcjhBZn87d2tss6m0ttgk0NwQ2flB2FgSOEFuc7woKN4tG1exfVl+yQpNUXWqTnYON6GAsWj2BTQ31jA8oenykN9YVGPEV/BhrPRaZr9y473IlXcaExxlTXy/0VLW2bZceiOLySXi99dKi40OJeRE1/eIvsQBxB1xd2GSMWeagstDjwDlG99fbbZMfiCIKNDZ9wfwIhmUlaZaHFebo+f0WgrkZ2IE6hrfM2BBm6eFCqq30mnd1oaduML7ihgtUoLbQooFs/JTsOBxFs2uD2uEHowsMPitYRpb7KCtmxOIt1G9ZTeb0OZYWmVMcUuT0eKKAtJtjUIG5xLeXqagpt3G0T0UCdEzeYyWVtXS2W17xTU+hMN9Tnh3rDagI319DMTfcsR1mhmdG6fiMsr7Mct9fr81fgC27rax1qCm3cVpnv7pYdixPx+cuRnr1BmZWoKTRv2GFKdc9qOHZDAmUV5ZTqVMbiOwWFzmQFgokad3YqOdxej7i9uvU/fwWFzr0Dp+zFjA7Fs9qLKKK6hGyioNDmaTKI6jokaDlQvomTSMgnagrN72avSxmUABw2IocMXRhyJKap5ILcYJyJqPcogkFhIRBbYhFiZXR8NiY7HCeSXkjyrRVQchQIah7KeC6Zkh2LE4nHYnxzhYT5QjWFNsGR0KjsGJxIeiElaziuptCZtt18NJZOJmWH4zg+mJxCmWaTtagpNAcjvuQuHoUy2lLSC8nUgpFErC+jFRZaHBKBIyfDsuNwFjOTUzw3E4yQbvlKf3WF5j9HjHH4zWHZoTiLmQlRbyCEifWz32oKbfwI+XqCs5PTUEZbSSQ0auyvkIGaQgv4j5WcS6VmIlOyY3EQkfAYwtK2yaorNE/P4quBFw/JjsYpRE6GU8kFygsOBKvtCgir3vgSUopxJDQKVYc1DL/+BkYEEwIlR6HhLQ7K80Q6lRp8HpK0FURCo+Inj0RCsRxlhWZvdhhjQjDRECIjrx+RHZH6DL96OB6d4++KCGM5aikrtAnfOKFp8djcyKuHZQejOKzeIIRLJc0rpYUW40JMxBd9z+yXHZDKzEQmJ0JjmGhUTKoQyNDFALMhCqs6CIEkXVQGXziEMKFYVM8SVnEIVBZalNH8QAOWp4mmvfCjn0K7oxjEZ6Mjh4+wrMzHLQhjXZdzvxWVhRaw9IwJJUTHOJ1K9z/dKzsiBdn/g/9kpR1TWSRpaZEoLjRP0ny9PyGIFR7a4IsvzUxMyo5LKYZfff10KIwIV5mwCk9Wi0N9ocXZ2/xNkJXRIoX0PvJoegEKj8IQn432P7Mf8fYo1jRDa3moLzTiQ0OKkRgaUow/mJzufwYKj8Lw6rP7E3PzCLOKjld3WO59g5wiNHsT5CUH0njh8cKh8JvHZIdV8gy/enj4tTcQJlhzYaLpCEnsbwicITT7hxJ+kpKGiUZ5l7T3+48mZqOywypheLHRy1KyplHCht18VkXybd00VOWUI8H5ciVe4OkUUbp0/nx46Fhb11bXqlWyQys90gvJvd/+50Rsjmou/r7nwppL4ox3BsdkaLPwwJqGXS5ReMSjscf/6V+gM70Cnn/ix4nYHK/iWL0hpmOxDU7HdFaGFv9v/tBZnv59PLEQjze3f1pycCVF31P7fn3wZV5paNi1ihUbmia3uZHBQUJnwcbIhc8A4JmJycSHs+B0nvQ/va//2f2swCAEsfc6VnIQTZN/33qO44TG2UUzlP8GKKX0g4mpxOxs8xZw+ipwm/8XEYI0grVV2MVKZ0TkLH2+JI4T2txryP5HjT8yqWciE6NDxzbf3uH6AxgjXpr+p/b1PduLRdGsGbkZYYIlLay7JA4Vmm+vz2RrKu5w81Ei8fYbR1raP+1evVp2jLaD2fxML+YdOjaqJprx2U42O1RoA56oMeGTAQTz0zJROpkM/frN4KaN15eVyY7PLqQXkj/f+1+/evElrGlI07C2CokviMuGd0hwrtBYlBpiNTo1eyCU/f6GDv3Sc93q2g0NsmOUT3w2uvdb/zgRGuPzJqKt4UIuF7OZEBueJ+9coZFZfFDzcEdRVYtf0qm3fhP/cHZtcJ2Ty4/w0WM/fuh7H/3uI9GYQ5oLr1pFNT7bKnsC5XI4W2iBSDPkgkUIGKEPJiZDR98MBNf5qiplhieD9ELy5f/+2Qs//Mni0hLCRMxDYdcqXjTzTVYgtJ0xutIEI3NtjRg1/l8qdbzvtd9GowEnperIidCPv/u98d+8LZYcid4cNlvOfLOg7SqNDCC0QbbvITYR8ZYeq0MImZmYCA+96fZ6A8F1ssMsLiIxH9j7eDqdpnyZAOX9ZsSnA0WHzj4t50uC0cYtsmOwC8YwcWmJDRL1RbS4hKlOlxaRrlNdR5SWV1X+2bf+LhC8WXakRWHwFy/2P7MvtZDky0E1UWlQohGXi8nNKw3pSzWuCgh9AcJp9qEv8Q8mNGZCL2KKqK5jRNvu2Nr1pXvKFCqsIydCvY/8R3w2isUaI03TsTEKpHynIG8222g68AqA0B9HFNGUZ2VMl1jC5lojqmORv9l/VkTryIlQ/9P7Tp8IITF+MBeLY82oMZDYhGK/9tzlAKEvgZGnEeVOU1F1YKojXTfSNvuaPaB+08a2bVtbu7bKDnl5pBeSw/2vDT5/MD47y4Z9GPN+PNF5PiauVeZ+KkKNWdWSyM4IhL4sZmeaSc2+0lmeNoSmOlpaMioTvgbVV1nZ2rW17Y7PllVVyQ78KkROnAwPHT/e/+q5ZCr3WCkxBDR2qfGdlyxby452BYDQV4EXGKwEMQtrYTMz28jfui6KEEpRcGNzW9fW+ls22q0UESk5PHQscjLEV2MhVmPknKTBF80RY/DH1ySWos0g9DLAvALhSZp5jER5jVhVzcprZIwmxX1sg5tabr1jW/CWZrk5OzEbDR19Mzx07PSJk1ic0EX4phJhsxBa7DohGtKIOLCV5twXr+QAoZcFFaWzGB3ytK0bpYi4XT6rUijP6FTcR7Xipqp1Lc3rbmkJBNdZ08ZOzEbfO3Fy4kQocjKciEbFySTmuZXY6LIT7q7YAy8MFn06ebeSKBQg9DLIFNZCX5an2fhw0SiykfgjK68JeySvUvhd3MU3uld716y7uX7jxkDw5rKqykL5nZidfe9E6MPI1PzshxMnw6mFBXOyk1CjOSGqZFFjsPICaxpFOHPyjnGYRkGikQ0IvVLMESGrQNgfdWqMFEVBYiZsnqqNhXwok7lFIwXdWOn3Vfk9q68vq/J7rlt9Y6Xfu3q1+7rVmTu/+6oq52dnxeuB39By4dzCQmoh+dvZaDwWS8xG47NRkVOFw8aWBZJZZcWTrnAXm0WzKDCIqEC0Ei0tLgcIvXKMQpPqBBOdz7wwrYXfog5BOl3Subu6eKTYH8NfCLwhZhxiYSjFD+JD/KwFcSAfMj6LHb1IJHtjZzXh1tLMrpvMxgVxUhQ/pVKcK0Cz3YxclcWuBsnHaBQcl+wAShgj14q2gOYSpTPCS/yESII1Xk9rvLzmRTbBSOe6s89CZjE+o0byFtMX2FhDwl4tRMM6r9pF+UtEzSPOc+ExZJKxCEWcHczKZEJ0hIhmtCx41WF26MwlsoqpLAChr5VsCZHZR46MTp+uU+ziqVVfYjU1c5HZjEim/NAxwvyzkbMpzayKMvYfIN5VE7dIyxwVQLM7bjAW90ZC/Nm5zOIVINpwvNzBuSu/M2WPkoDQhSFHEfF2L2aSjUEhEkv5MF8NIuYrWN7VibA5I3H2bu86Qpmqw/BYWCkOCEbmsxudOPMuo/w/sWfl65Wx0VHOeakorLIAhC4KpjfG9nKsmUcKMed4DW3YiHJ7fLnfLr5T3MrLrED0zN2zxfp6w3PxLExcZLquIWy0zh3icQYQuuhkbjxOzfsYZWoMMyVTIxHnFjDCf2QU5MgcIpqDQHPDSCZniweJK5rtQhn/XMmA0FZjaoyNSpgQMUY0ZmSQ0bAzHmduC6P877OVQ+5knrojvBUAQssh45+4uU5uCY7MVgY2H5ljO734GYBcQGjbcXHVC+7mj0337gLAygChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGlAKEBpQChAaUAoQGl+P8AAAD//zOPeTSLsacXAAAAAElFTkSuQmCC",
alt:"logseq"})}function $h(d){return(0,wb.jsx)("button",me({className:"tl-button"},d))}function Uf(){Uf=Object.assign?Object.assign.bind():function(d){for(var l=1;l<arguments.length;l++){var E=arguments[l],Y;for(Y in E)Object.prototype.hasOwnProperty.call(E,Y)&&(d[Y]=E[Y])}return d};return Uf.apply(this,arguments)}function Bg(d,l,{checkForDefaultPrevented:E=!0}={}){return function(Y){null===d||void 0===d||d(Y);if(!1===E||!Y.defaultPrevented)return null===l||void 0===l?void 0:l(Y)}}function sl(...d){return l=>
d.forEach(E=>{"function"===typeof E?E(l):null!==E&&void 0!==E&&(E.current=l)})}function ai(...d){return(0,wA.useCallback)(sl(...d),d)}function Oi(d,l=[]){let E=[];const Y=()=>{const la=E.map(sa=>(0,Vn.createContext)(sa));return function(sa){const Ea=(null===sa||void 0===sa?void 0:sa[d])||la;return(0,Vn.useMemo)(()=>({[`__scope${d}`]:Id(me({},sa),{[d]:Ea})}),[sa,Ea])}};Y.scopeName=d;return[function(la,sa){function Ea(sb){const {scope:Ub,children:gc}=sb,yc=Wf(sb,["scope","children"]);sb=(null===Ub||
void 0===Ub?void 0:Ub[d][jb])||Ua;const Qc=(0,Vn.useMemo)(()=>yc,Object.values(yc));return(0,Vn.createElement)(sb.Provider,{value:Qc},gc)}const Ua=(0,Vn.createContext)(sa),jb=E.length;E=[...E,sa];Ea.displayName=la+"Provider";return[Ea,function(sb,Ub){if(Ub=(0,Vn.useContext)((null===Ub||void 0===Ub?void 0:Ub[d][jb])||Ua))return Ub;if(void 0!==sa)return sa;throw Error(`\`${sb}\` must be used within \`${la}\``);}]},Gj(Y,...l)]}function Gj(...d){const l=d[0];if(1===d.length)return l;const E=()=>{const Y=
d.map(la=>({useScope:la(),scopeName:la.scopeName}));return function(la){const sa=Y.reduce((Ea,{useScope:Ua,scopeName:jb})=>{Ua=Ua(la)[`__scope${jb}`];return me(me({},Ea),Ua)},{});return(0,Vn.useMemo)(()=>({[`__scope${l.scopeName}`]:sa}),[sa])}};E.scopeName=l.scopeName;return E}function pj(d){const l=(0,Ut.useRef)(d);(0,Ut.useEffect)(()=>{l.current=d});return(0,Ut.useMemo)(()=>(...E)=>{var Y;return null===(Y=l.current)||void 0===Y?void 0:Y.call(l,...E)},[])}function Wi({prop:d,defaultProp:l,onChange:E=
()=>{}}){const [Y,la]=sg({defaultProp:l,onChange:E}),sa=void 0!==d;l=sa?d:Y;const Ea=pj(E);E=(0,Cs.useCallback)(Ua=>{sa?(Ua="function"===typeof Ua?Ua(d):Ua,Ua!==d&&Ea(Ua)):la(Ua)},[sa,d,la,Ea]);return[l,E]}function sg({defaultProp:d,onChange:l}){d=(0,Cs.useState)(d);const [E]=d,Y=(0,Cs.useRef)(E),la=pj(l);(0,Cs.useEffect)(()=>{Y.current!==E&&(la(E),Y.current=E)},[E,Y,la]);return d}function Jl(d){return(0,fm.isValidElement)(d)&&d.type===Mz}function lh(d,l){const E=me({},l);for(const Y in l){const la=
d[Y],sa=l[Y];/^on[A-Z]/.test(Y)?E[Y]=(...Ea)=>{null===sa||void 0===sa||sa(...Ea);null===la||void 0===la||la(...Ea)}:"style"===Y?E[Y]=me(me({},la),sa):"className"===Y&&(E[Y]=[la,sa].filter(Boolean).join(" "))}return me(me({},d),E)}function xi(d,l){d&&(0,Lz.flushSync)(()=>d.dispatchEvent(l))}function fk(d){var l=d+"CollectionProvider";const [E,Y]=Oi(l),[la,sa]=E(l,{collectionRef:{current:null},itemMap:new Map}),Ea=Ub=>{const {scope:gc,children:yc}=Ub;Ub=mo.default.useRef(null);const Qc=mo.default.useRef(new Map).current;
return mo.default.createElement(la,{scope:gc,itemMap:Qc,collectionRef:Ub},yc)};Object.assign(Ea,{displayName:l});const Ua=d+"CollectionSlot";l=mo.default.forwardRef((Ub,gc)=>{const {scope:yc,children:Qc}=Ub;Ub=sa(Ua,yc);gc=ai(gc,Ub.collectionRef);return mo.default.createElement(Eq,{ref:gc},Qc)});Object.assign(l,{displayName:Ua});const jb=d+"CollectionItemSlot",sb=mo.default.forwardRef((Ub,gc)=>{const {scope:yc,children:Qc}=Ub,Jc=Wf(Ub,["scope","children"]),kd=mo.default.useRef(null);Ub=ai(gc,kd);
const ad=sa(jb,yc);mo.default.useEffect(()=>{ad.itemMap.set(kd,me({ref:kd},Jc));return()=>void ad.itemMap.delete(kd)});return mo.default.createElement(Eq,{["data-radix-collection-item"]:"",ref:Ub},Qc)});Object.assign(sb,{displayName:jb});return[{Provider:Ea,Slot:l,ItemSlot:sb},function(Ub){const gc=sa(d+"CollectionConsumer",Ub);return mo.default.useCallback(()=>{const yc=gc.collectionRef.current;if(!yc)return[];const Qc=Array.from(yc.querySelectorAll("[data-radix-collection-item]"));return Array.from(gc.itemMap.values()).sort((Jc,
kd)=>Qc.indexOf(Jc.ref.current)-Qc.indexOf(kd.ref.current))},[gc.collectionRef,gc.itemMap])},Y]}function Pi(d){const l=(0,bw.useContext)(Kz);return d||l||"ltr"}function Qi(d){const l=pj(d);(0,Jz.useEffect)(()=>{const E=Y=>{"Escape"===Y.key&&l(Y)};document.addEventListener("keydown",E);return()=>document.removeEventListener("keydown",E)},[l])}function ok(d){const l=pj(d),E=(0,Mm.useRef)(!1),Y=(0,Mm.useRef)(()=>{});(0,Mm.useEffect)(()=>{const la=Ea=>{if(Ea.target&&!E.current){let Ua=function(){ig("dismissableLayer.pointerDownOutside",
l,jb,{discrete:!0})};const jb={originalEvent:Ea};"touch"===Ea.pointerType?(document.removeEventListener("click",Y.current),Y.current=Ua,document.addEventListener("click",Y.current,{once:!0})):Ua()}E.current=!1},sa=window.setTimeout(()=>{document.addEventListener("pointerdown",la)},0);return()=>{window.clearTimeout(sa);document.removeEventListener("pointerdown",la);document.removeEventListener("click",Y.current)}},[l]);return{onPointerDownCapture:()=>E.current=!0}}function hk(d){const l=pj(d),E=(0,Mm.useRef)(!1);
(0,Mm.useEffect)(()=>{const Y=la=>{la.target&&!E.current&&ig("dismissableLayer.focusOutside",l,{originalEvent:la},{discrete:!1})};document.addEventListener("focusin",Y);return()=>document.removeEventListener("focusin",Y)},[l]);return{onFocusCapture:()=>E.current=!0,onBlurCapture:()=>E.current=!1}}function vl(){const d=new CustomEvent("dismissableLayer.update");document.dispatchEvent(d)}function ig(d,l,E,{discrete:Y}){const la=E.originalEvent.target;E=new CustomEvent(d,{bubbles:!1,cancelable:!0,detail:E});
l&&la.addEventListener(d,l,{once:!0});Y?xi(la,E):la.dispatchEvent(E)}function Kl(){(0,bA.useEffect)(()=>{var d,l;const E=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(d=E[0])&&void 0!==d?d:Yi());document.body.insertAdjacentElement("beforeend",null!==(l=E[1])&&void 0!==l?l:Yi());Zt++;return()=>{1===Zt&&document.querySelectorAll("[data-radix-focus-guard]").forEach(Y=>Y.remove());Zt--}},[])}function Yi(){const d=document.createElement("span");
d.setAttribute("data-radix-focus-guard","");d.tabIndex=0;d.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return d}function zk(d,{select:l=!1}={}){const E=document.activeElement;for(const Y of d)if(Yf(Y,{select:l}),document.activeElement!==E)break}function Ig(d){const l=[];for(d=document.createTreeWalker(d,NodeFilter.SHOW_ELEMENT,{acceptNode:E=>{const Y="INPUT"===E.tagName&&"hidden"===E.type;return E.disabled||E.hidden||Y?NodeFilter.FILTER_SKIP:0<=E.tabIndex?NodeFilter.FILTER_ACCEPT:
NodeFilter.FILTER_SKIP}});d.nextNode();)l.push(d.currentNode);return l}function wl(d,l){for(const E of d)if(!Ak(E,{upTo:l}))return E}function Ak(d,{upTo:l}){if("hidden"===getComputedStyle(d).visibility)return!0;for(;d&&(void 0===l||d!==l);){if("none"===getComputedStyle(d).display)return!0;d=d.parentElement}return!1}function Yf(d,{select:l=!1}={}){if(d&&d.focus){const E=document.activeElement;d.focus({preventScroll:!0});d!==E&&d instanceof HTMLInputElement&&"select"in d&&l&&d.select()}}function Gi(d,
l){d=[...d];l=d.indexOf(l);-1!==l&&d.splice(l,1);return d}function Wk(d){return d.filter(l=>"A"!==l.tagName)}function uf(d){const [l,E]=nw.useState(dA());Ym(()=>{d||E(Y=>null!==Y&&void 0!==Y?Y:String(eA++))},[d]);return d||(l?`radix-${l}`:"")}function hj(d){return d.split("-")[0]}function Fi(d){return["top","bottom"].includes(hj(d))?"x":"y"}function Ok(d){return"y"===d?"height":"width"}function mk(d,l,E){let {reference:Y,floating:la}=d;var sa=Y.x+Y.width/2-la.width/2;const Ea=Y.y+Y.height/2-la.height/
2;d=Fi(l);var Ua=Ok(d);Ua=Y[Ua]/2-la[Ua]/2;const jb="x"===d;switch(hj(l)){case "top":sa={x:sa,y:Y.y-la.height};break;case "bottom":sa={x:sa,y:Y.y+Y.height};break;case "right":sa={x:Y.x+Y.width,y:Ea};break;case "left":sa={x:Y.x-la.width,y:Ea};break;default:sa={x:Y.x,y:Y.y}}switch(l.split("-")[1]){case "start":sa[d]-=Ua*(E&&jb?-1:1);break;case "end":sa[d]+=Ua*(E&&jb?-1:1)}return sa}function bm(d){return"number"!=typeof d?me({top:0,right:0,bottom:0,left:0},d):{top:d,right:d,bottom:d,left:d}}function ri(d){return Id(me({},
d),{top:d.y,left:d.x,right:d.x+d.width,bottom:d.y+d.height})}function Zi(d,l){return Rf(this,null,function*(){var E;void 0===l&&(l={});const {x:Y,y:la,platform:sa,rects:Ea,elements:Ua,strategy:jb}=d,{boundary:sb="clippingAncestors",rootBoundary:Ub="viewport",elementContext:gc="floating",altBoundary:yc=!1,padding:Qc=0}=l,Jc=bm(Qc),kd=Ua[yc?"floating"===gc?"reference":"floating":gc],ad=ri(yield sa.getClippingRect({element:null==(E=yield null==sa.isElement?void 0:sa.isElement(kd))||E?kd:kd.contextElement||
(yield null==sa.getDocumentElement?void 0:sa.getDocumentElement(Ua.floating)),boundary:sb,rootBoundary:Ub,strategy:jb}));E=ri(sa.convertOffsetParentRelativeRectToViewportRelativeRect?yield sa.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===gc?Id(me({},Ea.floating),{x:Y,y:la}):Ea.reference,offsetParent:yield null==sa.getOffsetParent?void 0:sa.getOffsetParent(Ua.floating),strategy:jb}):Ea[gc]);return{top:ad.top-E.top+Jc.top,bottom:E.bottom-ad.bottom+Jc.bottom,left:ad.left-E.left+
Jc.left,right:E.right-ad.right+Jc.right}})}function yk(d){return d.replace(/left|right|bottom|top/g,l=>Zz[l])}function pk(d,l,E){void 0===E&&(E=!1);const Y=d.split("-")[1],la=Fi(d);d=Ok(la);E="x"===la?Y===(E?"end":"start")?"right":"left":"start"===Y?"bottom":"top";return l.reference[d]>l.floating[d]&&(E=yk(E)),{main:E,cross:yk(E)}}function Qk(d){return d.replace(/start|end/g,l=>Xz[l])}function nm(d,l){return{top:d.top-l.height,right:d.right-l.width,bottom:d.bottom-l.height,left:d.left-l.width}}function Fm(d){return hw.some(l=>
0<=d[l])}function Qj(d){return null==d?window:d&&d.document&&d.location&&d.alert&&d.setInterval?d:(d=d.ownerDocument)&&d.defaultView||window}function ul(d){return Qj(d).getComputedStyle(d)}function jj(d){return d&&d.document&&d.location&&d.alert&&d.setInterval?"":d?(d.nodeName||"").toLowerCase():""}function xj(){const d=navigator.userAgentData;return null!=d&&d.brands?d.brands.map(l=>l.brand+"/"+l.version).join(" "):navigator.userAgent}function Ri(d){return d instanceof Qj(d).HTMLElement}function Si(d){return d instanceof
Qj(d).Element}function Xk(d){return"undefined"==typeof ShadowRoot?!1:d instanceof Qj(d).ShadowRoot||d instanceof ShadowRoot}function Ck(d){const {overflow:l,overflowX:E,overflowY:Y}=ul(d);return/auto|scroll|overlay|hidden/.test(l+Y+E)}function Bk(d){const l=/firefox/i.test(xj());d=ul(d);return"none"!==d.transform||"none"!==d.perspective||"paint"===d.contain||["transform","perspective"].includes(d.willChange)||l&&"filter"===d.willChange||l&&!!d.filter&&"none"!==d.filter}function hl(){return!/^((?!chrome|android).)*safari/i.test(xj())}
function yj(d,l,E){var Y,la,sa,Ea;void 0===l&&(l=!1);void 0===E&&(E=!1);var Ua=d.getBoundingClientRect();let jb=1,sb=1;l&&Ri(d)&&(jb=0<d.offsetWidth&&Ds(Ua.width)/d.offsetWidth||1,sb=0<d.offsetHeight&&Ds(Ua.height)/d.offsetHeight||1);d=Si(d)?Qj(d):window;l=!hl()&&E;E=(Ua.left+(l&&null!=(Y=null==(la=d.visualViewport)?void 0:la.offsetLeft)?Y:0))/jb;Y=(Ua.top+(l&&null!=(sa=null==(Ea=d.visualViewport)?void 0:Ea.offsetTop)?sa:0))/sb;sa=Ua.width/jb;Ua=Ua.height/sb;return{width:sa,height:Ua,top:Y,right:E+
sa,bottom:Y+Ua,left:E,x:E,y:Y}}function ij(d){return(l=d,(l instanceof Qj(l).Node?d.ownerDocument:d.document)||window.document).documentElement;var l}function qj(d){return Si(d)?{scrollLeft:d.scrollLeft,scrollTop:d.scrollTop}:{scrollLeft:d.pageXOffset,scrollTop:d.pageYOffset}}function Vl(d){return yj(ij(d)).left+qj(d).scrollLeft}function yl(d){return"html"===jj(d)?d:d.assignedSlot||d.parentNode||(Xk(d)?d.host:null)||ij(d)}function Ek(d){return Ri(d)&&"fixed"!==getComputedStyle(d).position?d.offsetParent:
null}function gk(d){for(var l=Qj(d),E=Ek(d);E&&["table","td","th"].includes(jj(E))&&"static"===getComputedStyle(E).position;)E=Ek(E);if(!E||"html"!==jj(E)&&("body"!==jj(E)||"static"!==getComputedStyle(E).position||Bk(E))){if(!E)a:{d=yl(d);for(Xk(d)&&(d=d.host);Ri(d)&&!["html","body"].includes(jj(d));){if(Bk(d)){E=d;break a}d=d.parentNode}E=null}l=E||l}return l}function cm(d){if(Ri(d))return{width:d.offsetWidth,height:d.offsetHeight};d=yj(d);return{width:d.width,height:d.height}}function ik(d){const l=
yl(d);return["html","body","#document"].includes(jj(l))?d.ownerDocument.body:Ri(l)&&Ck(l)?l:ik(l)}function zj(d,l){var E;void 0===l&&(l=[]);var Y=ik(d);d=Y===(null==(E=d.ownerDocument)?void 0:E.body);E=Qj(Y);Y=d?[E].concat(E.visualViewport||[],Ck(Y)?Y:[]):Y;l=l.concat(Y);return d?l:l.concat(zj(Y))}function Gh(d,l,E){return"viewport"===l?ri(function(Y,la){var sa=Qj(Y),Ea=ij(Y);sa=sa.visualViewport;Y=Ea.clientWidth;Ea=Ea.clientHeight;let Ua=0,jb=0;if(sa){Y=sa.width;Ea=sa.height;const sb=hl();(sb||!sb&&
"fixed"===la)&&(Ua=sa.offsetLeft,jb=sa.offsetTop)}return{width:Y,height:Ea,x:Ua,y:jb}}(d,E)):Si(l)?function(Y,la){var sa=yj(Y,!1,"fixed"===la);la=sa.top+Y.clientTop;sa=sa.left+Y.clientLeft;return{top:la,left:sa,x:sa,y:la,right:sa+Y.clientWidth,bottom:la+Y.clientHeight,width:Y.clientWidth,height:Y.clientHeight}}(l,E):ri(function(Y){var la;const sa=ij(Y);var Ea=qj(Y);const Ua=null==(la=Y.ownerDocument)?void 0:la.body;la=Cr(sa.scrollWidth,sa.clientWidth,Ua?Ua.scrollWidth:0,Ua?Ua.clientWidth:0);const jb=
Cr(sa.scrollHeight,sa.clientHeight,Ua?Ua.scrollHeight:0,Ua?Ua.clientHeight:0);Y=-Ea.scrollLeft+Vl(Y);Ea=-Ea.scrollTop;return"rtl"===ul(Ua||sa).direction&&(Y+=Cr(sa.clientWidth,Ua?Ua.clientWidth:0)-la),{width:la,height:jb,x:Y,y:Ea}}(ij(d)))}function oj(d){const l=zj(d),E=["absolute","fixed"].includes(ul(d).position)&&Ri(d)?gk(d):d;return Si(E)?l.filter(Y=>{var la;if(la=Si(Y))a:if(la=null==E.getRootNode?void 0:E.getRootNode(),Y.contains(E))la=!0;else{if(la&&Xk(la)){la=E;do{if(la&&Y===la){la=!0;break a}la=
la.parentNode||la.host}while(la)}la=!1}return la&&"body"!==jj(Y)}):[]}function qk(d,l,E,Y){void 0===Y&&(Y={});const {ancestorScroll:la=!0,ancestorResize:sa=!0,elementResize:Ea=!0,animationFrame:Ua=!1}=Y,jb=la&&!Ua,sb=sa&&!Ua,Ub=jb||sb?[...(Si(d)?zj(d):[]),...zj(l)]:[];Ub.forEach(Jc=>{jb&&Jc.addEventListener("scroll",E,{passive:!0});sb&&Jc.addEventListener("resize",E)});let gc,yc=null;if(Ea){let Jc=!0;yc=new ResizeObserver(()=>{Jc||E();Jc=!1});Si(d)&&!Ua&&yc.observe(d);yc.observe(l)}let Qc=Ua?yj(d):
null;return Ua&&function kd(){const ad=yj(d);!Qc||ad.x===Qc.x&&ad.y===Qc.y&&ad.width===Qc.width&&ad.height===Qc.height||E();Qc=ad;gc=requestAnimationFrame(kd)}(),E(),()=>{var kd;Ub.forEach(ad=>{jb&&ad.removeEventListener("scroll",E);sb&&ad.removeEventListener("resize",E)});null==(kd=yc)||kd.disconnect();yc=null;Ua&&cancelAnimationFrame(gc)}}function Kj(d,l){if(d===l)return!0;if(typeof d!==typeof l)return!1;if("function"===typeof d&&d.toString()===l.toString())return!0;let E,Y;if(d&&l&&"object"==typeof d){if(Array.isArray(d)){var la=
d.length;if(la!=l.length)return!1;for(E=la;0!==E--;)if(!Kj(d[E],l[E]))return!1;return!0}Y=Object.keys(d);la=Y.length;if(la!==Object.keys(l).length)return!1;for(E=la;0!==E--;)if(!Object.prototype.hasOwnProperty.call(l,Y[E]))return!1;for(E=la;0!==E--;)if(la=Y[E],!("_owner"===la&&d.$$typeof||Kj(d[la],l[la])))return!1;return!0}return d!==d&&l!==l}function vh(d){const l=nn.useRef(d);Vt(()=>{l.current=d});return l}function eh(d){let {middleware:l,placement:E="bottom",strategy:Y="absolute",whileElementsMounted:la}=
void 0===d?{}:d;const sa=nn.useRef(null),Ea=nn.useRef(null),Ua=vh(la),jb=nn.useRef(null),[sb,Ub]=nn.useState({x:null,y:null,strategy:Y,placement:E,middlewareData:{}}),[gc,yc]=nn.useState(l);Kj(null==gc?void 0:gc.map(Ad=>{({options:Ad}=Ad);return Ad}),null==l?void 0:l.map(Ad=>{({options:Ad}=Ad);return Ad}))||yc(l);const Qc=nn.useCallback(()=>{sa.current&&Ea.current&&Qz(sa.current,Ea.current,{middleware:gc,placement:E,strategy:Y}).then(Ad=>{Jc.current&&Pz.flushSync(()=>{Ub(Ad)})})},[gc,E,Y]);Vt(()=>
{Jc.current&&Qc()},[Qc]);const Jc=nn.useRef(!1);Vt(()=>{Jc.current=!0;return()=>{Jc.current=!1}},[]);const kd=nn.useCallback(()=>{"function"===typeof jb.current&&(jb.current(),jb.current=null);if(sa.current&&Ea.current)if(Ua.current){const Ad=Ua.current(sa.current,Ea.current,Qc);jb.current=Ad}else Qc()},[Qc,Ua]),ad=nn.useCallback(Ad=>{sa.current=Ad;kd()},[kd]),vc=nn.useCallback(Ad=>{Ea.current=Ad;kd()},[kd]),md=nn.useMemo(()=>({reference:sa,floating:Ea}),[]);return nn.useMemo(()=>Id(me({},sb),{update:Qc,
refs:md,reference:ad,floating:vc}),[sb,Qc,md,ad,vc])}function Eg(d){const [l,E]=(0,Wn.useState)(void 0);Ym(()=>{if(d){E({width:d.offsetWidth,height:d.offsetHeight});const Y=new ResizeObserver(la=>{if(Array.isArray(la)&&la.length){la=la[0];if("borderBoxSize"in la){la=la.borderBoxSize;var sa=Array.isArray(la)?la[0]:la;la=sa.inlineSize;sa=sa.blockSize}else la=d.offsetWidth,sa=d.offsetHeight;E({width:la,height:sa})}});Y.observe(d,{box:"border-box"});return()=>Y.unobserve(d)}E(void 0)},[d]);return l}function Lj(d){return void 0!==
d}function Ih(d){return null!==d}function Hi(d){const [l,E="center"]=d.split("-");return[l,E]}function vg(d,l){return(0,Eo.useReducer)((E,Y)=>{Y=l[E][Y];return null!==Y&&void 0!==Y?Y:E},d)}function Ii(d){const [l,E]=(0,Eo.useState)(),Y=(0,Eo.useRef)({}),la=(0,Eo.useRef)(d),sa=(0,Eo.useRef)("none"),[Ea,Ua]=vg(d?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Eo.useEffect)(()=>
{const jb=Lf(Y.current);sa.current="mounted"===Ea?jb:"none"},[Ea]);Ym(()=>{const jb=Y.current,sb=la.current;if(sb!==d){const Ub=sa.current,gc=Lf(jb);d?Ua("MOUNT"):"none"===gc||"none"===(null===jb||void 0===jb?void 0:jb.display)?Ua("UNMOUNT"):sb&&Ub!==gc?Ua("ANIMATION_OUT"):Ua("UNMOUNT");la.current=d}},[d,Ua]);Ym(()=>{if(l){const jb=Ub=>{const gc=Lf(Y.current).includes(Ub.animationName);Ub.target===l&&gc&&(0,zA.flushSync)(()=>Ua("ANIMATION_END"))},sb=Ub=>{Ub.target===l&&(sa.current=Lf(Y.current))};
l.addEventListener("animationstart",sb);l.addEventListener("animationcancel",jb);l.addEventListener("animationend",jb);return()=>{l.removeEventListener("animationstart",sb);l.removeEventListener("animationcancel",jb);l.removeEventListener("animationend",jb)}}Ua("ANIMATION_END")},[l,Ua]);return{isPresent:["mounted","unmountSuspended"].includes(Ea),ref:(0,Eo.useCallback)(jb=>{jb&&(Y.current=getComputedStyle(jb));E(jb)},[])}}function Lf(d){return(null===d||void 0===d?void 0:d.animationName)||"none"}
function Jg(d,l,E){d=d.key;E="rtl"!==E?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d;if("vertical"!==l||!["ArrowLeft","ArrowRight"].includes(E))if("horizontal"!==l||!["ArrowUp","ArrowDown"].includes(E))return lA[E]}function $i(d){const l=document.activeElement;for(const E of d){if(E===l)break;E.focus();if(document.activeElement!==l)break}}function bi(d,l){return d.map((E,Y)=>d[(l+Y)%d.length])}function ih(d,l){var E=(0,iA.useState)(function(){return{value:d,callback:l,facade:{get current(){return E.value},
set current(Y){var la=E.value;la!==Y&&(E.value=Y,E.callback(Y,la))}}}})[0];E.callback=l;return E.facade}function og(d,l){return ih(l||null,function(E){return d.forEach(function(Y){"function"===typeof Y?Y(E):Y&&(Y.current=E);return Y})})}function ph(d){return d}function il(d,l){void 0===l&&(l=ph);var E=[],Y=!1;return{read:function(){if(Y)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return E.length?E[E.length-1]:d},useMedium:function(la){var sa=
l(la,Y);E.push(sa);return function(){E=E.filter(function(Ea){return Ea!==sa})}},assignSyncMedium:function(la){for(Y=!0;E.length;){var sa=E;E=[];sa.forEach(la)}E={push:function(Ea){return la(Ea)},filter:function(){return E}}},assignMedium:function(la){Y=!0;var sa=[];if(E.length){var Ea=E;E=[];Ea.forEach(la);sa=E}var Ua=function(){var jb=sa;sa=[];jb.forEach(la)};Promise.resolve().then(Ua);E={push:function(jb){sa.push(jb);Promise.resolve().then(Ua)},filter:function(jb){sa=sa.filter(jb);return E}}}}}
function li(d){const l=document.activeElement;for(const E of d){if(E===l)break;E.focus();if(document.activeElement!==l)break}}function Bi(d,l){return d.map((E,Y)=>d[(l+Y)%d.length])}function Nb(d,l,E){const Y=1<l.length&&Array.from(l).every(sa=>sa===l[0])?l[0]:l,la=E?d.indexOf(E):-1;d=Bi(d,Math.max(la,0));1===Y.length&&(d=d.filter(sa=>sa!==E));d=d.find(sa=>sa.toLowerCase().startsWith(Y.toLowerCase()));return d!==E?d:void 0}function $b(d){return l=>"mouse"===l.pointerType?d(l):void 0}function Zb(d){var {value:l,
onChange:E}=d;d=Wf(d,["value","onChange"]);const Y=ju.useRef(null),[la,sa]=ju.useState(l);ju.useEffect(()=>{var Ea,Ua,jb;if((null==l?0:l.toString().startsWith("var"))&&Y.current){const sb=null==(Ea=/var\((.*)\)/.exec(l.toString()))?void 0:Ea[1];if(sb){const [Ub,gc]=sb.split(",").map(yc=>yc.trim());sa(null!=(jb=null!=(Ua=getComputedStyle(Y.current).getPropertyValue(Ub).trim())?Ua:gc)?jb:"#000")}}},[l]);return(0,wb.jsx)("div",{className:"input",ref:Y,children:(0,wb.jsx)("div",{className:"color-input-wrapper",
children:(0,wb.jsx)("input",me({className:"color-input",type:"color",value:la,onChange:Ea=>{sa(Ea.target.value);null==E?void 0:E(Ea)}},d))})})}function ia(d,[l,E]){return Math.min(E,Math.max(l,d))}function Db(d){const l=(0,Vw.useRef)({value:d,previous:d});return(0,Vw.useMemo)(()=>{l.current.value!==d&&(l.current.previous=l.current.value,l.current.value=d);return l.current.previous},[d])}function Pb(d){const l=pj(d),E=(0,xf.useRef)(""),Y=(0,xf.useRef)(0);d=(0,xf.useCallback)(sa=>{sa=E.current+sa;l(sa);
(function jb(Ua){E.current=Ua;window.clearTimeout(Y.current);""!==Ua&&(Y.current=window.setTimeout(()=>jb(""),1E3))})(sa)},[l]);const la=(0,xf.useCallback)(()=>{E.current="";window.clearTimeout(Y.current)},[]);(0,xf.useEffect)(()=>()=>window.clearTimeout(Y.current),[]);return[E,d,la]}function rb(d,l,E){const Y=1<l.length&&Array.from(l).every(sa=>sa===l[0])?l[0]:l,la=E?d.indexOf(E):-1;d=vb(d,Math.max(la,0));1===Y.length&&(d=d.filter(sa=>sa!==E));d=d.find(sa=>sa.textValue.toLowerCase().startsWith(Y.toLowerCase()));
return d!==E?d:void 0}function vb(d,l){return d.map((E,Y)=>d[(l+Y)%d.length])}function Mb(d){var {options:l,value:E,onValueChange:Y}=d;d=Wf(d,["options","value","onValueChange"]);const [la,sa]=fB.useState(!1);return(0,wb.jsx)("div",Id(me({},d),{className:"tl-select-input",children:(0,wb.jsxs)(AB,{open:la,onOpenChange:sa,value:E,onValueChange:Y,children:[(0,wb.jsxs)(BB,{className:"tl-select-input-trigger",children:[(0,wb.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,wb.jsx)(CB,
{})}),(0,wb.jsx)(DB,{style:{lineHeight:1},children:(0,wb.jsx)(mi,{name:la?"chevron-up":"chevron-down"})})]}),(0,wb.jsx)(EB,{className:"tl-select-input-portal",children:(0,wb.jsxs)(FB,{className:"tl-select-input-content",children:[(0,wb.jsx)(JB,{}),(0,wb.jsx)(GB,{className:"tl-select-input-viewport",children:l.map(Ea=>(0,wb.jsx)(HB,{className:"tl-select-input-select-item",value:Ea.value,children:(0,wb.jsx)(IB,{children:Ea.label})},Ea.value))}),(0,wb.jsx)(KB,{})]})})]})}))}function pb({options:d,value:l,
onValueChange:E}){return(0,wb.jsx)(jx,{className:"tl-toggle-group-input",type:"single",value:l,onValueChange:E,children:d.map(Y=>(0,wb.jsx)(kx,{className:"tl-toggle-group-input-button",value:Y.value,disabled:Y.value===l,children:(0,wb.jsx)(mi,{name:Y.icon})},Y.value))})}function Jb({options:d,value:l,onValueChange:E}){return(0,wb.jsx)(jx,{className:"tl-toggle-group-input",type:"multiple",value:l,onValueChange:E,children:d.map(Y=>(0,wb.jsx)(kx,{className:"tl-toggle-group-input-button",value:Y.value,
children:(0,wb.jsx)(mi,{name:Y.icon})},Y.value))})}function Wb(d){var {toggle:l=!0,pressed:E,onPressedChange:Y,className:la}=d;d=Wf(d,["toggle","pressed","onPressedChange","className"]);return(0,wb.jsx)(MB,Id(me({},d),{"data-toggle":l,className:"tl-toggle-input"+(la?" "+la:""),pressed:E,onPressedChange:Y}))}function tc(d,l){return d.filter(E=>{var Y;return null==(Y=mu[E.props.type])?void 0:Y.includes(l)})}function Hc(d){return l=>"mouse"!==l.pointerType?d(l):void 0}function Mc(d,l){Mc=Object.setPrototypeOf?
Object.setPrototypeOf.bind():function(E,Y){E.__proto__=Y;return E};return Mc(d,l)}function sd(d,l){d.prototype=Object.create(l.prototype);d.prototype.constructor=d;Mc(d,l)}function Od(d){Od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)};return Od(d)}function Dd(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(d){return!1}}function yd(d,l,E){yd=Dd()?Reflect.construct.bind():function(Y,la,sa){var Ea=[null];Ea.push.apply(Ea,la);Y=new (Function.bind.apply(Y,Ea));sa&&Mc(Y,sa.prototype);return Y};return yd.apply(null,arguments)}function Ed(d){var l="function"===typeof Map?new Map:void 0;Ed=function(E){function Y(){return yd(E,arguments,Od(this).constructor)}if(null===E||-1===Function.toString.call(E).indexOf("[native code]"))return E;if("function"!==typeof E)throw new TypeError("Super expression must either be null or a function");
if("undefined"!==typeof l){if(l.has(E))return l.get(E);l.set(E,Y)}Y.prototype=Object.create(E.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}});return Mc(Y,E)};return Ed(d)}function xe(d,l,E){return Math.round(255*d)+","+Math.round(255*l)+","+Math.round(255*E)}function Jf(d,l,E,Y){void 0===Y&&(Y=xe);if(0===l)return Y(E,E,E);d=(d%360+360)%360/60;var la=(1-Math.abs(2*E-1))*l,sa=la*(1-Math.abs(d%2-1)),Ea=l=0,Ua=0;0<=d&&1>d?(l=la,Ea=sa):1<=d&&2>d?(l=sa,Ea=la):2<=d&&3>d?(Ea=
la,Ua=sa):3<=d&&4>d?(Ea=sa,Ua=la):4<=d&&5>d?(l=sa,Ua=la):5<=d&&6>d&&(l=la,Ua=sa);E-=la/2;return Y(l+E,Ea+E,Ua+E)}function ue(d){if("string"!==typeof d)throw new oo(3);if("string"===typeof d){var l=d.toLowerCase();d=px[l]?"#"+px[l]:d}if(d.match(qC))return{red:parseInt(""+d[1]+d[2],16),green:parseInt(""+d[3]+d[4],16),blue:parseInt(""+d[5]+d[6],16)};if(d.match(rC))return l=parseFloat((parseInt(""+d[7]+d[8],16)/255).toFixed(2)),{red:parseInt(""+d[1]+d[2],16),green:parseInt(""+d[3]+d[4],16),blue:parseInt(""+
d[5]+d[6],16),alpha:l};if(d.match(sC))return{red:parseInt(""+d[1]+d[1],16),green:parseInt(""+d[2]+d[2],16),blue:parseInt(""+d[3]+d[3],16)};if(d.match(tC))return l=parseFloat((parseInt(""+d[4]+d[4],16)/255).toFixed(2)),{red:parseInt(""+d[1]+d[1],16),green:parseInt(""+d[2]+d[2],16),blue:parseInt(""+d[3]+d[3],16),alpha:l};if(l=nu.exec(d))return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10)};if(l=uC.exec(d.substring(0,50)))return{red:parseInt(""+l[1],10),green:parseInt(""+
l[2],10),blue:parseInt(""+l[3],10),alpha:1<parseFloat(""+l[4])?parseFloat(""+l[4])/100:parseFloat(""+l[4])};var E=vC.exec(d);if(E){l=parseInt(""+E[1],10);var Y=parseInt(""+E[2],10)/100;E=parseInt(""+E[3],10)/100;l="rgb("+Jf(l,Y,E)+")";Y=nu.exec(l);if(!Y)throw new oo(4,d,l);return{red:parseInt(""+Y[1],10),green:parseInt(""+Y[2],10),blue:parseInt(""+Y[3],10)}}if(l=wC.exec(d.substring(0,50))){Y=parseInt(""+l[1],10);E=parseInt(""+l[2],10)/100;var la=parseInt(""+l[3],10)/100;Y="rgb("+Jf(Y,E,la)+")";E=
nu.exec(Y);if(!E)throw new oo(4,d,Y);return{red:parseInt(""+E[1],10),green:parseInt(""+E[2],10),blue:parseInt(""+E[3],10),alpha:1<parseFloat(""+l[4])?parseFloat(""+l[4])/100:parseFloat(""+l[4])}}throw new oo(5);}function Ne(d){d=d.toString(16);return 1===d.length?"0"+d:d}function Me(d,l,E){return ou("#"+Ne(Math.round(255*d))+Ne(Math.round(255*l))+Ne(Math.round(255*E)))}function Te(d,l,E){if("number"===typeof d&&"number"===typeof l&&"number"===typeof E)return ou("#"+Ne(d)+Ne(l)+Ne(E));if("object"===
typeof d&&void 0===l&&void 0===E)return ou("#"+Ne(d.red)+Ne(d.green)+Ne(d.blue));throw new oo(6);}function qg(d){if("object"!==typeof d)throw new oo(8);if("number"===typeof d.red&&"number"===typeof d.green&&"number"===typeof d.blue&&"number"===typeof d.alpha){if("object"===typeof d)d=1<=d.alpha?Te(d.red,d.green,d.blue):"rgba("+d.red+","+d.green+","+d.blue+","+d.alpha+")";else throw new oo(7);return d}if("number"===typeof d.red&&"number"===typeof d.green&&"number"===typeof d.blue&&("number"!==typeof d.alpha||
"undefined"===typeof d.alpha))return Te(d);if("number"===typeof d.hue&&"number"===typeof d.saturation&&"number"===typeof d.lightness&&"number"===typeof d.alpha){if("object"===typeof d)d=1<=d.alpha?Jf(d.hue,d.saturation,d.lightness,Me):"rgba("+Jf(d.hue,d.saturation,d.lightness)+","+d.alpha+")";else throw new oo(2);return d}if("number"===typeof d.hue&&"number"===typeof d.saturation&&"number"===typeof d.lightness&&("number"!==typeof d.alpha||"undefined"===typeof d.alpha)){if("object"===typeof d)d=Jf(d.hue,
d.saturation,d.lightness,Me);else throw new oo(1);return d}throw new oo(8);}function Pf(d,l,E){return function(){var Y=E.concat(Array.prototype.slice.call(arguments));return Y.length>=l?d.apply(this,Y):Pf(d,l,Y)}}function yi(d,l){if("transparent"===l)return l;l=ue(l);var E=l.red/255,Y=l.green/255,la=l.blue/255,sa=Math.max(E,Y,la),Ea=Math.min(E,Y,la),Ua=(sa+Ea)/2;if(sa===Ea)l=void 0!==l.alpha?{hue:0,saturation:0,lightness:Ua,alpha:l.alpha}:{hue:0,saturation:0,lightness:Ua};else{var jb=sa-Ea;Ea=.5<
Ua?jb/(2-sa-Ea):jb/(sa+Ea);switch(sa){case E:E=(Y-la)/jb+(Y<la?6:0);break;case Y:E=(la-E)/jb+2;break;default:E=(E-Y)/jb+4}E*=60;l=void 0!==l.alpha?{hue:E,saturation:Ea,lightness:Ua,alpha:l.alpha}:{hue:E,saturation:Ea,lightness:Ua}}Ua=Uf;d=l.lightness-parseFloat(d);return qg(Ua({},l,{lightness:Math.max(0,Math.min(1,d))}))}function Mf(){var d;null==(d=document.getElementById("__colorMeasure"))?void 0:d.remove();d=document.createElement("div");d.id="__colorMeasure";d.tabIndex=-1;document.body.appendChild(d);
return d}function fg(d){var l,E,Y;if(null==d?0:d.toString().startsWith("var")){const la=null==(l=/var\((.*)\)/.exec(d.toString()))?void 0:l[1];if(la){const [sa,Ea]=la.split(",").map(Ua=>Ua.trim());return null!=(Y=null!=(E=getComputedStyle(Mf()).getPropertyValue(sa).trim())?E:Ea)?Y:"#000"}}return d}function Gg(d,l){var E;void 0!==l.strokeWidth&&(l.strokeWidth=Math.max(l.strokeWidth,1));void 0!==l.opacity&&(l.opacity=Math.min(1,Math.max(l.opacity,0)));let Y=null!=(E=l.fill)?E:d.props.fill;void 0!==
Y&&!l.noFill&&UB.includes(d.props.type)&&(Y=fg(Y),d=xC(.3,Y),l.stroke=d);return l}function Kg({strokeWidth:d,size:l,mode:E}){return"svg"===E?(0,wb.jsx)("rect",{className:"tl-binding-indicator",x:d,y:d,rx:2,ry:2,width:Math.max(0,l[0]-2*d),height:Math.max(0,l[1]-2*d),strokeWidth:4*d}):(0,wb.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function Lg(){const d=qf();return"panning"===d.inputs.state||
"pinching"===d.inputs.state}function bh({left:d,middle:l,right:E,stroke:Y,strokeWidth:la}){return(0,wb.jsxs)("g",{children:[(0,wb.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${d} L ${l} ${E}`}),(0,wb.jsx)("path",{d:`M ${d} L ${l} ${E}`,fill:"none",stroke:Y,strokeWidth:la,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function tg(d,l,E){l=a(d,l,d,E).points;if(!l)return console.warn("Could not find an intersection for the arrow head."),{left:d,right:d};l=(E=l[0])?$d.rotWith(E,
d,Math.PI/6):d;d=E?$d.rotWith(E,d,-Math.PI/6):d;return{left:l,right:d}}function gg(d,l,E){const {left:Y,right:la}=tg(d,l,E);return`M ${Y} L ${d} ${la}`}function Yg(d,l,E,Y,la){d=d.strokeWidth;var sa=$d.dist(l,E);d=Math.min(sa/3,16*d);sa=[];sa.push(`M ${l} L ${E}`);Y&&sa.push(gg(l,E,d));la&&sa.push(gg(E,l,d));return sa.join(" ")}function Hf({id:d,bounds:l,labelSize:E,offset:Y,scale:la=1}){return(0,wb.jsx)("defs",{children:(0,wb.jsxs)("mask",{id:d+"_clip",children:[(0,wb.jsx)("rect",{x:-100,y:-100,
width:l.width+200,height:l.height+200,fill:"white"}),(0,wb.jsx)("rect",{x:l.width/2-E[0]/2*la+((null==Y?void 0:Y[0])||0),y:l.height/2-E[1]/2*la+((null==Y?void 0:Y[1])||0),width:E[0]*la,height:E[1]*la,rx:4*la,ry:4*la,fill:"black"})]})})}function vi(d,l,E,Y=la=>la){return d*Y(.5-l*(.5-E))}function rh(d){return[-d[0],-d[1]]}function jh(d,l){return[d[0]+l[0],d[1]+l[1]]}function ci(d,l){return[d[0]-l[0],d[1]-l[1]]}function uh(d,l){return[d[0]*l,d[1]*l]}function sj(d){return[d[1],-d[0]]}function dl(d,l){return d[0]===
l[0]&&d[1]===l[1]}function rj(d){return d[0]*d[0]+d[1]*d[1]}function Cl(d){var l=Math.hypot(d[0],d[1]);return[d[0]/l,d[1]/l]}function am(d,l){return Math.hypot(d[1]-l[1],d[0]-l[0])}function bg(d,l,E){let Y=Math.sin(E);E=Math.cos(E);let la=d[0]-l[0];d=d[1]-l[1];return[la*E-d*Y+l[0],la*Y+d*E+l[1]]}function Rl(d,l,E){return jh(d,uh(ci(l,d),E))}function hm(d,l,E){return jh(d,uh(l,E))}function Dl(d,l={}){let {size:E=16,smoothing:Y=.5,thinning:la=.5,simulatePressure:sa=!0,easing:Ea=vd=>vd,start:Ua={},end:jb=
{},last:sb=!1}=l,{cap:Ub=!0,easing:gc=vd=>vd*(2-vd)}=Ua,{cap:yc=!0,easing:Qc=vd=>--vd*vd*vd+1}=jb;if(0===d.length||0>=E)return[];var Jc=d[d.length-1].runningLength;let kd=!1===Ua.taper?0:!0===Ua.taper?Math.max(E,Jc):Ua.taper,ad=!1===jb.taper?0:!0===jb.taper?Math.max(E,Jc):jb.taper;var vc=Math.pow(E*Y,2);l=[];let md=[];var Ad=d.slice(0,10).reduce((vd,Td)=>{var Vd=Td.pressure;sa&&(Td=Lq(1,Td.distance/E),Vd=Lq(1,1-Td),Vd=Lq(1,vd+.275*(Vd-vd)*Td));return(vd+Vd)/2},d[0].pressure),qd=vi(E,la,d[d.length-
1].pressure,Ea),Bd;let Fe=d[0].vector;var ce=d[0].point;let Ge=ce;var Bf=ce;let bf=Ge;var ze=!1;for(var Ae=0;Ae<d.length;Ae++){var {pressure:be}=d[Ae];let {point:vd,vector:Td,distance:Vd,runningLength:Re}=d[Ae];if(Ae<d.length-1&&3>Jc-Re)continue;la?(sa&&(qd=Lq(1,Vd/E),be=Lq(1,1-qd),be=Lq(1,Ad+.275*(be-Ad)*qd)),qd=vi(E,la,be,Ea)):qd=E/2;void 0===Bd&&(Bd=qd);var rd=Re<kd?gc(Re/kd):1,Qd=Jc-Re<ad?Qc((Jc-Re)/ad):1;qd=Math.max(.01,qd*Math.min(rd,Qd));Qd=(Ae<d.length-1?d[Ae+1]:d[Ae]).vector;let $e=Ae<d.length-
1?Td[0]*Qd[0]+Td[1]*Qd[1]:1;rd=null!==$e&&0>$e;if(0>Td[0]*Fe[0]+Td[1]*Fe[1]&&!ze||rd){ce=uh(sj(Fe),qd);for(let af=1/13,Ag=0;1>=Ag;Ag+=af)Bf=bg(ci(vd,ce),vd,Mr*Ag),l.push(Bf),bf=bg(jh(vd,ce),vd,Mr*-Ag),md.push(bf);ce=Bf;Ge=bf;rd&&(ze=!0)}else(ze=!1,Ae===d.length-1)?(be=uh(sj(Td),qd),l.push(ci(vd,be)),md.push(jh(vd,be))):(Ad=uh(sj(Rl(Qd,Td,$e)),qd),Bf=ci(vd,Ad),(1>=Ae||rj(ci(ce,Bf))>vc)&&(l.push(Bf),ce=Bf),bf=jh(vd,Ad),(1>=Ae||rj(ci(Ge,bf))>vc)&&(md.push(bf),Ge=bf),Ad=be,Fe=Td)}Jc=d[0].point.slice(0,
2);vc=1<d.length?d[d.length-1].point.slice(0,2):jh(d[0].point,[1,1]);Bf=[];ze=[];if(1===d.length){if(!kd&&!ad||sb){d=hm(Jc,Cl(sj(ci(Jc,vc))),-(Bd||qd));l=[];for(let vd=1/13,Td=vd;1>=Td;Td+=vd)l.push(bg(d,Jc,2*Mr*Td));return l}}else{if(!(kd||ad&&1===d.length))if(Ub)for(let vd=1/13,Td=vd;1>=Td;Td+=vd)Bd=bg(md[0],Jc,Mr*Td),Bf.push(Bd);else Ae=ci(l[0],md[0]),Bd=uh(Ae,.5),Ae=uh(Ae,.51),Bf.push(ci(Jc,Bd),ci(Jc,Ae),jh(Jc,Ae),jh(Jc,Bd));Bd=sj(rh(d[d.length-1].vector));if(ad||kd&&1===d.length)ze.push(vc);
else if(yc){d=hm(vc,Bd,qd);for(let vd=1/29,Td=vd;1>Td;Td+=vd)ze.push(bg(d,vc,3*Mr*Td))}else ze.push(jh(vc,uh(Bd,qd)),jh(vc,uh(Bd,.99*qd)),ci(vc,uh(Bd,.99*qd)),ci(vc,uh(Bd,qd)))}return l.concat(ze,md.reverse(),Bf)}function Kk(d,l={}){var E;let {streamline:Y=.5,size:la=16,last:sa=!1}=l;if(0===d.length)return[];l=.15+.85*(1-Y);d=Array.isArray(d[0])?d:d.map(({x:gc,y:yc,pressure:Qc=.5})=>[gc,yc,Qc]);if(2===d.length){var Ea=d[1];d=d.slice(0,-1);for(var Ua=1;5>Ua;Ua++)d.push(Rl(d[0],Ea,Ua/4))}1===d.length&&
(d=[...d,[...jh(d[0],[1,1]),...d[0].slice(2)]]);Ea=[{point:[d[0][0],d[0][1]],pressure:0<=d[0][2]?d[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ua=!1;let jb=0,sb=Ea[0],Ub=d.length-1;for(let gc=1;gc<d.length;gc++){let yc=sa&&gc===Ub?d[gc].slice(0,2):Rl(sb.point,d[gc],l);if(dl(sb.point,yc))continue;let Qc=am(yc,sb.point);if(jb+=Qc,gc<Ub&&!Ua){if(jb<la)continue;Ua=!0}sb={point:yc,pressure:0<=d[gc][2]?d[gc][2]:.5,vector:Cl(ci(sb.point,yc)),distance:Qc,runningLength:jb};Ea.push(sb)}return Ea[0].vector=
(null==(E=Ea[1])?void 0:E.vector)||[0,0],Ea}function Bj(d){return(new zu(d)).exportAsSVG()}function lj(d){return(new zu(d)).generatePreviewJsx()}function Fh(d){d=d.match(/\.[0-9a-z]+$/i);if(!d)return"unknown";d=d[0].toLowerCase();return KC.includes(d)?"image":LC.includes(d)?"video":"unknown"}function gi(...d){return(...l)=>Rf(this,null,function*(){for(const E of d){const Y=yield E(...l);if(Y&&0<Y.length)return Y}return null})}function pl(d,l){return Rf(this,null,function*(){return d.types.includes(l)?
d instanceof DataTransfer?d.getData(l):yield(yield d.getType(l)).text():null})}function El(){const {handlers:d}=ox.useContext(Go);return ox.useCallback((l,E)=>Rf(this,[l,E],function*(Y,{point:la,shiftKey:sa,dataTransfer:Ea,fromDrop:Ua}){function jb(ze,Ae){return Rf(this,null,function*(){const be=Object.values(Y.assets).find(rd=>rd.src===ze);return be?be:{id:Pg(),type:Ae?"video":"image",src:ze,size:yield ve(d.makeAssetUrl(ze),Ae)}})}function sb(ze){return Rf(this,null,function*(){const Ae=ze.filter(be=>
"unknown"!==Fh(be.name)).map(be=>Rf(this,null,function*(){try{const rd=yield d.saveAsset(be);return yield jb(rd,"video"===Fh(be.name))}catch(rd){console.error(rd)}return null}));return(yield Promise.all(Ae)).filter(zg)})}function Ub(ze){return Rf(this,null,function*(){return gi(yc,Qc,kd,Jc)(ze)})}function gc(){return Rf(this,null,function*(){const ze=yield navigator.clipboard.read(),Ae=gi(Qc,kd);return(yield Promise.all(ze.map(be=>Ae(be)))).flat().filter(zg)})}function yc(ze){return Rf(this,null,
function*(){var Ae=Array.from(ze.files);return 0<Ae.length?(Fe=Ae=yield sb(Ae),Ae.map((be,rd)=>{const Qd=Id(me({},"video"===be.type?Ts.defaultProps:Ss.defaultProps),{assetId:be.id,opacity:1});be.size&&Object.assign(Qd,{point:[la[0]-be.size[0]/4+16*rd,la[1]-be.size[1]/4+16*rd],size:$d.div(be.size,2)});return Qd})):null})}function Qc(ze){return Rf(this,null,function*(){if(ze.types.includes("text/plain")&&(sa||Ua))return null;const Ae=yield pl(ze,"text/html");return Ae?[Id(me({},gp.defaultProps),{html:Ae,
point:[la[0],la[1]]})]:null})}function Jc(ze){return Rf(this,null,function*(){var Ae,be,rd,Qd,vd,Td,Vd=ze.getData("block-uuid");if(Vd){Vd=Vd.trim();const Re=null==(rd=null==(be=null==(Ae=window.logseq)?void 0:Ae.api)?void 0:be.get_selected_blocks)?void 0:rd.call(be);Ae=Re&&1<(null==Re?void 0:Re.length)?Re.map($e=>$e.uuid):[Vd];null==(Td=null==(vd=null==(Qd=window.logseq)?void 0:Qd.api)?void 0:vd.set_blocks_id)?void 0:Td.call(vd,Ae);Qd=Ae.map($e=>Ad(`((${$e}))`));return(yield Promise.all(Qd)).flat().filter(zg).map(($e,
af)=>Id(me({},$e),{point:[la[0]+(sm.defaultProps.size[0]+16)*af,la[1]]}))}return null})}function kd(ze){return Rf(this,null,function*(){var Ae=yield pl(ze,"text/plain");return Ae?(Ae=Ae.trim(),gi(vc,md,ad,Ad)(Ae)):null})}function ad(ze){try{var Ae=JSON.parse(ze)}catch(be){Ae=null}ze=Ae;try{if("logseq/whiteboard-shapes"===(null==ze?void 0:ze.type)){const be=ze.shapes;ce=ze.assets;const rd=gf.getCommonBounds(be.map(vd=>{var Td,Vd,Re,$e,af,Ag,Nf,Ph,fi,kk,tm,Zl,qo,Nq,Dx,Ex;return{minX:null!=(Vd=null==
(Td=vd.point)?void 0:Td[0])?Vd:la[0],minY:null!=($e=null==(Re=vd.point)?void 0:Re[1])?$e:la[1],width:null!=(Ag=null==(af=vd.size)?void 0:af[0])?Ag:4,height:null!=(Ph=null==(Nf=vd.size)?void 0:Nf[1])?Ph:4,maxX:(null!=(kk=null==(fi=vd.point)?void 0:fi[0])?kk:la[0])+(null!=(Zl=null==(tm=vd.size)?void 0:tm[0])?Zl:4),maxY:(null!=(Nq=null==(qo=vd.point)?void 0:qo[1])?Nq:la[1])+(null!=(Ex=null==(Dx=vd.size)?void 0:Dx[1])?Ex:4)}})),Qd=be.map(vd=>Id(me({},vd),{id:Pg(),point:[la[0]+vd.point[0]-rd.minX,la[1]+
vd.point[1]-rd.minY]}));Qd.flatMap(vd=>{var Td;return Object.values(null!=(Td=vd.handles)?Td:{})}).forEach(vd=>{if(vd.bindingId){var Td=Y.currentPage.bindings[vd.bindingId];if(Td){var Vd=be.findIndex($e=>$e.id===Td.fromId);const Re=be.findIndex($e=>$e.id===Td.toId);Td&&-1!==Vd&&-1!==Re?(Vd=Id(me({},Td),{id:Pg(),fromId:Qd[Vd].id,toId:Qd[Re].id}),Ge.push(Vd),vd.bindingId=Vd.id):vd.bindingId=void 0}else console.warn("binding not found",vd.bindingId)}});return Qd}}catch(be){console.error(be)}return null}
function vc(ze){return Rf(this,null,function*(){try{new URL(ze);var Ae=!0}catch(be){Ae=!1}return Ae?/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/.test(ze)?[Id(me({},cq.defaultProps),{url:ze,point:[la[0],la[1]]})]:[Id(me({},$p.defaultProps),{url:ze,point:[la[0],la[1]]})]:null})}function md(ze){return ze.startsWith("\x3ciframe")?[Id(me({},gp.defaultProps),{html:ze,point:[la[0],la[1]]})]:null}function Ad(ze){return Rf(this,null,
function*(){if(/^\(\(.*\)\)$/.test(ze)&&40===ze.length){var Ae=ze.slice(2,-2);if(ag(Ae))return[Id(me({},sm.defaultProps),{point:[la[0],la[1]],size:[400,0],pageId:Ae,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(ze))return Ae=ze.slice(2,-2),[Id(me({},sm.defaultProps),{point:[la[0],la[1]],size:[400,0],pageId:Ae,blockType:"P"})];return(Ae=null==d?void 0:d.addNewBlock(ze))?[Id(me({},sm.defaultProps),{size:[400,0],point:[la[0],la[1]],pageId:Ae,blockType:"B",compact:!0})]:null})}var qd,Bd;let Fe=[],ce=[];
const Ge=[];Y.cursors.setCursor("progress");let Bf=[];try{Ea?Bf.push(...(null!=(qd=yield Ub(Ea))?qd:[])):Bf.push(...(null!=(Bd=yield gc())?Bd:[]))}catch(ze){console.error(ze)}const bf=Bf.map(ze=>Id(me({},ze),{parentId:Y.currentPageId,id:ag(ze.id)?ze.id:Pg()}));Y.wrapUpdate(()=>{var ze=[...Fe,...ce];0<ze.length&&Y.createAssets(ze);0<bf.length&&Y.createShapes(bf);if(1===Y.selectedShapesArray.length&&1===bf.length){ze=Y.selectedShapesArray[0];const Ae=Y.getShapeById(bf[0].id);Y.createNewLineBinding(ze,
Ae)}Y.currentPage.updateBindings(Object.fromEntries(Ge.map(Ae=>[Ae.id,Ae])));Y.setSelectedShapes(bf.map(Ae=>Ae.id));Y.selectedTool.transition("idle");Y.cursors.setCursor("default")})}),[])}function Ci(){const d=El();return pC.useCallback((l,E)=>Rf(this,[l,E],function*(Y,{dataTransfer:la,point:sa}){d(Y,{point:sa,shiftKey:!1,dataTransfer:la,fromDrop:!0})}),[])}function cl(){return MC.default.useCallback(d=>Rf(this,null,function*(){d.selectTool("logseq-portal").selectedTool.transition("creating")}),
[])}var Ce=Object.create,tf=Object.defineProperty,Oe=Object.defineProperties,cf=Object.getOwnPropertyDescriptor,cj=Object.getOwnPropertyDescriptors,Wg=Object.getOwnPropertyNames,wi=Object.getOwnPropertySymbols,wh=Object.getPrototypeOf,Fk=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,Se=(d,l,E)=>l in d?tf(d,l,{enumerable:!0,configurable:!0,writable:!0,value:E}):d[l]=E,me=(d,l)=>{for(var E in l||={})Fk.call(l,E)&&Se(d,E,l[E]);if(wi)for(E of wi(l))Ee.call(l,E)&&Se(d,E,l[E]);
return d},Id=(d,l)=>Oe(d,cj(l)),Wf=(d,l)=>{var E={},Y;for(Y in d)Fk.call(d,Y)&&0>l.indexOf(Y)&&(E[Y]=d[Y]);if(null!=d&&wi)for(Y of wi(d))0>l.indexOf(Y)&&Ee.call(d,Y)&&(E[Y]=d[Y]);return E},lk=(d,l)=>function(){return l||(0,d[Wg(d)[0]])((l={exports:{}}).exports,l),l.exports},Sk=(d,l,E,Y)=>{if(l&&"object"===typeof l||"function"===typeof l)for(let la of Wg(l))Fk.call(d,la)||la===E||tf(d,la,{get:()=>l[la],enumerable:!(Y=cf(l,la))||Y.enumerable});return d},ff=(d,l,E)=>(E=null!=d?Ce(wh(d)):{},Sk(!l&&d&&
d.__esModule?E:tf(E,"default",{value:d,enumerable:!0}),d)),Xd=(d,l,E,Y)=>{for(var la=1<Y?void 0:Y?cf(l,E):l,sa=d.length-1,Ea;0<=sa;sa--)if(Ea=d[sa])la=(Y?Ea(l,E,la):Ea(la))||la;Y&&la&&tf(l,E,la);return la},$a=(d,l,E)=>{Se(d,"symbol"!==typeof l?l+"":l,E);return E},Rf=(d,l,E)=>new Promise((Y,la)=>{var sa=jb=>{try{Ua(E.next(jb))}catch(sb){la(sb)}},Ea=jb=>{try{Ua(E.throw(jb))}catch(sb){la(sb)}},Ua=jb=>jb.done?Y(jb.value):Promise.resolve(jb.value).then(sa,Ea);Ua((E=E.apply(d,l)).next())}),zl=lk({["../../node_modules/mousetrap/mousetrap.js"](d,
l){(function(E,Y,la){function sa(ad,vc,md){ad.addEventListener?ad.addEventListener(vc,md,!1):ad.attachEvent("on"+vc,md)}function Ea(ad){if("keypress"==ad.type){var vc=String.fromCharCode(ad.which);ad.shiftKey||(vc=vc.toLowerCase());return vc}return gc[ad.which]?gc[ad.which]:yc[ad.which]?yc[ad.which]:String.fromCharCode(ad.which).toLowerCase()}function Ua(ad){return"shift"==ad||"ctrl"==ad||"alt"==ad||"meta"==ad}function jb(ad,vc){var md,Ad=[];"+"===ad?ad=["+"]:(ad=ad.replace(/\+{2}/g,"+plus"),ad=ad.split("+"));
for(md=0;md<ad.length;++md){var qd=ad[md];Jc[qd]&&(qd=Jc[qd]);vc&&"keypress"!=vc&&Qc[qd]&&(qd=Qc[qd],Ad.push("shift"));Ua(qd)&&Ad.push(qd)}ad=qd;if(!vc){if(!kd){kd={};for(var Bd in gc)95<Bd&&112>Bd||gc.hasOwnProperty(Bd)&&(kd[gc[Bd]]=Bd)}vc=kd[ad]?"keydown":"keypress"}"keypress"==vc&&Ad.length&&(vc="keydown");return{key:qd,modifiers:Ad,action:vc}}function sb(ad,vc){return null===ad||ad===Y?!1:ad===vc?!0:sb(ad.parentNode,vc)}function Ub(ad){function vc(be){be=be||{};var rd=!1,Qd;for(Qd in Ge)be[Qd]?
rd=!0:Ge[Qd]=0;rd||(Ae=!1)}function md(be,rd,Qd,vd,Td,Vd){var Re,$e=[],af=Qd.type;if(!ce._callbacks[be])return[];"keyup"==af&&Ua(be)&&(rd=[be]);for(Re=0;Re<ce._callbacks[be].length;++Re){var Ag=ce._callbacks[be][Re];if((vd||!Ag.seq||Ge[Ag.seq]==Ag.level)&&af==Ag.action){var Nf;(Nf="keypress"==af&&!Qd.metaKey&&!Qd.ctrlKey)||(Nf=Ag.modifiers,Nf=rd.sort().join(",")===Nf.sort().join(","));Nf&&(Nf=vd&&Ag.seq==vd&&Ag.level==Vd,(!vd&&Ag.combo==Td||Nf)&&ce._callbacks[be].splice(Re,1),$e.push(Ag))}}return $e}
function Ad(be,rd,Qd,vd){ce.stopCallback(rd,rd.target||rd.srcElement,Qd,vd)||!1!==be(rd,Qd)||(rd.preventDefault?rd.preventDefault():rd.returnValue=!1,rd.stopPropagation?rd.stopPropagation():rd.cancelBubble=!0)}function qd(be){"number"!==typeof be.which&&(be.which=be.keyCode);var rd=Ea(be);if(rd)if("keyup"==be.type&&bf===rd)bf=!1;else{var Qd=ce,vd=Qd.handleKey,Td=[];be.shiftKey&&Td.push("shift");be.altKey&&Td.push("alt");be.ctrlKey&&Td.push("ctrl");be.metaKey&&Td.push("meta");vd.call(Qd,rd,Td,be)}}
function Bd(be,rd,Qd,vd){function Td(af){return function(){Ae=af;++Ge[be];clearTimeout(Bf);Bf=setTimeout(vc,1E3)}}function Vd(af){Ad(Qd,af,be);"keyup"!==vd&&(bf=Ea(af));setTimeout(vc,10)}for(var Re=Ge[be]=0;Re<rd.length;++Re){var $e=Re+1===rd.length?Vd:Td(vd||jb(rd[Re+1]).action);Fe(rd[Re],$e,vd,be,Re)}}function Fe(be,rd,Qd,vd,Td){ce._directMap[be+":"+Qd]=rd;be=be.replace(/\s+/g," ");var Vd=be.split(" ");1<Vd.length?Bd(be,Vd,rd,Qd):(Qd=jb(be,Qd),ce._callbacks[Qd.key]=ce._callbacks[Qd.key]||[],md(Qd.key,
Qd.modifiers,{type:Qd.action},vd,be,Td),ce._callbacks[Qd.key][vd?"unshift":"push"]({callback:rd,modifiers:Qd.modifiers,action:Qd.action,seq:vd,level:Td,combo:be}))}var ce=this;ad=ad||Y;if(!(ce instanceof Ub))return new Ub(ad);ce.target=ad;ce._callbacks={};ce._directMap={};var Ge={},Bf,bf=!1,ze=!1,Ae=!1;ce._handleKey=function(be,rd,Qd){var vd=md(be,rd,Qd),Td;rd={};var Vd=0,Re=!1;for(Td=0;Td<vd.length;++Td)vd[Td].seq&&(Vd=Math.max(Vd,vd[Td].level));for(Td=0;Td<vd.length;++Td)vd[Td].seq?vd[Td].level==
Vd&&(Re=!0,rd[vd[Td].seq]=1,Ad(vd[Td].callback,Qd,vd[Td].combo,vd[Td].seq)):Re||Ad(vd[Td].callback,Qd,vd[Td].combo);vd="keypress"==Qd.type&&ze;Qd.type!=Ae||Ua(be)||vd||vc(rd);ze=Re&&"keydown"==Qd.type};ce._bindMultiple=function(be,rd,Qd){for(var vd=0;vd<be.length;++vd)Fe(be[vd],rd,Qd)};sa(ad,"keypress",qd);sa(ad,"keydown",qd);sa(ad,"keyup",qd)}if(E){var gc={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",
37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},yc={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Qc={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","\x26":"7","*":"8","(":"9",")":"0",_:"-","+":"\x3d",":":";",'"':"'","\x3c":",","\x3e":".","?":"/","|":"\\"},Jc={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?
"meta":"ctrl"},kd;for(la=1;20>la;++la)gc[111+la]="f"+la;for(la=0;9>=la;++la)gc[la+96]=la.toString();Ub.prototype.bind=function(ad,vc,md){ad=ad instanceof Array?ad:[ad];this._bindMultiple.call(this,ad,vc,md);return this};Ub.prototype.unbind=function(ad,vc){return this.bind.call(this,ad,function(){},vc)};Ub.prototype.trigger=function(ad,vc){if(this._directMap[ad+":"+vc])this._directMap[ad+":"+vc]({},ad);return this};Ub.prototype.reset=function(){this._callbacks={};this._directMap={};return this};Ub.prototype.stopCallback=
function(ad,vc){if(-1<(" "+vc.className+" ").indexOf(" mousetrap ")||sb(vc,this.target))return!1;if("composedPath"in ad&&"function"===typeof ad.composedPath){var md=ad.composedPath()[0];md!==ad.target&&(vc=md)}return"INPUT"==vc.tagName||"SELECT"==vc.tagName||"TEXTAREA"==vc.tagName||vc.isContentEditable};Ub.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};Ub.addKeycodes=function(ad){for(var vc in ad)ad.hasOwnProperty(vc)&&(gc[vc]=ad[vc]);kd=null};Ub.init=function(){var ad=
Ub(Y),vc;for(vc in ad)"_"!==vc.charAt(0)&&(Ub[vc]=function(md){return function(){return ad[md].apply(ad,arguments)}}(vc))};Ub.init();E.Mousetrap=Ub;"undefined"!==typeof l&&l.exports&&(l.exports=Ub);"function"===typeof define&&define.amd&&define(function(){return Ub})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}),Fl=lk({["../../node_modules/rbush/rbush.min.js"](d,l){!function(E,Y){"object"==typeof d&&"undefined"!=typeof l?l.exports=Y():"function"==typeof define&&
define.amd?define(Y):(E=E||self).RBush=Y()}(d,function(){function E(vc,md,Ad,qd,Bd){!function Ae(ce,Ge,Bf,bf,ze){for(;bf>Bf;){if(600<bf-Bf){var be=bf-Bf+1,rd=Ge-Bf+1,Qd=Math.log(be),vd=.5*Math.exp(2*Qd/3);Qd=.5*Math.sqrt(Qd*vd*(be-vd)/be)*(0>rd-be/2?-1:1);Ae(ce,Ge,Math.max(Bf,Math.floor(Ge-rd*vd/be+Qd)),Math.min(bf,Math.floor(Ge+(be-rd)*vd/be+Qd)),ze)}be=ce[Ge];rd=Bf;vd=bf;Y(ce,Bf,Ge);for(0<ze(ce[bf],be)&&Y(ce,Bf,bf);rd<vd;){Y(ce,rd,vd);rd++;for(vd--;0>ze(ce[rd],be);)rd++;for(;0<ze(ce[vd],be);)vd--}0===
ze(ce[Bf],be)?Y(ce,Bf,vd):Y(ce,++vd,bf);vd<=Ge&&(Bf=vd+1);Ge<=vd&&(bf=vd-1)}}(vc,md,Ad||0,qd||vc.length-1,Bd||la)}function Y(vc,md,Ad){var qd=vc[md];vc[md]=vc[Ad];vc[Ad]=qd}function la(vc,md){return vc<md?-1:vc>md?1:0}function sa(vc,md){Ea(vc,0,vc.children.length,md,vc)}function Ea(vc,md,Ad,qd,Bd){Bd||=Jc(null);Bd.minX=1/0;Bd.minY=1/0;Bd.maxX=-1/0;for(Bd.maxY=-1/0;md<Ad;md++){var Fe=vc.children[md];Ua(Bd,vc.leaf?qd(Fe):Fe)}return Bd}function Ua(vc,md){return vc.minX=Math.min(vc.minX,md.minX),vc.minY=
Math.min(vc.minY,md.minY),vc.maxX=Math.max(vc.maxX,md.maxX),vc.maxY=Math.max(vc.maxY,md.maxY),vc}function jb(vc,md){return vc.minX-md.minX}function sb(vc,md){return vc.minY-md.minY}function Ub(vc){return(vc.maxX-vc.minX)*(vc.maxY-vc.minY)}function gc(vc){return vc.maxX-vc.minX+(vc.maxY-vc.minY)}function yc(vc,md){return vc.minX<=md.minX&&vc.minY<=md.minY&&md.maxX<=vc.maxX&&md.maxY<=vc.maxY}function Qc(vc,md){return md.minX<=vc.maxX&&md.minY<=vc.maxY&&md.maxX>=vc.minX&&md.maxY>=vc.minY}function Jc(vc){return{children:vc,
height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function kd(vc,md,Ad,qd,Bd){for(var Fe=[md,Ad];Fe.length;)if(!((Ad=Fe.pop())-(md=Fe.pop())<=qd)){var ce=md+Math.ceil((Ad-md)/qd/2)*qd;E(vc,ce,md,Ad,Bd);Fe.push(md,ce,ce,Ad)}}var ad=function(vc){void 0===vc&&(vc=9);this._maxEntries=Math.max(4,vc);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return ad.prototype.all=function(){return this._all(this.data,[])},ad.prototype.search=function(vc){var md=this.data,Ad=[];if(!Qc(vc,
md))return Ad;for(var qd=this.toBBox,Bd=[];md;){for(var Fe=0;Fe<md.children.length;Fe++){var ce=md.children[Fe],Ge=md.leaf?qd(ce):ce;Qc(vc,Ge)&&(md.leaf?Ad.push(ce):yc(vc,Ge)?this._all(ce,Ad):Bd.push(ce))}md=Bd.pop()}return Ad},ad.prototype.collides=function(vc){var md=this.data;if(!Qc(vc,md))return!1;for(var Ad=[];md;){for(var qd=0;qd<md.children.length;qd++){var Bd=md.children[qd],Fe=md.leaf?this.toBBox(Bd):Bd;if(Qc(vc,Fe)){if(md.leaf||yc(vc,Fe))return!0;Ad.push(Bd)}}md=Ad.pop()}return!1},ad.prototype.load=
function(vc){if(!vc||!vc.length)return this;if(vc.length<this._minEntries){for(var md=0;md<vc.length;md++)this.insert(vc[md]);return this}vc=this._build(vc.slice(),0,vc.length-1,0);this.data.children.length?this.data.height===vc.height?this._splitRoot(this.data,vc):(this.data.height<vc.height&&(md=this.data,this.data=vc,vc=md),this._insert(vc,this.data.height-vc.height-1,!0)):this.data=vc;return this},ad.prototype.insert=function(vc){return vc&&this._insert(vc,this.data.height-1),this},ad.prototype.clear=
function(){return this.data=Jc([]),this},ad.prototype.remove=function(vc,md){if(!vc)return this;for(var Ad,qd,Bd,Fe=this.data,ce=this.toBBox(vc),Ge=[],Bf=[];Fe||Ge.length;){if(Fe||(Fe=Ge.pop(),qd=Ge[Ge.length-1],Ad=Bf.pop(),Bd=!0),Fe.leaf){a:{var bf=vc;var ze=Fe.children,Ae=md;if(Ae){for(var be=0;be<ze.length;be++)if(Ae(bf,ze[be])){bf=be;break a}bf=-1}else bf=ze.indexOf(bf)}if(-1!==bf)return Fe.children.splice(bf,1),Ge.push(Fe),this._condense(Ge),this}Bd||Fe.leaf||!yc(Fe,ce)?qd?(Ad++,Fe=qd.children[Ad],
Bd=!1):Fe=null:(Ge.push(Fe),Bf.push(Ad),Ad=0,qd=Fe,Fe=Fe.children[0])}return this},ad.prototype.toBBox=function(vc){return vc},ad.prototype.compareMinX=function(vc,md){return vc.minX-md.minX},ad.prototype.compareMinY=function(vc,md){return vc.minY-md.minY},ad.prototype.toJSON=function(){return this.data},ad.prototype.fromJSON=function(vc){return this.data=vc,this},ad.prototype._all=function(vc,md){for(var Ad=[];vc;)vc.leaf?md.push.apply(md,vc.children):Ad.push.apply(Ad,vc.children),vc=Ad.pop();return md},
ad.prototype._build=function(vc,md,Ad,qd){var Bd,Fe=Ad-md+1,ce=this._maxEntries;if(Fe<=ce)return sa(Bd=Jc(vc.slice(md,Ad+1)),this.toBBox),Bd;qd||(qd=Math.ceil(Math.log(Fe)/Math.log(ce)),ce=Math.ceil(Fe/Math.pow(ce,qd-1)));(Bd=Jc([])).leaf=!1;Bd.height=qd;Fe=Math.ceil(Fe/ce);ce=Fe*Math.ceil(Math.sqrt(ce));for(kd(vc,md,Ad,ce,this.compareMinX);md<=Ad;md+=ce){var Ge=Math.min(md+ce-1,Ad);kd(vc,md,Ge,Fe,this.compareMinY);for(var Bf=md;Bf<=Ge;Bf+=Fe)Bd.children.push(this._build(vc,Bf,Math.min(Bf+Fe-1,Ge),
qd-1))}return sa(Bd,this.toBBox),Bd},ad.prototype._chooseSubtree=function(vc,md,Ad,qd){for(;qd.push(md),!md.leaf&&qd.length-1!==Ad;){for(var Bd=1/0,Fe=1/0,ce=void 0,Ge=0;Ge<md.children.length;Ge++){var Bf=md.children[Ge],bf=Ub(Bf),ze=(Ae=vc,be=Bf,(Math.max(be.maxX,Ae.maxX)-Math.min(be.minX,Ae.minX))*(Math.max(be.maxY,Ae.maxY)-Math.min(be.minY,Ae.minY))-bf);ze<Fe?(Fe=ze,Bd=bf<Bd?bf:Bd,ce=Bf):ze===Fe&&bf<Bd&&(Bd=bf,ce=Bf)}md=ce||md.children[0]}var Ae,be;return md},ad.prototype._insert=function(vc,md,
Ad){Ad=Ad?vc:this.toBBox(vc);var qd=[],Bd=this._chooseSubtree(Ad,this.data,md,qd);Bd.children.push(vc);for(Ua(Bd,Ad);0<=md&&qd[md].children.length>this._maxEntries;)this._split(qd,md),md--;this._adjustParentBBoxes(Ad,qd,md)},ad.prototype._split=function(vc,md){var Ad=vc[md],qd=Ad.children.length,Bd=this._minEntries;this._chooseSplitAxis(Ad,Bd,qd);qd=this._chooseSplitIndex(Ad,Bd,qd);qd=Jc(Ad.children.splice(qd,Ad.children.length-qd));qd.height=Ad.height;qd.leaf=Ad.leaf;sa(Ad,this.toBBox);sa(qd,this.toBBox);
md?vc[md-1].children.push(qd):this._splitRoot(Ad,qd)},ad.prototype._splitRoot=function(vc,md){this.data=Jc([vc,md]);this.data.height=vc.height+1;this.data.leaf=!1;sa(this.data,this.toBBox)},ad.prototype._chooseSplitIndex=function(vc,md,Ad){for(var qd,Bd,Fe,ce,Ge,Bf,bf,ze=1/0,Ae=1/0,be=md;be<=Ad-md;be++){var rd=Ea(vc,0,be,this.toBBox),Qd=Ea(vc,be,Ad,this.toBBox),vd=(Bd=rd,Fe=Qd,ce=void 0,Ge=void 0,Bf=void 0,bf=void 0,ce=Math.max(Bd.minX,Fe.minX),Ge=Math.max(Bd.minY,Fe.minY),Bf=Math.min(Bd.maxX,Fe.maxX),
bf=Math.min(Bd.maxY,Fe.maxY),Math.max(0,Bf-ce)*Math.max(0,bf-Ge));rd=Ub(rd)+Ub(Qd);vd<ze?(ze=vd,qd=be,Ae=rd<Ae?rd:Ae):vd===ze&&rd<Ae&&(Ae=rd,qd=be)}return qd||Ad-md},ad.prototype._chooseSplitAxis=function(vc,md,Ad){var qd=vc.leaf?this.compareMinX:jb,Bd=vc.leaf?this.compareMinY:sb;this._allDistMargin(vc,md,Ad,qd)<this._allDistMargin(vc,md,Ad,Bd)&&vc.children.sort(qd)},ad.prototype._allDistMargin=function(vc,md,Ad,qd){vc.children.sort(qd);qd=this.toBBox;for(var Bd=Ea(vc,0,md,qd),Fe=Ea(vc,Ad-md,Ad,qd),
ce=gc(Bd)+gc(Fe),Ge=md;Ge<Ad-md;Ge++){var Bf=vc.children[Ge];Ua(Bd,vc.leaf?qd(Bf):Bf);ce+=gc(Bd)}for(Ad=Ad-md-1;Ad>=md;Ad--)Bd=vc.children[Ad],Ua(Fe,vc.leaf?qd(Bd):Bd),ce+=gc(Fe);return ce},ad.prototype._adjustParentBBoxes=function(vc,md,Ad){for(;0<=Ad;Ad--)Ua(md[Ad],vc)},ad.prototype._condense=function(vc){for(var md=vc.length-1,Ad=void 0;0<=md;md--)0===vc[md].children.length?0<md?(Ad=vc[md-1].children).splice(Ad.indexOf(vc[md]),1):this.clear():sa(vc[md],this.toBBox)},ad})}}),Qf=lk({["../../node_modules/fast-copy/dist/fast-copy.js"](d,
l){(function(E,Y){"object"===typeof d&&"undefined"!==typeof l?l.exports=Y():"function"===typeof define&&define.amd?define(Y):(E="undefined"!==typeof globalThis?globalThis:E||self,E["fast-copy"]=Y())})(d,function(){function E(ce,Ge){var Bf=!(!Ge||!Ge.isStrict),bf=Ge&&Ge.realm||Fe,ze=Bf?md:vc,Ae=function(be,rd){if(!be||"object"!==typeof be)return be;if(rd.has(be))return rd.get(be);var Qd=be.__proto__||Bd(be);Qd=Qd&&Qd.constructor;if(!Qd||Qd===bf.Object)return ze(be,bf,Ae,rd);if(qd(be)){if(Bf)return md(be,
bf,Ae,rd);var vd=new Qd;rd.set(be,vd);Qd=0;for(var Td=be.length;Qd<Td;++Qd)vd[Qd]=Ae(be[Qd],rd);return vd}if(be instanceof bf.Date)return new Qd(be.getTime());if(be instanceof bf.RegExp)return vd=new Qd(be.source,be.flags||Ad(be)),vd.lastIndex=be.lastIndex,vd;if(bf.Map&&be instanceof bf.Map)return vd=new Qd,rd.set(be,vd),be.forEach(function(Vd,Re){vd.set(Re,Ae(Vd,rd))}),vd;if(bf.Set&&be instanceof bf.Set)return vd=new Qd,rd.set(be,vd),be.forEach(function(Vd){vd.add(Ae(Vd,rd))}),vd;if(bf.Blob&&be instanceof
bf.Blob)return be.slice(0,be.size,be.type);if(bf.Buffer&&bf.Buffer.isBuffer(be))return vd=bf.Buffer.allocUnsafe?bf.Buffer.allocUnsafe(be.length):new Qd(be.length),rd.set(be,vd),be.copy(vd),vd;if(bf.ArrayBuffer){if(bf.ArrayBuffer.isView(be))return vd=new Qd(be.buffer.slice(0)),rd.set(be,vd),vd;if(be instanceof bf.ArrayBuffer)return vd=be.slice(0),rd.set(be,vd),vd}return"function"===typeof be.then||be instanceof Error||bf.WeakMap&&be instanceof bf.WeakMap||bf.WeakSet&&be instanceof bf.WeakSet?be:ze(be,
bf,Ae,rd)};return Ae(ce,kd())}var Y=Function.prototype.toString,la=Object.create,sa=Object.defineProperty,Ea=Object.getOwnPropertyDescriptor,Ua=Object.getOwnPropertyNames,jb=Object.getOwnPropertySymbols,sb=Object.getPrototypeOf,Ub=Object.prototype,gc=Ub.hasOwnProperty,yc=Ub.propertyIsEnumerable,Qc="function"===typeof jb,Jc="function"===typeof WeakMap,kd=function(){if(Jc)return function(){return new WeakMap};var ce=function(){function Ge(){this._keys=[];this._values=[]}Ge.prototype.has=function(Bf){return!!~this._keys.indexOf(Bf)};
Ge.prototype.get=function(Bf){return this._values[this._keys.indexOf(Bf)]};Ge.prototype.set=function(Bf,bf){this._keys.push(Bf);this._values.push(bf)};return Ge}();return function(){return new ce}}(),ad=function(ce,Ge){ce=ce.__proto__||sb(ce);if(!ce)return la(null);var Bf=ce.constructor;if(Bf===Ge.Object)return ce===Ge.Object.prototype?{}:la(ce);if(~Y.call(Bf).indexOf("[native code]"))try{return new Bf}catch(bf){}return la(ce)},vc=function(ce,Ge,Bf,bf){Ge=ad(ce,Ge);bf.set(ce,Ge);for(var ze in ce)gc.call(ce,
ze)&&(Ge[ze]=Bf(ce[ze],bf));if(Qc){ze=jb(ce);for(var Ae=0,be=ze.length,rd;Ae<be;++Ae)rd=ze[Ae],yc.call(ce,rd)&&(Ge[rd]=Bf(ce[rd],bf))}return Ge},md=function(ce,Ge,Bf,bf){Ge=ad(ce,Ge);bf.set(ce,Ge);for(var ze=Qc?Ua(ce).concat(jb(ce)):Ua(ce),Ae=0,be=ze.length,rd,Qd;Ae<be;++Ae)if(rd=ze[Ae],"callee"!==rd&&"caller"!==rd)if(Qd=Ea(ce,rd)){Qd.get||Qd.set||(Qd.value=Bf(ce[rd],bf));try{sa(Ge,rd,Qd)}catch(vd){Ge[rd]=Qd.value}}else Ge[rd]=Bf(ce[rd],bf);return Ge},Ad=function(ce){var Ge="";ce.global&&(Ge+="g");
ce.ignoreCase&&(Ge+="i");ce.multiline&&(Ge+="m");ce.unicode&&(Ge+="u");ce.sticky&&(Ge+="y");return Ge},qd=Array.isArray,Bd=Object.getPrototypeOf,Fe=function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof pa)return pa;console&&console.error&&console.error('Unable to locate global object, returning "this".');return this}();E.default=E;E.strict=function(ce,Ge){return E(ce,{isStrict:!0,
realm:Ge?Ge.realm:void 0})};return E})}}),zm=lk({["../../node_modules/fast-deep-equal/index.js"](d,l){l.exports=function sa(Y,la){if(Y===la)return!0;if(Y&&la&&"object"==typeof Y&&"object"==typeof la){if(Y.constructor!==la.constructor)return!1;var Ea;if(Array.isArray(Y)){var Ua=Y.length;if(Ua!=la.length)return!1;for(Ea=Ua;0!==Ea--;)if(!sa(Y[Ea],la[Ea]))return!1;return!0}if(Y.constructor===RegExp)return Y.source===la.source&&Y.flags===la.flags;if(Y.valueOf!==Object.prototype.valueOf)return Y.valueOf()===
la.valueOf();if(Y.toString!==Object.prototype.toString)return Y.toString()===la.toString();var jb=Object.keys(Y);Ua=jb.length;if(Ua!==Object.keys(la).length)return!1;for(Ea=Ua;0!==Ea--;)if(!Object.prototype.hasOwnProperty.call(la,jb[Ea]))return!1;for(Ea=Ua;0!==Ea--;)if(Ua=jb[Ea],!sa(Y[Ua],la[Ua]))return!1;return!0}return Y!==Y&&la!==la}}}),Yk=lk({["../../../node_modules/deepmerge/dist/cjs.js"](d,l){function E(gc,yc){return!1!==yc.clone&&yc.isMergeableObject(gc)?jb(Array.isArray(gc)?[]:{},gc,yc):gc}
function Y(gc,yc,Qc){return gc.concat(yc).map(function(Jc){return E(Jc,Qc)})}function la(gc){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(gc).filter(function(yc){return gc.propertyIsEnumerable(yc)}):[]}function sa(gc){return Object.keys(gc).concat(la(gc))}function Ea(gc,yc){try{return yc in gc}catch(Qc){return!1}}function Ua(gc,yc,Qc){var Jc={};Qc.isMergeableObject(gc)&&sa(gc).forEach(function(kd){Jc[kd]=E(gc[kd],Qc)});sa(yc).forEach(function(kd){if(!Ea(gc,kd)||Object.hasOwnProperty.call(gc,
kd)&&Object.propertyIsEnumerable.call(gc,kd))if(Ea(gc,kd)&&Qc.isMergeableObject(yc[kd])){if(Qc.customMerge){var ad=Qc.customMerge(kd);ad="function"===typeof ad?ad:jb}else ad=jb;Jc[kd]=ad(gc[kd],yc[kd],Qc)}else Jc[kd]=E(yc[kd],Qc)});return Jc}function jb(gc,yc,Qc){Qc=Qc||{};Qc.arrayMerge=Qc.arrayMerge||Y;Qc.isMergeableObject=Qc.isMergeableObject||sb;Qc.cloneUnlessOtherwiseSpecified=E;var Jc=Array.isArray(yc),kd=Array.isArray(gc);return Jc!==kd?E(yc,Qc):Jc?Qc.arrayMerge(gc,yc,Qc):Ua(gc,yc,Qc)}var sb=
function(gc){var yc;if(yc=!!gc&&"object"===typeof gc)yc=Object.prototype.toString.call(gc),yc=!("[object RegExp]"===yc||"[object Date]"===yc||gc.$$typeof===Ub);return yc},Ub="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;jb.all=function(gc,yc){if(!Array.isArray(gc))throw Error("first argument should be an array");return gc.reduce(function(Qc,Jc){return jb(Qc,Jc,yc)},{})};l.exports=jb}}),Gf=lk({["../../node_modules/tslib/tslib.js"](d,l){var E,Y,la,sa,Ea,Ua,jb,sb,Ub,gc,yc,
Qc,Jc,kd,ad,vc,md,Ad,qd,Bd,Fe,ce,Ge,Bf,bf;(function(ze){function Ae(rd,Qd){rd!==be&&("function"===typeof Object.create?Object.defineProperty(rd,"__esModule",{value:!0}):rd.__esModule=!0);return function(vd,Td){return rd[vd]=Qd?Qd(vd,Td):Td}}var be="object"===typeof pa?pa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(rd){ze(Ae(be,Ae(rd)))}):"object"===typeof l&&"object"===typeof l.exports?ze(Ae(be,Ae(l.exports))):
ze(Ae(be))})(function(ze){var Ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rd,Qd){rd.__proto__=Qd}||function(rd,Qd){for(var vd in Qd)Object.prototype.hasOwnProperty.call(Qd,vd)&&(rd[vd]=Qd[vd])};E=function(rd,Qd){function vd(){this.constructor=rd}if("function"!==typeof Qd&&null!==Qd)throw new TypeError("Class extends value "+String(Qd)+" is not a constructor or null");Ae(rd,Qd);rd.prototype=null===Qd?Object.create(Qd):(vd.prototype=Qd.prototype,new vd)};Y=Object.assign||function(rd){for(var Qd,
vd=1,Td=arguments.length;vd<Td;vd++){Qd=arguments[vd];for(var Vd in Qd)Object.prototype.hasOwnProperty.call(Qd,Vd)&&(rd[Vd]=Qd[Vd])}return rd};la=function(rd,Qd){var vd={},Td;for(Td in rd)Object.prototype.hasOwnProperty.call(rd,Td)&&0>Qd.indexOf(Td)&&(vd[Td]=rd[Td]);if(null!=rd&&"function"===typeof Object.getOwnPropertySymbols){var Vd=0;for(Td=Object.getOwnPropertySymbols(rd);Vd<Td.length;Vd++)0>Qd.indexOf(Td[Vd])&&Object.prototype.propertyIsEnumerable.call(rd,Td[Vd])&&(vd[Td[Vd]]=rd[Td[Vd]])}return vd};
sa=function(rd,Qd,vd,Td){var Vd=arguments.length,Re=3>Vd?Qd:null===Td?Td=Object.getOwnPropertyDescriptor(Qd,vd):Td,$e;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)Re=Reflect.decorate(rd,Qd,vd,Td);else for(var af=rd.length-1;0<=af;af--)if($e=rd[af])Re=(3>Vd?$e(Re):3<Vd?$e(Qd,vd,Re):$e(Qd,vd))||Re;return 3<Vd&&Re&&Object.defineProperty(Qd,vd,Re),Re};Ea=function(rd,Qd){return function(vd,Td){Qd(vd,Td,rd)}};Ua=function(rd,Qd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(rd,
Qd)};jb=function(rd,Qd,vd,Td){function Vd(Re){return Re instanceof vd?Re:new vd(function($e){$e(Re)})}return new (vd||=Promise)(function(Re,$e){function af(Ph){try{Nf(Td.next(Ph))}catch(fi){$e(fi)}}function Ag(Ph){try{Nf(Td["throw"](Ph))}catch(fi){$e(fi)}}function Nf(Ph){Ph.done?Re(Ph.value):Vd(Ph.value).then(af,Ag)}Nf((Td=Td.apply(rd,Qd||[])).next())})};sb=function(rd,Qd){function vd(Nf){return function(Ph){return Td([Nf,Ph])}}function Td(Nf){if(Re)throw new TypeError("Generator is already executing.");
for(;Vd;)try{if(Re=1,$e&&(af=Nf[0]&2?$e["return"]:Nf[0]?$e["throw"]||((af=$e["return"])&&af.call($e),0):$e.next)&&!(af=af.call($e,Nf[1])).done)return af;if($e=0,af)Nf=[Nf[0]&2,af.value];switch(Nf[0]){case 0:case 1:af=Nf;break;case 4:return Vd.label++,{value:Nf[1],done:!1};case 5:Vd.label++;$e=Nf[1];Nf=[0];continue;case 7:Nf=Vd.ops.pop();Vd.trys.pop();continue;default:if(!(af=Vd.trys,af=0<af.length&&af[af.length-1])&&(6===Nf[0]||2===Nf[0])){Vd=0;continue}if(3===Nf[0]&&(!af||Nf[1]>af[0]&&Nf[1]<af[3]))Vd.label=
Nf[1];else if(6===Nf[0]&&Vd.label<af[1])Vd.label=af[1],af=Nf;else if(af&&Vd.label<af[2])Vd.label=af[2],Vd.ops.push(Nf);else{af[2]&&Vd.ops.pop();Vd.trys.pop();continue}}Nf=Qd.call(rd,Vd)}catch(Ph){Nf=[6,Ph],$e=0}finally{Re=af=0}if(Nf[0]&5)throw Nf[1];return{value:Nf[0]?Nf[1]:void 0,done:!0}}var Vd={label:0,sent:function(){if(af[0]&1)throw af[1];return af[1]},trys:[],ops:[]},Re,$e,af,Ag;return Ag={next:vd(0),"throw":vd(1),"return":vd(2)},"function"===typeof Symbol&&(Ag[Symbol.iterator]=function(){return this}),
Ag};Ub=function(rd,Qd){for(var vd in rd)"default"===vd||Object.prototype.hasOwnProperty.call(Qd,vd)||bf(Qd,rd,vd)};bf=Object.create?function(rd,Qd,vd,Td){void 0===Td&&(Td=vd);var Vd=Object.getOwnPropertyDescriptor(Qd,vd);if(!Vd||("get"in Vd?!Qd.__esModule:Vd.writable||Vd.configurable))Vd={enumerable:!0,get:function(){return Qd[vd]}};Object.defineProperty(rd,Td,Vd)}:function(rd,Qd,vd,Td){void 0===Td&&(Td=vd);rd[Td]=Qd[vd]};gc=function(rd){var Qd="function"===typeof Symbol&&Symbol.iterator,vd=Qd&&rd[Qd],
Td=0;if(vd)return vd.call(rd);if(rd&&"number"===typeof rd.length)return{next:function(){rd&&Td>=rd.length&&(rd=void 0);return{value:rd&&rd[Td++],done:!rd}}};throw new TypeError(Qd?"Object is not iterable.":"Symbol.iterator is not defined.");};yc=function(rd,Qd){var vd="function"===typeof Symbol&&rd[Symbol.iterator];if(!vd)return rd;rd=vd.call(rd);var Td,Vd=[];try{for(;(void 0===Qd||0<Qd--)&&!(Td=rd.next()).done;)Vd.push(Td.value)}catch($e){var Re={error:$e}}finally{try{Td&&!Td.done&&(vd=rd["return"])&&
vd.call(rd)}finally{if(Re)throw Re.error;}}return Vd};Qc=function(){for(var rd=[],Qd=0;Qd<arguments.length;Qd++)rd=rd.concat(yc(arguments[Qd]));return rd};Jc=function(){for(var rd=0,Qd=0,vd=arguments.length;Qd<vd;Qd++)rd+=arguments[Qd].length;rd=Array(rd);var Td=0;for(Qd=0;Qd<vd;Qd++)for(var Vd=arguments[Qd],Re=0,$e=Vd.length;Re<$e;Re++,Td++)rd[Td]=Vd[Re];return rd};kd=function(rd,Qd,vd){if(vd||2===arguments.length)for(var Td=0,Vd=Qd.length,Re;Td<Vd;Td++)!Re&&Td in Qd||(Re||=Array.prototype.slice.call(Qd,
0,Td),Re[Td]=Qd[Td]);return rd.concat(Re||Array.prototype.slice.call(Qd))};ad=function(rd){return this instanceof ad?(this.v=rd,this):new ad(rd)};vc=function(rd,Qd,vd){function Td(fi){Ag[fi]&&(Nf[fi]=function(kk){return new Promise(function(tm,Zl){1<Ph.push([fi,kk,tm,Zl])||Vd(fi,kk)})})}function Vd(fi,kk){try{var tm=Ag[fi](kk);tm.value instanceof ad?Promise.resolve(tm.value.v).then(Re,$e):af(Ph[0][2],tm)}catch(Zl){af(Ph[0][3],Zl)}}function Re(fi){Vd("next",fi)}function $e(fi){Vd("throw",fi)}function af(fi,
kk){(fi(kk),Ph.shift(),Ph.length)&&Vd(Ph[0][0],Ph[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ag=vd.apply(rd,Qd||[]),Nf,Ph=[];return Nf={},Td("next"),Td("throw"),Td("return"),Nf[Symbol.asyncIterator]=function(){return this},Nf};md=function(rd){function Qd(Vd,Re){vd[Vd]=rd[Vd]?function($e){return(Td=!Td)?{value:ad(rd[Vd]($e)),done:"return"===Vd}:Re?Re($e):$e}:Re}var vd,Td;return vd={},Qd("next"),Qd("throw",function(Vd){throw Vd;}),Qd("return"),vd[Symbol.iterator]=
function(){return this},vd};Ad=function(rd){function Qd(Re){Vd[Re]=rd[Re]&&function($e){return new Promise(function(af,Ag){$e=rd[Re]($e);vd(af,Ag,$e.done,$e.value)})}}function vd(Re,$e,af,Ag){Promise.resolve(Ag).then(function(Nf){Re({value:Nf,done:af})},$e)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Td=rd[Symbol.asyncIterator],Vd;return Td?Td.call(rd):(rd="function"===typeof gc?gc(rd):rd[Symbol.iterator](),Vd={},Qd("next"),Qd("throw"),Qd("return"),Vd[Symbol.asyncIterator]=
function(){return this},Vd)};qd=function(rd,Qd){Object.defineProperty?Object.defineProperty(rd,"raw",{value:Qd}):rd.raw=Qd;return rd};var be=Object.create?function(rd,Qd){Object.defineProperty(rd,"default",{enumerable:!0,value:Qd})}:function(rd,Qd){rd["default"]=Qd};Bd=function(rd){if(rd&&rd.__esModule)return rd;var Qd={};if(null!=rd)for(var vd in rd)"default"!==vd&&Object.prototype.hasOwnProperty.call(rd,vd)&&bf(Qd,rd,vd);be(Qd,rd);return Qd};Fe=function(rd){return rd&&rd.__esModule?rd:{"default":rd}};
ce=function(rd,Qd,vd,Td){if("a"===vd&&!Td)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof Qd?rd!==Qd||!Td:!Qd.has(rd))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===vd?Td:"a"===vd?Td.call(rd):Td?Td.value:Qd.get(rd)};Ge=function(rd,Qd,vd,Td,Vd){if("m"===Td)throw new TypeError("Private method is not writable");if("a"===Td&&!Vd)throw new TypeError("Private accessor was defined without a setter");
if("function"===typeof Qd?rd!==Qd||!Vd:!Qd.has(rd))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===Td?Vd.call(rd,vd):Vd?Vd.value=vd:Qd.set(rd,vd),vd};Bf=function(rd,Qd){if(null===Qd||"object"!==typeof Qd&&"function"!==typeof Qd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof rd?Qd===rd:rd.has(Qd)};ze("__extends",E);ze("__assign",Y);ze("__rest",la);ze("__decorate",sa);ze("__param",Ea);ze("__metadata",
Ua);ze("__awaiter",jb);ze("__generator",sb);ze("__exportStar",Ub);ze("__createBinding",bf);ze("__values",gc);ze("__read",yc);ze("__spread",Qc);ze("__spreadArrays",Jc);ze("__spreadArray",kd);ze("__await",ad);ze("__asyncGenerator",vc);ze("__asyncDelegator",md);ze("__asyncValues",Ad);ze("__makeTemplateObject",qd);ze("__importStar",Bd);ze("__importDefault",Fe);ze("__classPrivateFieldGet",ce);ze("__classPrivateFieldSet",Ge);ze("__classPrivateFieldIn",Bf)})}}),Zk={};((d,l)=>{for(var E in l)tf(d,E,{get:l[E],
enumerable:!0})})(Zk,{App:()=>QC,PreviewManager:()=>zu,generateJSXFromApp:()=>lj,generateSVGFromApp:()=>Bj});Pa.exports=(d=>Sk(tf({},"__esModule",{value:!0}),d))(Zk);var th,di=new Uint8Array(16),Gm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,oi=[];for(rk=0;256>rk;++rk)oi.push((rk+256).toString(16).substr(1));var rk,rl=function(d){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;l=(oi[d[l+0]]+oi[d[l+1]]+oi[d[l+
2]]+oi[d[l+3]]+"-"+oi[d[l+4]]+oi[d[l+5]]+"-"+oi[d[l+6]]+oi[d[l+7]]+"-"+oi[d[l+8]]+oi[d[l+9]]+"-"+oi[d[l+10]]+oi[d[l+11]]+oi[d[l+12]]+oi[d[l+13]]+oi[d[l+14]]+oi[d[l+15]]).toLowerCase();if("string"!==typeof l||!Gm.test(l))throw TypeError("Stringified UUID is invalid");return l},Al,dj,Tm=0,Tk=0,Pg=function(d,l,E){E=l&&E||0;var Y=l||Array(16);d=d||{};var la=d.node||Al,sa=void 0!==d.clockseq?d.clockseq:dj;if(null==la||null==sa){var Ea=d.random||(d.rng||n)();null==la&&(la=Al=[Ea[0]|1,Ea[1],Ea[2],Ea[3],
Ea[4],Ea[5]]);null==sa&&(sa=dj=(Ea[6]<<8|Ea[7])&16383)}Ea=void 0!==d.msecs?d.msecs:Date.now();var Ua=void 0!==d.nsecs?d.nsecs:Tk+1,jb=Ea-Tm+(Ua-Tk)/1E4;0>jb&&void 0===d.clockseq&&(sa=sa+1&16383);(0>jb||Ea>Tm)&&void 0===d.nsecs&&(Ua=0);if(1E4<=Ua)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Tm=Ea;Tk=Ua;dj=sa;Ea+=122192928E5;d=(1E4*(Ea&268435455)+Ua)%4294967296;Y[E++]=d>>>24&255;Y[E++]=d>>>16&255;Y[E++]=d>>>8&255;Y[E++]=d&255;d=Ea/4294967296*1E4&268435455;Y[E++]=d>>>8&255;Y[E++]=d&
255;Y[E++]=d>>>24&15|16;Y[E++]=d>>>16&255;Y[E++]=sa>>>8|128;Y[E++]=sa&255;for(sa=0;6>sa;++sa)Y[E+sa]=la[sa];return l||rl(Y)},Dg=class{static clamp(d,l,E){return Math.max(l,"undefined"!==typeof E?Math.min(d,E):d)}static clampV(d,l,E){return d.map(Y=>E?Dg.clamp(Y,l,E):Dg.clamp(Y,l))}static cross(d,l,E){return(l[0]-d[0])*(E[1]-d[1])-(E[0]-d[0])*(l[1]-d[1])}static snap(d,l=1){return[Math.round(d[0]/l)*l,Math.round(d[1]/l)*l]}},od=Dg;od.neg=d=>[-d[0],-d[1]];od.add=(d,l)=>[d[0]+l[0],d[1]+l[1]];od.addScalar=
(d,l)=>[d[0]+l,d[1]+l];od.sub=(d,l)=>[d[0]-l[0],d[1]-l[1]];od.subScalar=(d,l)=>[d[0]-l,d[1]-l];od.vec=(d,l)=>[l[0]-d[0],l[1]-d[1]];od.mul=(d,l)=>[d[0]*l,d[1]*l];od.mulV=(d,l)=>[d[0]*l[0],d[1]*l[1]];od.div=(d,l)=>[d[0]/l,d[1]/l];od.divV=(d,l)=>[d[0]/l[0],d[1]/l[1]];od.per=d=>[d[1],-d[0]];od.dpr=(d,l)=>d[0]*l[0]+d[1]*l[1];od.cpr=(d,l)=>d[0]*l[1]-l[0]*d[1];od.len2=d=>d[0]*d[0]+d[1]*d[1];od.len=d=>Math.hypot(d[0],d[1]);od.pry=(d,l)=>Dg.dpr(d,l)/Dg.len(l);od.uni=d=>Dg.div(d,Dg.len(d));od.normalize=d=>
Dg.uni(d);od.tangent=(d,l)=>Dg.uni(Dg.sub(d,l));od.dist2=(d,l)=>Dg.len2(Dg.sub(d,l));od.dist=(d,l)=>Math.hypot(d[1]-l[1],d[0]-l[0]);od.fastDist=(d,l)=>{d=[l[0]-d[0],l[1]-d[1]];l=[Math.abs(d[0]),Math.abs(d[1])];let E=1/Math.max(l[0],l[1]);E*=1.29289-(l[0]+l[1])*E*.29289;return[d[0]*E,d[1]*E]};od.ang=(d,l)=>Math.atan2(Dg.cpr(d,l),Dg.dpr(d,l));od.angle=(d,l)=>Math.atan2(l[1]-d[1],l[0]-d[0]);od.med=(d,l)=>Dg.mul(Dg.add(d,l),.5);od.rot=(d,l=0)=>[d[0]*Math.cos(l)-d[1]*Math.sin(l),d[0]*Math.sin(l)+d[1]*
Math.cos(l)];od.rotWith=(d,l,E=0)=>{if(0===E)return d;const Y=Math.sin(E);E=Math.cos(E);const la=d[0]-l[0];d=d[1]-l[1];return[la*E-d*Y+l[0],la*Y+d*E+l[1]]};od.isEqual=(d,l)=>d[0]===l[0]&&d[1]===l[1];od.lrp=(d,l,E)=>Dg.add(d,Dg.mul(Dg.sub(l,d),E));od.int=(d,l,E,Y,la=1)=>{E=(Dg.clamp(E,Y)-E)/(Y-E);return Dg.add(Dg.mul(d,1-E),Dg.mul(l,la))};od.ang3=(d,l,E)=>{d=Dg.vec(l,d);l=Dg.vec(l,E);return Dg.ang(d,l)};od.abs=d=>[Math.abs(d[0]),Math.abs(d[1])];od.rescale=(d,l)=>{const E=Dg.len(d);return[l*d[0]/E,
l*d[1]/E]};od.isLeft=(d,l,E)=>(l[0]-d[0])*(E[1]-d[1])-(E[0]-d[0])*(l[1]-d[1]);od.clockwise=(d,l,E)=>0<Dg.isLeft(d,l,E);od.toFixed=d=>d.map(l=>Math.round(100*l)/100);od.nearestPointOnLineThroughPoint=(d,l,E)=>Dg.add(d,Dg.mul(l,Dg.pry(Dg.sub(E,d),l)));od.distanceToLineThroughPoint=(d,l,E)=>Dg.dist(E,Dg.nearestPointOnLineThroughPoint(d,l,E));od.nearestPointOnLineSegment=(d,l,E,Y=!0)=>{const la=Dg.uni(Dg.sub(l,d));E=Dg.add(d,Dg.mul(la,Dg.pry(Dg.sub(E,d),la)));if(Y){if(E[0]<Math.min(d[0],l[0]))return d[0]<
l[0]?d:l;if(E[0]>Math.max(d[0],l[0]))return d[0]>l[0]?d:l;if(E[1]<Math.min(d[1],l[1]))return d[1]<l[1]?d:l;if(E[1]>Math.max(d[1],l[1]))return d[1]>l[1]?d:l}return E};od.distanceToLineSegment=(d,l,E,Y=!0)=>Dg.dist(E,Dg.nearestPointOnLineSegment(d,l,E,Y));od.nudge=(d,l,E)=>Dg.isEqual(d,l)?d:Dg.add(d,Dg.mul(Dg.uni(Dg.sub(l,d)),E));od.nudgeAtAngle=(d,l,E)=>[Math.cos(l)*E+d[0],Math.sin(l)*E+d[1]];od.toPrecision=(d,l=4)=>[+d[0].toPrecision(l),+d[1].toPrecision(l)];od.pointsBetween=(d,l,E=6)=>Array.from(Array(E)).map((Y,
la)=>{Y=la/(E-1);la=Math.min(1,.5+Math.abs(.5-Y));return[...Dg.lrp(d,l,Y),la]});od.slope=(d,l)=>d[0]===l[0]?NaN:(d[1]-l[1])/(d[0]-l[0]);od.toAngle=d=>{d=Math.atan2(d[1],d[0]);return 0>d?d+2*Math.PI:d};od.max=(...d)=>[Math.max(...d.map(l=>l[0])),Math.max(...d.map(l=>l[1]))];od.min=(...d)=>[Math.min(...d.map(l=>l[0])),Math.min(...d.map(l=>l[1]))];var $d=od,gf=class{static getRectangleSides(d,l,E=0){const Y=[d[0]+l[0]/2,d[1]+l[1]/2],la=od.rotWith(d,Y,E),sa=od.rotWith(od.add(d,[l[0],0]),Y,E),Ea=od.rotWith(od.add(d,
l),Y,E);d=od.rotWith(od.add(d,[0,l[1]]),Y,E);return[["top",[la,sa]],["right",[sa,Ea]],["bottom",[Ea,d]],["left",[d,la]]]}static getBoundsSides(d){return gf.getRectangleSides([d.minX,d.minY],[d.width,d.height])}static expandBounds(d,l){return{minX:d.minX-l,minY:d.minY-l,maxX:d.maxX+l,maxY:d.maxY+l,width:d.width+2*l,height:d.height+2*l}}static boundsCollide(d,l){return!(d.maxX<l.minX||d.minX>l.maxX||d.maxY<l.minY||d.minY>l.maxY)}static boundsContain(d,l){return d.minX<l.minX&&d.minY<l.minY&&d.maxY>
l.maxY&&d.maxX>l.maxX}static boundsContained(d,l){return gf.boundsContain(l,d)}static boundsAreEqual(d,l){return!(l.maxX!==d.maxX||l.minX!==d.minX||l.maxY!==d.maxY||l.minY!==d.minY)}static getBoundsFromPoints(d,l=0){let E=Infinity,Y=Infinity,la=-Infinity,sa=-Infinity;if(2>d.length)Y=E=0,sa=la=1;else for(const Ea of d)E=Math.min(Ea[0],E),Y=Math.min(Ea[1],Y),la=Math.max(Ea[0],la),sa=Math.max(Ea[1],sa);return 0!==l?gf.getBoundsFromPoints(d.map(Ea=>od.rotWith(Ea,[(E+la)/2,(Y+sa)/2],l))):{minX:E,minY:Y,
maxX:la,maxY:sa,width:Math.max(1,la-E),height:Math.max(1,sa-Y)}}static centerBounds(d,l){const E=gf.getBoundsCenter(d);return gf.translateBounds(d,[l[0]-E[0],l[1]-E[1]])}static snapBoundsToGrid(d,l){const E=Math.round(d.minX/l)*l,Y=Math.round(d.minY/l)*l,la=Math.round(d.maxX/l)*l;d=Math.round(d.maxY/l)*l;return{minX:E,minY:Y,maxX:la,maxY:d,width:Math.max(1,la-E),height:Math.max(1,d-Y)}}static translateBounds(d,l){return{minX:d.minX+l[0],minY:d.minY+l[1],maxX:d.maxX+l[0],maxY:d.maxY+l[1],width:d.width,
height:d.height}}static multiplyBounds(d,l){const E=gf.getBoundsCenter(d);return gf.centerBounds({minX:d.minX*l,minY:d.minY*l,maxX:d.maxX*l,maxY:d.maxY*l,width:d.width*l,height:d.height*l},[E[0]*l,E[1]*l])}static divideBounds(d,l){const E=gf.getBoundsCenter(d);return gf.centerBounds({minX:d.minX/l,minY:d.minY/l,maxX:d.maxX/l,maxY:d.maxY/l,width:d.width/l,height:d.height/l},[E[0]/l,E[1]/l])}static getRotatedBounds(d,l=0){d=gf.getRotatedCorners(d,l);let E=l=Infinity,Y=-Infinity,la=-Infinity;for(const sa of d)l=
Math.min(sa[0],l),E=Math.min(sa[1],E),Y=Math.max(sa[0],Y),la=Math.max(sa[1],la);return{minX:l,minY:E,maxX:Y,maxY:la,width:Math.max(1,Y-l),height:Math.max(1,la-E),rotation:0}}static getRotatedEllipseBounds(d,l,E,Y,la=0){var sa=Math.cos(la);const Ea=Math.sin(la);la=Math.hypot(E*sa,Y*Ea);sa=Math.hypot(E*Ea,Y*sa);return{minX:d+E-la,minY:l+Y-sa,maxX:d+E+la,maxY:l+Y+sa,width:2*la,height:2*sa}}static getExpandedBounds(d,l){const E=Math.min(d.minX,l.minX),Y=Math.min(d.minY,l.minY),la=Math.max(d.maxX,l.maxX);
d=Math.max(d.maxY,l.maxY);return{minX:E,minY:Y,maxX:la,maxY:d,width:Math.abs(la-E),height:Math.abs(d-Y)}}static getCommonBounds(d){if(2>d.length)return d[0];let l=d[0];for(let E=1;E<d.length;E++)l=gf.getExpandedBounds(l,d[E]);return l}static getRotatedCorners(d,l=0){const E=[d.minX+d.width/2,d.minY+d.height/2];d=[[d.minX,d.minY],[d.maxX,d.minY],[d.maxX,d.maxY],[d.minX,d.maxY]];return l?d.map(Y=>od.rotWith(Y,E,l)):d}static getTransformedBoundingBox(d,l,E,Y=0,la=!1){const [sa,Ea]=[d.minX,d.minY],[Ua,
jb]=[d.maxX,d.maxY];let [sb,Ub]=[d.minX,d.minY],[gc,yc]=[d.maxX,d.maxY];if("center"===l)return{minX:sb+E[0],minY:Ub+E[1],maxX:gc+E[0],maxY:yc+E[1],width:gc-sb,height:yc-Ub,scaleX:1,scaleY:1};const [Qc,Jc]=od.rot(E,-Y);switch(l){case "top_edge":case "top_left_corner":case "top_right_corner":Ub+=Jc;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":yc+=Jc}switch(l){case "left_edge":case "top_left_corner":case "bottom_left_corner":sb+=Qc;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":gc+=
Qc}var kd=Ua-sa;const ad=jb-Ea;var vc=(gc-sb)/kd,md=(yc-Ub)/ad;d=0>vc;E=0>md;var Ad=Math.abs(gc-sb),qd=Math.abs(yc-Ub);if(la)switch(la=kd/ad,kd=la<Ad/qd,md=1/la*(0>md?1:-1)*Ad,vc=qd*(0>vc?1:-1)*la,l){case "top_left_corner":kd?Ub=yc+md:sb=gc+vc;break;case "top_right_corner":kd?Ub=yc+md:gc=sb-vc;break;case "bottom_right_corner":kd?yc=Ub-md:gc=sb-vc;break;case "bottom_left_corner":kd?yc=Ub-md:sb=gc+vc;break;case "bottom_edge":case "top_edge":Ad=(sb+gc)/2;qd*=la;sb=Ad-qd/2;gc=Ad+qd/2;break;case "left_edge":case "right_edge":qd=
(Ub+yc)/2,Ad/=la,Ub=qd-Ad/2,yc=qd+Ad/2}if(0!==Y%(2*Math.PI)){Ad=[0,0];qd=od.med([sa,Ea],[Ua,jb]);vc=od.med([sb,Ub],[gc,yc]);switch(l){case "top_left_corner":Ad=od.sub(od.rotWith([gc,yc],vc,Y),od.rotWith([Ua,jb],qd,Y));break;case "top_right_corner":Ad=od.sub(od.rotWith([sb,yc],vc,Y),od.rotWith([sa,jb],qd,Y));break;case "bottom_right_corner":Ad=od.sub(od.rotWith([sb,Ub],vc,Y),od.rotWith([sa,Ea],qd,Y));break;case "bottom_left_corner":Ad=od.sub(od.rotWith([gc,Ub],vc,Y),od.rotWith([Ua,Ea],qd,Y));break;
case "top_edge":Ad=od.sub(od.rotWith(od.med([sb,yc],[gc,yc]),vc,Y),od.rotWith(od.med([sa,jb],[Ua,jb]),qd,Y));break;case "left_edge":Ad=od.sub(od.rotWith(od.med([gc,Ub],[gc,yc]),vc,Y),od.rotWith(od.med([Ua,Ea],[Ua,jb]),qd,Y));break;case "bottom_edge":Ad=od.sub(od.rotWith(od.med([sb,Ub],[gc,Ub]),vc,Y),od.rotWith(od.med([sa,Ea],[Ua,Ea]),qd,Y));break;case "right_edge":Ad=od.sub(od.rotWith(od.med([sb,Ub],[sb,yc]),vc,Y),od.rotWith(od.med([sa,Ea],[sa,jb]),qd,Y))}[sb,Ub]=od.sub([sb,Ub],Ad);[gc,yc]=od.sub([gc,
yc],Ad)}gc<sb&&([gc,sb]=[sb,gc]);yc<Ub&&([yc,Ub]=[Ub,yc]);return{minX:sb,minY:Ub,maxX:gc,maxY:yc,width:gc-sb,height:yc-Ub,scaleX:(gc-sb)/(Ua-sa||1)*(d?-1:1),scaleY:(yc-Ub)/(jb-Ea||1)*(E?-1:1)}}static getTransformAnchor(d,l,E){let Y=d;switch(d){case "top_left_corner":Y=l&&E?"bottom_right_corner":l?"top_right_corner":E?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":Y=l&&E?"bottom_left_corner":l?"top_left_corner":E?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":Y=
l&&E?"top_left_corner":l?"bottom_left_corner":E?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":Y=l&&E?"top_right_corner":l?"bottom_right_corner":E?"top_left_corner":"top_right_corner"}return Y}static getRelativeTransformedBoundingBox(d,l,E,Y,la){Y=d.minX+(Y?l.maxX-E.maxX:E.minX-l.minX)/l.width*d.width;la=d.minY+(la?l.maxY-E.maxY:E.minY-l.minY)/l.height*d.height;const sa=E.width/l.width*d.width;d=E.height/l.height*d.height;return{minX:Y,minY:la,maxX:Y+sa,maxY:la+d,width:sa,height:d}}static getRotatedSize(d,
l){const E=od.div(d,2);d=[[0,0],[d[0],0],d,[0,d[1]]].map(Y=>od.rotWith(Y,E,l));d=gf.getBoundsFromPoints(d);return[d.width,d.height]}static getBoundsCenter(d){return[d.minX+d.width/2,d.minY+d.height/2]}static getBoundsWithCenter(d){const l=gf.getBoundsCenter(d);return Id(me({},d),{midX:l[0],midY:l[1]})}static getCommonTopLeft(d){const l=[Infinity,Infinity];d.forEach(E=>{l[0]=Math.min(l[0],E[0]);l[1]=Math.min(l[1],E[1])});return l}static getTLSnapPoints(d,l,E){const Y=me({},d);d=[0,0];const la=[],sa=
{minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},Ea=["midX","minX","maxX"],Ua=["midY","minY","maxY"];l=l.map(yc=>{const Qc=Ea.flatMap((kd,ad)=>Ea.map((vc,md)=>{const Ad=Y[kd]-yc[vc];return{f:kd,t:vc,gap:Ad,distance:Math.abs(Ad),isCareful:0===ad||3===ad+md}})),Jc=Ua.flatMap((kd,ad)=>Ua.map((vc,md)=>{const Ad=Y[kd]-yc[vc];return{f:kd,t:vc,gap:Ad,distance:Math.abs(Ad),
isCareful:0===ad||3===ad+md}}));return[yc,Qc,Jc]});let jb=Infinity,sb=Infinity,Ub=Infinity,gc=Infinity;l.forEach(([,yc,Qc])=>{yc.forEach(Jc=>{Jc.distance<E&&Jc.distance<Ub&&(Ub=Jc.distance,jb=Jc.gap)});Qc.forEach(Jc=>{Jc.distance<E&&Jc.distance<gc&&(gc=Jc.distance,sb=Jc.gap)})});l.forEach(([yc,Qc,Jc])=>{Infinity!==jb&&Qc.forEach(kd=>{2>Math.abs(kd.gap-jb)&&(sa[kd.f]=Id(me({},sa[kd.f]),{isSnapped:!0,to:yc[kd.t],B:yc,distance:kd.distance}))});Infinity!==sb&&Jc.forEach(kd=>{2>Math.abs(kd.gap-sb)&&(sa[kd.f]=
Id(me({},sa[kd.f]),{isSnapped:!0,to:yc[kd.t],B:yc,distance:kd.distance}))})});d[0]=Infinity===jb?0:jb;d[1]=Infinity===sb?0:sb;Y.minX-=d[0];Y.midX-=d[0];Y.maxX-=d[0];Y.minY-=d[1];Y.midY-=d[1];Y.maxY-=d[1];Ea.forEach(yc=>{yc=sa[yc];if(yc.isSnapped){var {id:Qc,B:Jc}=yc;yc=Y[Qc];la.push("minX"===Qc?[[yc,Y.midY],[yc,Jc.minY],[yc,Jc.maxY]]:[[yc,Y.minY],[yc,Y.maxY],[yc,Jc.minY],[yc,Jc.maxY]])}});Ua.forEach(yc=>{yc=sa[yc];if(yc.isSnapped){var {id:Qc,B:Jc}=yc;yc=Y[Qc];la.push("midY"===Qc?[[Y.midX,yc],[Jc.minX,
yc],[Jc.maxX,yc]]:[[Y.minX,yc],[Y.maxX,yc],[Jc.minX,yc],[Jc.maxX,yc]])}});return{offset:d,snapLines:la}}static ensureRatio(d,l){const {width:E,height:Y}=d,la=me({},d);E/Y<l?(la.width=Y*l,la.maxX+=E-d.width):(la.height=E/l,la.maxY+=Y-d.height);return la}static getDistributions(d,l){var E=d.map(sa=>{const Ea=sa.getBounds();return{id:sa.id,point:[Ea.minX,Ea.minY],bounds:Ea,center:sa.getCenter()}});d=E.length;var Y=gf.getCommonBounds(E.map(({bounds:sa})=>sa));const la=[];switch(l){case "horizontal":l=
E.reduce((sa,Ea)=>sa+Ea.bounds.width,0);if(l>Y.width){const sa=E.sort((sb,Ub)=>sb.bounds.minX-Ub.bounds.minX)[0],Ea=E.sort((sb,Ub)=>Ub.bounds.maxX-sb.bounds.maxX)[0];Y=E.filter(sb=>sb!==sa&&sb!==Ea).sort((sb,Ub)=>sb.center[0]-Ub.center[0]);const Ua=(Ea.center[0]-sa.center[0])/(d-1),jb=sa.center[0]+Ua;Y.forEach(({id:sb,point:Ub,bounds:gc},yc)=>{la.push({id:sb,prev:Ub,next:[jb+Ua*yc-gc.width/2,gc.minY]})})}else{E=E.sort((Ua,jb)=>Ua.center[0]-jb.center[0]);let sa=Y.minX;const Ea=(Y.width-l)/(d-1);E.forEach(({id:Ua,
point:jb,bounds:sb})=>{la.push({id:Ua,prev:jb,next:[sa,sb.minY]});sa+=sb.width+Ea})}break;case "vertical":if(l=E.reduce((sa,Ea)=>sa+Ea.bounds.height,0),l>Y.height){const sa=E.sort((sb,Ub)=>sb.bounds.minY-Ub.bounds.minY)[0],Ea=E.sort((sb,Ub)=>Ub.bounds.maxY-sb.bounds.maxY)[0];Y=E.filter(sb=>sb!==sa&&sb!==Ea).sort((sb,Ub)=>sb.center[1]-Ub.center[1]);const Ua=(Ea.center[1]-sa.center[1])/(d-1),jb=sa.center[1]+Ua;Y.forEach(({id:sb,point:Ub,bounds:gc},yc)=>{la.push({id:sb,prev:Ub,next:[gc.minX,jb+Ua*yc-
gc.height/2]})})}else{E=E.sort((Ua,jb)=>Ua.center[1]-jb.center[1]);let sa=Y.minY;const Ea=(Y.height-l)/(d-1);E.forEach(({id:Ua,point:jb,bounds:sb})=>{la.push({id:Ua,prev:jb,next:[sb.minX,sa]});sa+=sb.height+Ea})}}return la}static getPackedDistributions(d){const l=gf.getCommonBounds(d.map(({bounds:la})=>la)),E=[l.minX,l.minY],Y=Object.fromEntries(d.map(la=>[la.id,la.bounds.minX,la.bounds.minY]));d=d.filter(la=>"line"!==la.type).map(la=>{const sa=la.getBounds();return{id:la.id,w:sa.width+16,h:sa.height+
16,x:sa.minX,y:sa.minY}});Q(d);return d.map(({id:la,x:sa,y:Ea})=>({id:la,prev:Y[la],next:[sa+E[0],Ea+E[1]]}))}},jl=class{static pointInCircle(d,l,E){return od.dist(d,l)<=E}static pointInEllipse(d,l,E,Y,la=0){la=la||0;var sa=Math.cos(la);la=Math.sin(la);l=od.sub(d,l);d=sa*l[0]+la*l[1];sa=la*l[0]-sa*l[1];return 1>=d*d/(E*E)+sa*sa/(Y*Y)}static pointInRect(d,l){return!(d[0]<l[0]||d[0]>d[0]+l[0]||d[1]<l[1]||d[1]>d[1]+l[1])}static pointInPolygon(d,l){let E=0;l.forEach((Y,la)=>{la=l[(la+1)%l.length];Y[1]<=
d[1]?la[1]>d[1]&&0<od.cross(Y,la,d)&&(E+=1):la[1]<=d[1]&&0>od.cross(Y,la,d)&&--E});return 0!==E}static pointInBounds(d,l){return!(d[0]<l.minX||d[0]>l.maxX||d[1]<l.minY||d[1]>l.maxY)}static pointInPolyline(d,l,E=3){for(let Y=1;Y<l.length;Y++)if(od.distanceToLineSegment(l[Y-1],l[Y],d)<E)return!0;return!1}static _getSqSegDist(d,l,E){let Y=l[0];l=l[1];let la=E[0]-Y,sa=E[1]-l;if(0!==la||0!==sa){const Ea=((d[0]-Y)*la+(d[1]-l)*sa)/(la*la+sa*sa);1<Ea?(Y=E[0],l=E[1]):0<Ea&&(Y+=la*Ea,l+=sa*Ea)}la=d[0]-Y;sa=
d[1]-l;return la*la+sa*sa}static _simplifyStep(d,l,E,Y,la){let sa=Y,Ea=-1;for(let Ua=l+1;Ua<E;Ua++){const jb=jl._getSqSegDist(d[Ua],d[l],d[E]);jb>sa&&(Ea=Ua,sa=jb)}-1<Ea&&sa>Y&&(1<Ea-l&&jl._simplifyStep(d,l,Ea,Y,la),la.push(d[Ea]),1<E-Ea&&jl._simplifyStep(d,Ea,E,Y,la))}static simplify2(d,l=1){if(2>=d.length)return d;l*=l;var E=d[0],Y=d[1];const la=[E];for(let sa=1,Ea=d.length;sa<Ea;sa++)Y=d[sa],(Y[0]-E[0])*(Y[0]-E[0])+(Y[1]-E[1])*(Y[1]-E[1])>l&&(la.push(Y),E=Y);E!==Y&&la.push(Y);E=la.length-1;Y=[la[0]];
jl._simplifyStep(la,0,E,l,Y);Y.push(la[E],d[d.length-1]);return Y}static pointNearToPolyline(d,l,E=8){const Y=l.length;for(let la=1;la<Y;la++)if(od.distanceToLineSegment(l[la-1],l[la],d)<E)return!0;return!1}},mh=jl;$a(mh,"simplify",(d,l=1)=>{var E=d.length;const Y=d[0],la=d[E-1],[sa,Ea]=Y,[Ua,jb]=la;if(2<E){let sb=0,Ub=0;const gc=od.len2([jb-Ea,Ua-sa]);for(let yc=1;yc<E-1;yc++){const [Qc,Jc]=d[yc],kd=Math.pow(Qc*(jb-Ea)+sa*(Jc-jb)+Ua*(Ea-Jc),2)/gc;sb>kd||(sb=kd,Ub=yc)}if(sb>l)return E=jl.simplify(d.slice(0,
Ub+1),l),d=jl.simplify(d.slice(Ub+1),l),E.concat(d.slice(1))}return[Y,la]});var dg=ff(zl()),Di=({target:d},l)=>{d=d&&d.tagName;return!!(d&&l&&l.includes(d))},Hm=class{static registerShortcut(d,l){dg.default.bind(d,(E,Y)=>{var la;E.preventDefault();Di(E,["INPUT","TEXTAREA","SELECT"])||(null==(la=E.target)?0:la.isContentEditable)||l(E,Y)},"keydown");return()=>{dg.default.unbind(d,"keydown")}}},Cj=Math.PI,B=Cj/2,U=2*Cj,wa={},ua={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",
bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Fa=class{static circleFromThreePoints(d,l,E){const [Y,la]=d,[sa,Ea]=l,[Ua,jb]=E;l=Y*(Ea-jb)-la*(sa-Ua)+sa*jb-Ua*Ea;d=-((Y*Y+la*la)*(jb-Ea)+(sa*sa+Ea*Ea)*(la-jb)+(Ua*Ua+
jb*jb)*(Ea-la))/(2*l);l=-((Y*Y+la*la)*(sa-Ua)+(sa*sa+Ea*Ea)*(Ua-Y)+(Ua*Ua+jb*jb)*(Y-sa))/(2*l);return[d,l,Math.hypot(d-Y,l-la)]}static perimeterOfEllipse(d,l){const E=Math.pow(d-l,2)/Math.pow(d+l,2);return Cj*(d+l)*(1+3*E/(10+Math.sqrt(4-3*E)))}static shortAngleDist(d,l){d=(l-d)%U;return 2*d%U-d}static longAngleDist(d,l){return U-Fa.shortAngleDist(d,l)}static lerpAngles(d,l,E){return d+Fa.shortAngleDist(d,l)*E}static angleDelta(d,l){return Fa.shortAngleDist(d,l)}static getSweep(d,l,E){return Fa.angleDelta($d.angle(d,
l),$d.angle(d,E))}static clampRadians(d){return(U+d)%U}static snapAngleToSegments(d,l){l=U/l;d=Math.floor((Fa.clampRadians(d)+l/2)/l)*l%U;d<Cj&&(d+=U);d>Cj&&(d-=U);return d}static isAngleBetween(d,l,E){if(E===d||E===l)return!0;l=(l-d+B)%B;return l<=Cj!==(E-d+B)%B>l}static degreesToRadians(d){return d*Cj/180}static radiansToDegrees(d){return 180*d/Cj}static getArcLength(d,l,E,Y){d=Fa.getSweep(d,E,Y);return d/U*U*l}static getSweepFlag(d,l,E){E=$d.angle(d,E);return 0<($d.angle(d,l)-E+3*Cj)%U-Cj?0:1}static getLargeArcFlag(d,
l,E){d=$d.angle(E,d);l=($d.angle(E,l)-d+3*Cj)%U-Cj;return Math.abs(l)>B?0:1}static getArcDashOffset(d,l,E,Y,la){const sa=Fa.getSweepFlag(d,E,Y);l=Fa.getArcLength(d,l,E,Y);return-(0>sa?l:U*d[2]-l)/2+la}static getEllipseDashOffset(d,l){return-(U*d[2])/2+-l}static radiansToCardinalDirection(d){return d<.25*Math.PI?"north":d<.75*Math.PI?"east":d<1.25*Math.PI?"south":d<1.75*Math.PI?"west":"north"}},Xa=class{static getPolygonCentroid(d){var l=d.map(E=>E[0]);d=d.map(E=>E[1]);l=Math.min(...l)+Math.max(...l);
d=Math.min(...d)+Math.max(...d);return[l?l/2:0,d?d/2:0]}};$a(Xa,"getEdges",d=>{const l=d.length;return d.map((E,Y)=>[E,d[(Y+1)%l]])});$a(Xa,"getEdgeOutwardNormal",(d,l)=>$d.per($d.uni($d.sub(l,d))));$a(Xa,"getEdgeInwardNormal",(d,l)=>$d.neg(Xa.getEdgeOutwardNormal(d,l)));$a(Xa,"getOffsetEdge",(d,l,E)=>{E=$d.mul($d.per($d.uni($d.sub(l,d))),E);return[$d.add(d,E),$d.add(l,E)]});$a(Xa,"getOffsetEdges",(d,l)=>d.map(([E,Y])=>Xa.getOffsetEdge(E,Y,l)));$a(Xa,"getOffsetPolygon",(d,l)=>{if(1>d.length)throw Error("Expected at least one point.");
if(1===d.length)return d=d[0],[$d.add(d,[-l,-l]),$d.add(d,[l,-l]),$d.add(d,[l,l]),$d.add(d,[-l,l])];if(2===d.length){const [E,Y]=d;return[...Xa.getOffsetEdge(E,Y,l),...Xa.getOffsetEdge(Y,E,l)]}return Xa.getOffsetEdges(Xa.getEdges(d),l).flatMap((E,Y,la)=>{{Y=la[(Y+1)%la.length];const sa=od.slope(E[0],E[1]);la=od.slope(Y[0],Y[1]);sa!==la?Number.isNaN(sa)&&!Number.isNaN(la)?E=[E[0][0],(E[0][0]-Y[0][0])*la+Y[0][1]]:Number.isNaN(la)&&!Number.isNaN(sa)?E=[Y[0][0],(Y[0][0]-E[0][0])*sa+E[0][1]]:(E=(sa*E[0][0]-
la*Y[0][0]+Y[0][1]-E[0][1])/(sa-la),E=[E,la*(E-Y[0][0])+Y[0][1]]):E=void 0}if(void 0===E)throw Error("Expected an intersection");return E})});$a(Xa,"getPolygonVertices",(d,l,E=0,Y=1)=>{d=$d.div(d,2);const [la,sa]=[Math.max(1,d[0]-E),Math.max(1,d[1]-E)];E=[];for(let sb=0,Ub=U/l;sb<l;sb++){var Ea=(-B+sb*Ub)%U,Ua=(-B+(sb+1)*Ub)%U;Ea=$d.add(d,[la*Math.cos(Ea),sa*Math.sin(Ea)]);Ua=$d.add(d,[la*Math.cos(Ua),sa*Math.sin(Ua)]);var jb=$d.med(Ea,Ua);jb=$d.nudge(jb,d,$d.dist(d,jb)*(1-Y));E.push(Ea,jb,Ua)}return E});
$a(Xa,"getTriangleVertices",(d,l=0,E=1)=>{const [Y,la]=d;var sa=1-E;d=[Y/2,l/2];E=[Y-l,la-l];l=[l/2,la-l];const Ea=Xa.getPolygonCentroid([d,E,l]),Ua=$d.med(d,E),jb=$d.med(E,l),sb=$d.med(l,d),Ub=$d.dist(Ua,Ea)*sa,gc=$d.dist(jb,Ea)*sa;sa*=$d.dist(sb,Ea);return[d,Ub?$d.nudge(Ua,Ea,Ub):Ua,E,gc?$d.nudge(jb,Ea,gc):jb,l,sa?$d.nudge(sb,Ea,sa):sb]});$a(Xa,"getStarVertices",(d,l,E,Y=1)=>{const la=$d.div(l,2),sa=$d.mul(la,Y/2),Ea=U/E/2;return Array.from(Array(2*E)).map((Ua,jb)=>{Ua=-B+jb*Ea;const [sb,Ub]=jb%
2?sa:la;return $d.add(d,[sb*Math.cos(Ua),Ub*Math.sin(Ua)])})});var mb=class{static getCurvedPathForPolygon(d){if(3>d.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const l=["M",...d[0].slice(0,2),"Q"],E=d.length;for(let Y=1;Y<E;Y++){const [la,sa]=d[Y],[Ea,Ua]=d[(Y+1)%E];l.push(la,sa,(la+Ea)/2,(sa+Ua)/2)}l.push("Z");return l.join(" ")}static getCurvedPathForPoints(d){if(3>d.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const l=["M",...d[0].slice(0,2),
"Q"],E=d.length;for(let Y=1;Y<E-1;Y++){const [la,sa]=d[Y],[Ea,Ua]=d[Y+1];l.push(la,sa,(la+Ea)/2,(sa+Ua)/2)}return l.join(" ")}static getSvgPathFromStroke(d,l=!0){const E=d.length;if(4>E)return"";let Y=d[0],la=d[1];var sa=d[2];sa=`M${Y[0].toFixed(2)},${Y[1].toFixed(2)} Q${la[0].toFixed(2)},${la[1].toFixed(2)} ${((la[0]+sa[0])/2).toFixed(2)},${((la[1]+sa[1])/2).toFixed(2)} T`;for(let Ea=2,Ua=E-1;Ea<Ua;Ea++)Y=d[Ea],la=d[Ea+1],sa+=`${((Y[0]+la[0])/2).toFixed(2)},${((Y[1]+la[1])/2).toFixed(2)} `;l&&(sa+=
"Z");return sa}static getSvgPathFromStrokePoints(d,l=!1){const E=d.length;if(4>E)return"";let Y=d[0].point,la=d[1].point;var sa=d[2].point;sa=`M${Y[0].toFixed(2)},${Y[1].toFixed(2)} Q${la[0].toFixed(2)},${la[1].toFixed(2)} ${((la[0]+sa[0])/2).toFixed(2)},${((la[1]+sa[1])/2).toFixed(2)} T`;for(let Ea=2,Ua=E-1;Ea<Ua;Ea++)Y=d[Ea].point,la=d[Ea+1].point,sa+=`${((Y[0]+la[0])/2).toFixed(2)},${((Y[1]+la[1])/2).toFixed(2)} `;l&&(sa+="Z");return sa}};$a(mb,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);
var qb={},Vb=Object.assign,uc=Object.getOwnPropertyDescriptor,wc=Object.defineProperty,Gd=Object.prototype,Kd=[];Object.freeze(Kd);var ld={};Object.freeze(ld);var De="undefined"!==typeof Proxy,zf=Object.toString(),xg=function(){},kj="undefined"!==typeof Object.getOwnPropertySymbols,jg="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:kj?function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:Object.getOwnPropertyNames,gh=Object.getOwnPropertyDescriptors||
function(d){var l={};jg(d).forEach(function(E){l[E]=uc(d,E)});return l},hh=Symbol("mobx-stored-annotations"),If=Symbol("mobx administration"),yh=function(){function d(E){void 0===E&&(E="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=Uh.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=E}var l=d.prototype;l.onBO=function(){this.onBOL&&this.onBOL.forEach(function(E){return E()})};
l.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(E){return E()})};l.reportObserved=function(){return Wd(this)};l.reportChanged=function(){Hd();Lb(this);gd()};l.toString=function(){return this.name_};return d}(),$f=N("Atom",yh),Df={identity:function(d,l){return d===l},structural:function(d,l){return of(d,l)},"default":function(d,l){return Object.is?Object.is(d,l):d===l?0!==d||1/d===1/l:d!==d&&l!==l},shallow:function(d,l){return of(d,l,1)}},xh="override",fh=Oa(),zi={deep:!0,name:void 0,
defaultDecorator:void 0,proxy:!0};Object.freeze(zi);var ii=Kb("observable"),Ij=Kb("observable.ref",{enhancer:La}),ql=Kb("observable.shallow",{enhancer:function(d,l,E){if(void 0===d||null===d||zd(d)||Cb(d)||de(d)||tb(d))return d;if(Array.isArray(d))return cg.array(d,{name:E,deep:!1});if(aa(d))return cg.object(d,void 0,{name:E,deep:!1});if(C(d))return cg.map(d,{name:E,deep:!1});if(M(d))return cg.set(d,{name:E,deep:!1})}}),Dk=Kb("observable.struct",{enhancer:function(d,l){return of(d,l)?l:d}}),Wl=Ga(ii);
Object.assign(Dc,Wl);var uo={box:function(d,l){l=l||zi;return new Dj(d,Tb(l),l.name,!0,l.equals)},array:function(d,l){l=l||zi;return(!1===nf.useProxies||!1===l.proxy?Ye:pf)(d,Tb(l),l.name)},map:function(d,l){l=l||zi;return new Ld(d,Tb(l),l.name)},set:function(d,l){l=l||zi;return new Va(d,Tb(l),l.name)},object:function(d,l,E){if(!1===nf.useProxies||!1===(null==E?void 0:E.proxy))E=hb({},E);else{var Y={},la,sa;R();Y=hb(Y,E);E=null!=(sa=(la=Y[If]).proxy_)?sa:la.proxy_=new Proxy(Y,fo)}return Ke(E,d,l)},
ref:Ga(Ij),shallow:Ga(ql),deep:Wl,struct:Ga(Dk)},cg=Vb(Dc,uo),Zg=Ra("computed"),Um=Ra("computed.struct",{equals:Df.structural}),ng=function(d,l){if(ka(l))return Sa(d,l,Zg);if(aa(d))return Ga(Ra("computed",d));l=aa(l)?l:{};l.get=d;l.name||(l.name=d.name||"");return new Ll(l)};Object.assign(ng,Zg);ng.struct=Ga(Um);var vn,Am,Pm=0,Mn=1,Sl=null!=(vn=null==(Am=uc(function(){},"name"))?void 0:Am.configurable)?vn:!1,im={value:"action",configurable:!0,writable:!1,enumerable:!1};var Lk=Symbol.toPrimitive;var Dj=
function(d){function l(Y,la,sa,Ea,Ua){void 0===sa&&(sa="ObservableValue");void 0===Ua&&(Ua=Df["default"]);Ea=d.call(this,sa)||this;Ea.enhancer=void 0;Ea.hasUnreportedChange_=!1;Ea.interceptors_=void 0;Ea.changeListeners_=void 0;Ea.value_=void 0;Ea.dehancer=void 0;Ea.enhancer=la;Ea.name_=sa;Ea.equals=Ua;Ea.value_=la(Y,void 0,sa);return Ea}ba(l,d);var E=l.prototype;E.dehanceValue=function(Y){return void 0!==this.dehancer?this.dehancer(Y):Y};E.set=function(Y){Y=this.prepareNewValue_(Y);Y!==nf.UNCHANGED&&
this.setNewValue_(Y)};E.prepareNewValue_=function(Y){if(yb(this)){Y=fe(this,{object:this,type:Hl,newValue:Y});if(!Y)return nf.UNCHANGED;Y=Y.newValue}Y=this.enhancer(Y,this.value_,this.name_);return this.equals(this.value_,Y)?nf.UNCHANGED:Y};E.setNewValue_=function(Y){var la=this.value_;this.value_=Y;this.reportChanged();hd(this)&&Le(this,{type:Hl,object:this,newValue:Y,oldValue:la})};E.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};E.intercept_=function(Y){return Nd(this,
Y)};E.observe_=function(Y,la){la&&Y({observableKind:"value",debugObjectName:this.name_,object:this,type:Hl,newValue:this.value_,oldValue:void 0});return jc(this,Y)};E.raw=function(){return this.value_};E.toJSON=function(){return this.get()};E.toString=function(){return this.name_+"["+this.value_+"]"};E.valueOf=function(){return Z(this.get())};E[Lk]=function(){return this.valueOf()};return l}(yh),Bm=N("ObservableValue",Dj);var gn=Symbol.toPrimitive;var Ll=function(){function d(E){this.dependenciesState_=
Uh.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Uh.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Tj(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=Cm.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=
void 0;E.get||u(31);this.derivation=E.get;this.name_=E.name||"ComputedValue";E.set&&(this.setter_=Tc("ComputedValue-setter",E.set));this.equals_=E.equals||(E.compareStructural||E.struct?Df.structural:Df["default"]);this.scope_=E.context;this.requiresReaction_=E.requiresReaction;this.keepAlive_=!!E.keepAlive}var l=d.prototype;l.onBecomeStale_=function(){Sb(this)};l.onBO=function(){this.onBOL&&this.onBOL.forEach(function(E){return E()})};l.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(E){return E()})};
l.get=function(){this.isComputing_&&u(32,this.name_,this.derivation);if(0!==nf.inBatch||0!==this.observers_.size||this.keepAlive_){if(Wd(this),qc(this)){var E=nf.trackingContext;this.keepAlive_&&!E&&(nf.trackingContext=this);this.trackAndCompute()&&ac(this);nf.trackingContext=E}}else qc(this)&&(this.warnAboutUntrackedRead_(),Hd(),this.value_=this.computeValue_(!1),gd());E=this.value_;if(E instanceof Tj)throw E.cause;return E};l.set=function(E){if(this.setter_){this.isRunningSetter_&&u(33,this.name_);
this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,E)}finally{this.isRunningSetter_=!1}}else u(34,this.name_)};l.trackAndCompute=function(){var E=this.value_,Y=this.dependenciesState_===Uh.NOT_TRACKING_,la=this.computeValue_(!0);if(E=Y||E instanceof Tj||la instanceof Tj||!this.equals_(E,la))this.value_=la;return E};l.computeValue_=function(E){this.isComputing_=!0;var Y=Bb(!1);if(E)var la=Oc(this,this.derivation,this.scope_);else if(!0===nf.disableErrorBoundaries)la=this.derivation.call(this.scope_);
else try{la=this.derivation.call(this.scope_)}catch(sa){la=new Tj(sa)}nf.allowStateChanges=Y;this.isComputing_=!1;return la};l.suspend_=function(){this.keepAlive_||(cd(this),this.value_=void 0)};l.observe_=function(E,Y){var la=this,sa=!0,Ea=void 0;return Vc(function(){var Ua=la.get();if(!sa||Y){var jb=Fd();E({observableKind:"computed",debugObjectName:la.name_,type:Hl,object:la,newValue:Ua,oldValue:Ea});nf.trackingDerivation=jb}sa=!1;Ea=Ua})};l.warnAboutUntrackedRead_=function(){};l.toString=function(){return this.name_+
"["+this.derivation.toString()+"]"};l.valueOf=function(){return Z(this.get())};l[gn]=function(){return this.valueOf()};return d}(),dn=N("ComputedValue",Ll),Uh;(function(d){d[d.NOT_TRACKING_=-1]="NOT_TRACKING_";d[d.UP_TO_DATE_=0]="UP_TO_DATE_";d[d.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";d[d.STALE_=2]="STALE_"})(Uh||={});var Cm;(function(d){d[d.NONE=0]="NONE";d[d.LOG=1]="LOG";d[d.BREAK=2]="BREAK"})(Cm||={});var Tj=function(d){this.cause=void 0;this.cause=d},Bn=function(){this.version=6;this.UNCHANGED=
{};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=
!0},jn=!0,jm=!1,nf=function(){var d=m();0<d.__mobxInstanceCount&&!d.__mobxGlobals&&(jn=!1);d.__mobxGlobals&&d.__mobxGlobals.version!==(new Bn).version&&(jn=!1);if(jn){if(d.__mobxGlobals)return d.__mobxInstanceCount+=1,d.__mobxGlobals.UNCHANGED||(d.__mobxGlobals.UNCHANGED={}),d.__mobxGlobals;d.__mobxInstanceCount=1;return d.__mobxGlobals=new Bn}setTimeout(function(){jm||u(35)},1);return new Bn}(),Gl=function(){function d(E,Y,la,sa){void 0===E&&(E="Reaction");this.requiresObservable_=this.errorHandler_=
this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Uh.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=Cm.NONE;this.name_=E;this.onInvalidate_=Y;this.errorHandler_=la;this.requiresObservable_=sa}var l=d.prototype;l.onBecomeStale_=function(){this.schedule_()};l.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,nf.pendingReactions.push(this),
0<nf.inBatch||nf.isRunningReactions||bn(ob))};l.isScheduled=function(){return this.isScheduled_};l.runReaction_=function(){if(!this.isDisposed_){Hd();this.isScheduled_=!1;var E=nf.trackingContext;nf.trackingContext=this;if(qc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(Y){this.reportExceptionInDerivation_(Y)}}nf.trackingContext=E;gd()}};l.track=function(E){if(!this.isDisposed_){Hd();this.isRunning_=!0;var Y=nf.trackingContext;nf.trackingContext=this;E=Oc(this,E,void 0);nf.trackingContext=
Y;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&cd(this);E instanceof Tj&&this.reportExceptionInDerivation_(E.cause);gd()}};l.reportExceptionInDerivation_=function(E){var Y=this;if(this.errorHandler_)this.errorHandler_(E,this);else{if(nf.disableErrorBoundaries)throw E;nf.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",E);nf.globalReactionErrorHandlers.forEach(function(la){return la(E,Y)})}};l.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||
(Hd(),cd(this),gd()))};l.getDisposer_=function(){var E=this.dispose.bind(this);E[If]=this;return E};l.toString=function(){return"Reaction["+this.name_+"]"};l.trace=function(E){void 0===E&&(E=!1);ne(this,E)};return d}(),co=100,bn=function(d){return d()},cn=N("Reaction",Gl),Pn="action",xl=db(Pn),km=db("action.bound",{bound:!0}),wn=db("autoAction",{autoAction:!0}),eo=db("autoAction.bound",{autoAction:!0,bound:!0}),Vf=nc(!1);Object.assign(Vf,xl);var ek=nc(!0);Object.assign(ek,wn);Vf.bound=Ga(km);ek.bound=
Ga(eo);var go=function(d){return d()},Nn="onBO",xn="onBUO",Qm=0;Je.prototype=Object.create(Error.prototype);var en=Ba("flow"),lm=Ba("flow.bound",{bound:!0}),yn=Object.assign(function(d,l){if(ka(l))return Sa(d,l,en);var E=d.name||"\x3cunnamed flow\x3e";l=function(){var Y=arguments,la=++Qm,sa=Vf(E+" - runid: "+la+" - init",d).apply(this,Y),Ea,Ua=void 0;Y=new Promise(function(jb,sb){function Ub(Jc){Ua=void 0;try{var kd=Vf(E+" - runid: "+la+" - yield "+Qc++,sa.next).call(sa,Jc)}catch(ad){return sb(ad)}yc(kd)}
function gc(Jc){Ua=void 0;try{var kd=Vf(E+" - runid: "+la+" - yield "+Qc++,sa["throw"]).call(sa,Jc)}catch(ad){return sb(ad)}yc(kd)}function yc(Jc){if(K(null==Jc?void 0:Jc.then))Jc.then(yc,sb);else{if(Jc.done)return jb(Jc.value);Ua=Promise.resolve(Jc.value);return Ua.then(Ub,gc)}}var Qc=0;Ea=sb;Ub(void 0)});Y.cancel=Vf(E+" - runid: "+la+" - cancel",function(){try{if(Ua){var jb=Ua;K(jb.cancel)&&jb.cancel()}var sb=sa["return"](void 0),Ub=Promise.resolve(sb.value);Ub.then(xg,xg);K(Ub.cancel)&&Ub.cancel();
Ea(new Je)}catch(gc){Ea(gc)}});return Y};l.isMobXFlow=!0;return l},en);yn.bound=Ga(lm);var fo={has:function(d,l){return d[If].has_(l)},get:function(d,l){return d[If].get_(l)},set:function(d,l,E){var Y;return ka(l)?null!=(Y=d[If].set_(l,E,!0))?Y:!0:!1},deleteProperty:function(d,l){var E;return ka(l)?null!=(E=d[If].delete_(l,!0))?E:!0:!1},defineProperty:function(d,l,E){var Y;return null!=(Y=d[If].defineProperty_(l,E))?Y:!0},ownKeys:function(d){return d[If].ownKeys_()},preventExtensions:function(d){u(13)}},
Hl="update",Ka={get:function(d,l){var E=d[If];return l===If?E:"length"===l?E.getArrayLength_():"string"!==typeof l||isNaN(l)?X(Ja,l)?Ja[l]:d[l]:E.get_(parseInt(l))},set:function(d,l,E){var Y=d[If];"length"===l&&Y.setArrayLength_(E);"symbol"===typeof l||isNaN(l)?d[l]=E:Y.set_(parseInt(l),E);return!0},preventExtensions:function(){u(15)}},Ya=function(){function d(E,Y,la,sa){void 0===E&&(E="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=
this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=la;this.legacyMode_=sa;this.atom_=new yh(E);this.enhancer_=function(Ea,Ua){return Y(Ea,Ua,"ObservableArray[..]")}}var l=d.prototype;l.dehanceValue_=function(E){return void 0!==this.dehancer?this.dehancer(E):E};l.dehanceValues_=function(E){return void 0!==this.dehancer&&0<E.length?E.map(this.dehancer):E};l.intercept_=function(E){return Nd(this,E)};l.observe_=function(E,Y){void 0===Y&&(Y=!1);Y&&E({observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return jc(this,E)};l.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};l.setArrayLength_=function(E){("number"!==typeof E||isNaN(E)||0>E)&&u("Out of range: "+E);var Y=this.values_.length;if(E!==Y)if(E>Y){for(var la=Array(E-Y),sa=0;sa<E-Y;sa++)la[sa]=void 0;this.spliceWithArray_(Y,0,la)}else this.spliceWithArray_(E,
Y-E)};l.updateArrayLength_=function(E,Y){E!==this.lastKnownLength_&&u(16);this.lastKnownLength_+=Y;this.legacyMode_&&0<Y&&ae(E+Y+1)};l.spliceWithArray_=function(E,Y,la){var sa=this,Ea=this.values_.length;void 0===E?E=0:E>Ea?E=Ea:0>E&&(E=Math.max(0,Ea+E));Y=1===arguments.length?Ea-E:void 0===Y||null===Y?0:Math.max(0,Math.min(Y,Ea-E));void 0===la&&(la=Kd);if(yb(this)){var Ua=fe(this,{object:this.proxy_,type:"splice",index:E,removedCount:Y,added:la});if(!Ua)return Kd;Y=Ua.removedCount;la=Ua.added}la=
0===la.length?la:la.map(function(jb){return sa.enhancer_(jb,void 0)});this.legacyMode_&&this.updateArrayLength_(Ea,la.length-Y);Ea=this.spliceItemsIntoValues_(E,Y,la);0===Y&&0===la.length||this.notifyArraySplice_(E,la,Ea);return this.dehanceValues_(Ea)};l.spliceItemsIntoValues_=function(E,Y,la){if(1E4>la.length){var sa;return(sa=this.values_).splice.apply(sa,[E,Y].concat(la))}sa=this.values_.slice(E,E+Y);var Ea=this.values_.slice(E+Y);this.values_.length+=la.length-Y;for(Y=0;Y<la.length;Y++)this.values_[E+
Y]=la[Y];for(Y=0;Y<Ea.length;Y++)this.values_[E+la.length+Y]=Ea[Y];return sa};l.notifyArrayChildUpdate_=function(E,Y,la){var sa=!this.owned_&&!1,Ea=hd(this);E=Ea||sa?{observableKind:"array",object:this.proxy_,type:Hl,debugObjectName:this.atom_.name_,index:E,newValue:Y,oldValue:la}:null;this.atom_.reportChanged();Ea&&Le(this,E)};l.notifyArraySplice_=function(E,Y,la){var sa=!this.owned_&&!1,Ea=hd(this);E=Ea||sa?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",
index:E,removed:la,added:Y,removedCount:la.length,addedCount:Y.length}:null;this.atom_.reportChanged();Ea&&Le(this,E)};l.get_=function(E){if(E<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[E]);console.warn("[mobx.array] Attempt to read an array index ("+E+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")};l.set_=function(E,Y){var la=this.values_;if(E<la.length){var sa=la[E];if(yb(this)){Y=
fe(this,{type:Hl,object:this.proxy_,index:E,newValue:Y});if(!Y)return;Y=Y.newValue}Y=this.enhancer_(Y,sa);Y!==sa&&(la[E]=Y,this.notifyArrayChildUpdate_(E,Y,sa))}else E===la.length?this.spliceWithArray_(E,0,[Y]):u(17,E,la.length)};return d}(),Ja={clear:function(){return this.splice(0)},replace:function(d){var l=this[If];return l.spliceWithArray_(0,l.values_.length,d)},toJSON:function(){return this.slice()},splice:function(d,l){for(var E=arguments.length,Y=Array(2<E?E-2:0),la=2;la<E;la++)Y[la-2]=arguments[la];
E=this[If];switch(arguments.length){case 0:return[];case 1:return E.spliceWithArray_(d);case 2:return E.spliceWithArray_(d,l)}return E.spliceWithArray_(d,l,Y)},spliceWithArray:function(d,l,E){return this[If].spliceWithArray_(d,l,E)},push:function(){for(var d=this[If],l=arguments.length,E=Array(l),Y=0;Y<l;Y++)E[Y]=arguments[Y];d.spliceWithArray_(d.values_.length,0,E);return d.values_.length},pop:function(){return this.splice(Math.max(this[If].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,
1)[0]},unshift:function(){for(var d=this[If],l=arguments.length,E=Array(l),Y=0;Y<l;Y++)E[Y]=arguments[Y];d.spliceWithArray_(0,0,E);return d.values_.length},reverse:function(){nf.trackingDerivation&&u(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){nf.trackingDerivation&&u(37,"sort");var d=this.slice();d.sort.apply(d,arguments);this.replace(d);return this},remove:function(d){var l=this[If];d=l.dehanceValues_(l.values_).indexOf(d);return-1<d?(this.splice(d,1),!0):!1}};
wg("concat",Za);wg("flat",Za);wg("includes",Za);wg("indexOf",Za);wg("join",Za);wg("lastIndexOf",Za);wg("slice",Za);wg("toString",Za);wg("toLocaleString",Za);wg("every",Ab);wg("filter",Ab);wg("find",Ab);wg("findIndex",Ab);wg("flatMap",Ab);wg("forEach",Ab);wg("map",Ab);wg("some",Ab);wg("reduce",bb);wg("reduceRight",bb);var fb=N("ObservableArrayAdministration",Ya),Hb={};var mc=Symbol.iterator;var Uc=Symbol.toStringTag;var Ld=function(){function d(E,Y,la){var sa=this;void 0===Y&&(Y=Wa);void 0===la&&(la=
"ObservableMap");this.name_=this.enhancer_=void 0;this[If]=Hb;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=Y;this.name_=la;K(Map)||u(18);this.keysAtom_=Na("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Ic(!0,function(){sa.merge(E)})}var l=d.prototype;l.has_=function(E){return this.data_.has(E)};l.has=function(E){var Y=this;if(!nf.trackingDerivation)return this.has_(E);var la=this.hasMap_.get(E);if(!la){var sa=
la=new Dj(this.has_(E),La,"ObservableMap.key?",!1);this.hasMap_.set(E,sa);nd(sa,function(){return Y.hasMap_["delete"](E)})}return la.get()};l.set=function(E,Y){var la=this.has_(E);if(yb(this)){Y=fe(this,{type:la?Hl:"add",object:this,newValue:Y,name:E});if(!Y)return this;Y=Y.newValue}la?this.updateValue_(E,Y):this.addValue_(E,Y);return this};l["delete"]=function(E){var Y=this;if(yb(this)&&!fe(this,{type:"delete",object:this,name:E}))return!1;if(this.has_(E)){var la=hd(this),sa=la?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(E).value_,name:E}:null;xc(function(){var Ea;Y.keysAtom_.reportChanged();null==(Ea=Y.hasMap_.get(E))?void 0:Ea.setNewValue_(!1);Y.data_.get(E).setNewValue_(void 0);Y.data_["delete"](E)});la&&Le(this,sa);return!0}return!1};l.updateValue_=function(E,Y){var la=this.data_.get(E);Y=la.prepareNewValue_(Y);if(Y!==nf.UNCHANGED){var sa=hd(this);E=sa?{observableKind:"map",debugObjectName:this.name_,type:Hl,object:this,oldValue:la.value_,
name:E,newValue:Y}:null;la.setNewValue_(Y);sa&&Le(this,E)}};l.addValue_=function(E,Y){var la=this;xc(function(){var Ua,jb=new Dj(Y,la.enhancer_,"ObservableMap.key",!1);la.data_.set(E,jb);Y=jb.value_;null==(Ua=la.hasMap_.get(E))?void 0:Ua.setNewValue_(!0);la.keysAtom_.reportChanged()});var sa=hd(this),Ea=sa?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:E,newValue:Y}:null;sa&&Le(this,Ea)};l.get=function(E){return this.has(E)?this.dehanceValue_(this.data_.get(E).get()):
this.dehanceValue_(void 0)};l.dehanceValue_=function(E){return void 0!==this.dehancer?this.dehancer(E):E};l.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};l.values=function(){var E=this,Y=this.keys();return qa({next:function(){var la=Y.next(),sa=la.done;la=la.value;return{done:sa,value:sa?void 0:E.get(la)}}})};l.entries=function(){var E=this,Y=this.keys();return qa({next:function(){var la=Y.next(),sa=la.done;la=la.value;return{done:sa,value:sa?void 0:[la,E.get(la)]}}})};
l[mc]=function(){return this.entries()};l.forEach=function(E,Y){for(var la=xa(this),sa;!(sa=la()).done;)sa=sa.value,E.call(Y,sa[1],sa[0],this)};l.merge=function(E){var Y=this;de(E)&&(E=new Map(E));xc(function(){aa(E)?O(E).forEach(function(la){return Y.set(la,E[la])}):Array.isArray(E)?E.forEach(function(la){return Y.set(la[0],la[1])}):C(E)?(E.constructor!==Map&&u(19,E),E.forEach(function(la,sa){return Y.set(sa,la)})):null!==E&&void 0!==E&&u(20,E)});return this};l.clear=function(){var E=this;xc(function(){Jd(function(){for(var Y=
xa(E.keys()),la;!(la=Y()).done;)E["delete"](la.value)})})};l.replace=function(E){var Y=this;xc(function(){for(var la=bc(E),sa=new Map,Ea=!1,Ua=xa(Y.data_.keys()),jb;!(jb=Ua()).done;)if(jb=jb.value,!la.has(jb))if(Y["delete"](jb))Ea=!0;else{var sb=Y.data_.get(jb);sa.set(jb,sb)}for(la=xa(la.entries());!(Ua=la()).done;)jb=Ua.value,Ua=jb[0],sb=jb[1],jb=Y.data_.has(Ua),Y.set(Ua,sb),Y.data_.has(Ua)&&(sb=Y.data_.get(Ua),sa.set(Ua,sb),jb||(Ea=!0));if(!Ea)if(Y.data_.size!==sa.size)Y.keysAtom_.reportChanged();
else for(Ea=Y.data_.keys(),la=sa.keys(),Ua=Ea.next(),jb=la.next();!Ua.done;){if(Ua.value!==jb.value){Y.keysAtom_.reportChanged();break}Ua=Ea.next();jb=la.next()}Y.data_=sa});return this};l.toString=function(){return"[object ObservableMap]"};l.toJSON=function(){return Array.from(this)};l.observe_=function(E,Y){return jc(this,E)};l.intercept_=function(E){return Nd(this,E)};fa(d,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:Uc,get:function(){return"Map"}}]);
return d}(),de=N("ObservableMap",Ld),He={};var da=Symbol.iterator;var va=Symbol.toStringTag;var Va=function(){function d(E,Y,la){void 0===Y&&(Y=Wa);void 0===la&&(la="ObservableSet");this.name_=void 0;this[If]=He;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=la;K(Set)||u(22);this.atom_=Na(this.name_);this.enhancer_=function(sa,Ea){return Y(sa,Ea,la)};E&&this.replace(E)}var l=d.prototype;l.dehanceValue_=function(E){return void 0!==
this.dehancer?this.dehancer(E):E};l.clear=function(){var E=this;xc(function(){Jd(function(){for(var Y=xa(E.data_.values()),la;!(la=Y()).done;)E["delete"](la.value)})})};l.forEach=function(E,Y){for(var la=xa(this),sa;!(sa=la()).done;)sa=sa.value,E.call(Y,sa,sa,this)};l.add=function(E){var Y=this;if(yb(this)&&!fe(this,{type:"add",object:this,newValue:E}))return this;if(!this.has(E)){xc(function(){Y.data_.add(Y.enhancer_(E,void 0));Y.atom_.reportChanged()});var la=hd(this),sa=la?{observableKind:"set",
debugObjectName:this.name_,type:"add",object:this,newValue:E}:null;la&&Le(this,sa)}return this};l["delete"]=function(E){var Y=this;if(yb(this)&&!fe(this,{type:"delete",object:this,oldValue:E}))return!1;if(this.has(E)){var la=hd(this),sa=la?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:E}:null;xc(function(){Y.atom_.reportChanged();Y.data_["delete"](E)});la&&Le(this,sa);return!0}return!1};l.has=function(E){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(E))};
l.entries=function(){var E=0,Y=Array.from(this.keys()),la=Array.from(this.values());return qa({next:function(){var sa=E;E+=1;return sa<la.length?{value:[Y[sa],la[sa]],done:!1}:{done:!0}}})};l.keys=function(){return this.values()};l.values=function(){this.atom_.reportObserved();var E=this,Y=0,la=Array.from(this.data_.values());return qa({next:function(){return Y<la.length?{value:E.dehanceValue_(la[Y++]),done:!1}:{done:!0}}})};l.replace=function(E){var Y=this;tb(E)&&(E=new Set(E));xc(function(){Array.isArray(E)?
(Y.clear(),E.forEach(function(la){return Y.add(la)})):M(E)?(Y.clear(),E.forEach(function(la){return Y.add(la)})):null!==E&&void 0!==E&&u("Cannot initialize set from "+E)});return this};l.observe_=function(E,Y){return jc(this,E)};l.intercept_=function(E){return Nd(this,E)};l.toJSON=function(){return Array.from(this)};l.toString=function(){return"[object ObservableSet]"};l[da]=function(){return this.values()};fa(d,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:va,
get:function(){return"Set"}}]);return d}(),tb=N("ObservableSet",Va),Xb=Object.create(null),pc=function(){function d(E,Y,la,sa){void 0===Y&&(Y=new Map);void 0===sa&&(sa=fh);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=E;this.values_=Y;this.name_=la;this.defaultAnnotation_=sa;this.keysAtom_=new yh("ObservableObject.keys");this.isPlainObject_=aa(this.target_)}
var l=d.prototype;l.getObservablePropValue_=function(E){return this.values_.get(E).get()};l.setObservablePropValue_=function(E,Y){var la=this.values_.get(E);if(la instanceof Ll)return la.set(Y),!0;if(yb(this)){Y=fe(this,{type:Hl,object:this.proxy_||this.target_,name:E,newValue:Y});if(!Y)return null;Y=Y.newValue}Y=la.prepareNewValue_(Y);if(Y!==nf.UNCHANGED){var sa=hd(this);E=sa?{type:Hl,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:la.value_,name:E,newValue:Y}:
null;la.setNewValue_(Y);sa&&Le(this,E)}return!0};l.get_=function(E){nf.trackingDerivation&&!X(this.target_,E)&&this.has_(E);return this.target_[E]};l.set_=function(E,Y,la){void 0===la&&(la=!1);if(X(this.target_,E)){if(this.values_.has(E))return this.setObservablePropValue_(E,Y);if(la)return Reflect.set(this.target_,E,Y);this.target_[E]=Y;return!0}return this.extend_(E,{value:Y,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,la)};l.has_=function(E){if(!nf.trackingDerivation)return E in
this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var Y=this.pendingKeys_.get(E);Y||(Y=new Dj(E in this.target_,La,"ObservableObject.key?",!1),this.pendingKeys_.set(E,Y));return Y.get()};l.make_=function(E,Y){!0===Y&&(Y=this.defaultAnnotation_);if(!1!==Y){if(!(E in this.target_)){var la;if(null!=(la=this.target_[hh])&&la[E])return;u(1,Y.annotationType_,this.name_+"."+E.toString())}for(la=this.target_;la&&la!==Gd;){var sa=uc(la,E);if(sa){sa=Y.make_(this,E,sa,la);if(0===sa)return;if(1===sa)break}la=
Object.getPrototypeOf(la)}var Ea;null==(Ea=this.target_[hh])?!0:delete Ea[E]}};l.extend_=function(E,Y,la,sa){void 0===sa&&(sa=!1);!0===la&&(la=this.defaultAnnotation_);if(!1===la)return this.defineProperty_(E,Y,sa);if(Y=la.extend_(this,E,Y,sa)){var Ea;null==(Ea=this.target_[hh])?!0:delete Ea[E]}return Y};l.defineProperty_=function(E,Y,la){void 0===la&&(la=!1);try{Hd();var sa=this.delete_(E);if(!sa)return sa;if(yb(this)){var Ea=fe(this,{object:this.proxy_||this.target_,name:E,type:"add",newValue:Y.value});
if(!Ea)return null;var Ua=Ea.newValue;Y.value!==Ua&&(Y=L({},Y,{value:Ua}))}if(la){if(!Reflect.defineProperty(this.target_,E,Y))return!1}else wc(this.target_,E,Y);this.notifyPropertyAddition_(E,Y.value)}finally{gd()}return!0};l.defineObservableProperty_=function(E,Y,la,sa){void 0===sa&&(sa=!1);try{Hd();var Ea=this.delete_(E);if(!Ea)return Ea;if(yb(this)){var Ua=fe(this,{object:this.proxy_||this.target_,name:E,type:"add",newValue:Y});if(!Ua)return null;Y=Ua.newValue}var jb=bd(E),sb={configurable:nf.safeDescriptors?
this.isPlainObject_:!0,enumerable:!0,get:jb.get,set:jb.set};if(sa){if(!Reflect.defineProperty(this.target_,E,sb))return!1}else wc(this.target_,E,sb);var Ub=new Dj(Y,la,"ObservableObject.key",!1);this.values_.set(E,Ub);this.notifyPropertyAddition_(E,Ub.value_)}finally{gd()}return!0};l.defineComputedProperty_=function(E,Y,la){void 0===la&&(la=!1);try{Hd();var sa=this.delete_(E);if(!sa)return sa;if(yb(this)&&!fe(this,{object:this.proxy_||this.target_,name:E,type:"add",newValue:void 0}))return null;Y.name||
(Y.name="ObservableObject.key");Y.context=this.proxy_||this.target_;var Ea=bd(E),Ua={configurable:nf.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:Ea.get,set:Ea.set};if(la){if(!Reflect.defineProperty(this.target_,E,Ua))return!1}else wc(this.target_,E,Ua);this.values_.set(E,new Ll(Y));this.notifyPropertyAddition_(E,void 0)}finally{gd()}return!0};l.delete_=function(E,Y){void 0===Y&&(Y=!1);if(!X(this.target_,E))return!0;if(yb(this)&&!fe(this,{object:this.proxy_||this.target_,name:E,type:"remove"}))return null;
try{var la,sa;Hd();var Ea=hd(this),Ua=this.values_.get(E),jb=void 0;if(!Ua&&Ea){var sb;jb=null==(sb=uc(this.target_,E))?void 0:sb.value}if(Y){if(!Reflect.deleteProperty(this.target_,E))return!1}else delete this.target_[E];Ua&&(this.values_["delete"](E),Ua instanceof Dj&&(jb=Ua.value_),Lb(Ua));this.keysAtom_.reportChanged();null==(la=this.pendingKeys_)?void 0:null==(sa=la.get(E))?void 0:sa.set(E in this.target_);if(Ea){var Ub={type:"remove",observableKind:"object",object:this.proxy_||this.target_,
debugObjectName:this.name_,oldValue:jb,name:E};Ea&&Le(this,Ub)}}finally{gd()}return!0};l.observe_=function(E,Y){return jc(this,E)};l.intercept_=function(E){return Nd(this,E)};l.notifyPropertyAddition_=function(E,Y){var la,sa,Ea=hd(this);Ea&&(Y=Ea?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:E,newValue:Y}:null,Ea&&Le(this,Y));null==(la=this.pendingKeys_)?void 0:null==(sa=la.get(E))?void 0:sa.set(!0);this.keysAtom_.reportChanged()};l.ownKeys_=
function(){this.keysAtom_.reportObserved();return jg(this.target_)};l.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return d}(),Pc=N("ObservableObjectAdministration",pc),id=le(0),xd=0,Sd=function(){};(function(d,l){Object.setPrototypeOf?Object.setPrototypeOf(d.prototype,l):void 0!==d.prototype.__proto__?d.prototype.__proto__=l:d.prototype=l})(Sd,Array.prototype);var we=function(d,l,E){function Y(sa,Ea,Ua,jb){void 0===Ua&&(Ua="ObservableArray");void 0===jb&&(jb=
!1);var sb=d.call(this)||this;Ea=new Ya(Ua,Ea,jb,!0);Ea.proxy_=ca(sb);J(ca(sb),If,Ea);sa&&sa.length&&(Ea=Bb(!0),sb.spliceWithArray(0,0,sa),nf.allowStateChanges=Ea);Object.defineProperty(ca(sb),"0",id);return sb}ba(Y,d);var la=Y.prototype;la.concat=function(){this[If].atom_.reportObserved();for(var sa=arguments.length,Ea=Array(sa),Ua=0;Ua<sa;Ua++)Ea[Ua]=arguments[Ua];return Array.prototype.concat.apply(this.slice(),Ea.map(function(jb){return Cb(jb)?jb.slice():jb}))};la[E]=function(){var sa=this,Ea=
0;return qa({next:function(){return Ea<sa.length?{value:sa[Ea++],done:!1}:{done:!0,value:void 0}}})};fa(Y,[{key:"length",get:function(){return this[If].getArrayLength_()},set:function(sa){this[If].setArrayLength_(sa)}},{key:l,get:function(){return"Array"}}]);return Y}(Sd,Symbol.toStringTag,Symbol.iterator);Object.entries(Ja).forEach(function(d){var l=d[0];d=d[1];"concat"!==l&&T(we.prototype,l,d)});ae(1E3);var Ze=Gd.toString;["Symbol","Map","Set"].forEach(function(d){"undefined"===typeof m()[d]&&u("MobX requires global '"+
d+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Yb,extras:{getDebugName:Hg},$mobx:If});var wb=S(611),Kf=class{constructor(d){$a(this,"props");$a(this,"aspectRatio");$a(this,"type");$a(this,"hideCloneHandles",!1);$a(this,"hideResizeHandles",!1);$a(this,"hideRotateHandle",!1);$a(this,"hideContextBar",!1);$a(this,"hideSelectionDetail",!1);$a(this,"hideSelection",!1);$a(this,"canChangeAspectRatio",!0);$a(this,"canUnmount",
!0);$a(this,"canResize",[!0,!0]);$a(this,"canScale",!0);$a(this,"canFlip",!0);$a(this,"canEdit",!1);$a(this,"canBind",!1);$a(this,"nonce");$a(this,"bindingDistance",4);$a(this,"isDirty",!1);$a(this,"lastSerialized");$a(this,"getCenter",()=>gf.getBoundsCenter(this.bounds));$a(this,"getRotatedBounds",()=>{const {bounds:sa,props:{rotation:Ea}}=this;return Ea?gf.getBoundsFromPoints(gf.getRotatedCorners(sa,Ea)):sa});$a(this,"hitTestPoint",sa=>{var Ea=this.rotatedBounds;if(!this.props.rotation)return mh.pointInBounds(sa,
Ea);Ea=gf.getRotatedCorners(Ea,this.props.rotation);return mh.pointInPolygon(sa,Ea)});$a(this,"hitTestLineSegment",(sa,Ea)=>{const Ua=gf.getBoundsFromPoints([sa,Ea]),{rotatedBounds:jb,props:{rotation:sb=0}}=this;return gf.boundsContain(jb,Ua)||sb?t(sa,Ea,gf.getRotatedCorners(this.bounds)).didIntersect:0<v(jb,sa,Ea).length});$a(this,"hitTestBounds",sa=>{const {rotatedBounds:Ea,props:{rotation:Ua=0}}=this,jb=gf.getRotatedCorners(this.bounds,Ua);return gf.boundsContain(sa,Ea)||0<H([sa.minX,sa.minY],
[sa.width,sa.height],jb).length});$a(this,"getExpandedBounds",()=>gf.expandBounds(this.getBounds(),this.bindingDistance));$a(this,"getBindingPoint",(sa,Ea,Ua,jb)=>{var sb=this.getBounds(),Ub=this.getExpandedBounds();if(mh.pointInBounds(sa,Ub)){var gc=A(Ea,Ua,Ub).filter(yc=>yc.didIntersect).map(yc=>yc.points[0]);if(gc.length)return Ua=this.getCenter(),gc=gc.sort((yc,Qc)=>$d.dist(Qc,Ea)-$d.dist(yc,Ea))[0],gc=$d.med(sa,gc),jb?(jb=2>$d.dist(sa,Ua)?Ua:sa,sb=0):(jb=2>$d.distanceToLineSegment(sa,gc,Ua)?
Ua:gc,sb=mh.pointInBounds(sa,sb)?this.bindingDistance:Math.max(this.bindingDistance,gf.getBoundsSides(sb).map(yc=>$d.distanceToLineSegment(yc[1][0],yc[1][1],sa)).sort((yc,Qc)=>yc-Qc)[0])),Ub=$d.divV($d.sub(jb,[Ub.minX,Ub.minY]),[Ub.width,Ub.height]),{point:$d.clampV(Ub,0,1),distance:sb}}});$a(this,"getSerialized",()=>{var sa=Id(me({},this.props),{type:this.type,nonce:this.nonce});return oe(sa,new Map)});$a(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||xc(()=>{this.setIsDirty(!1);
this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});$a(this,"validateProps",sa=>sa);$a(this,"update",(sa,Ea=!1,Ua=!1)=>{Ea||this.isDirty||this.setIsDirty(!0);Ea||Ua||this.incNonce();Object.assign(this.props,this.validateProps(sa));return this});$a(this,"clone",()=>new this.constructor(this.serialized));$a(this,"onResetBounds",sa=>this);$a(this,"scale",[1,1]);$a(this,"onResizeStart",sa=>{var Ea;
this.scale=[...(null!=(Ea=this.props.scale)?Ea:[1,1])];return this});$a(this,"onResize",(sa,Ea)=>{const {bounds:Ua,rotation:jb,scale:[sb,Ub]}=Ea;sa=[...this.scale];0>sb&&(sa[0]*=-1);0>Ub&&(sa[1]*=-1);this.update({point:[Ua.minX,Ua.minY],scale:sa,rotation:jb});return this});$a(this,"onHandleChange",(sa,{id:Ea,delta:Ua})=>{if(void 0!==sa.handles){var jb=ch(sa.handles);jb[Ea]=Id(me({},jb[Ea]),{point:$d.add(Ua,sa.handles[Ea].point)});var sb=gf.getCommonTopLeft(Object.values(jb).map(Ub=>Ub.point));Object.values(jb).forEach(Ub=>
{Ub.point=$d.sub(Ub.point,sb)});this.update({point:$d.add(sa.point,sb),handles:jb})}});var l,E;const Y=this.constructor.id,la=null!=(l=this.constructor.defaultProps)?l:{};this.type=Y;this.props=me(me({scale:[1,1]},la),d);this.nonce=null!=(E=d.nonce)?E:Date.now();vf(this)}get id(){return this.props.id}setNonce(d){this.nonce=d}incNonce(){this.nonce++}setIsDirty(d){this.isDirty=d}setLastSerialized(d){this.lastSerialized=d}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(d){d=
this.getBounds();const {stroke:l,strokeWidth:E,strokeType:Y,opacity:la,fill:sa,noFill:Ea,borderRadius:Ua}=this.props;return(0,wb.jsx)("rect",{fill:Ea?"none":sa,stroke:Ea?sa:l,strokeWidth:null!=E?E:2,strokeDasharray:"dashed"===Y?"8 2":void 0,fillOpacity:null!=la?la:.2,width:d.width,height:d.height,rx:Ua,ry:Ua})}};$a(Kf,"type");Xd([cg],Kf.prototype,"props",2);Xd([cg],Kf.prototype,"canResize",2);Xd([cg],Kf.prototype,"nonce",2);Xd([cg],Kf.prototype,"isDirty",2);Xd([cg],Kf.prototype,"lastSerialized",2);
Xd([ng],Kf.prototype,"id",1);Xd([Vf],Kf.prototype,"setNonce",1);Xd([Vf],Kf.prototype,"incNonce",1);Xd([Vf],Kf.prototype,"setIsDirty",1);Xd([Vf],Kf.prototype,"setLastSerialized",1);Xd([ng],Kf.prototype,"center",1);Xd([ng],Kf.prototype,"bounds",1);Xd([ng],Kf.prototype,"rotatedBounds",1);Xd([ng],Kf.prototype,"serialized",1);Xd([Vf],Kf.prototype,"update",2);var hg=class extends Kf{constructor(d={}){super(d);$a(this,"canBind",!0);$a(this,"getBounds",()=>{const [l,E]=this.props.point,[Y,la]=this.props.size;
return{minX:l,minY:E,maxX:l+Y,maxY:E+la,width:Y,height:la}});$a(this,"getRotatedBounds",()=>gf.getBoundsFromPoints(gf.getRotatedCorners(this.bounds,this.props.rotation)));$a(this,"onResize",(l,E)=>{const {bounds:Y,rotation:la,scale:[sa,Ea]}=E;l=[...this.scale];0>sa&&(l[0]*=-1);0>Ea&&(l[1]*=-1);this.update({point:[Y.minX,Y.minY],scale:l,rotation:la});return this.update({rotation:la,point:[Y.minX,Y.minY],size:[Math.max(1,Y.width),Math.max(1,Y.height)],scale:l})});$a(this,"validateProps",l=>{void 0!==
l.size&&(l.size[0]=Math.max(l.size[0],1),l.size[1]=Math.max(l.size[1],1));return l});vf(this)}};$a(hg,"id","box");$a(hg,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var Kh=class extends Kf{constructor(d={}){super(d);$a(this,"getBounds",()=>{const {pointBounds:l,props:{point:E}}=this;return gf.translateBounds(l,E)});$a(this,"getRotatedBounds",()=>{const {props:{rotation:l,point:E},bounds:Y,rotatedPoints:la}=this;return l?gf.translateBounds(gf.getBoundsFromPoints(la),
E):Y});$a(this,"normalizedPoints",[]);$a(this,"isResizeFlippedX",!1);$a(this,"isResizeFlippedY",!1);$a(this,"onResizeStart",()=>{var l;const {bounds:E,props:{points:Y}}=this;this.scale=[...(null!=(l=this.props.scale)?l:[1,1])];const la=[E.width,E.height];this.normalizedPoints=Y.map(sa=>od.divV(sa,la));return this});$a(this,"onResize",(l,E)=>{const {bounds:Y,scale:[la,sa]}=E,Ea=[Y.width,Y.height];l=[...this.scale];0>la&&(l[0]*=-1);0>sa&&(l[1]*=-1);return this.update(la||sa?{point:[Y.minX,Y.minY],points:this.normalizedPoints.map(Ua=>
od.mulV(Ua,Ea).concat(Ua[2])),scale:l}:{point:[Y.minX,Y.minY],points:this.normalizedPoints.map(Ua=>od.mulV(Ua,Ea).concat(Ua[2]))})});$a(this,"hitTestPoint",l=>{const {props:{points:E,point:Y}}=this;return mh.pointNearToPolyline(od.sub(l,Y),E)});$a(this,"hitTestLineSegment",(l,E)=>{const {bounds:Y,props:{points:la,point:sa}}=this;if(mh.pointInBounds(l,Y)||mh.pointInBounds(E,Y)||0<v(Y,l,E).length){const Ea=od.sub(l,sa),Ua=od.sub(E,sa);return t(Ea,Ua,la).didIntersect||!!la.find(jb=>5>od.dist(Ea,jb)||
5>od.dist(Ua,jb))}return!1});$a(this,"hitTestBounds",l=>{const {rotatedBounds:E,props:{points:Y,point:la}}=this,sa=gf.translateBounds(l,od.neg(la));return gf.boundsContain(l,E)||Y.every(Ea=>mh.pointInBounds(Ea,sa))||gf.boundsCollide(l,E)&&0<w([sa.minX,sa.minY],[sa.width,sa.height],Y).length});vf(this)}get pointBounds(){const {props:{points:d}}=this;return gf.getBoundsFromPoints(d)}get rotatedPoints(){const {props:{point:d,points:l,rotation:E},center:Y}=this;if(!E)return l;const la=od.sub(Y,d);return l.map(sa=>
od.rotWith(sa,la,E))}};$a(Kh,"id","draw");$a(Kh,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});Xd([ng],Kh.prototype,"pointBounds",1);Xd([ng],Kh.prototype,"rotatedPoints",1);var Sj=class extends Kf{constructor(d={}){super(d);$a(this,"hideSelection",!0);$a(this,"hideResizeHandles",!0);$a(this,"hideRotateHandle",!0);$a(this,"hideSelectionDetail",!0);$a(this,"getBounds",()=>{const {props:{point:[l,E],radius:Y=0}}=this;return{minX:l,minY:E,maxX:l+2*Y,maxY:E+
2*Y,width:2*Y,height:2*Y}});$a(this,"getRotatedBounds",()=>gf.getBoundsFromPoints(gf.getRotatedCorners(this.bounds,this.props.rotation)));$a(this,"onResize",(l,E)=>{({props:{radius:l=0}}=this);return this.update({point:[E.bounds.minX+E.bounds.width/2-l,E.bounds.minY+E.bounds.height/2-l]})});vf(this)}};$a(Sj,"id","dot");$a(Sj,"defaultProps",{id:"dot",type:"dot",parentId:"page",point:[0,0],radius:6});var Rj=class extends hg{constructor(d={}){super(d);$a(this,"getBounds",()=>{const {props:{point:[l,
E],size:[Y,la]}}=this;return gf.getRotatedEllipseBounds(l,E,Y/2,la/2,0)});$a(this,"getRotatedBounds",()=>{const {props:{point:[l,E],size:[Y,la],rotation:sa}}=this;return gf.getRotatedEllipseBounds(l,E,Y/2,la/2,sa)});$a(this,"hitTestPoint",l=>{const {props:{size:E,rotation:Y},center:la}=this;return mh.pointInEllipse(l,la,E[0],E[1],Y||0)});$a(this,"hitTestLineSegment",(l,E)=>{const {props:{size:[Y,la],rotation:sa=0},center:Ea}=this;return G(l,E,Ea,Y,la,sa).didIntersect});$a(this,"hitTestBounds",l=>
{const {props:{size:[E,Y],rotation:la=0},rotatedBounds:sa}=this;var Ea;if(!(Ea=gf.boundsContain(l,sa))){const {minX:Ua,minY:jb,width:sb,height:Ub}=l;Ea=0<x(this.center,E/2,Y/2,la,[Ua,jb],[sb,Ub]).length}return Ea});vf(this)}};$a(Rj,"id","ellipse");$a(Rj,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var Dh=class extends hg{constructor(d={}){super(d);$a(this,"onResetBounds",l=>{const {clipping:E,size:Y,point:la}=this.props;if(E){const [sa,Ea,Ua,jb]=Array.isArray(E)?
E:[E,E,E,E];return this.update({clipping:0,point:[la[0]-jb,la[1]-sa],size:[Y[0]+(jb-Ea),Y[1]+(sa-Ua)]})}if(l.asset){const {size:[sa,Ea]}=l.asset;this.update({clipping:0,point:[la[0]+Y[0]/2-sa/2,la[1]+Y[1]/2-Ea/2],size:[sa,Ea]})}return this});$a(this,"onResize",(l,E)=>{const {bounds:Y,clip:la,scale:sa}=E;({clipping:E}=this.props);const {clipping:Ea}=l;if(la){const {point:[Ua,jb],size:[sb,Ub]}=l,[gc,yc,Qc,Jc]=Ea?Array.isArray(Ea)?Ea:[Ea,Ea,Ea,Ea]:[0,0,0,0];E=[gc+(Y.minY-jb),yc+(Y.maxX-(Ua+sb)),Qc+(Y.maxY-
(jb+Ub)),Jc+(Y.minX-Ua)]}else void 0!==Ea&&(E=Array.isArray(Ea)?Ea:[Ea,Ea,Ea,Ea],E=[E[0]*sa[1],E[1]*sa[0],E[2]*sa[1],E[3]*sa[0]]);if(E&&Array.isArray(E)){const Ua=E;Ua.every((jb,sb)=>0===sb||jb===Ua[sb-1])&&(E=Ua[0])}return this.update({point:[Y.minX,Y.minY],size:[Math.max(1,Y.width),Math.max(1,Y.height)],clipping:E})});vf(this)}};$a(Dh,"id","ellipse");$a(Dh,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var wj=class extends Kf{constructor(d=
{}){super(d);$a(this,"getBounds",()=>{const {points:l,props:{point:E}}=this;return gf.translateBounds(gf.getBoundsFromPoints(l),E)});$a(this,"getRotatedBounds",()=>{const {rotatedPoints:l,props:{point:E}}=this;return gf.translateBounds(gf.getBoundsFromPoints(l),E)});$a(this,"normalizedHandles",[]);$a(this,"onResizeStart",()=>{var l;const {props:{handles:E},bounds:Y}=this;this.scale=[...(null!=(l=this.props.scale)?l:[1,1])];const la=[Y.width,Y.height];this.normalizedHandles=Object.values(E).map(sa=>
od.divV(sa.point,la));return this});$a(this,"onResize",(l,E)=>{const {bounds:Y,scale:[la,sa]}=E,{props:{handles:Ea},normalizedHandles:Ua}=this,jb=[Y.width,Y.height];l=[...this.scale];0>la&&(l[0]*=-1);0>sa&&(l[1]*=-1);return this.update({point:[Y.minX,Y.minY],handles:Object.values(Ea).map((sb,Ub)=>Id(me({},sb),{point:od.mulV(Ua[Ub],jb)})),scale:l})});$a(this,"hitTestPoint",l=>{const {points:E}=this;return mh.pointNearToPolyline(od.sub(l,this.props.point),E)});$a(this,"hitTestLineSegment",(l,E)=>{const {bounds:Y,
points:la,props:{point:sa}}=this;if(mh.pointInBounds(l,Y)||mh.pointInBounds(E,Y)||0<v(Y,l,E).length){const Ea=od.sub(l,sa),Ua=od.sub(E,sa);return t(Ea,Ua,la).didIntersect||!!la.find(jb=>5>od.dist(Ea,jb)||5>od.dist(Ua,jb))}return!1});$a(this,"hitTestBounds",l=>{const {rotatedBounds:E,points:Y,props:{point:la}}=this,sa=gf.translateBounds(l,od.neg(la));return gf.boundsContain(l,E)||Y.every(Ea=>mh.pointInBounds(Ea,sa))||gf.boundsCollide(l,E)&&0<w([sa.minX,sa.minY],[sa.width,sa.height],Y).length});$a(this,
"validateProps",l=>{l.point&&(l.point=[0,0]);void 0!==l.handles&&1>Object.values(l.handles).length&&(l.handles=wj.defaultProps.handles);return l});vf(this)}get points(){return Object.values(this.props.handles).map(d=>d.point)}get centroid(){const {points:d}=this;return Xa.getPolygonCentroid(d)}get rotatedPoints(){const {centroid:d,props:{handles:l,rotation:E}}=this;return E?Object.values(l).map(Y=>od.rotWith(Y.point,d,E)):this.points}},Uj=wj;$a(Uj,"id","polyline");$a(Uj,"defaultProps",{id:"polyline",
type:"polyline",parentId:"page",point:[0,0],handles:{}});Xd([ng],Uj.prototype,"points",1);Xd([ng],Uj.prototype,"centroid",1);Xd([ng],Uj.prototype,"rotatedPoints",1);var Rm=class extends Uj{constructor(d={}){super(d);$a(this,"validateProps",l=>{l.point&&(l.point=[0,0]);void 0!==l.handles&&1>Object.values(l.handles).length&&(l.handles=Rm.defaultProps.handles);return l});$a(this,"getHandlesChange",(l,E)=>{var Y=Lc(l.handles,E);Y=Lc(Y,{start:{point:$d.toFixed(Y.start.point)},end:{point:$d.toFixed(Y.end.point)}});
if(!$d.isEqual(Y.start.point,Y.end.point)){E={point:l.point,handles:ch(Y)};l=l.point;Y=gf.translateBounds(gf.getBoundsFromPoints(Object.values(Y).map(sa=>sa.point)),E.point);var la=$d.sub([Y.minX,Y.minY],l);$d.isEqual(la,[0,0])||(Object.values(E.handles).forEach(sa=>{sa.point=$d.toFixed($d.sub(sa.point,la))}),E.point=$d.toFixed($d.add(E.point,la)));return E}});vf(this)}},Qn=Rm;$a(Qn,"id","line");$a(Qn,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,
point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Em=class extends hg{constructor(d={}){super(d);$a(this,"getRotatedBounds",()=>{const {rotatedVertices:l,props:{point:E},offset:Y}=this;return gf.translateBounds(gf.getBoundsFromPoints(l),od.add(E,Y))});$a(this,"hitTestPoint",l=>{const {vertices:E}=this;return mh.pointInPolygon(od.add(l,this.props.point),E)});$a(this,"hitTestLineSegment",(l,E)=>{const {vertices:Y,props:{point:la}}=this;return t(od.sub(l,la),od.sub(E,la),Y).didIntersect});$a(this,
"hitTestBounds",l=>{const {rotatedBounds:E,offset:Y,rotatedVertices:la,props:{point:sa}}=this,Ea=gf.translateBounds(l,od.neg(od.add(sa,Y)));return gf.boundsContain(l,E)||la.every(Ua=>mh.pointInBounds(Ua,Ea))||0<H([Ea.minX,Ea.minY],[Ea.width,Ea.height],la).length});$a(this,"validateProps",l=>{l.point&&(l.point=[0,0]);void 0!==l.sides&&3>l.sides&&(l.sides=3);return l});vf(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:d},vertices:l}=this;return l.map(E=>od.add(E,
d))}get centroid(){const {vertices:d}=this;return Xa.getPolygonCentroid(d)}get rotatedVertices(){const {vertices:d,centroid:l,props:{rotation:E}}=this;return E?d.map(Y=>od.rotWith(Y,l,E)):d}get offset(){const {props:{size:[d,l]}}=this,E=gf.getBoundsCenter(gf.getBoundsFromPoints(this.vertices));return od.sub(od.div([d,l],2),E)}getVertices(d=0){const {ratio:l,sides:E,size:Y}=this.props;return 3===E?Xa.getTriangleVertices(Y,d,l):Xa.getPolygonVertices(Y,E,d,l)}};$a(Em,"id","polygon");$a(Em,"defaultProps",
{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});Xd([ng],Em.prototype,"vertices",1);Xd([ng],Em.prototype,"pageVertices",1);Xd([ng],Em.prototype,"centroid",1);Xd([ng],Em.prototype,"rotatedVertices",1);Xd([ng],Em.prototype,"offset",1);var io=class extends hg{constructor(d={}){super(d);$a(this,"canEdit",!0);$a(this,"canFlip",!1);vf(this)}};$a(io,"id","text");$a(io,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],
size:[16,32],text:""});var ah=class{constructor(){$a(this,"_id");$a(this,"_initial");$a(this,"_states");$a(this,"_isActive",!1);$a(this,"cursor");$a(this,"_disposables",[]);$a(this,"children",new Map([]));$a(this,"registerStates",E=>{E.forEach(Y=>this.children.set(Y.id,new Y(this,this)));return this});$a(this,"deregisterStates",E=>{E.forEach(Y=>{var la;null==(la=this.children.get(Y.id))?void 0:la.dispose();this.children.delete(Y.id)});return this});$a(this,"currentState",{});$a(this,"transition",
(E,Y={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${E}.`);const la=this.children.get(E),sa=this.currentState;if(!la)throw Error(`Could not find a state named ${E}.`);xc(()=>{this.currentState?(sa._events.onExit(Id(me({},Y),{toId:E})),sa.dispose(),la.registerKeyboardShortcuts(),this.setCurrentState(la),this._events.onTransition(Id(me({},Y),{fromId:sa.id,toId:E})),la._events.onEnter(Id(me({},Y),{fromId:sa.id}))):(this.currentState=la,la._events.onEnter(Id(me({},
Y),{fromId:""})))});return this});$a(this,"isIn",E=>{E=E.split(".").reverse();let Y=this;for(;0<E.length;){const la=E.pop();if(!la)return!0;if(Y.currentState.id===la){if(0===E.length)return!0;Y=Y.currentState}else break}return!1});$a(this,"isInAny",(...E)=>E.some(this.isIn));$a(this,"forwardEvent",(E,...Y)=>{var la,sa;(null==(sa=null==(la=this.currentState)?void 0:la._events)?0:sa[E])&&xc(()=>{var Ea;return null==(Ea=this.currentState._events)?void 0:Ea[E](...Y)})});$a(this,"_events",{onTransition:E=>
{var Y;null==(Y=this.onTransition)?void 0:Y.call(this,E)},onEnter:E=>{var Y;this._isActive=!0;this.initial&&this.transition(this.initial,E);null==(Y=this.onEnter)?void 0:Y.call(this,E)},onExit:E=>{var Y,la,sa;this._isActive=!1;null==(la=null==(Y=this.currentState)?void 0:Y.onExit)?void 0:la.call(Y,{toId:"parent"});null==(sa=this.onExit)?void 0:sa.call(this,E)},onWheel:(E,Y)=>{var la;null==(la=this.onWheel)?void 0:la.call(this,E,Y);this.forwardEvent("onWheel",E,Y)},onPointerDown:(E,Y)=>{var la;null==
(la=this.onPointerDown)?void 0:la.call(this,E,Y);this.forwardEvent("onPointerDown",E,Y)},onPointerUp:(E,Y)=>{var la;null==(la=this.onPointerUp)?void 0:la.call(this,E,Y);this.forwardEvent("onPointerUp",E,Y)},onPointerMove:(E,Y)=>{var la;null==(la=this.onPointerMove)?void 0:la.call(this,E,Y);this.forwardEvent("onPointerMove",E,Y)},onPointerEnter:(E,Y)=>{var la;null==(la=this.onPointerEnter)?void 0:la.call(this,E,Y);this.forwardEvent("onPointerEnter",E,Y)},onPointerLeave:(E,Y)=>{var la;null==(la=this.onPointerLeave)?
void 0:la.call(this,E,Y);this.forwardEvent("onPointerLeave",E,Y)},onDoubleClick:(E,Y)=>{var la;null==(la=this.onDoubleClick)?void 0:la.call(this,E,Y);this.forwardEvent("onDoubleClick",E,Y)},onKeyDown:(E,Y)=>{var la;this._events.onModifierKey(E,Y);null==(la=this.onKeyDown)?void 0:la.call(this,E,Y);this.forwardEvent("onKeyDown",E,Y)},onKeyUp:(E,Y)=>{var la;this._events.onModifierKey(E,Y);null==(la=this.onKeyUp)?void 0:la.call(this,E,Y);this.forwardEvent("onKeyUp",E,Y)},onPinchStart:(E,Y)=>{var la;null==
(la=this.onPinchStart)?void 0:la.call(this,E,Y);this.forwardEvent("onPinchStart",E,Y)},onPinch:(E,Y)=>{var la;null==(la=this.onPinch)?void 0:la.call(this,E,Y);this.forwardEvent("onPinch",E,Y)},onPinchEnd:(E,Y)=>{var la;null==(la=this.onPinchEnd)?void 0:la.call(this,E,Y);this.forwardEvent("onPinchEnd",E,Y)},onModifierKey:(E,Y)=>{switch(Y.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(E,Y)}}});$a(this,"onEnter");$a(this,"onExit");$a(this,"onTransition");$a(this,"onWheel");
$a(this,"onPointerDown");$a(this,"onPointerUp");$a(this,"onPointerMove");$a(this,"onPointerEnter");$a(this,"onPointerLeave");$a(this,"onDoubleClick");$a(this,"onKeyDown");$a(this,"onKeyUp");$a(this,"onPinchStart");$a(this,"onPinch");$a(this,"onPinchEnd");const d=this.constructor.initial,l=this.constructor.states;this._id=this.constructor.id;this._initial=d;this._states=l}dispose(){this._disposables.forEach(d=>d());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(d=>
[d,...d.descendants])}setCurrentState(d){this.currentState=d}};$a(ah,"id");$a(ah,"shortcuts");Xd([cg],ah.prototype,"currentState",2);Xd([Vf],ah.prototype,"setCurrentState",1);var Il=class extends ah{constructor(d,l){var E,Y;super();$a(this,"registerKeyboardShortcuts",()=>{var la;null!=(la=this._shortcuts)&&la.length&&this._disposables.push(...this._shortcuts.map(({keys:sa,fn:Ea})=>Hm.registerShortcut(sa,Ua=>{this.isActive&&Ea(this.root,this,Ua)})))});$a(this,"_root");$a(this,"_parent");$a(this,"_shortcuts",
[]);$a(this,"children",new Map([]));$a(this,"registerStates",la=>{la.forEach(sa=>this.children.set(sa.id,new sa(this,this._root)));return this});$a(this,"deregisterStates",la=>{la.forEach(sa=>{var Ea;null==(Ea=this.children.get(sa.id))?void 0:Ea.dispose();this.children.delete(sa.id)});return this});this._parent=d;this._root=l;this.states&&0<this.states.length&&(this.registerStates(this.states),d=null!=(E=this.initial)?E:this.states[0].id,E=this.children.get(d))&&(this.setCurrentState(E),null==(Y=
this.currentState)?void 0:Y._events.onEnter({fromId:"initial"}));this._shortcuts=this.constructor.shortcuts;vf(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};$a(Il,"cursor");var Hj=class extends Il{constructor(){super(...arguments);$a(this,"isLocked",!1);$a(this,"previous");$a(this,"onEnter",({fromId:d})=>{this.previous=d;this.cursor&&this.app.cursors.setCursor(this.cursor)});
$a(this,"onTransition",d=>{({toId:d}=d);d=this.children.get(d);this.app.cursors.reset();d.cursor?this.app.cursors.setCursor(d.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Xg=class extends Il{get app(){return this.root}get tool(){return this.parent}},ho=class extends Xg{constructor(){super(...arguments);$a(this,"cursor","crosshair");$a(this,"creatingShape");$a(this,"aspectRatio");$a(this,"initialBounds",{});$a(this,"onEnter",()=>{const {currentPage:d,
inputs:{originPoint:l,currentPoint:E}}=this.app;var {Shape:Y}=this.tool;Y=new Y({id:Pg(),type:Y.id,parentId:d.id,point:[...l],size:$d.abs($d.sub(E,l))});this.initialBounds={minX:l[0],minY:l[1],maxX:l[0]+1,maxY:l[1]+1,width:1,height:1};Y.canChangeAspectRatio||(Y.aspectRatio?(this.aspectRatio=Y.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);
this.creatingShape=Y;this.app.currentPage.addShapes(Y);this.app.setSelectedShapes([Y])});$a(this,"onPointerMove",d=>{if(!d.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:d}=this);var {currentPoint:l,originPoint:E,shiftKey:Y}=this.app.inputs;d=gf.getTransformedBoundingBox(d,"bottom_right_corner",$d.sub(l,E),0,Y||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[d.minX,d.minY],size:[d.width,
d.height]})}});$a(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape&&this.app.setSelectedShapes([this.creatingShape]);this.app.settings.isToolLocked||this.app.transition("select");this.app.persist()});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};$a(ho,"id","creating");var qq=
class extends Xg{constructor(){super(...arguments);$a(this,"onPointerDown",(d,l)=>{d.order||this.tool.transition("pointing")});$a(this,"onPinchStart",(...d)=>{var l,E;this.app.transition("select",{returnTo:this.app.currentState.id});null==(E=(l=this.app._events).onPinchStart)?void 0:E.call(l,...d)});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":this.app.transition("select")}})}};$a(qq,"id","idle");var tl=class extends Xg{constructor(){super(...arguments);$a(this,"onPointerMove",()=>{const {currentPoint:d,
originPoint:l}=this.app.inputs;5<od.dist(d,l)&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});$a(this,"onPointerUp",()=>{this.tool.transition("idle")})}};$a(tl,"id","pointing");var Sm=class extends Hj{constructor(){super(...arguments);$a(this,"cursor","crosshair")}};$a(Sm,"id","box");$a(Sm,"states",[qq,tl,ho]);$a(Sm,"initial","idle");var to=class extends Xg{constructor(){super(...arguments);$a(this,"shape",{});$a(this,"points",[[0,0,.5]]);$a(this,"onEnter",
()=>{var d;const {Shape:l,previousShape:E}=this.tool;var {originPoint:Y}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&E){this.shape=E;var {shape:la}=this;var sa=la.props.points[la.props.points.length-1];const Ua=od.sub(Y,la.props.point).concat(null!=(d=Y[2])?d:.5);this.points=[...la.props.points,sa,sa];const jb=Math.ceil(od.dist(sa,Y)/16);for(let sb=0,Ub=sb/(jb-1);sb<jb;sb++){d=this.points;Y=d.push;la=od.lrp(sa,Ua,Ub);var Ea=sa[2];Y.call(d,la.concat.call(la,Ea+(Ua[2]-Ea)*
Ub))}this.addNextPoint(Ua)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(sa=Y[2])?sa:.5]],this.shape=new l({id:Pg(),type:l.id,parentId:this.app.currentPage.id,point:Y.slice(0,2),points:this.points,isComplete:!1}),this.app.currentPage.addShapes(this.shape)});$a(this,"onPointerMove",()=>{const {shape:d}=this,{currentPoint:l,previousPoint:E}=this.app.inputs;od.isEqual(E,l)||this.addNextPoint(od.sub(l,d.props.point).concat(l[2]))});$a(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");
this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?mh.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");this.app.persist()});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(d){const {shape:l}=
this,E=od.min(d,[0,0]);this.points.push(d);0>E[0]||0>E[1]?(this.points=this.points.map(Y=>od.sub(Y,E).concat(Y[2])),l.update({point:od.add(l.props.point,E),points:this.points})):l.update({points:this.points})}};$a(to,"id","creating");var Po=class extends Xg{constructor(){super(...arguments);$a(this,"onPointerDown",(d,l)=>{d.order||this.tool.transition("creating")});$a(this,"onPinchStart",(...d)=>{var l,E;this.app.transition("select",{returnTo:this.app.currentState.id});null==(E=(l=this.app._events).onPinchStart)?
void 0:E.call(l,...d)});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":this.app.transition("select")}})}};$a(Po,"id","idle");var zn=class extends Hj{constructor(){super(...arguments);$a(this,"cursor","crosshair");$a(this,"simplify",!0);$a(this,"simplifyTolerance",1);$a(this,"previousShape")}};$a(zn,"id","draw");$a(zn,"states",[Po,to]);$a(zn,"initial","idle");var pq=class extends Xg{constructor(){super(...arguments);$a(this,"points",[[0,0,.5]]);$a(this,"hitShapes",new Set);$a(this,"onEnter",
()=>{const {originPoint:d}=this.app.inputs;this.points=[d];this.hitShapes.clear()});$a(this,"onPointerMove",()=>{const {currentPoint:d,previousPoint:l}=this.app.inputs;od.isEqual(l,d)||(this.points.push(d),this.app.shapesInViewport.filter(E=>E.hitTestLineSegment(l,d)).forEach(E=>this.hitShapes.add(E)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});$a(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});$a(this,"onWheel",
(d,l)=>{this.onPointerMove(d,l)});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};$a(pq,"id","erasing");var nq=class extends Xg{constructor(){super(...arguments);$a(this,"onPointerDown",(d,l)=>{d.order||this.tool.transition("pointing")});$a(this,"onPinchStart",(...d)=>{var l,E;this.app.transition("select",{returnTo:this.app.currentState.id});null==(E=(l=this.app._events).onPinchStart)?void 0:E.call(l,...d)});$a(this,"onKeyDown",
(d,l)=>{switch(l.key){case "Escape":this.app.transition("select")}})}};$a(nq,"id","idle");var mq=class extends Xg{constructor(){super(...arguments);$a(this,"onEnter",()=>{const {currentPoint:d}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(l=>l.hitTestPoint(d)))});$a(this,"onPointerMove",()=>{const {currentPoint:d,originPoint:l}=this.app.inputs;5<od.dist(d,l)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});$a(this,"onPointerUp",()=>{const d=[...this.app.erasingShapes];
this.app.setErasingShapes([]);this.app.deleteShapes(d);this.tool.transition("idle")})}};$a(mq,"id","pointing");var Qo=class extends Hj{constructor(){super(...arguments);$a(this,"cursor","crosshair")}};$a(Qo,"id","erase");$a(Qo,"states",[nq,mq,pq]);$a(Qo,"initial","idle");var kg=class extends Xg{constructor(){super(...arguments);$a(this,"handle",{});$a(this,"handleId","end");$a(this,"currentShape",{});$a(this,"initialShape",{});$a(this,"bindableShapeIds",[]);$a(this,"startBindingShapeId");$a(this,
"newStartBindingId","");$a(this,"draggedBindingId","");$a(this,"onPointerMove",()=>{const {inputs:{shiftKey:d,previousPoint:l,originPoint:E,currentPoint:Y,modKey:la,altKey:sa}}=this.app;var Ea=this.app.getShapeById(this.initialShape.id),{handles:Ua}=this.initialShape,jb=this.handleId,sb="start"===this.handleId?"end":"start";if(!$d.isEqual(l,Y)){var Ub=$d.sub(Y,E);if(d){var gc=Ua[sb].point,yc=$d.add(Ua[jb].point,Ub),Qc=$d.angle(gc,yc);gc=$d.rotWith(yc,gc,Fa.snapAngleToSegments(Qc,24)-Qc);Ub=$d.add(Ub,
$d.sub(gc,yc))}Ub=$d.add(Ua[jb].point,Ub);Ua={[jb]:Id(me({},Ua[jb]),{point:$d.toFixed(Ub),bindingId:void 0})};var Jc=this.currentShape.getHandlesChange(this.initialShape,Ua);if(Jc){Ua=Lc(Ea.props,Jc);var kd={},ad;jb=Ua.handles[jb];sb=Ua.handles[sb];if(this.startBindingShapeId){var vc;if(Ub=this.app.getShapeById(this.startBindingShapeId)){yc=Ub.getCenter();gc=Ua.handles.end;var md=$d.add(Ua.handles.start.point,Ua.point);$d.isEqual(md,yc)&&md[1]++;Qc=Ub.hitTestPoint(Y);md=$d.uni($d.sub(md,yc));const Ad=
void 0!==this.app.currentPage.bindings[this.newStartBindingId];la||Ub.hitTestPoint($d.add(Ua.point,gc.point))||(vc=Gb(Ea.props,Ub,"start",this.newStartBindingId,yc,yc,md,Qc));vc&&!Ad?(kd[this.newStartBindingId]=vc,Ua.handles.start.bindingId=vc.id):!vc&&Ad&&(console.log("removing start binding"),delete kd[this.newStartBindingId],Ua.handles.start.bindingId=void 0)}}if(!la){vc=$d.add(sb.point,Ua.point);sb=$d.add(jb.point,Ua.point);jb=$d.uni($d.sub(sb,vc));const Ad=$d.add(Ua.point,Ua.handles.start.point),
qd=$d.add(Ua.point,Ua.handles.end.point);Ub=this.bindableShapeIds.map(Bd=>this.app.getShapeById(Bd)).sort((Bd,Fe)=>Fe.nonce-Bd.nonce).filter(Bd=>![Ad,qd].every(Fe=>Bd.hitTestPoint(Fe)));for(const Bd of Ub)if(ad=Gb(Ea.props,Bd,this.handleId,this.draggedBindingId,sb,vc,jb,sa))break}ad?(kd[this.draggedBindingId]=ad,Ua=Lc(Ua,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(Ea=Ea.props.handles[this.handleId].bindingId,void 0!==Ea&&(delete kd[Ea],Ua=Lc(Ua,{handles:{[this.handleId]:{bindingId:void 0}}})));
Jc=this.currentShape.getHandlesChange(Ua,Ua.handles);xc(()=>{var Ad;if(Jc){this.currentShape.update(Jc);this.app.currentPage.updateBindings(kd);const qd=Object.values(null!=(Ad=Jc.handles)?Ad:{}).map(Bd=>Bd.bindingId).map(Bd=>this.app.currentPage.bindings[Bd]).filter(Boolean).flatMap(Bd=>[Bd.toId,Bd.fromId].filter(Boolean));this.app.setBindingShapes(qd)}})}}});$a(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.settings.isToolLocked||
this.app.transition("select");this.app.persist()});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};$a(kg,"id","creating");var Cp=class extends kg{constructor(){super(...arguments);$a(this,"onEnter",()=>{var d;this.app.history.pause();this.newStartBindingId=Pg();this.draggedBindingId=
Pg();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:l}=this.tool;const {originPoint:E}=this.app.inputs;l=new l(Id(me({},l.defaultProps),{id:Pg(),type:l.id,parentId:this.app.currentPage.id,point:E}));this.initialShape=oe(l.props,new Map);this.currentShape=l;this.app.currentPage.addShapes(l);this.app.setSelectedShapes([l]);if(this.startBindingShapeId=null==(d=this.bindableShapeIds.map(Y=>this.app.getShapeById(Y)).filter(Y=>mh.pointInBounds(E,Y.bounds))[0])?void 0:d.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),
1),this.app.setBindingShapes([this.startBindingShapeId])})}};$a(Cp,"id","creating");var lq=class extends Xg{constructor(){super(...arguments);$a(this,"onPointerDown",(d,l)=>{d.order||this.tool.transition("pointing")});$a(this,"onPinchStart",(...d)=>{var l,E;this.app.transition("select",{returnTo:this.app.currentState.id});null==(E=(l=this.app._events).onPinchStart)?void 0:E.call(l,...d)});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":this.app.transition("select")}});$a(this,"onPointerEnter",
d=>{if(!d.order)switch(d.type){case "shape":this.app.setHoveredShape(d.shape.id);break;case "selection":"background"!==d.handle&&"center"!==d.handle&&this.tool.transition("hoveringSelectionHandle",d)}});$a(this,"onPointerLeave",d=>{d.order||"shape"===d.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};$a(lq,"id","idle");var fn=class extends Xg{constructor(){super(...arguments);$a(this,"onPointerMove",()=>{const {currentPoint:d,originPoint:l}=this.app.inputs;5<od.dist(d,l)&&(this.tool.transition("creating"),
this.app.setSelectedShapes(this.app.currentPage.shapes))})}};$a(fn,"id","pointing");var hn=class extends Hj{constructor(){super(...arguments);$a(this,"cursor","crosshair")}};$a(hn,"id","line");$a(hn,"states",[lq,fn,Cp]);$a(hn,"initial","idle");var So=class extends Xg{constructor(){super(...arguments);$a(this,"cursor","crosshair");$a(this,"creatingShape");$a(this,"aspectRatio");$a(this,"initialBounds",{});$a(this,"onEnter",()=>{const {currentPage:d,inputs:{originPoint:l}}=this.app,{Shape:E}=this.tool,
Y=new E({id:Pg(),type:E.id,parentId:d.id,point:[...l],text:"",size:[16,32],isSizeLocked:!0});this.creatingShape=Y;xc(()=>{this.app.currentPage.addShapes(Y);const {bounds:la}=Y;Y.update({point:$d.sub(l,[la.width/2,la.height/2])});this.app.transition("select");this.app.setSelectedShapes([Y]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};$a(So,"id","creating");var Uo=class extends Xg{constructor(){super(...arguments);$a(this,"onPointerDown",(d,
l)=>{d.order||this.tool.transition("creating")});$a(this,"onPinchStart",(...d)=>{var l,E;this.app.transition("select",{returnTo:this.app.currentState.id});null==(E=(l=this.app._events).onPinchStart)?void 0:E.call(l,...d)});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":this.app.transition("select")}})}};$a(Uo,"id","idle");var Vo=class extends Hj{constructor(){super(...arguments);$a(this,"cursor","crosshair")}};$a(Vo,"id","box");$a(Vo,"states",[Uo,So]);$a(Vo,"initial","idle");var mr=ff(Fl()),
On=class extends mr.default{constructor(){super(...arguments);$a(this,"toBBox",d=>d.rotatedBounds)}},Ro=class extends Xg{constructor(){super(...arguments);$a(this,"initialSelectedIds",[]);$a(this,"initialSelectedShapes",[]);$a(this,"tree",new On);$a(this,"onEnter",()=>{const {selectedShapes:d,currentPage:l,selectedIds:E}=this.app;this.initialSelectedIds=Array.from(E.values());this.initialSelectedShapes=Array.from(d.values());this.tree.load(l.shapes)});$a(this,"onExit",()=>{this.initialSelectedIds=
[];this.tree.clear()});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onPointerMove",()=>{const {inputs:{shiftKey:d,ctrlKey:l,originPoint:E,currentPoint:Y}}=this.app,la=gf.getBoundsFromPoints([Y,E],0);this.app.setBrush(la);const sa=this.tree.search(la).filter(Ea=>l?gf.boundsContain(la,Ea.rotatedBounds):Ea.hitTestBounds(la));d?sa.every(Ea=>this.initialSelectedShapes.includes(Ea))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(Ea=>!sa.includes(Ea))):this.app.setSelectedShapes(Array.from((new Set([...this.initialSelectedShapes,
...sa])).values())):this.app.setSelectedShapes(sa)});$a(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});$a(this,"handleModifierKey",(d,l)=>{switch(l.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};$a(Ro,"id","brushing");var oq=class extends Xg{constructor(){super(...arguments);$a(this,"onEnter",d=>{const {selectedIds:l,selectedShapes:E,inputs:{shiftKey:Y}}=this.app;"shape"!==d.type||
E.has(d.shape)||(Y?this.app.setSelectedShapes([...Array.from(l.values()),d.shape.id]):this.app.setSelectedShapes([d.shape]))});$a(this,"onPointerDown",()=>{this.tool.transition("idle")})}};$a(oq,"id","contextMenu");var Dp=class extends Xg{constructor(){super(...arguments);$a(this,"onEnter",d=>{"pinching"===d.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});$a(this,"onExit",()=>{this.app.setHoveredShape(void 0)});$a(this,"onPointerEnter",d=>{if(!d.order)switch(d.type){case "shape":this.app.setHoveredShape(d.shape.id);
break;case "selection":"background"!==d.handle&&"center"!==d.handle&&this.tool.transition("hoveringSelectionHandle",d)}});$a(this,"onPointerDown",(d,l)=>{const {selectedShapes:E,inputs:{ctrlKey:Y}}=this.app;if(2===l.button)this.tool.transition("contextMenu",d);else if(Y)this.tool.transition("pointingCanvas");else switch(d.type){case "selection":switch(d.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");
break;default:this.tool.transition("pointingResizeHandle",d)}break;case "shape":if(E.has(d.shape))this.tool.transition("pointingSelectedShape",d);else{const {selectionBounds:la,inputs:sa}=this.app;la&&mh.pointInBounds(sa.currentPoint,la)?this.tool.transition("pointingShapeBehindBounds",d):this.tool.transition("pointingShape",d)}break;case "handle":this.tool.transition("pointingHandle",d);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",
me(me({},l),d))}});$a(this,"onPointerLeave",d=>{d.order||"shape"===d.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})});$a(this,"onDoubleClick",d=>{if(!d.order&&1===this.app.selectedShapesArray.length){var l=this.app.selectedShapesArray[0];if(l.canEdit&&mh.pointInBounds(this.app.inputs.currentPoint,l.bounds))switch(d.type){case "shape":this.tool.transition("editingShape",d);break;case "selection":1===this.app.selectedShapesArray.length&&
this.tool.transition("editingShape",{type:"shape",target:l})}}});$a(this,"onKeyDown",(d,l)=>{({selectedShapesArray:d}=this.app);switch(l.key){case "Enter":1===d.length&&d[0].canEdit&&this.tool.transition("editingShape",{type:"shape",shape:d[0],order:0});break;case "Escape":d.length&&this.app.setSelectedShapes([])}})}};$a(Dp,"id","idle");var An=class extends Xg{constructor(){super(...arguments);$a(this,"onEnter",d=>{const {selectedIds:l,inputs:{shiftKey:E}}=this.app;E?this.app.setSelectedShapes([...Array.from(l.values()),
d.shape.id]):this.app.setSelectedShapes([d.shape])});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onPointerMove",()=>{const {currentPoint:d,originPoint:l}=this.app.inputs;5<od.dist(d,l)&&this.tool.transition("translating")});$a(this,"onPointerUp",()=>{this.tool.transition("idle")});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})})}};$a(An,"id","pointingShape");var Ep=class extends Xg{constructor(){super(...arguments);$a(this,"cursor","move");$a(this,
"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onPointerMove",()=>{const {currentPoint:d,originPoint:l}=this.app.inputs;5<od.dist(d,l)&&this.tool.transition("translating")});$a(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})})}};$a(Ep,"id","pointingBoundsBackground");var To=class extends Xg{constructor(){super(...arguments);$a(this,"onEnter",()=>{var d;const {shiftKey:l}=this.app.inputs;
l||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(d=window.getSelection())?void 0:d.removeAllRanges())});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onPointerMove",()=>{const {currentPoint:d,originPoint:l}=this.app.inputs;5<od.dist(d,l)&&this.tool.transition("brushing")});$a(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})});
$a(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};$a(To,"id","pointingCanvas");var Fp=class extends Xg{constructor(){super(...arguments);$a(this,"cursor","move");$a(this,"isCloning",!1);$a(this,"didClone",!1);$a(this,"initialPoints",{});$a(this,"initialShapePoints",{});$a(this,"initialClonePoints",{});$a(this,"clones",[]);$a(this,"onEnter",()=>{var d;this.app.history.pause();const {selectedShapesArray:l,inputs:E}=this.app;this.initialPoints=this.initialShapePoints=
Object.fromEntries(l.map(({id:Y,props:{point:la}})=>[Y,la.slice()]));document.querySelectorAll("input,textarea").forEach(Y=>Y.blur());null==(d=document.getSelection())?void 0:d.empty();E.altKey?this.startCloning():this.moveSelectedShapesToPointer()});$a(this,"onExit",()=>{this.app.history.resume();this.app.persist();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,
"onPointerMove",()=>{this.moveSelectedShapesToPointer()});$a(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});$a(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Alt":this.startCloning();break;case "Escape":this.app.selectedShapes.forEach(E=>{E.update({point:this.initialPoints[E.id]})}),this.tool.transition("idle")}});$a(this,"onKeyUp",(d,l)=>{switch(l.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");
const {currentPage:E,selectedShapes:Y}=this.app;E.removeShapes(...Y);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {selectedShapes:d,inputs:{shiftKey:l,originPoint:E,currentPoint:Y}}=this.app,{initialPoints:la}=this,sa=od.sub(Y,E);l&&(Math.abs(sa[0])<Math.abs(sa[1])?sa[0]=0:sa[1]=0);xc(()=>{d.forEach(Ea=>Ea.update({point:od.add(la[Ea.id],sa)}))})}startCloning(){this.didClone||
(this.clones=this.app.selectedShapesArray.map(d=>{const l=this.app.getShapeClass(d.type);if(!l)throw Error("Could not find that shape class.");return new l(Id(me({},d.serialized),{id:Pg(),type:d.type,point:this.initialPoints[d.id],rotation:d.props.rotation}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:d,props:{point:l}})=>[d,l.slice()])),this.didClone=!0);this.app.selectedShapes.forEach(d=>{d.update({point:this.initialPoints[d.id]})});this.initialPoints=this.initialClonePoints;
this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0;this.moveSelectedShapesToPointer()}};$a(Fp,"id","translating");var ps=class extends Xg{constructor(){super(...arguments);$a(this,"pointedSelectedShape");$a(this,"onEnter",d=>{this.pointedSelectedShape=d.shape});$a(this,"onExit",()=>{this.pointedSelectedShape=void 0});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onPointerMove",
()=>{const {currentPoint:d,originPoint:l}=this.app.inputs;5<od.dist(d,l)&&this.tool.transition("translating")});$a(this,"onPointerUp",()=>{const {shiftKey:d,currentPoint:l}=this.app.inputs;var {selectedShapesArray:E}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(d)({selectedIds:E}=this.app),E=Array.from(E.values()),E.splice(E.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(E);else{if(1===E.length&&this.pointedSelectedShape.canEdit&&
this.pointedSelectedShape instanceof hg&&mh.pointInBounds(l,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})})}};$a(ps,"id","pointingSelectedShape");var os=class extends Xg{constructor(){super(...arguments);$a(this,"info",{});$a(this,"onEnter",d=>
{this.info=d;this.updateCursor()});$a(this,"onExit",()=>{this.app.cursors.reset()});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onPointerMove",()=>{const {currentPoint:d,originPoint:l}=this.app.inputs;5<od.dist(d,l)&&this.tool.transition("resizing",this.info)});$a(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})})}updateCursor(){this.app.cursors.setCursor(ua[this.info.handle],
this.app.selectionBounds.rotation)}};$a(os,"id","pointingResizeHandle");var jr=class extends Xg{constructor(){super(...arguments);$a(this,"isSingle",!1);$a(this,"handle","bottom_right_corner");$a(this,"snapshots",{});$a(this,"initialCommonBounds",{});$a(this,"selectionRotation",0);$a(this,"resizeType","corner");$a(this,"onEnter",d=>{var l,E;const {history:Y,selectedShapesArray:la,selectionBounds:sa}=this.app;if(!sa)throw Error("Expected a selected bounds.");this.handle=d.handle;this.resizeType="left_edge"===
d.handle||"right_edge"===d.handle?"horizontal-edge":"top_edge"===d.handle||"bottom_edge"===d.handle?"vertical-edge":"corner";this.app.cursors.setCursor(jr.CURSORS[d.handle],null==(l=this.app.selectionBounds)?void 0:l.rotation);Y.pause();const Ea=gf.getBoundsFromPoints(la.map(Ua=>gf.getBoundsCenter(Ua.bounds)));this.selectionRotation=(this.isSingle=1===la.length)?null!=(E=la[0].props.rotation)?E:0:0;this.initialCommonBounds=me({},sa);this.snapshots=Object.fromEntries(la.map(Ua=>{const jb=me({},Ua.bounds),
[sb,Ub]=gf.getBoundsCenter(jb);return[Ua.id,{props:Ua.serialized,bounds:jb,transformOrigin:[(sb-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(Ub-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(sb-Ea.minX)/Ea.width,(Ub-Ea.minY)/Ea.height],isAspectRatioLocked:Ua.props.isAspectRatioLocked||!(Ua.canChangeAspectRatio&&!Ua.props.rotation)}]}));la.forEach(Ua=>{var jb;null==(jb=Ua.onResizeStart)?void 0:jb.call(Ua,{isSingle:this.isSingle})})});$a(this,
"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onPointerMove",()=>{const {inputs:{altKey:d,shiftKey:l,ctrlKey:E,originPoint:Y,currentPoint:la}}=this.app,{handle:sa,snapshots:Ea,initialCommonBounds:Ua}=this;let jb=od.sub(la,Y);d&&(jb=od.mul(jb,2));const sb=this.app.selectedShapes.values().next().value;let Ub=gf.getTransformedBoundingBox(Ua,sa,jb,this.selectionRotation,
l||this.isSingle&&(E?!("clipping"in sb.props):!sb.canChangeAspectRatio||sb.props.isAspectRatioLocked));d&&(Ub=me(me({},Ub),gf.centerBounds(Ub,gf.getBoundsCenter(Ua))));const {scaleX:gc,scaleY:yc}=Ub;this.app.selectedShapes.forEach(Qc=>{var Jc,kd;const {props:ad,bounds:vc,transformOrigin:md}=Ea[Qc.id];let Ad=gf.getRelativeTransformedBoundingBox(Ub,Ua,vc,0>gc,0>yc);if(Qc.canResize.some(Fe=>Fe)||Qc.props.isSizeLocked||!this.isSingle){var qd=[gc,yc],Bd=null!=(Jc=ad.rotation)?Jc:0;Jc=gf.getBoundsCenter(Ad);
Qc.canFlip||(qd=od.abs(qd));Qc.canScale||(qd=null!=(kd=ad.scale)?kd:[1,1]);if(Bd&&0>gc&&0<=yc||0>yc&&0<=gc)Bd*=-1;Qc.onResize(ad,{center:Jc,rotation:Bd,scale:qd,bounds:Ad,type:sa,clip:E,transformOrigin:md})}});this.updateCursor(gc,yc)});$a(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":this.app.selectedShapes.forEach(E=>{E.update(me({},this.snapshots[E.id].props))}),this.tool.transition("idle")}})}updateCursor(d,
l){var E,Y,la,sa;const Ea=0>d&&0<=l;d=0>l&&0<=d;switch(this.handle){case "top_left_corner":case "bottom_right_corner":Ea||d?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(E=this.app.selectionBounds)?void 0:E.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(Y=this.app.selectionBounds)?void 0:Y.rotation);break;case "top_right_corner":case "bottom_left_corner":Ea||d?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",
null==(la=this.app.selectionBounds)?void 0:la.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(sa=this.app.selectionBounds)?void 0:sa.rotation)}}},kr=jr;$a(kr,"id","resizing");$a(kr,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var ns=class extends Xg{constructor(){super(...arguments);
$a(this,"cursor","rotate");$a(this,"handle","");$a(this,"onEnter",d=>{this.app.history.pause();this.handle=d.handle;this.updateCursor()});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onPointerMove",()=>{const {currentPoint:d,originPoint:l}=this.app.inputs;5<od.dist(d,l)&&this.tool.transition("rotating",{handle:this.handle})});$a(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",
{info:d,event:l})})}updateCursor(){this.app.cursors.setCursor(ua[this.handle],this.app.selectionRotation)}};$a(ns,"id","pointingRotateHandle");var qs=class extends Xg{constructor(){super(...arguments);$a(this,"info",{});$a(this,"onEnter",d=>{this.info=d});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onPointerMove",()=>{const {currentPoint:d,originPoint:l}=this.app.inputs;5<od.dist(d,l)&&this.tool.transition("translating")});$a(this,"onPointerUp",()=>{const {selectedIds:d,inputs:{shiftKey:l}}=
this.app;l?this.app.setSelectedShapes([...Array.from(d.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})})}};$a(qs,"id","pointingShapeBehindBounds");var vo=class extends Xg{constructor(){super(...arguments);$a(this,"cursor","rotate");$a(this,"snapshot",{});$a(this,"initialCommonCenter",[0,0]);$a(this,"initialCommonBounds",{});$a(this,"initialAngle",0);$a(this,
"initialSelectionRotation",0);$a(this,"handle","");$a(this,"onEnter",d=>{const {history:l,selectedShapesArray:E,selectionBounds:Y}=this.app;if(!Y)throw Error("Expected selected bounds.");l.pause();this.handle=d.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=me({},Y);this.initialCommonCenter=gf.getBoundsCenter(Y);this.initialAngle=od.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(E.map(la=>[la.id,{point:[...la.props.point],
center:[...la.center],rotation:la.props.rotation,handles:"handles"in la?ch(la.handles):void 0}]));this.updateCursor()});$a(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onPointerMove",()=>{const {selectedShapes:d,inputs:{shiftKey:l,currentPoint:E}}=this.app,{snapshot:Y,initialCommonCenter:la,initialAngle:sa,initialSelectionRotation:Ea}=this;let Ua=od.angle(la,E)-sa;l&&(Ua=Fa.snapAngleToSegments(Ua,24));d.forEach(sb=>{var Ub=
Y[sb.id];let gc=0;if(l){var {rotation:yc=0}=Ub;gc=Fa.snapAngleToSegments(yc,24)-yc}const Qc=od.sub(Ub.center,Ub.point);yc=od.rotWith(Ub.center,la,Ua);if("handles"in sb){Ub=Ub.handles;const Jc=Ub.map(ad=>od.rotWith(ad.point,Qc,Ua)),kd=gf.getCommonTopLeft(Jc);sb.update({point:od.add(kd,od.sub(yc,Qc)),handles:Ub.map((ad,vc)=>Id(me({},ad),{point:od.sub(Jc[vc],kd)}))})}else sb.update({point:od.sub(yc,Qc),rotation:Fa.clampRadians((Ub.rotation||0)+Ua+gc)})});const jb=Fa.clampRadians(Ea+Ua);this.app.setSelectionRotation(l?
Fa.snapAngleToSegments(jb,24):jb);this.updateCursor()});$a(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":this.app.selectedShapes.forEach(E=>{E.update(this.snapshot[E.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(ua[this.handle],this.app.selectionRotation)}};$a(vo,"id","rotating");var rs=class extends Xg{constructor(){super(...arguments);$a(this,"onPinch",
(d,l)=>{const {camera:E}=this.app.viewport;var {deltaY:Y}=l,la=0;if(l.ctrlKey||l.metaKey)la=Math.sign(l.deltaY),10<Math.abs(l.deltaY)&&(Y=10*la),la=Y;l=.01*la;0!==l&&this.app.viewport.pinchCamera(d.point,[0,0],E.zoom-l*E.zoom)});$a(this,"onPinchEnd",()=>{this.tool.transition("idle")});$a(this,"onPointerDown",()=>{this.tool.transition("idle")})}};$a(rs,"id","pinching");var Gp=class extends kg{constructor(){super(...arguments);$a(this,"cursor","grabbing");$a(this,"onEnter",d=>{this.app.history.pause();
this.newStartBindingId=Pg();this.draggedBindingId=Pg();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=d.id;this.currentShape=d.shape;this.initialShape=oe(this.currentShape.props,new Map);this.app.setSelectedShapes([this.currentShape])})}};$a(Gp,"id","translatingHandle");var V=class extends Xg{constructor(){super(...arguments);$a(this,"cursor","grabbing");$a(this,"info",{});$a(this,"onEnter",d=>{this.info=d});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,
"onPointerMove",()=>{const {currentPoint:d,originPoint:l}=this.app.inputs;5<od.dist(d,l)&&this.tool.transition("translatingHandle",this.info)});$a(this,"onPointerUp",()=>{this.tool.transition("idle")});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})})}};$a(V,"id","pointingHandle");var ja=class extends Xg{constructor(){super(...arguments);$a(this,"handle");$a(this,"onEnter",d=>{var l;this.app.cursors.setCursor(ua[d.handle],null!=(l=this.app.selectionBounds.rotation)?
l:0);this.handle=d.handle});$a(this,"onExit",()=>{this.app.cursors.reset()});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})});$a(this,"onPointerDown",d=>{switch(d.type){case "selection":switch(d.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",d);break;default:this.tool.transition("pointingResizeHandle",
d)}}});$a(this,"onPointerLeave",()=>{this.tool.transition("idle")});$a(this,"onDoubleClick",d=>{var l;if(!d.order&&1===this.app.selectedShapes.size){var E=this.app.selectedShapes.values().next().value;if(E.canEdit)switch(d.type){case "shape":this.tool.transition("editingShape",d);break;case "selection":null==(l=E.onResetBounds)?void 0:l.call(E,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:E})}else E.onResetBounds({asset:E.props.assetId?
this.app.assets[E.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle")}})}};$a(ja,"id","hoveringSelectionHandle");var Ca=class extends Xg{constructor(){super(...arguments);$a(this,"editingShape",{});$a(this,"onEnter",d=>{this.editingShape=d.shape;this.app.setEditingShape(d.shape)});$a(this,"onExit",()=>{var d;if(this.editingShape&&"text"in this.editingShape.props){const l=this.editingShape.props.text.trim();""===l&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):
(this.editingShape.onResetBounds(),this.editingShape.update({text:l}))}this.app.persist();this.app.setEditingShape();null==(d=document.querySelector(".tl-canvas"))?void 0:d.focus()});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})});$a(this,"onPointerDown",d=>{switch(d.type){case "shape":if(d.shape===this.editingShape)break;this.tool.transition("idle",d);break;case "canvas":d.order||this.tool.transition("idle",d)}});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":xc(()=>
{l.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};$a(Ca,"id","editingShape");var eb=class extends Xg{constructor(){super(...arguments);$a(this,"minimapZoom",1);$a(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});$a(this,"getCameraPoint",d=>{const l=document.querySelector(".tl-preview-minimap svg");var E=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(l&&E){const Y=l.getBoundingClientRect();this.minimapRect.height=
Y.height;this.minimapRect.width=Y.width;this.minimapRect.minX=Y.left;this.minimapRect.minY=Y.top;this.minimapRect.maxX=Y.right;this.minimapRect.maxY=Y.bottom;this.minimapZoom=+l.dataset.commonBoundWidth/this.minimapRect.width;d=od.sub(d,[this.minimapRect.minX,this.minimapRect.minY]);E=E.getBoundingClientRect();E=od.mul(od.sub(d,[E.left+E.width/2,E.top+E.height/2]),this.minimapZoom);return od.sub(this.app.viewport.camera.point,E)}});$a(this,"onEnter",d=>{(d=this.getCameraPoint([d.clientX,d.clientY]))?
this.app.viewport.update({point:d}):this.tool.transition("idle")});$a(this,"onWheel",(d,l)=>{this.onPointerMove(d,l)});$a(this,"onPointerMove",(d,l)=>{(d=this.getCameraPoint([l.clientX,l.clientY]))&&this.app.viewport.update({point:d})});$a(this,"onPointerUp",()=>{this.tool.transition("idle")})}};$a(eb,"id","pointingMinimap");var Eb=class extends Hj{constructor(){super(...arguments);$a(this,"returnTo","");$a(this,"onEnter",d=>{this.returnTo=null==d?void 0:d.returnTo})}};$a(Eb,"id","select");$a(Eb,
"initial","idle");$a(Eb,"shortcut",["1"]);$a(Eb,"states",[Dp,Ro,oq,To,An,qs,ps,Ep,ja,os,ns,eb,V,Gp,Fp,kr,vo,vo,rs,Ca]);var kc=class extends Xg{constructor(){super(...arguments);$a(this,"cursor","grabbing");$a(this,"originalScreenPoint",[]);$a(this,"originalCameraPoint",[]);$a(this,"prevState","idle");$a(this,"onEnter",d=>{this.prevState=null==d?void 0:d.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});$a(this,"onPointerMove",
(d,l)=>{d=$d.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:$d.sub(this.originalCameraPoint,$d.div(d,this.app.viewport.camera.zoom))})});$a(this,"onPointerUp",()=>{var d;this.tool.transition(null!=(d=this.prevState)?d:"idle")})}};$a(kc,"id","panning");var Cc=class extends Xg{constructor(){super(...arguments);$a(this,"onEnter",d=>{this.parent.prevTool&&d.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();
this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})});$a(this,"onPointerDown",(d,l)=>{d.order||this.tool.transition("panning")})}};$a(Cc,"id","idle");var $c=class extends Xg{constructor(){super(...arguments);$a(this,"onPointerDown",(d,l)=>{d.order||this.tool.transition("panning",{prevState:"idleHold"})});$a(this,"onPinchStart",(d,l)=>{this.tool.transition("pinching",{info:d,event:l})})}};$a($c,"id","idleHold");
var Rd=class extends Xg{constructor(){super(...arguments);$a(this,"origin",[0,0]);$a(this,"prevDelta",[0,0]);$a(this,"onEnter",d=>{this.prevDelta=d.info.delta;this.origin=d.info.point});$a(this,"onPinch",d=>{this.app.viewport.pinchCamera(d.point,[0,0],d.offset[0])});$a(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};$a(Rd,"id","pinching");var Be=class extends Hj{constructor(){super(...arguments);$a(this,"cursor","grab");$a(this,"prevTool",null);$a(this,"onEnter",d=>{this.prevTool=null==d?
void 0:d.prevTool});$a(this,"onKeyDown",(d,l)=>{switch(l.key){case "Escape":this.app.transition("select")}})}};$a(Be,"id","move");$a(Be,"shortcut",["2"]);$a(Be,"states",[Cc,$c,kc,Rd]);$a(Be,"initial","idle");var Ff=class{constructor(d,l={}){$a(this,"lastShapesNounces",null);$a(this,"app");$a(this,"id");$a(this,"name");$a(this,"shapes",[]);$a(this,"bindings",{});$a(this,"nonce",0);$a(this,"bump",()=>{this.nonce++});$a(this,"bringForward",Ua=>{const jb=this.parseShapesArg(Ua);jb.sort((sb,Ub)=>this.shapes.indexOf(Ub)-
this.shapes.indexOf(sb)).map(sb=>this.shapes.indexOf(sb)).forEach(sb=>{if(sb!==this.shapes.length-1&&!jb.includes(this.shapes[sb+1])){var Ub=this.shapes[sb];this.shapes[sb]=this.shapes[sb+1];this.shapes[sb+1]=Ub}});this.app.persist();return this});$a(this,"sendBackward",Ua=>{const jb=this.parseShapesArg(Ua);jb.sort((sb,Ub)=>this.shapes.indexOf(sb)-this.shapes.indexOf(Ub)).map(sb=>this.shapes.indexOf(sb)).forEach(sb=>{if(0!==sb&&!jb.includes(this.shapes[sb-1])){var Ub=this.shapes[sb];this.shapes[sb]=
this.shapes[sb-1];this.shapes[sb-1]=Ub}});this.app.persist();return this});$a(this,"bringToFront",Ua=>{const jb=this.parseShapesArg(Ua);this.shapes=this.shapes.filter(sb=>!jb.includes(sb)).concat(jb);this.app.persist();return this});$a(this,"sendToBack",Ua=>{const jb=this.parseShapesArg(Ua);this.shapes=jb.concat(this.shapes.filter(sb=>!jb.includes(sb)));this.app.persist();return this});$a(this,"flip",(Ua,jb)=>{Ua=this.parseShapesArg(Ua);const sb=gf.getCommonBounds(Ua.map(Ub=>Ub.bounds));Ua.forEach(Ub=>
{var gc;const yc=gf.getRelativeTransformedBoundingBox(sb,sb,Ub.bounds,"horizontal"===jb,"vertical"===jb);if(Ub.serialized)Ub.onResize(Ub.serialized,{bounds:yc,center:gf.getBoundsCenter(yc),rotation:null!=(gc=Ub.props.rotation)?gc:-0,type:"top_left_corner",scale:Ub.canFlip&&Ub.props.scale?"horizontal"===jb?[-Ub.props.scale[0],1]:[1,-Ub.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});$a(this,"getShapeById",Ua=>this.shapes.find(jb=>jb.id===Ua));$a(this,"cleanup",
Ua=>{Ua=ab(this.bindings,Ua);const jb=new Set;let sb=!1,Ub=!1;const gc=ch(this.bindings);Ua.forEach(yc=>{var Qc;if(this.bindings[yc.id]){var Jc=this.getShapeById(yc.toId),kd=this.getShapeById(yc.fromId);Jc&&kd?jb.has(kd.id)||(yc=this.updateArrowBindings(kd),jb.add(kd.id),yc&&(kd=me(me({},kd.props),yc),sb=!0,null==(Qc=this.getShapeById(kd.id))?void 0:Qc.update(kd,!1,!0))):(delete gc[yc.id],Ub=!0)}});Object.keys(gc).forEach(yc=>{const Qc=this.bindings[yc];0===this.shapes.filter(Jc=>Jc.id===Qc.fromId||
Jc.id===Qc.toId).length&&(delete gc[yc],Ub=!0)});Ub&&this.update({bindings:gc});(sb||Ub)&&this.app.persist(!0)});$a(this,"updateArrowBindings",Ua=>{var jb,sb,Ub,gc={start:ch(Ua.props.handles.start),end:ch(Ua.props.handles.end)},yc={isBound:!1,handle:Ua.props.handles.start,point:$d.add(Ua.props.handles.start.point,Ua.props.point)},Qc={isBound:!1,handle:Ua.props.handles.end,point:$d.add(Ua.props.handles.end.point,Ua.props.point)};if(Ua.props.handles.start.bindingId){var Jc=void 0!==(null==(jb=Ua.props.decorations)?
void 0:jb.start);jb=Ua.props.handles.start;var kd=this.bindings[Ua.props.handles.start.bindingId],ad=this.getShapeById(null==kd?void 0:kd.toId);if(ad){yc=ad.getBounds();var vc=ad.getExpandedBounds(),md=gf.expandBounds(yc,Jc?kd.distance:1);const {minX:Ad,minY:qd,width:Bd,height:Fe}=vc,ce=$d.add([Ad,qd],$d.mulV([Bd,Fe],$d.rotWith(kd.point,[.5,.5],ad.props.rotation||0)));yc={isBound:!0,hasDecoration:Jc,binding:kd,handle:jb,point:ce,target:ad,bounds:yc,expandedBounds:vc,intersectBounds:md,center:ad.getCenter()}}}if(Ua.props.handles.end.bindingId&&
(Jc=void 0!==(null==(sb=Ua.props.decorations)?void 0:sb.end),sb=Ua.props.handles.end,jb=this.bindings[Ua.props.handles.end.bindingId],kd=this.getShapeById(null==jb?void 0:jb.toId))){Qc=kd.getBounds();ad=kd.getExpandedBounds();vc=Jc?gf.expandBounds(Qc,jb.distance):Qc;const {minX:Ad,minY:qd,width:Bd,height:Fe}=ad;md=$d.add([Ad,qd],$d.mulV([Bd,Fe],$d.rotWith(jb.point,[.5,.5],kd.props.rotation||0)));Qc={isBound:!0,hasDecoration:Jc,binding:jb,handle:sb,point:md,target:kd,bounds:Qc,expandedBounds:ad,intersectBounds:vc,
center:kd.getCenter()}}for(const Ad of["end","start"]){sb="start"===Ad?yc:Qc;const qd="start"===Ad?Qc:yc;if(sb.isBound)if(sb.binding.distance){if(Jc=$d.uni($d.sub(sb.point,qd.point)),jb=A(qd.point,Jc,sb.intersectBounds,sb.target.props.rotation).filter(Bd=>Bd.didIntersect).map(Bd=>Bd.points[0]).sort((Bd,Fe)=>$d.dist(Bd,qd.point)-$d.dist(Fe,qd.point)),jb[0])if(kd=void 0,qd.isBound&&(kd=A(qd.point,Jc,qd.intersectBounds,qd.target.props.rotation).filter(Bd=>Bd.didIntersect).map(Bd=>Bd.points[0]).sort((Bd,
Fe)=>$d.dist(Bd,qd.point)-$d.dist(Fe,qd.point))[0]),qd.isBound&&(2>jb.length||kd&&jb[0]&&10>Math.ceil($d.dist(jb[0],kd))||gf.boundsContain(sb.expandedBounds,qd.expandedBounds)||gf.boundsCollide(sb.expandedBounds,qd.expandedBounds)))Jc=$d.uni($d.sub(qd.point,sb.point)),jb=A(sb.point,Jc,sb.bounds,sb.target.props.rotation).filter(Bd=>Bd.didIntersect).map(Bd=>Bd.points[0]),jb[0]&&(gc[Ad].point=$d.toFixed($d.sub(jb[0],Ua.props.point)),gc["start"===Ad?"end":"start"].point=$d.toFixed($d.add($d.sub(jb[0],
Ua.props.point),$d.mul(Jc,Math.min($d.dist(jb[0],qd.point),10*(gf.boundsContain(qd.bounds,sb.intersectBounds)?-1:1))))));else{if(!qd.isBound&&(jb[0]&&10>$d.dist(jb[0],qd.point)||mh.pointInBounds(qd.point,sb.intersectBounds)))return gc=$d.uni($d.sub(sb.center,qd.point)),null==(Ub=Ua.getHandlesChange)?void 0:Ub.call(Ua,Ua.props,{[Ad]:Id(me({},Ua.props.handles[Ad]),{point:$d.toFixed($d.add($d.sub(qd.point,Ua.props.point),$d.mul(gc,10)))})});jb[0]&&(gc[Ad].point=$d.toFixed($d.sub(jb[0],Ua.props.point)))}}else gc[Ad].point=
$d.sub(sb.point,Ua.props.point)}return Ua.getHandlesChange(Ua.props,gc)});const {id:E,name:Y,shapes:la=[],bindings:sa={},nonce:Ea}=l;this.id=E;this.name=Y;this.bindings=Object.assign({},sa);this.app=d;this.nonce=Ea||0;this.addShapes(...la);vf(this);Vc(()=>{const Ua=0<this.shapes.length?Object.fromEntries(this.shapes.map(jb=>[jb.id,jb.nonce])):null;if(this.lastShapesNounces&&Ua){const jb=this.lastShapesNounces,sb=[...(new Set([...Object.keys(Ua),...Object.keys(jb)]))].filter(Ub=>jb[Ub]!==Ua[Ub]);requestAnimationFrame(()=>
{this.cleanup(sb)})}Ua&&(this.lastShapesNounces=Ua)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(d=>d.serialized).filter(d=>!!d).map(d=>oe(d,new Map)),bindings:ch(this.bindings),nonce:this.nonce}}update(d){Object.assign(this,d);return this}updateBindings(d){Object.assign(this.bindings,d);return this}addShapes(...d){if(0!==d.length)return d="getBounds"in d[0]?d:d.map(l=>new (this.app.getShapeClass(l.type))(l)),this.shapes.push(...d),this.bump(),d}parseShapesArg(d){return"string"===
typeof d[0]?this.shapes.filter(l=>d.includes(l.id)):d}removeShapes(...d){const l=this.parseShapesArg(d);this.shapes=this.shapes.filter(E=>!l.includes(E));return l}getBindableShapes(){return this.shapes.filter(d=>d.canBind).sort((d,l)=>l.nonce-d.nonce).map(d=>d.id)}};Xd([cg],Ff.prototype,"id",2);Xd([cg],Ff.prototype,"name",2);Xd([cg],Ff.prototype,"shapes",2);Xd([cg],Ff.prototype,"bindings",2);Xd([ng],Ff.prototype,"serialized",1);Xd([cg],Ff.prototype,"nonce",2);Xd([Vf],Ff.prototype,"bump",2);Xd([Vf],
Ff.prototype,"update",1);Xd([Vf],Ff.prototype,"updateBindings",1);Xd([Vf],Ff.prototype,"addShapes",1);Xd([Vf],Ff.prototype,"removeShapes",1);Xd([Vf],Ff.prototype,"bringForward",2);Xd([Vf],Ff.prototype,"sendBackward",2);Xd([Vf],Ff.prototype,"bringToFront",2);Xd([Vf],Ff.prototype,"sendToBack",2);Xd([Vf],Ff.prototype,"cleanup",2);var lg=class{constructor(){$a(this,"shiftKey",!1);$a(this,"ctrlKey",!1);$a(this,"modKey",!1);$a(this,"altKey",!1);$a(this,"spaceKey",!1);$a(this,"isPinching",!1);$a(this,"currentScreenPoint",
[0,0]);$a(this,"currentPoint",[0,0]);$a(this,"previousScreenPoint",[0,0]);$a(this,"previousPoint",[0,0]);$a(this,"originScreenPoint",[0,0]);$a(this,"originPoint",[0,0]);$a(this,"pointerIds",new Set);$a(this,"state","idle");$a(this,"containerOffset",[0,0]);$a(this,"onWheel",(d,l)=>{this.updateModifiers(l);this.previousPoint=this.currentPoint;this.currentPoint=d;this.state="panning"});$a(this,"onPointerDown",(d,l)=>{this.pointerIds.add(l.pointerId);this.updateModifiers(l);this.originScreenPoint=this.currentScreenPoint;
this.originPoint=d;this.state="pointing"});$a(this,"onPointerMove",(d,l)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(l),this.previousPoint=this.currentPoint,this.currentPoint=d)});$a(this,"onPointerUp",(d,l)=>{this.pointerIds.clear();this.updateModifiers(l);this.state="idle"});$a(this,"onKeyDown",d=>{this.updateModifiers(d);switch(d.key){case " ":this.spaceKey=!0}});$a(this,"onKeyUp",d=>{this.updateModifiers(d);switch(d.key){case " ":this.spaceKey=
!1}});$a(this,"onPinchStart",(d,l)=>{this.updateModifiers(l);this.state="pinching"});$a(this,"onPinch",(d,l)=>{"pinching"===this.state&&this.updateModifiers(l)});$a(this,"onPinchEnd",(d,l)=>{"pinching"===this.state&&(this.updateModifiers(l),this.state="idle")});vf(this)}updateContainerOffset(d){Object.assign(this.containerOffset,d)}updateModifiers(d){"clientX"in d&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=$d.sub([d.clientX,d.clientY],this.containerOffset));"shiftKey"in
d&&(this.shiftKey=d.shiftKey,this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.modKey=Of()?d.metaKey:d.ctrlKey)}};Xd([cg],lg.prototype,"shiftKey",2);Xd([cg],lg.prototype,"ctrlKey",2);Xd([cg],lg.prototype,"modKey",2);Xd([cg],lg.prototype,"altKey",2);Xd([cg],lg.prototype,"spaceKey",2);Xd([cg],lg.prototype,"isPinching",2);Xd([cg],lg.prototype,"currentScreenPoint",2);Xd([cg],lg.prototype,"currentPoint",2);Xd([cg],lg.prototype,"previousScreenPoint",2);Xd([cg],lg.prototype,"previousPoint",2);Xd([cg],lg.prototype,
"originScreenPoint",2);Xd([cg],lg.prototype,"originPoint",2);Xd([cg],lg.prototype,"state",2);Xd([cg],lg.prototype,"containerOffset",2);Xd([Vf],lg.prototype,"updateContainerOffset",1);Xd([Vf],lg.prototype,"updateModifiers",1);Xd([Vf],lg.prototype,"onWheel",2);Xd([Vf],lg.prototype,"onPointerDown",2);Xd([Vf],lg.prototype,"onPointerMove",2);Xd([Vf],lg.prototype,"onPointerUp",2);Xd([Vf],lg.prototype,"onKeyDown",2);Xd([Vf],lg.prototype,"onKeyUp",2);Xd([Vf],lg.prototype,"onPinchStart",2);Xd([Vf],lg.prototype,
"onPinch",2);Xd([Vf],lg.prototype,"onPinchEnd",2);var hf=class{constructor(){$a(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});$a(this,"camera",{point:[0,0],zoom:1});$a(this,"updateBounds",d=>{this.bounds=d;return this});$a(this,"panCamera",d=>this.update({point:od.sub(this.camera.point,od.div(d,this.camera.zoom))}));$a(this,"update",({point:d,zoom:l})=>{void 0!==d&&(this.camera.point=d);void 0!==l&&(this.camera.zoom=l);return this});$a(this,"_currentView",{minX:0,minY:0,
maxX:1,maxY:1,width:1,height:1});$a(this,"getPagePoint",d=>{const {camera:l,bounds:E}=this;return od.sub(od.div(od.sub(d,[E.minX,E.minY]),l.zoom),l.point)});$a(this,"getScreenPoint",d=>{const {camera:l}=this;return od.mul(od.add(d,l.point),l.zoom)});$a(this,"pinchCamera",(d,l,E)=>{var {camera:Y}=this;E=Math.max(hf.minZoom,Math.min(hf.maxZoom,E));l=od.sub(Y.point,od.div(l,Y.zoom));Y=od.sub(od.div(d,Y.zoom),l);d=od.sub(od.div(d,E),l);return this.update({point:od.toFixed(od.add(l,od.sub(d,Y))),zoom:E})});
$a(this,"setZoom",d=>{const {bounds:l}=this;this.pinchCamera([l.width/2,l.height/2],[0,0],d)});$a(this,"zoomIn",()=>{const {camera:d}=this;this.setZoom(d.zoom/.8)});$a(this,"zoomOut",()=>{const {camera:d}=this;this.setZoom(.8*d.zoom)});$a(this,"resetZoom",()=>{const {bounds:d,camera:{zoom:l,point:E}}=this;var Y=[d.width/2,d.height/2];const la=od.sub(od.div(Y,l),E);Y=od.sub(od.div(Y,1),E);return this.update({point:od.toFixed(od.add(E,od.sub(Y,la))),zoom:1})});$a(this,"zoomToBounds",({width:d,height:l,
minX:E,minY:Y})=>{const {bounds:la,camera:sa}=this;let Ea=Math.min((la.width-100)/d,(la.height-100)/l);Ea=Math.min(1,Math.max(hf.minZoom,sa.zoom===Ea||1>sa.zoom?Math.min(1,Ea):Ea));return this.update({point:od.add([-E,-Y],[(la.width-d*Ea)/2/Ea,(la.height-l*Ea)/2/Ea]),zoom:Ea})});vf(this)}get currentView(){const {bounds:d,camera:{point:l,zoom:E}}=this,Y=d.width/E,la=d.height/E;return{minX:-l[0],minY:-l[1],maxX:Y-l[0],maxY:la-l[1],width:Y,height:la}}},pg=hf;$a(pg,"minZoom",.1);$a(pg,"maxZoom",4);Xd([cg],
pg.prototype,"bounds",2);Xd([cg],pg.prototype,"camera",2);Xd([Vf],pg.prototype,"updateBounds",2);Xd([Vf],pg.prototype,"update",2);Xd([ng],pg.prototype,"currentView",1);var sh=class{constructor(d){$a(this,"app");$a(this,"editShape",l=>{this.app.transition("select").selectedTool.transition("editingShape",{shape:l});return this});$a(this,"hoverShape",l=>{this.app.setHoveredShape(l);return this});$a(this,"createShapes",(...l)=>{this.app.createShapes(l);return this});$a(this,"updateShapes",(...l)=>{this.app.updateShapes(l);
return this});$a(this,"deleteShapes",(...l)=>{this.app.deleteShapes(l.length?l:this.app.selectedShapesArray);return this});$a(this,"selectShapes",(...l)=>{this.app.setSelectedShapes(l);return this});$a(this,"deselectShapes",(...l)=>{const E="string"===typeof l[0]?l:l.map(Y=>Y.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(Y=>!E.includes(Y.id)));return this});$a(this,"flipHorizontal",(...l)=>{this.app.flipHorizontal(l);return this});$a(this,"flipVertical",(...l)=>{this.app.flipVertical(l);
return this});$a(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes);return this});$a(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});$a(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});$a(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});$a(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});$a(this,"zoomToFit",()=>{var {shapes:l}=this.app.currentPage;if(0===l.length)return this;l=gf.getCommonBounds(l.map(E=>E.bounds));
this.app.viewport.zoomToBounds(l);return this});$a(this,"cameraToCenter",()=>{var {shapes:l}=this.app.currentPage;if(0===l.length)return this;l=gf.getCommonBounds(l.map(E=>E.bounds));this.app.viewport.update({point:$d.add($d.neg(gf.getBoundsCenter(l)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});$a(this,"zoomToSelection",()=>{const {selectionBounds:l}=this.app;if(!l)return this;this.app.viewport.zoomToBounds(l);return this});$a(this,"resetZoomToCursor",
()=>{this.app.viewport.update({zoom:1,point:$d.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});$a(this,"toggleGrid",()=>{const {settings:l}=this.app;l.update({showGrid:!l.showGrid});return this});$a(this,"toggleToolLock",()=>{const {settings:l}=this.app;l.update({showGrid:!l.isToolLocked});return this});$a(this,"save",()=>{this.app.save();return this});$a(this,"saveAs",()=>{this.app.save();return this});$a(this,"undo",()=>{this.app.undo();return this});$a(this,"redo",
()=>{this.app.redo();return this});$a(this,"createNewLineBinding",(l,E)=>this.app.createNewLineBinding(l,E));this.app=d}},Sg=class{constructor(){$a(this,"cursor","default");$a(this,"rotation",0);$a(this,"reset",()=>{this.cursor="default"});$a(this,"setCursor",(d,l=0)=>{if(d!==this.cursor||l!==this.rotation)this.cursor=d,this.rotation=l});$a(this,"setRotation",d=>{d!==this.rotation&&(this.rotation=d)});vf(this)}};Xd([cg],Sg.prototype,"cursor",2);Xd([cg],Sg.prototype,"rotation",2);Xd([Vf],Sg.prototype,
"reset",2);Xd([Vf],Sg.prototype,"setCursor",2);Xd([Vf],Sg.prototype,"setRotation",2);var pe=(d,l)=>{d=sf(d.pages[0],"nonce");l=sf(l.pages[0],"nonce");return!(0,zh.default)(d,l)},Ud=class{constructor(d){$a(this,"app");$a(this,"stack",[]);$a(this,"pointer",0);$a(this,"isPaused",!0);$a(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});$a(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});$a(this,"reset",()=>{this.stack=[this.app.serialized];this.pointer=0;this.resume();this.app.notify("persist",
null)});$a(this,"persist",(l=!1)=>{if(!this.isPaused&&!this.creating){var {serialized:E}=this.app;0<this.stack.length&&!pe(this.stack[this.pointer],E)||(l?this.stack[this.pointer]=E:(this.pointer<this.stack.length&&(this.stack=this.stack.slice(0,this.pointer+1)),this.stack.push(E),this.pointer=this.stack.length-1),this.app.pages.forEach(Y=>Y.bump()),this.app.notify("persist",null))}});$a(this,"setPointer",l=>{this.pointer=l;this.deserialize(this.stack[this.pointer]);this.app.notify("persist",null)});
$a(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canUndo&&this.setPointer(this.pointer-1)});$a(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canRedo&&this.setPointer(this.pointer+1)});$a(this,"deserialize",l=>{xc(()=>{var E,{pages:Y}=l;const la=this.isPaused;this.pause();const sa=[...this.app.selectedIds];try{const Ea=new Map(this.app.pages),Ua=[];for(const jb of Y){const sb=Ea.get(jb.id);if(void 0!==sb){const Ub=new Map(sb.shapes.map(gc=>
[gc.props.id,gc]));Y=[];for(const gc of jb.shapes){const yc=Ub.get(gc.id);if(void 0!==yc)yc.nonce!==gc.nonce&&(yc.update(gc,!0),yc.nonce=gc.nonce,yc.setLastSerialized(gc)),Ub.delete(gc.id);else{const Qc=new (this.app.getShapeClass(gc.type))(gc);Y.push(Qc)}}0<Ub.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&sb.removeShapes(...Ub.values());0<Y.length&&sb.addShapes(...Y);Ea.delete(jb.id);sb.updateBindings(jb.bindings);sb.nonce=null!=(E=jb.nonce)?E:0}else{const {id:Ub,name:gc,shapes:yc,
bindings:Qc,nonce:Jc}=jb;Ua.push(new Ff(this.app,{id:Ub,name:gc,nonce:Jc,bindings:Qc,shapes:yc.map(kd=>new (this.app.getShapeClass(kd.type))(kd))}))}}0<Ua.length&&this.app.addPages(Ua);0<Ea.size&&this.app.removePages(Array.from(Ea.values()));this.app.setSelectedShapes(sa).setErasingShapes([])}catch(Ea){console.warn(Ea)}la||this.resume()})});this.app=d;vf(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}get canUndo(){return 0<this.pointer}get canRedo(){return this.pointer<
this.stack.length-1}};Xd([cg],Ud.prototype,"stack",2);Xd([cg],Ud.prototype,"pointer",2);Xd([ng],Ud.prototype,"canUndo",1);Xd([ng],Ud.prototype,"canRedo",1);Xd([Vf],Ud.prototype,"reset",2);Xd([Vf],Ud.prototype,"persist",2);Xd([Vf],Ud.prototype,"setPointer",2);Xd([Vf],Ud.prototype,"undo",2);Xd([Vf],Ud.prototype,"redo",2);Xd([Vf],Ud.prototype,"deserialize",2);var ke=class{constructor(){$a(this,"mode","light");$a(this,"showGrid",!0);$a(this,"isToolLocked",!1);vf(this)}update(d){Object.assign(this,d)}};
Xd([cg],ke.prototype,"mode",2);Xd([cg],ke.prototype,"showGrid",2);Xd([cg],ke.prototype,"isToolLocked",2);Xd([Vf],ke.prototype,"update",1);var re=class extends ah{constructor(d,l,E){var Y,la;super();$a(this,"keybindingRegistered",!1);$a(this,"api");$a(this,"inputs",new lg);$a(this,"cursors",new Sg);$a(this,"viewport",new pg);$a(this,"settings",new ke);$a(this,"Tools",[]);$a(this,"history",new Ud(this));$a(this,"persist",this.history.persist);$a(this,"undo",this.history.undo);$a(this,"redo",this.history.redo);
$a(this,"saving",!1);$a(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});$a(this,"load",()=>{this.notify("load",null);return this});$a(this,"save",()=>{this.notify("save",null);return this});$a(this,"saveAs",()=>{this.notify("saveAs",null);return this});$a(this,"pages",new Map([["page",new Ff(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));$a(this,"getPageById",sa=>{const Ea=this.pages.get(sa);if(!Ea)throw Error(`Could not find a page named ${sa}.`);
return Ea});$a(this,"getShapeById",(sa,Ea=this.currentPage.id)=>{var Ua;return null==(Ua=this.getPageById(Ea))?void 0:Ua.shapes.find(jb=>jb.id===sa)});$a(this,"createShapes",sa=>{(sa=this.currentPage.addShapes(...sa))&&this.notify("create-shapes",sa);this.persist();return this});$a(this,"updateShapes",sa=>{sa.forEach(Ea=>{var Ua;return null==(Ua=this.getShapeById(Ea.id))?void 0:Ua.update(Ea)});this.persist();return this});$a(this,"deleteShapes",sa=>{if(0===sa.length)return this;let Ea;Ea="string"===
typeof sa[0]?new Set(sa):new Set(sa.map(Ua=>Ua.id));this.setSelectedShapes(this.selectedShapesArray.filter(Ua=>!Ea.has(Ua.id)));(sa=this.currentPage.removeShapes(...sa))&&this.notify("delete-shapes",sa);this.persist();return this});$a(this,"bringForward",(sa=this.selectedShapesArray)=>{0<sa.length&&this.currentPage.bringForward(sa);return this});$a(this,"sendBackward",(sa=this.selectedShapesArray)=>{0<sa.length&&this.currentPage.sendBackward(sa);return this});$a(this,"sendToBack",(sa=this.selectedShapesArray)=>
{0<sa.length&&this.currentPage.sendToBack(sa);return this});$a(this,"bringToFront",(sa=this.selectedShapesArray)=>{0<sa.length&&this.currentPage.bringToFront(sa);return this});$a(this,"flipHorizontal",(sa=this.selectedShapesArray)=>{this.currentPage.flip(sa,"horizontal");return this});$a(this,"flipVertical",(sa=this.selectedShapesArray)=>{this.currentPage.flip(sa,"vertical");return this});$a(this,"align",(sa,Ea=this.selectedShapesArray)=>{if(2>Ea.length)return this;const Ua=Ea.map(yc=>{const Qc=yc.getBounds();
return{id:yc.id,point:[Qc.minX,Qc.minY],bounds:Qc}}),jb=gf.getCommonBounds(Ua.map(({bounds:yc})=>yc)),sb=jb.minX+jb.width/2,Ub=jb.minY+jb.height/2,gc=Object.fromEntries(Ua.map(({id:yc,point:Qc,bounds:Jc})=>[yc,{prev:Qc,next:{top:[Qc[0],jb.minY],centerVertical:[Qc[0],Ub-Jc.height/2],bottom:[Qc[0],jb.maxY-Jc.height],left:[jb.minX,Qc[1]],centerHorizontal:[sb-Jc.width/2,Qc[1]],right:[jb.maxX-Jc.width,Qc[1]]}[sa]}]));Ea.forEach(yc=>{gc[yc.id]&&yc.update({point:gc[yc.id].next})});this.persist();return this});
$a(this,"distribute",(sa,Ea=this.selectedShapesArray)=>{if(2>Ea.length)return this;const Ua=Object.fromEntries(gf.getDistributions(Ea,sa).map(jb=>[jb.id,jb]));Ea.forEach(jb=>{Ua[jb.id]&&jb.update({point:Ua[jb.id].next})});this.persist();return this});$a(this,"packIntoRectangle",(sa=this.selectedShapesArray)=>{if(2>sa.length)return this;const Ea=Object.fromEntries(gf.getPackedDistributions(sa).map(Ua=>[Ua.id,Ua]));sa.forEach(Ua=>{Ea[Ua.id]&&Ua.update({point:Ea[Ua.id].next})});this.persist();return this});
$a(this,"assets",{});$a(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const sa=JSON.stringify({type:"logseq/whiteboard-shapes",shapes:this.selectedShapesArray.map(Ea=>Ea.serialized),assets:this.getCleanUpAssets().filter(Ea=>this.selectedShapesArray.some(Ua=>Ua.props.assetId===Ea.id))});navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([sa],{type:"text/plain"})})])}});$a(this,"paste",(sa,Ea)=>{var Ua;this.editingShape||this.notify("paste",{point:this.inputs.currentPoint,
shiftKey:!!Ea,dataTransfer:null!=(Ua=null==sa?void 0:sa.clipboardData)?Ua:void 0})});$a(this,"cut",()=>{this.copy();this.api.deleteShapes()});$a(this,"drop",(sa,Ea)=>{this.notify("drop",{dataTransfer:sa,point:Ea?this.viewport.getPagePoint(Ea):gf.getBoundsCenter(this.viewport.currentView)})});$a(this,"selectTool",this.transition);$a(this,"editingId");$a(this,"setEditingShape",sa=>{this.editingId="string"===typeof sa?sa:null==sa?void 0:sa.id;return this});$a(this,"clearEditingState",()=>{this.selectedTool.transition("idle");
return this.setEditingShape()});$a(this,"hoveredId");$a(this,"setHoveredShape",sa=>{this.hoveredId="string"===typeof sa?sa:null==sa?void 0:sa.id;return this});$a(this,"selectedIds",new Set);$a(this,"selectedShapes",new Set);$a(this,"selectionRotation",0);$a(this,"setSelectedShapes",sa=>{var Ea;const {selectedIds:Ua,selectedShapes:jb}=this;Ua.clear();jb.clear();sa[0]&&"string"===typeof sa[0]?sa.forEach(Ub=>Ua.add(Ub)):sa.forEach(Ub=>Ua.add(Ub.id));const sb=this.currentPage.shapes.filter(Ub=>Ua.has(Ub.id));
sb.forEach(Ub=>jb.add(Ub));this.selectionRotation=1===sb.length?null!=(Ea=sb[0].props.rotation)?Ea:0:0;0===sa.length&&this.setEditingShape();return this});$a(this,"erasingIds",new Set);$a(this,"erasingShapes",new Set);$a(this,"setErasingShapes",sa=>{const {erasingIds:Ea,erasingShapes:Ua}=this;Ea.clear();Ua.clear();sa[0]&&"string"===typeof sa[0]?sa.forEach(jb=>Ea.add(jb)):sa.forEach(jb=>Ea.add(jb.id));this.currentPage.shapes.filter(jb=>Ea.has(jb.id)).forEach(jb=>Ua.add(jb));return this});$a(this,"bindingIds");
$a(this,"setBindingShapes",sa=>{this.bindingIds=sa;return this});$a(this,"clearBindingShape",()=>this.setBindingShapes());$a(this,"createNewLineBinding",(sa,Ea)=>{sa="string"===typeof sa?this.getShapeById(sa):sa;Ea="string"===typeof Ea?this.getShapeById(Ea):Ea;if((null==sa?0:sa.canBind)&&(null==Ea?0:Ea.canBind)&&(Ea=fc(sa,Ea))){const [Ua,jb]=Ea;this.createShapes([Ua]);this.currentPage.updateBindings(Object.fromEntries(jb.map(sb=>[sb.id,sb])));this.persist();return!0}return!1});$a(this,"brush");$a(this,
"setBrush",sa=>{this.brush=sa;return this});$a(this,"setCamera",(sa,Ea)=>{this.viewport.update({point:sa,zoom:Ea});return this});$a(this,"getPagePoint",sa=>{const {camera:Ea}=this.viewport;return od.sub(od.div(sa,Ea.zoom),Ea.point)});$a(this,"getScreenPoint",sa=>{const {camera:Ea}=this.viewport;return od.mul(od.add(sa,Ea.point),Ea.zoom)});$a(this,"Shapes",new Map);$a(this,"registerShapes",sa=>{sa.forEach(Ea=>this.Shapes.set(Ea.id,Ea))});$a(this,"deregisterShapes",sa=>{sa.forEach(Ea=>this.Shapes.delete(Ea.id))});
$a(this,"getShapeClass",sa=>{if(!sa)throw Error("No shape type provided.");const Ea=this.Shapes.get(sa);if(!Ea)throw Error(`Could not find shape class for ${sa}`);return Ea});$a(this,"wrapUpdate",sa=>{xc(()=>{const Ea=!this.history.isPaused;Ea&&this.history.pause();sa();Ea&&(this.history.resume(),this.persist())})});$a(this,"subscriptions",new Set([]));$a(this,"subscribe",(sa,Ea)=>{if(void 0===Ea)throw Error("Callback is required.");const Ua={event:sa,callback:Ea};this.subscriptions.add(Ua);return()=>
this.unsubscribe(Ua)});$a(this,"unsubscribe",sa=>{this.subscriptions.delete(sa);return this});$a(this,"notify",(sa,Ea)=>{this.subscriptions.forEach(Ua=>{Ua.event===sa&&Ua.callback(this,Ea)});return this});$a(this,"onTransition",()=>{this.settings.update({isToolLocked:!1})});$a(this,"onWheel",(sa,Ea)=>{Ea.ctrlKey||Ea.metaKey||this.isIn("select.contextMenu")||(this.viewport.panCamera(sa.delta),this.inputs.onWheel([...this.viewport.getPagePoint([Ea.clientX,Ea.clientY]),.5],Ea))});$a(this,"onPointerDown",
(sa,Ea)=>{if(!this.editingShape&&1===Ea.button&&!this.isIn("move"))this.temporaryTransitionToMove(Ea);else if(2===Ea.button)this.transition("select");else if("clientX"in Ea)this.inputs.onPointerDown([...this.viewport.getPagePoint([Ea.clientX,Ea.clientY]),.5],Ea)});$a(this,"onPointerUp",(sa,Ea)=>{if(!this.editingShape&&1===Ea.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ea.stopPropagation(),Ea.preventDefault();else if("clientX"in Ea)this.inputs.onPointerUp([...this.viewport.getPagePoint([Ea.clientX,
Ea.clientY]),.5],Ea)});$a(this,"onPointerMove",(sa,Ea)=>{if("clientX"in Ea)this.inputs.onPointerMove([...this.viewport.getPagePoint([Ea.clientX,Ea.clientY]),.5],Ea)});$a(this,"onKeyDown",(sa,Ea)=>{if(this.editingShape||" "!==Ea.key||this.isIn("move"))this.inputs.onKeyDown(Ea);else this.temporaryTransitionToMove(Ea)});$a(this,"onKeyUp",(sa,Ea)=>{if(!this.editingShape&&" "===Ea.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Ea.stopPropagation(),Ea.preventDefault();else this.inputs.onKeyUp(Ea)});
$a(this,"onPinchStart",(sa,Ea)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(sa.point),.5],Ea)});$a(this,"onPinch",(sa,Ea)=>{this.inputs.onPinch([...this.viewport.getPagePoint(sa.point),.5],Ea)});$a(this,"onPinchEnd",(sa,Ea)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(sa.point),.5],Ea)});this._states=[Eb,Be];this.history.pause();if(this.states&&0<this.states.length){this.registerStates(this.states);const sa=null!=(Y=this.initial)?Y:this.states[0].id;if(Y=this.children.get(sa))this.currentState=
Y,null==(la=this.currentState)?void 0:la._events.onEnter({fromId:"initial"})}l&&this.registerShapes(l);E&&this.registerTools(E);this.history.resume();d&&this.history.deserialize(d);this.api=new sh(this);vf(this);this.notify("mount",null)}dispose(){super.dispose();this.keybindingRegistered=!1;return this}initKeyboardShortcuts(){if(!this.keybindingRegistered){var d=this.constructor.shortcuts||[],l=Array.from(this.children.values()).filter(E=>E.constructor.shortcut).map(E=>({keys:E.constructor.shortcut,
fn:(Y,la,sa)=>{this.transition(E.id);sa.stopPropagation()}}));this._disposables.push(...[{keys:"shift+0",fn:()=>this.api.resetZoom()},{keys:"shift+1",fn:()=>this.api.zoomToFit()},{keys:"mod+shift+1",fn:()=>this.api.zoomToSelection()},{keys:"mod+-",fn:()=>this.api.zoomOut()},{keys:"mod+\x3d",fn:()=>this.api.zoomIn()},{keys:"mod+z",fn:()=>this.undo()},{keys:"mod+x",fn:()=>this.cut()},{keys:"mod+shift+z",fn:()=>this.redo()},{keys:"[",fn:()=>this.sendBackward()},{keys:"shift+[",fn:()=>this.sendToBack()},
{keys:"]",fn:()=>this.bringForward()},{keys:"shift+]",fn:()=>this.bringToFront()},{keys:"mod+a",fn:()=>{const {selectedTool:E}=this;"select"!==E.id&&this.selectTool("select");this.api.selectAll()}},{keys:"mod+shift+s",fn:()=>{this.saveAs();this.notify("saveAs",null)}},{keys:"mod+shift+v",fn:(E,Y,la)=>{this.editingShape||(la.preventDefault(),this.paste(void 0,!0))}},{keys:["del","backspace"],fn:()=>{this.api.deleteShapes()}},...d,...l].map(({keys:E,fn:Y})=>Hm.registerShortcut(E,la=>{Y(this,this,la)})));
this.keybindingRegistered=!0}}loadDocumentModel(d){this.history.deserialize(d);d.assets&&0<d.assets.length&&this.addAssets(d.assets);return this}get serialized(){return{selectedIds:Array.from(this.selectedIds.values()),pages:Array.from(this.pages.values()).map(d=>d.serialized),assets:this.getCleanUpAssets()}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(d){d.forEach(l=>this.pages.set(l.id,l));this.persist();return this}removePages(d){d.forEach(l=>
this.pages.delete(l.id));this.persist();return this}addAssets(d){d.forEach(l=>this.assets[l.id]=l);this.persist();return this}removeAssets(d){"string"===typeof d[0]?d.forEach(l=>delete this.assets[l]):d.forEach(l=>delete this.assets[l.id]);this.persist();return this}getCleanUpAssets(){const d=new Set;this.pages.forEach(l=>l.shapes.forEach(E=>{E.props.assetId&&this.assets[E.props.assetId]&&d.add(this.assets[E.props.assetId])}));return Array.from(d)}createAssets(d){this.addAssets(d);this.notify("create-assets",
{assets:d});this.persist();return this}get selectedTool(){return this.currentState}registerTools(d){this.Tools=d;return this.registerStates(d)}get editingShape(){const {editingId:d,currentPage:l}=this;return d?l.shapes.find(E=>E.id===d):void 0}get hoveredShape(){const {hoveredId:d,currentPage:l}=this;return d?l.shapes.find(E=>E.id===d):void 0}get selectedShapesArray(){const {selectedShapes:d,selectedTool:l}=this;return"select"!==l.id?[]:Array.from(d.values())}setSelectionRotation(d){this.selectionRotation=
d}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var d;const l=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(Y=>{var la;return Object.values(null!=(la=Y.props.handles)?la:{})}).flatMap(Y=>Y.bindingId).filter(zg).flatMap(Y=>{var la,sa;return[null==(la=this.currentPage.bindings[Y])?void 0:la.fromId,null==(sa=this.currentPage.bindings[Y])?void 0:sa.toId]}).filter(zg):[],E=[...(null!=(d=this.bindingIds)?d:[]),...l];return E?this.currentPage.shapes.filter(Y=>
null==E?void 0:E.includes(Y.id)):void 0}get currentGrid(){const {zoom:d}=this.viewport.camera;return.15>d?128:1>d?32:8}get shapes(){const {currentPage:{shapes:d}}=this;return Array.from(d.values())}get shapesInViewport(){const {selectedShapes:d,currentPage:l,viewport:{currentView:E}}=this;return l.shapes.filter(Y=>!Y.canUnmount||d.has(Y)||gf.boundsContain(E,Y.rotatedBounds)||gf.boundsCollide(E,Y.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:d,viewport:{currentView:l}}=this;if(d&&
!gf.boundsContain(l,d)&&!gf.boundsCollide(l,d)){var E=gf.getBoundsCenter(d);return od.clampV([(E[0]-l.minX-l.width/2)/l.width,(E[1]-l.minY-l.height/2)/l.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:d}=this;if(0!==d.length)return 1===d.length?Id(me({},d[0].bounds),{rotation:d[0].props.rotation}):gf.getCommonBounds(this.selectedShapesArray.map(l=>l.rotatedBounds))}get showSelection(){var d;const {selectedShapesArray:l}=this;return this.isIn("select")&&!this.isInAny("select.translating",
"select.pinching","select.rotating")&&(1===l.length&&!(null==(d=l[0])?0:d.hideSelection)||1<l.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(d=>d.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:d}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<d.length&&!d.every(l=>l.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:d}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<d.length&&!d.some(l=>l.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:d}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape",
"select.pointingRotateHandle","select.pointingResizeHandle")&&1===d.length&&!d.every(l=>l.hideResizeHandles)}temporaryTransitionToMove(d){d.stopPropagation();d.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};$a(re,"id","app");$a(re,"initial","select");Xd([ng],re.prototype,"serialized",1);Xd([cg],re.prototype,"pages",2);Xd([ng],re.prototype,"currentPageId",1);Xd([ng],re.prototype,"currentPage",1);Xd([Vf],re.prototype,"addPages",1);Xd([Vf],
re.prototype,"removePages",1);Xd([Vf],re.prototype,"createShapes",2);Xd([Vf],re.prototype,"updateShapes",2);Xd([Vf],re.prototype,"deleteShapes",2);Xd([cg],re.prototype,"assets",2);Xd([Vf],re.prototype,"addAssets",1);Xd([Vf],re.prototype,"removeAssets",1);Xd([ng],re.prototype,"selectedTool",1);Xd([cg],re.prototype,"editingId",2);Xd([ng],re.prototype,"editingShape",1);Xd([Vf],re.prototype,"setEditingShape",2);Xd([cg],re.prototype,"hoveredId",2);Xd([ng],re.prototype,"hoveredShape",1);Xd([Vf],re.prototype,
"setHoveredShape",2);Xd([cg],re.prototype,"selectedIds",2);Xd([cg],re.prototype,"selectedShapes",2);Xd([cg],re.prototype,"selectionRotation",2);Xd([ng],re.prototype,"selectedShapesArray",1);Xd([Vf],re.prototype,"setSelectedShapes",2);Xd([Vf],re.prototype,"setSelectionRotation",1);Xd([cg],re.prototype,"erasingIds",2);Xd([cg],re.prototype,"erasingShapes",2);Xd([ng],re.prototype,"erasingShapesArray",1);Xd([Vf],re.prototype,"setErasingShapes",2);Xd([cg],re.prototype,"bindingIds",2);Xd([ng],re.prototype,
"bindingShapes",1);Xd([Vf],re.prototype,"setBindingShapes",2);Xd([Vf],re.prototype,"createNewLineBinding",2);Xd([cg],re.prototype,"brush",2);Xd([Vf],re.prototype,"setBrush",2);Xd([Vf],re.prototype,"setCamera",2);Xd([ng],re.prototype,"currentGrid",1);Xd([ng],re.prototype,"shapes",1);Xd([ng],re.prototype,"shapesInViewport",1);Xd([ng],re.prototype,"selectionDirectionHint",1);Xd([ng],re.prototype,"selectionBounds",1);Xd([ng],re.prototype,"showSelection",1);Xd([ng],re.prototype,"showSelectionDetail",1);
Xd([ng],re.prototype,"showSelectionRotation",1);Xd([ng],re.prototype,"showContextBar",1);Xd([ng],re.prototype,"showRotateHandles",1);Xd([ng],re.prototype,"showResizeHandles",1);var jf=ff(Qf()),zh=ff(zm()),yg=ff(Yk()),ch=jf.default,dh=class{static insertTextFirefox(d,l){d.setRangeText(l,d.selectionStart||0,d.selectionEnd||0,"end");d.dispatchEvent(new InputEvent("input",{data:l,inputType:"insertText",isComposing:!1}))}static insert(d,l){const E=d.ownerDocument,Y=E.activeElement;Y!==d&&d.focus();E.execCommand("insertText",
!1,l)||dh.insertTextFirefox(d,l);Y===E.body?d.blur():Y instanceof HTMLElement&&Y!==d&&Y.focus()}static set(d,l){d.select();dh.insert(d,l)}static getSelection(d){const {selectionStart:l,selectionEnd:E}=d;return d.value.slice(l?l:void 0,E?E:void 0)}static wrapSelection(d,l,E){const {selectionStart:Y,selectionEnd:la}=d,sa=dh.getSelection(d);dh.insert(d,l+sa+(null!=E?E:l));d.selectionStart=(Y||0)+l.length;d.selectionEnd=(la||0)+l.length}static replace(d,l,E){let Y=0;d.value.replace(l,(...la)=>{const sa=
Y+la[la.length-2],Ea=la[0].length;d.selectionStart=sa;d.selectionEnd=sa+Ea;la="string"===typeof E?E:E(...la);dh.insert(d,la);d.selectionStart=sa;Y+=la.length-Ea;return la})}static findLineEnd(d,l){const E=d.lastIndexOf("\n",l-1)+1;return"\t"!==d.charAt(E)?l:E+1}static indent(d){var l;const {selectionStart:E,selectionEnd:Y,value:la}=d;var sa=la.slice(E,Y);if((sa=null==(l=/\n/g.exec(sa))?void 0:l.length)&&0<sa){l=la.lastIndexOf("\n",E-1)+1;var Ea=d.value.slice(l,Y-1);sa=Ea.replace(/^|\n/g,`$&${dh.INDENT}`);
Ea=sa.length-Ea.length;d.setSelectionRange(l,Y-1);dh.insert(d,sa);d.setSelectionRange(E+1,Y+Ea)}else dh.insert(d,dh.INDENT)}static unindent(d){const {selectionStart:l,selectionEnd:E,value:Y}=d;var la=Y.lastIndexOf("\n",l-1)+1;const sa=dh.findLineEnd(Y,E);var Ea=d.value.slice(la,sa);const Ua=Ea.replace(/(^|\n)(\t| {1,2})/g,"$1");Ea=Ea.length-Ua.length;d.setSelectionRange(la,sa);dh.insert(d,Ua);la=(la=/\t| {1,2}/.exec(Y.slice(la,l)))?la[0].length:0;d.setSelectionRange(l-la,Math.max(l-la,E-Ea))}static normalizeText(d){return d.replace(dh.fixNewLines,
"\n")}},oh=dh;$a(oh,"fixNewLines",/\r?\n|\r/g);$a(oh,"INDENT","  ");var Ul;"undefined"!==typeof window&&(Ul=Ve());var lr=new Map,Ip=Of()?"":"Ctrl",uz=class extends re{},Mv=ff(S(3)),tz=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var Nv=ff(S(3)),Nt={},qr=ff(S(3)),sz=d=>{for(d=d.parentElement;d&&d!==document.body;){const {overflowY:l}=window.getComputedStyle(d);if(d.scrollHeight>d.clientHeight&&("auto"===l||"scroll"===l||"overlay"===l))return d;d=d.parentElement}return document},
Ot=ff(S(3)),Pt=new Map,yz={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"rgb(66, 133, 244)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},zz=((d,...l)=>d.reduce((E,Y,la)=>E+Y+(la<l.length?l[la]:""),""))`
  .tl-container {
    --tl-cursor: inherit;
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: var(--tl-cursor) !important;
    box-sizing: border-box;
    color: var(--tl-foreground);
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,Qv=ff(S(3)),Rv=ff(S(3)),Qt={},uk={toVector(d,l){void 0===d&&(d=l);return Array.isArray(d)?d:[d,d]},add(d,l){return[d[0]+l[0],d[1]+l[1]]},sub(d,l){return[d[0]-l[0],d[1]-l[1]]},addTo(d,l){d[0]+=l[0];d[1]+=l[1]},subTo(d,l){d[0]-=l[0];d[1]-=l[1]}},Sv={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},Az=["enter","leave"],Bz=["gotpointercapture","lostpointercapture"],
Tv=class{constructor(d,l,E){this.ctrl=d;this.args=l;this.key=E;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(d){this.ctrl.state[this.key]=d}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:d,
shared:l,ingKey:E,args:Y}=this;l[E]=d._active=d.active=d._blocked=d._force=!1;d._step=[!1,!1];d.intentional=!1;d._movement=[0,0];d._distance=[0,0];d._direction=[0,0];d._delta=[0,0];d._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];d.args=Y;d.axis=void 0;d.memo=void 0;d.elapsedTime=0;d.direction=[0,0];d.distance=[0,0];d.overflow=[0,0];d._movementBound=[!1,!1];d.velocity=[0,0];d.movement=[0,0];d.delta=[0,0];d.timeStamp=0}start(d){const l=this.state,E=this.config;l._active||(this.reset(),this.computeInitial(),
l._active=!0,l.target=d.target,l.currentTarget=d.currentTarget,l.lastOffset=E.from?Ei(E.from,l):l.offset,l.offset=l.lastOffset);l.startTime=l.timeStamp=d.timeStamp}computeValues(d){const l=this.state;l._values=d;l.values=this.config.transform(d)}computeInitial(){const d=this.state;d._initial=d._values;d.initial=d.values}compute(d){const {state:l,config:E,shared:Y}=this;l.args=this.args;var la=0;if(d){l.event=d;E.preventDefault&&d.cancelable&&l.event.preventDefault();l.type=d.type;Y.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;Y.locked=!!document.pointerLockElement;la=Object;var sa=la.assign,Ea={};"buttons"in d&&(Ea.buttons=d.buttons);if("shiftKey"in d){const {shiftKey:qd,altKey:Bd,metaKey:Fe,ctrlKey:ce}=d;Object.assign(Ea,{shiftKey:qd,altKey:Bd,metaKey:Fe,ctrlKey:ce})}sa.call(la,Y,Ea);Y.down=Y.pressed=1===Y.buttons%2||0<Y.touches;la=d.timeStamp-l.timeStamp;l.timeStamp=d.timeStamp;l.elapsedTime=l.timeStamp-l.startTime}l._active&&(sa=l._delta.map(Math.abs),uk.addTo(l._distance,sa));this.axisIntent&&
this.axisIntent(d);const [Ua,jb]=l._movement,[sb,Ub]=E.threshold,{_step:gc,values:yc}=l;E.hasCustomTransform?(!1===gc[0]&&(gc[0]=Math.abs(Ua)>=sb&&yc[0]),!1===gc[1]&&(gc[1]=Math.abs(jb)>=Ub&&yc[1])):(!1===gc[0]&&(gc[0]=Math.abs(Ua)>=sb&&Math.sign(Ua)*sb),!1===gc[1]&&(gc[1]=Math.abs(jb)>=Ub&&Math.sign(jb)*Ub));l.intentional=!1!==gc[0]||!1!==gc[1];if(l.intentional){sa=[0,0];if(E.hasCustomTransform){const [qd,Bd]=yc;sa[0]=!1!==gc[0]?qd-gc[0]:0;sa[1]=!1!==gc[1]?Bd-gc[1]:0}else sa[0]=!1!==gc[0]?Ua-gc[0]:
0,sa[1]=!1!==gc[1]?jb-gc[1]:0;this.restrictToAxis&&!l._blocked&&this.restrictToAxis(sa);Ea=l.offset;var Qc=l._active&&!l._blocked||l.active;Qc&&(l.first=l._active&&!l.active,l.last=!l._active&&l.active,l.active=Y[this.ingKey]=l._active,d&&(l.first&&("bounds"in E&&(l._bounds=Ei(E.bounds,l)),this.setup&&this.setup()),l.movement=sa,this.computeOffset()));var [Jc,kd]=l.offset,[[ad,vc],[md,Ad]]=l._bounds;l.overflow=[Jc<ad?-1:Jc>vc?1:0,kd<md?-1:kd>Ad?1:0];l._movementBound[0]=l.overflow[0]?!1===l._movementBound[0]?
l._movement[0]:l._movementBound[0]:!1;l._movementBound[1]=l.overflow[1]?!1===l._movementBound[1]?l._movement[1]:l._movementBound[1]:!1;l.offset=fl(l._bounds,l.offset,l._active?E.rubberband||[0,0]:[0,0]);l.delta=uk.sub(l.offset,Ea);this.computeMovement();Qc&&(!l.last||32<la)&&(l.delta=uk.sub(l.offset,Ea),d=l.delta.map(Math.abs),uk.addTo(l.distance,d),l.direction=l.delta.map(Math.sign),l._direction=l._delta.map(Math.sign),!l.first&&0<la&&(l.velocity=[d[0]/la,d[1]/la]))}}emit(){const d=this.state;var l=
this.shared;const E=this.config;d._active||this.clean();if(!d._blocked&&d.intentional||d._force||E.triggerAllEvents)l=this.handler(rg(rg(rg({},l),d),{},{[this.aliasKey]:d.values})),void 0!==l&&(d.memo=l)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Br=class extends Tv{constructor(...d){super(...d);Oh(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=uk.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=uk.sub(this.state.offset,this.state.lastOffset)}axisIntent(d){const l=this.state,E=this.config;!l.axis&&d&&(d="object"===typeof E.axisThreshold?E.axisThreshold[uj(d)]:E.axisThreshold,l.axis=ak(l._movement,d));l._blocked=(E.lockDirection||!!E.axis)&&!l.axis||!!E.axis&&E.axis!==l.axis}restrictToAxis(d){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":d[1]=0;break;case "y":d[0]=0}}},Cz=d=>d,Uv={enabled(d=!0){return d},
eventOptions(d,l,E){return rg(rg({},E.shared.eventOptions),d)},preventDefault(d=!1){return d},triggerAllEvents(d=!1){return d},rubberband(d=0){switch(d){case !0:return[.15,.15];case !1:return[0,0];default:return uk.toVector(d)}},from(d){if("function"===typeof d)return d;if(null!=d)return uk.toVector(d)},transform(d,l,E){d=d||E.shared.transform;this.hasCustomTransform=!!d;return d||Cz},threshold(d){return uk.toVector(d,0)}},Xp=rg(rg({},Uv),{},{axis(d,l,{axis:E}){this.lockDirection="lock"===E;if(!this.lockDirection)return E},
axisThreshold(d=0){return d},bounds(d={}){if("function"===typeof d)return sa=>Xp.bounds(d(sa));if("current"in d)return()=>d.current;if("function"===typeof HTMLElement&&d instanceof HTMLElement)return d;const {left:l=-Infinity,right:E=Infinity,top:Y=-Infinity,bottom:la=Infinity}=d;return[[l,E],[Y,la]]}}),Ov={ArrowRight:(d=1)=>[10*d,0],ArrowLeft:(d=1)=>[-10*d,0],ArrowUp:(d=1)=>[0,-10*d],ArrowDown:(d=1)=>[0,10*d]},lz=class extends Br{constructor(...d){super(...d);Oh(this,"ingKey","dragging")}reset(){super.reset();
const d=this.state;d._pointerId=void 0;d._pointerActive=!1;d._keyboardActive=!1;d._preventScroll=!1;d._delayed=!1;d.swipe=[0,0];d.tap=!1;d.canceled=!1;d.cancel=this.cancel.bind(this)}setup(){const d=this.state;if(d._bounds instanceof HTMLElement){const l=d._bounds.getBoundingClientRect(),E=d.currentTarget.getBoundingClientRect();d._bounds=Xp.bounds({left:l.left-E.left+d.offset[0],right:l.right-E.right+d.offset[0],top:l.top-E.top+d.offset[1],bottom:l.bottom-E.bottom+d.offset[1]})}}cancel(){const d=
this.state;d.canceled||(d.canceled=!0,d._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(d){const l=this.config,E=this.state;if(null==d.buttons||(Array.isArray(l.pointerButtons)?l.pointerButtons.includes(d.buttons):-1===l.pointerButtons||l.pointerButtons===d.buttons)){var Y=this.ctrl.setEventIds(d);
l.pointerCapture&&d.target.setPointerCapture(d.pointerId);Y&&1<Y.size&&E._pointerActive||(this.start(d),this.setupPointer(d),E._pointerId=Nj(d),E._pointerActive=!0,this.computeValues(Xf(d)),this.computeInitial(),l.preventScrollAxis&&"mouse"!==uj(d)?(E._active=!1,this.setupScrollPrevention(d)):0<l.delay?(this.setupDelayTrigger(d),l.triggerAllEvents&&(this.compute(d),this.emit())):this.startPointerDrag(d))}}startPointerDrag(d){const l=this.state;l._active=!0;l._preventScroll=!0;l._delayed=!1;this.compute(d);
this.emit()}pointerMove(d){const l=this.state,E=this.config;if(l._pointerActive&&(l.type!==d.type||d.timeStamp!==l.timeStamp)){var Y=Nj(d);if(void 0===l._pointerId||Y===l._pointerId)Y=Xf(d),document.pointerLockElement===d.target?l._delta=[d.movementX,d.movementY]:(l._delta=uk.sub(Y,l._values),this.computeValues(Y)),uk.addTo(l._movement,l._delta),this.compute(d),l._delayed&&l.intentional?(this.timeoutStore.remove("dragDelay"),l.active=!1,this.startPointerDrag(d)):E.preventScrollAxis&&!l._preventScroll?
l.axis&&(l.axis===E.preventScrollAxis||"xy"===E.preventScrollAxis?(l._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(d))):this.emit()}}pointerUp(d){this.ctrl.setEventIds(d);try{this.config.pointerCapture&&d.target.hasPointerCapture(d.pointerId)&&d.target.releasePointerCapture(d.pointerId)}catch(Ea){}const l=this.state,E=this.config;if(l._active&&l._pointerActive){var Y=Nj(d);if(void 0===l._pointerId||Y===l._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(d);var [la,sa]=l._distance;l.tap=la<=E.tapsThreshold&&sa<=E.tapsThreshold;if(l.tap&&E.filterTaps)l._force=!0;else{const [Ea,Ua]=l.direction,[jb,sb]=l.velocity,[Ub,gc]=l.movement,[yc,Qc]=E.swipe.velocity,[Jc,kd]=E.swipe.distance;l.elapsedTime<E.swipe.duration&&(Math.abs(jb)>yc&&Math.abs(Ub)>Jc&&(l.swipe[0]=Ea),Math.abs(sb)>Qc&&Math.abs(gc)>kd&&(l.swipe[1]=Ua))}this.emit()}}}pointerClick(d){!this.state.tap&&0<d.detail&&(d.preventDefault(),d.stopPropagation())}setupPointer(d){const l=this.config,
E=l.device;l.pointerLock&&d.currentTarget.requestPointerLock();l.pointerCapture||(this.eventStore.add(this.sharedConfig.window,E,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,E,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,E,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(d){this.state._preventScroll&&d.cancelable&&
d.preventDefault()}setupScrollPrevention(d){this.state._preventScroll=!1;"persist"in d&&"function"===typeof d.persist&&d.persist();const l=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",l);this.eventStore.add(this.sharedConfig.window,"touch","cancel",l);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,d)}setupDelayTrigger(d){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(d)},this.config.delay)}keyDown(d){const l=Ov[d.key];if(l){const E=this.state,Y=d.shiftKey?10:d.altKey?.1:1;this.start(d);E._delta=l(Y);E._keyboardActive=!0;uk.addTo(E._movement,E._delta);this.compute(d);this.emit()}}keyUp(d){d.key in Ov&&(this.state._keyboardActive=!1,this.setActive(),this.compute(d),this.emit())}bind(d){const l=this.config.device;d(l,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(d(l,"change",this.pointerMove.bind(this)),d(l,"end",this.pointerUp.bind(this)),d(l,"cancel",this.pointerUp.bind(this)),d("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(d("key","down",this.keyDown.bind(this)),d("key","up",this.keyUp.bind(this)));this.config.filterTaps&&d("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Hp="undefined"!==typeof window&&window.document&&window.document.createElement;try{var Jv="constructor"in GestureEvent}catch(d){Jv=!1}var rz=
Jv,pr=Hp&&"ontouchstart"in window||Hp&&1<window.navigator.maxTouchPoints,Lv=Hp&&"ontouchstart"in window||Hp&&1<window.navigator.maxTouchPoints,Pv=Hp&&"onpointerdown"in window,nz=Hp&&"exitPointerLock"in window.document,Kv={mouse:0,touch:0,pen:8},oz=rg(rg({},Xp),{},{device(d,l,{pointer:{touch:E=!1,lock:Y=!1,mouse:la=!1}={}}){this.pointerLock=Y&&nz;return pr&&E?"touch":this.pointerLock?"mouse":Pv&&!la?"pointer":pr?"touch":"mouse"},preventScrollAxis(d,l,{preventScroll:E}){this.preventScrollDelay="number"===
typeof E?E:E||void 0===E&&d?250:void 0;if(Lv&&!1!==E)return d?d:void 0!==E?"y":void 0},pointerCapture(d,l,{pointer:{capture:E=!0,buttons:Y=1}={}}){this.pointerButtons=Y;return!this.pointerLock&&"pointer"===this.device&&E},keys(d=!0){return d},threshold(d,l,{filterTaps:E=!1,tapsThreshold:Y=3,axis:la}){d=uk.toVector(d,E?Y:la?1:0);this.filterTaps=E;this.tapsThreshold=Y;return d},swipe({velocity:d=.5,distance:l=50,duration:E=250}={}){return{velocity:this.transform(uk.toVector(d)),distance:this.transform(uk.toVector(l)),
duration:E}},delay(d=0){switch(d){case !0:return 180;case !1:return 0;default:return d}},axisThreshold(d){return d?rg(rg({},Kv),d):Kv}}),pz=class extends Tv{constructor(...d){super(...d);Oh(this,"ingKey","pinching");Oh(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const d=this.state;d._touchIds=[];d.canceled=!1;d.cancel=this.cancel.bind(this);d.turns=0}computeOffset(){const {type:d,movement:l,lastOffset:E}=
this.state;this.state.offset="wheel"===d?uk.add(l,E):[(1+l[0])*E[0],l[1]+E[1]]}computeMovement(){const {offset:d,lastOffset:l}=this.state;this.state.movement=[d[0]/l[0],d[1]-l[1]]}axisIntent(){const d=this.state,[l,E]=d._movement;if(!d.axis){const Y=30*Math.abs(l)-Math.abs(E);0>Y?d.axis="angle":0<Y&&(d.axis="scale")}}restrictToAxis(d){this.config.lockDirection&&("scale"===this.state.axis?d[1]=0:"angle"===this.state.axis&&(d[0]=0))}cancel(){const d=this.state;d.canceled||setTimeout(()=>{d.canceled=
!0;d._active=!1;this.compute();this.emit()},0)}touchStart(d){this.ctrl.setEventIds(d);var l=this.state;const E=this.ctrl.touchIds;l._active&&l._touchIds.every(Y=>E.has(Y))||2>E.size||(this.start(d),l._touchIds=Array.from(E).slice(0,2),l=Fj(d,l._touchIds),this.pinchStart(d,l))}pointerStart(d){if(null==d.buttons||1===d.buttons%2){this.ctrl.setEventIds(d);d.target.setPointerCapture(d.pointerId);var l=this.state,E=l._pointerEvents,Y=this.ctrl.pointerIds;l._active&&Array.from(E.keys()).every(la=>Y.has(la))||
(2>E.size&&E.set(d.pointerId,d),2>l._pointerEvents.size||(this.start(d),l=Mk(...Array.from(E.values())),this.pinchStart(d,l)))}}pinchStart(d,l){this.state.origin=l.origin;this.computeValues([l.distance,l.angle]);this.computeInitial();this.compute(d);this.emit()}touchMove(d){if(this.state._active){var l=Fj(d,this.state._touchIds);this.pinchMove(d,l)}}pointerMove(d){var l=this.state._pointerEvents;l.has(d.pointerId)&&l.set(d.pointerId,d);this.state._active&&(l=Mk(...Array.from(l.values())),this.pinchMove(d,
l))}pinchMove(d,l){const E=this.state,Y=l.angle-E._values[1];let la=0;270<Math.abs(Y)&&(la+=Math.sign(Y));this.computeValues([l.distance,l.angle-360*la]);E.origin=l.origin;E.turns=la;E._movement=[E._values[0]/E._initial[0]-1,E._values[1]-E._initial[1]];this.compute(d);this.emit()}touchEnd(d){this.ctrl.setEventIds(d);this.state._active&&this.state._touchIds.some(l=>!this.ctrl.touchIds.has(l))&&(this.state._active=!1,this.compute(d),this.emit())}pointerEnd(d){const l=this.state;this.ctrl.setEventIds(d);
try{d.target.releasePointerCapture(d.pointerId)}catch(E){}l._pointerEvents.has(d.pointerId)&&l._pointerEvents.delete(d.pointerId);l._active&&2>l._pointerEvents.size&&(l._active=!1,this.compute(d),this.emit())}gestureStart(d){d.cancelable&&d.preventDefault();const l=this.state;l._active||(this.start(d),this.computeValues([d.scale,d.rotation]),l.origin=[d.clientX,d.clientY],this.compute(d),this.emit())}gestureMove(d){d.cancelable&&d.preventDefault();if(this.state._active){var l=this.state;this.computeValues([d.scale,
d.rotation]);l.origin=[d.clientX,d.clientY];var E=l._movement;l._movement=[d.scale-1,d.rotation];l._delta=uk.sub(l._movement,E);this.compute(d);this.emit()}}gestureEnd(d){this.state._active&&(this.state._active=!1,this.compute(d),this.emit())}wheel(d){const l=this.config.modifierKey;if(!l||d[l])this.state._active?this.wheelChange(d):this.wheelStart(d),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(d){this.start(d);this.wheelChange(d)}wheelChange(d){"uv"in d||d.cancelable&&d.preventDefault();
const l=this.state;l._delta=[-mg(d)[1]/100*l.offset[0],0];uk.addTo(l._movement,l._delta);this.state.origin=[d.clientX,d.clientY];this.compute(d);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(d){const l=this.config.device;l&&(d(l,"start",this[l+"Start"].bind(this)),d(l,"change",this[l+"Move"].bind(this)),d(l,"end",this[l+"End"].bind(this)),d(l,"cancel",this[l+"End"].bind(this)));d("wheel","",this.wheel.bind(this),{passive:!1})}},qz=rg(rg({},Uv),
{},{device(d,l,{shared:E,pointer:{touch:Y=!1}={}}){if(E.target&&!pr&&rz)return"gesture";if(pr&&Y)return"touch";if(Lv){if(Pv)return"pointer";if(pr)return"touch"}},bounds(d,l,{scaleBounds:E={},angleBounds:Y={}}){const la=Ea=>{Ea=Ei(E,Ea);Ea=Object.assign({},{min:-Infinity,max:Infinity},Ea||{});return[Ea.min,Ea.max]},sa=Ea=>{Ea=Ei(Y,Ea);Ea=Object.assign({},{min:-Infinity,max:Infinity},Ea||{});return[Ea.min,Ea.max]};return"function"!==typeof E&&"function"!==typeof Y?[la(),sa()]:Ea=>[la(Ea),sa(Ea)]},threshold(d,
l,E){this.lockDirection="lock"===E.axis;return uk.toVector(d,this.lockDirection?[.1,3]:0)},modifierKey(d){return void 0===d?"ctrlKey":d}}),wz=class extends Br{constructor(...d){super(...d);Oh(this,"ingKey","moving")}move(d){this.config.mouseOnly&&"mouse"!==d.pointerType||(this.state._active?this.moveChange(d):this.moveStart(d),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(d){this.start(d);this.computeValues(Xf(d));this.compute(d);this.computeInitial();this.emit()}moveChange(d){if(this.state._active){var l=
Xf(d),E=this.state;E._delta=uk.sub(l,E._values);uk.addTo(E._movement,E._delta);this.computeValues(l);this.compute(d);this.emit()}}moveEnd(d){this.state._active&&(this.state._active=!1,this.compute(d),this.emit())}bind(d){d("pointer","change",this.move.bind(this));d("pointer","leave",this.moveEnd.bind(this))}},xz=rg(rg({},Xp),{},{mouseOnly:(d=!0)=>d}),mz=class extends Br{constructor(...d){super(...d);Oh(this,"ingKey","scrolling")}scroll(d){this.state._active||this.start(d);this.scrollChange(d);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(d){d.cancelable&&d.preventDefault();const l=this.state;var E,Y;const {scrollX:la,scrollY:sa,scrollLeft:Ea,scrollTop:Ua}=d.currentTarget;var jb=[null!==(E=null!==la&&void 0!==la?la:Ea)&&void 0!==E?E:0,null!==(Y=null!==sa&&void 0!==sa?sa:Ua)&&void 0!==Y?Y:0];l._delta=uk.sub(jb,l._values);uk.addTo(l._movement,l._delta);this.computeValues(jb);this.compute(d);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(d){d("scroll",
"",this.scroll.bind(this))}},kz=Xp,jz=class extends Br{constructor(...d){super(...d);Oh(this,"ingKey","wheeling")}wheel(d){this.state._active||this.start(d);this.wheelChange(d);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(d){const l=this.state;l._delta=mg(d);uk.addTo(l._movement,l._delta);const [E,Y]=l.overflow,[la,sa]=l._delta,[Ea,Ua]=l._direction;if(0>E&&0<la&&0>Ea||0<E&&0>la&&0<Ea)l._movement[0]=l._movementBound[0];if(0>Y&&0<sa&&0>Ua||0<Y&&0>sa&&0<Ua)l._movement[1]=l._movementBound[1];
this.compute(d);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(d){d("wheel","",this.wheel.bind(this))}},vz=Xp,iz=class extends Br{constructor(...d){super(...d);Oh(this,"ingKey","hovering")}enter(d){this.config.mouseOnly&&"mouse"!==d.pointerType||(this.start(d),this.computeValues(Xf(d)),this.compute(d),this.emit())}leave(d){if(!this.config.mouseOnly||"mouse"===d.pointerType){var l=this.state;if(l._active){l._active=!1;var E=Xf(d);l._movement=l._delta=
uk.sub(E,l._values);this.computeValues(E);this.compute(d);l.delta=l.movement;this.emit()}}}bind(d){d("pointer","enter",this.enter.bind(this));d("pointer","leave",this.leave.bind(this))}},hz=rg(rg({},Xp),{},{mouseOnly:(d=!0)=>d}),Mt=new Map,Lt=new Map,fz={key:"drag",engine:lz,resolver:oz},gz={key:"hover",engine:iz,resolver:hz},Qy={key:"move",engine:wz,resolver:xz},Ry={key:"pinch",engine:pz,resolver:qz},Sy={key:"scroll",engine:mz,resolver:kz},Ty={key:"wheel",engine:jz,resolver:vz},Kt=ff(S(3)),Uy={target(d){if(d)return()=>
"current"in d?d.current:d},enabled(d=!0){return d},window(d=Hp?window:void 0){return d},eventOptions({passive:d=!0,capture:l=!1}={}){return{passive:d,capture:l}},transform(d){return d}},Vy=["target","eventOptions","window","enabled","transform"],Bv=class{constructor(d,l){Oh(this,"_listeners",new Set);this._ctrl=d;this._gestureKey=l}add(d,l,E,Y,la){const sa=this._listeners,Ea=Zj(l,E),Ua=rg(rg({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),la);d.addEventListener(Ea,Y,Ua);const jb=
()=>{d.removeEventListener(Ea,Y,Ua);sa.delete(jb)};sa.add(jb);return jb}clean(){this._listeners.forEach(d=>d());this._listeners.clear()}},Wy=class{constructor(){Oh(this,"_timeouts",new Map)}add(d,l,E=140,...Y){this.remove(d);this._timeouts.set(d,window.setTimeout(l,E,...Y))}remove(d){(d=this._timeouts.get(d))&&window.clearTimeout(d)}clean(){this._timeouts.forEach(d=>void window.clearTimeout(d));this._timeouts.clear()}},Xy=class{constructor(d){Oh(this,"gestures",new Set);Oh(this,"_targetEventStore",
new Bv(this));Oh(this,"gestureEventStores",{});Oh(this,"gestureTimeoutStores",{});Oh(this,"handlers",{});Oh(this,"config",{});Oh(this,"pointerIds",new Set);Oh(this,"touchIds",new Set);Oh(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});d.drag&&mj(this,"drag");d.wheel&&mj(this,"wheel");d.scroll&&mj(this,"scroll");d.move&&mj(this,"move");d.pinch&&mj(this,"pinch");d.hover&&mj(this,"hover")}setEventIds(d){if("touches"in d)return this.touchIds=new Set(Mj(d));if("pointerId"in d)return"pointerup"===
d.type||"pointercancel"===d.type?this.pointerIds.delete(d.pointerId):"pointerdown"===d.type&&this.pointerIds.add(d.pointerId),this.pointerIds}applyHandlers(d,l){this.handlers=d;this.nativeHandlers=l}applyConfig(d,l){this.config=bk(d,l,this.config)}clean(){this._targetEventStore.clean();for(const d of this.gestures)this.gestureEventStores[d].clean(),this.gestureTimeoutStores[d].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...d){var l=this.config.shared;
const E={};let Y;if(l.target&&(Y=l.target(),!Y))return;if(l.enabled){for(const la of this.gestures){const sa=this.config[la],Ea=Cv(E,sa.eventOptions,!!Y);sa.enabled&&(new (Mt.get(la))(this,d,la)).bind(Ea)}l=Cv(E,l.eventOptions,!!Y);for(const la in this.nativeHandlers)l(la,"",sa=>this.nativeHandlers[la](rg(rg({},this.state.shared),{},{event:sa,args:d})),void 0,!0)}for(const la in E)E[la]=ji(...E[la]);if(!Y)return E;for(const la in E){const {device:sa,capture:Ea,passive:Ua}=Uk(la);this._targetEventStore.add(Y,
sa,"",E[la],{capture:Ea,passive:Ua})}}},Cv=(d,l,E)=>(Y,la,sa,Ea={},Ua=!1)=>{var jb,sb;const Ub=null!==(jb=Ea.capture)&&void 0!==jb?jb:l.capture;Ea=null!==(sb=Ea.passive)&&void 0!==sb?sb:l.passive;Y=Ua?Y:Tl(Y,la,Ub);E&&Ea&&(Y+="Passive");d[Y]=d[Y]||[];d[Y].push(sa)},Yy=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,Zy=ff(S(3)),Jt=ff(S(3)),xv=ff(S(3)),yv=ff(S(3)),Jy=ff(S(3)),Ky=ff(S(3)),Ly=ff(S(3)),My=ff(S(3)),Ny={none:(d,l)=>"none",["default"]:(d,l)=>"default",pointer:(d,l)=>"pointer",crosshair:(d,l)=>
"crosshair",move:(d,l)=>"move",wait:(d,l)=>"wait",progress:(d,l)=>"progress",grab:(d,l)=>Ug('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
d,l),grabbing:(d,l)=>Ug("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
d,l),text:(d,l)=>Ug("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
d,l),["resize-edge"]:(d,l)=>Ug("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",d,l),["resize-corner"]:(d,l)=>Ug("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
d,l),["ew-resize"]:(d,l)=>Ug("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",d,l),["ns-resize"]:(d,l)=>Ug("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
d+90,l),["nesw-resize"]:(d,l)=>Ug("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",d,l),["nwse-resize"]:(d,l)=>Ug("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
d+90,l),rotate:(d,l)=>Ug('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
d+45,l),["nwse-rotate"]:(d,l)=>Ug('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
d,l),["nesw-rotate"]:(d,l)=>Ug('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
d+90,l),["senw-rotate"]:(d,l)=>Ug('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
d+180,l),["swne-rotate"]:(d,l)=>Ug('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
d+270,l)},Oy=ff(S(3));ff(S(3));var zv=S(3),Av=ff(S(3));if(!S(3).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!vf)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var Py=S(12),or=ff(S(3)),Dv="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,$y=1E4,az=function(d){var l="function"===typeof Symbol&&Symbol.iterator,E=l&&d[l],Y=0;if(E)return E.call(d);if(d&&"number"===typeof d.length)return{next:function(){d&&Y>=d.length&&
(d=void 0);return{value:d&&d[Y++],done:!d}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.");},Ev=Dv?Ng(Dv):fj(),bz=Ev.addReactionToTrack,cz=Ev.recordReactionAsCommitted,Fv=function(d,l){var E="function"===typeof Symbol&&d[Symbol.iterator];if(!E)return d;d=E.call(d);var Y,la=[];try{for(;(void 0===l||0<l--)&&!(Y=d.next()).done;)la.push(Y.value)}catch(Ea){var sa={error:Ea}}finally{try{Y&&!Y.done&&(E=d["return"])&&E.call(d)}finally{if(sa)throw sa.error;}}return la},
dz=function(){return function(){}}(),sq=S(3),Gv="function"===typeof Symbol&&Symbol.for,Hv=Gv?Symbol.for("react.forward_ref"):"function"===typeof sq.forwardRef&&(0,sq.forwardRef)(function(d){return null}).$$typeof,Iv=Gv?Symbol.for("react.memo"):"function"===typeof sq.memo&&(0,sq.memo)(function(d){return null}).$$typeof,ez={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Pj.displayName="Observer";S(3);S(3);S(3);(function(d){d||=Pk;Gc({reactionScheduler:d})})(Py.unstable_batchedUpdates);var Ey=
ff(S(3));wb=S(611);var wo=Ey.forwardRef(function(d,l){var {children:E,opacity:Y,centered:la,className:sa=""}=d,Ea=Wf(d,["children","opacity","centered","className"]);return(0,wb.jsx)(Pj,{children:()=>(0,wb.jsx)("div",{ref:l,className:`tl-positioned-div ${sa}`,style:Y?{opacity:Y}:void 0,draggable:!1,children:(0,wb.jsx)("div",Id(me({className:`tl-positioned-inner ${la?"tl-centered":""}`},Ea),{children:E}))})})}),Fy=ff(S(3));wb=S(611);var Cn=Fy.forwardRef(function(d,l){var {id:E,className:Y="",style:la,
children:sa}=d,Ea=Wf(d,["id","className","style","children"]);return(0,wb.jsx)(Pj,{children:()=>(0,wb.jsx)("svg",{ref:l,style:la,className:`tl-positioned-svg ${Y}`,children:(0,wb.jsx)("g",Id(me({id:E,className:"tl-centered-g"},Ea),{children:sa}))})})}),nr=ff(S(3)),vv=ff(S(3)),ts=ff(S(3));wb=S(611);var rq=We(function(d){var {id:l,bounds:E,zIndex:Y,rotation:la=0,className:sa="",children:Ea}=d;d=Wf(d,"id bounds zIndex rotation className children".split(" "));const Ua=ts.useRef(null);ts.useLayoutEffect(()=>
{Ua.current.style.transform=`translate(
        calc(${E.minX}px - var(--tl-padding)),
        calc(${E.minY}px - var(--tl-padding)))
        rotate(${la+(E.rotation||0)}rad)`},[E.minX,E.minY,la,E.rotation]);ts.useLayoutEffect(()=>{const jb=Ua.current;jb.style.width=`calc(${Math.floor(E.width)}px + (var(--tl-padding) * 2))`;jb.style.height=`calc(${Math.floor(E.height)}px + (var(--tl-padding) * 2))`},[E.width,E.height]);ts.useLayoutEffect(()=>{const jb=Ua.current;void 0!==Y&&(jb.style.zIndex=Y.toString())},[Y]);return(0,wb.jsx)("div",Id(me({id:l,ref:Ua,className:`tl-positioned ${sa}`,"aria-label":"container"},d),{children:Ea}))}),
Gy=ff(S(3));wb=S(611);var It=d=>d.stopPropagation(),Hy=We(function({shapes:d,hidden:l,bounds:E,rotation:Y=0}){const {components:{ContextBar:la},viewport:{bounds:sa,camera:{point:[Ea,Ua],zoom:jb}}}=Tg(),sb=Gy.useRef(null);var Ub=gf.getRotatedBounds(E,Y);Ub=gf.multiplyBounds(Ub,jb);vj(sb,E,Y,10003);if(!la)throw Error("Expected a ContextBar component.");const gc=gf.translateBounds(Ub,[Ea*jb,Ua*jb]);return(0,wb.jsx)("div",{ref:sb,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container",
onPointerMove:It,onPointerUp:It,onPointerDown:It,children:(0,wb.jsx)(la,{hidden:l,shapes:d,bounds:E,offsets:{left:gc.minX,right:sa.width-gc.maxX,top:gc.minY,bottom:sa.height-gc.maxY,width:gc.width,height:gc.height},scaledBounds:Ub,rotation:Y})})}),wv=ff(S(3));wb=S(611);var Iy=We(function({children:d}){const l=wv.useRef(null),{viewport:E}=Tg();wv.useEffect(()=>Vc(()=>{const Y=l.current;if(Y){var {zoom:la,point:sa}=E.camera;Y.style.setProperty("transform",`scale(${la}) translate3d(${sa[0]}px, ${sa[1]}px, 0)`)}}),
[]);return(0,wb.jsx)("div",{ref:l,className:"tl-absolute tl-layer",children:d})});wb=S(611);var qv=We(function({shape:d,isHovered:l=!1,isSelected:E=!1,isBinding:Y=!1,isEditing:la=!1,meta:sa}){const {bounds:Ea,props:{scale:Ua,rotation:jb=0},ReactIndicator:sb}=d;return(0,wb.jsx)(rq,{"data-type":"Indicator",bounds:Ea,rotation:jb,scale:Ua,zIndex:la?1E3:1E4,children:(0,wb.jsx)(Cn,{children:(0,wb.jsx)("g",{className:`tl-indicator-container ${E?"tl-selected":"tl-hovered"}`,children:(0,wb.jsx)(sb,{isEditing:la,
isBinding:Y,isHovered:l,isSelected:E,isErasing:!1,meta:sa})})})})}),By=ff(S(3));wb=S(611);var Cy=We(function({bounds:d,hidden:l,shapes:E,rotation:Y=0,detail:la="size"}){const {components:{SelectionDetail:sa},viewport:{camera:{zoom:Ea}}}=Tg(),Ua=By.useRef(null),jb=gf.multiplyBounds(d,Ea);vj(Ua,d,Y,10003);if(!sa)throw Error("Expected a SelectionDetail component.");return(0,wb.jsx)("div",{ref:Ua,className:`tl-counter-scaled-positioned ${l?"tl-fade-out":""}`,"aria-label":"bounds-detail-container",children:(0,wb.jsx)(sa,
{shapes:E,bounds:d,scaledBounds:jb,zoom:Ea,rotation:Y,detail:la})})}),rv=ff(S(3));wb=S(611);var Dy=We(function({shape:d,isHovered:l=!1,isSelected:E=!1,isBinding:Y=!1,isErasing:la=!1,isEditing:sa=!1,onEditingEnd:Ea,asset:Ua,meta:jb,zIndex:sb}){const {bounds:Ub,props:{rotation:gc,scale:yc},ReactComponent:Qc}=d,Jc=gj(d);return(0,wb.jsx)(rq,{"data-shape-id":d.id,zIndex:sb,"data-type":"Shape",bounds:Ub,rotation:gc,scale:yc,children:(0,wb.jsx)(Qc,{meta:jb,isEditing:sa,isBinding:Y,isHovered:l,isSelected:E,
isErasing:la,events:Jc,asset:Ua,onEditingEnd:Ea})})});wb=S(611);var sv=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],tv=We(function({size:d}){const {viewport:{camera:{point:l,zoom:E}}}=Tg();return(0,wb.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,wb.jsx)("defs",{children:sv.map(([Y,la,sa],Ea)=>{sa=sa*d*E;var Ua=l[0]*E,jb=l[1]*E;Ua=0<Ua?Ua%sa:sa+Ua%sa;jb=0<jb?jb%sa:sa+jb%sa;Y=E<la?fd(E,[Y,la],[0,1]):1;return(0,wb.jsx)("pattern",{id:`grid-${Ea}`,
width:sa,height:sa,patternUnits:"userSpaceOnUse",children:(0,wb.jsx)("circle",{className:"tl-grid-dot",cx:Ua,cy:jb,r:1.5,opacity:Y})},`grid-pattern-${Ea}`)})}),sv.map((Y,la)=>(0,wb.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${la})`},`grid-rect-${la}`))]})});wb=S(611);var uv=We(function({bounds:d}){const l=Ah("background");return(0,wb.jsx)(Cn,Id(me({},l),{children:(0,wb.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,d.width),height:Math.max(1,d.height),pointerEvents:"all",rx:8,
ry:8})}))});S(3);wb=S(611);var pv=We(function({scaledBounds:d,shapes:l,detail:E="size",rotation:Y=0}){var la;const sa=1===l.length?Y:null!=(la=d.rotation)?la:0;return(0,wb.jsx)(wo,{centered:!0,children:(0,wb.jsx)("div",{className:"tl-bounds-detail",style:{transform:sa<B||sa>3*B?`rotate(${sa}rad) translateY(${d.height/2+24}px)`:`rotate(${Math.PI+sa}rad) translateY(${d.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===l.length&&"line"===l[0].type?`${$d.dist(l[0].props.handles.start.point,
l[0].props.handles.end.point).toFixed()}`:"size"===E?`${d.width.toFixed()} \xD7 ${d.height.toFixed()}`:`\u2220${Fa.radiansToDegrees(Fa.clampRadians(Y)).toFixed()}\xB0`})})});wb=S(611);var uA={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},xs=We(function({cx:d,cy:l,size:E,targetSize:Y,corner:la,isHidden:sa}){const Ea=Ah(la);return(0,wb.jsxs)("g",Id(me({opacity:sa?0:1},Ea),{children:[(0,wb.jsx)("rect",{className:"tl-transparent "+
(sa?"":uA[la]),"aria-label":`${la} target`,x:d-1.25*Y,y:l-1.25*Y,width:2.5*Y,height:2.5*Y,pointerEvents:sa?"none":"all"}),(0,wb.jsx)("rect",{className:"tl-corner-handle","aria-label":`${la} handle`,x:d-E/2,y:l-E/2,width:E,height:E,pointerEvents:"none"})]}))});wb=S(611);var Fz={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},ys=We(function({x:d,y:l,width:E,height:Y,targetSize:la,edge:sa,disabled:Ea,isHidden:Ua}){const jb=Ah(sa);return(0,wb.jsx)("rect",
me({pointerEvents:Ua||Ea?"none":"all",className:"tl-transparent tl-edge-handle "+(Ua?"":Fz[sa]),"aria-label":`${sa} target`,opacity:Ua?0:1,x:d-la,y:l-la,width:Math.max(1,E+2*la),height:Math.max(1,Y+2*la)},jb))});S(3);wb=S(611);We(function({cx:d,cy:l,size:E,targetSize:Y,isHidden:la}){const sa=Ah("rotate");return(0,wb.jsxs)("g",Id(me({opacity:la?0:1},sa),{children:[(0,wb.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:d,cy:l,r:Y,pointerEvents:la?"none":"all"}),(0,wb.jsx)("circle",
{className:"tl-rotate-handle","aria-label":"rotate handle",cx:d,cy:l,r:E/2,pointerEvents:"none"})]}))});S(3);wb=S(611);var zs=We(function({cx:d,cy:l,targetSize:E,corner:Y,isHidden:la}){const sa=Ah(Y);return(0,wb.jsx)("g",Id(me({opacity:la?0:1},sa),{children:(0,wb.jsx)("rect",{className:"tl-transparent","aria-label":`${Y} target`,x:d-2.5*E,y:l-2.5*E,width:3*E,height:3*E,pointerEvents:la?"none":"all"})}))});wb=S(611);var Wv=We(function({bounds:d,showResizeHandles:l,showRotateHandles:E,shapes:Y}){var la,
sa,Ea=qf();let {width:Ua,height:jb}=d;var sb=Ea.viewport.camera.zoom;d=8/sb;sb=6/sb;Y=1===Y.length?Y[0].canResize:[!0,!0];Ea=null!=(sa=null==(la=Ea.editingShape)?void 0:la.props.borderRadius)?sa:0;return(0,wb.jsxs)(Cn,{children:[(0,wb.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ua,1),height:Math.max(jb,1),rx:Ea,ry:Ea,pointerEvents:"none"}),(0,wb.jsx)(ys,{x:2*sb,y:0,width:Ua-4*sb,height:0,targetSize:sb,edge:"top_edge",disabled:!Y[1],isHidden:!l}),(0,wb.jsx)(ys,{x:Ua,y:2*sb,width:0,height:jb-
4*sb,targetSize:sb,edge:"right_edge",disabled:!Y[0],isHidden:!l}),(0,wb.jsx)(ys,{x:2*sb,y:jb,width:Ua-4*sb,height:0,targetSize:sb,edge:"bottom_edge",disabled:!Y[1],isHidden:!l}),(0,wb.jsx)(ys,{x:0,y:2*sb,width:0,height:jb-4*sb,targetSize:sb,edge:"left_edge",disabled:!Y[0],isHidden:!l}),(0,wb.jsx)(zs,{cx:0,cy:0,targetSize:sb,corner:"top_left_resize_corner",isHidden:!E}),(0,wb.jsx)(zs,{cx:Ua+2*sb,cy:0,targetSize:sb,corner:"top_right_resize_corner",isHidden:!E}),(0,wb.jsx)(zs,{cx:Ua+2*sb,cy:jb+2*sb,
targetSize:sb,corner:"bottom_right_resize_corner",isHidden:!E}),(0,wb.jsx)(zs,{cx:0,cy:jb+2*sb,targetSize:sb,corner:"bottom_left_resize_corner",isHidden:!E}),(null==Y?void 0:Y.every(Ub=>Ub))&&(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsx)(xs,{cx:0,cy:0,size:d,targetSize:sb,corner:"top_left_corner",isHidden:!l}),(0,wb.jsx)(xs,{cx:Ua,cy:0,size:d,targetSize:sb,corner:"top_right_corner",isHidden:!l}),(0,wb.jsx)(xs,{cx:Ua,cy:jb,size:d,targetSize:sb,corner:"bottom_right_corner",isHidden:!l}),(0,wb.jsx)(xs,
{cx:0,cy:jb,size:d,targetSize:sb,corner:"bottom_left_corner",isHidden:!l})]})]})});wb=S(611);var Xv=We(function({bounds:d}){return(0,wb.jsx)(rq,{bounds:d,zIndex:10001,children:(0,wb.jsx)(Cn,{children:(0,wb.jsx)("rect",{className:"tl-brush",x:0,y:0,width:d.width,height:d.height})})})});wb=S(611);We(function(){return(0,wb.jsx)(wb.Fragment,{})});wb=S(611);var Yv=We(function({shape:d,handle:l,id:E}){d=Oj(d,E);const [Y,la]=l.point;return(0,wb.jsxs)("g",Id(me({className:"tl-handle","aria-label":"handle"},
d),{transform:`translate(${Y}, ${la})`,children:[(0,wb.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,wb.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),Zv=ff(S(3));wb=S(611);var Rt=We(function({direction:d}){const {viewport:{bounds:l}}=Tg(),E=Zv.useRef(null);Zv.useLayoutEffect(()=>{const Y=E.current;if(Y){var la=[l.width/2,l.height/2],sa=gf.getRectangleSides([12,12],[l.width-24,l.height-24]);for(const [,[Ea,Ua]]of sa)sa=b(la,d,Ea,Ua),sa.didIntersect&&
(sa=sa.points[0],Y.style.setProperty("transform",`translate(${sa[0]-6}px,${sa[1]-6}px) rotate(${$d.toAngle(d)}rad)`))}},[d,l]);return(0,wb.jsx)("div",{ref:E,className:"tl-direction-indicator",children:(0,wb.jsx)("svg",{height:12,width:12,children:(0,wb.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});wb=S(611);var Hz=We(function({id:d,className:l,brush:E,shapes:Y,assets:la,bindingShapes:sa,editingShape:Ea,hoveredShape:Ua,selectionBounds:jb,selectedShapes:sb,erasingShapes:Ub,selectionDirectionHint:gc,
cursor:yc="default",cursorRotation:Qc=0,selectionRotation:Jc=0,showSelection:kd=!0,showHandles:ad=!0,showSelectionRotation:vc=!1,showResizeHandles:md=!0,showRotateHandles:Ad=!0,showSelectionDetail:qd=!0,showContextBar:Bd=!0,showGrid:Fe=!0,gridSize:ce=8,onEditingEnd:Ge=tz,theme:Bf=wa,children:bf}){var ze;const Ae=nr.useRef(null),{viewport:be,components:rd,meta:Qd}=Tg(),vd=qf(),Td=nr.useCallback(af=>{vd.inputs.updateContainerOffset([af.minX,af.minY])},[]);el(Bf,d);qi(Ae);Vh(Ae,be,Td);ck(Ae);ei();Vi(Ae,
yc,Qc);Hh(Ae);Xi(Ae);d=tj();const Vd=(yc=1===(null==sb?void 0:sb.length)&&sb[0])&&"handles"in yc.props?null==sb?void 0:sb[0]:void 0,Re=nr.useMemo(()=>new Set(sb||[]),[sb]),$e=nr.useMemo(()=>new Set(Ub||[]),[Ub]);return(0,wb.jsxs)("div",{ref:Ae,className:`tl-container ${null!=l?l:""}`,children:[(0,wb.jsxs)("div",Id(me({tabIndex:-1,className:"tl-absolute tl-canvas"},d),{children:[Fe&&rd.Grid&&(0,wb.jsx)(rd.Grid,{size:ce}),(0,wb.jsxs)(Iy,{children:[rd.SelectionBackground&&sb&&jb&&kd&&(0,wb.jsx)(rq,{"data-type":"SelectionBackground",
bounds:jb,zIndex:2,children:(0,wb.jsx)(rd.SelectionBackground,{shapes:sb,bounds:jb,showResizeHandles:md,showRotateHandles:Ad})}),Y&&Y.map((af,Ag)=>(0,wb.jsx)(Dy,{shape:af,asset:la&&af.props.assetId?la[af.props.assetId]:void 0,isEditing:af===Ea,isHovered:af===Ua,isBinding:null==sa?void 0:sa.includes(af),isSelected:Re.has(af),isErasing:$e.has(af),meta:Qd,zIndex:1E3+Ag,onEditingEnd:Ge},"shape_"+af.id)),!vd.isIn("select.pinching")&&(null==sb?void 0:sb.map(af=>(0,wb.jsx)(qv,{shape:af,isEditing:af===Ea,
isHovered:!1,isBinding:!1,isSelected:!0},"selected_indicator_"+af.id))),Ua&&vd.isInAny("creating")&&(0,wb.jsx)(qv,{shape:Ua},"hovered_indicator_"+Ua.id),E&&rd.Brush&&(0,wb.jsx)(rd.Brush,{bounds:E}),sb&&jb&&(0,wb.jsxs)(wb.Fragment,{children:[kd&&rd.SelectionForeground&&(0,wb.jsx)(rq,{"data-type":"SelectionForeground",bounds:jb,zIndex:Ea&&sb.includes(Ea)?1002:10002,children:(0,wb.jsx)(rd.SelectionForeground,{shapes:sb,bounds:jb,showResizeHandles:md,showRotateHandles:Ad})}),ad&&Vd&&rd.Handle&&(0,wb.jsx)(rq,
{"data-type":"onlySelectedShapeWithHandles",bounds:jb,zIndex:10003,children:(0,wb.jsx)(Cn,{children:Object.entries(null!=(ze=Vd.props.handles)?ze:{}).map(([af,Ag])=>nr.createElement(rd.Handle,{key:`${Ag.id}_handle_${Ag.id}`,shape:Vd,handle:Ag,id:af}))})}),sb&&rd.SelectionDetail&&(0,wb.jsx)(Cy,{shapes:sb,bounds:jb,detail:vc?"rotation":"size",hidden:!qd,rotation:Jc},"detail"+sb.map(af=>af.id).join("")),sb&&rd.ContextBar&&(0,wb.jsx)(Hy,{shapes:sb,hidden:!Bd,bounds:1===sb.length?sb[0].bounds:jb,rotation:1===
sb.length?sb[0].props.rotation:0},"context"+sb.map(af=>af.id).join(""))]})]}),gc&&jb&&sb&&(0,wb.jsx)(Rt,{direction:gc,bounds:jb,shapes:sb}),(0,wb.jsx)("div",{id:"tl-dev-tools-canvas-anchor"})]})),bf]})}),$v=ff(S(3)),Vv=ff(S(3));wb=S(611);We(function({children:d}){const l=Vv.useRef(null),{viewport:E}=Tg();Vv.useEffect(()=>Vc(()=>{const Y=l.current;if(Y){var {zoom:la,point:sa}=E.camera;Y.style.setProperty("transform",`scale(${la}) translateX(${sa[0]}px) translateY(${sa[1]}px)`)}}),[]);return(0,wb.jsx)("svg",
{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,wb.jsx)("g",{ref:l,pointerEvents:"none",children:d})})});wb=S(611);var Dz=We(function(d){const l=mm(d),E=ej(d.id);dk(l,d);gl(l,d);return(0,wb.jsx)(E.Provider,{value:l,children:d.children})});wb=S(611);var Ez=We(function({id:d="noid",viewport:l,inputs:E,callbacks:Y=wa,meta:la=wa,components:sa=wa,children:Ea}){const [Ua,jb]=$v.useState(()=>{const {Brush:Ub,ContextBar:gc,DirectionIndicator:yc,Grid:Qc,Handle:Jc,SelectionBackground:kd,
SelectionDetail:ad,SelectionForeground:vc}=sa;return{id:d,viewport:l,inputs:E,callbacks:Y,meta:la,components:{Brush:null===Ub?void 0:Xv,ContextBar:gc,DirectionIndicator:null===yc?void 0:Rt,Grid:null===Qc?void 0:tv,Handle:null===Jc?void 0:Yv,SelectionBackground:null===kd?void 0:uv,SelectionDetail:null===ad?void 0:pv,SelectionForeground:null===vc?void 0:Wv}}});$v.useLayoutEffect(()=>{const {Brush:Ub,ContextBar:gc,DirectionIndicator:yc,Grid:Qc,Handle:Jc,SelectionBackground:kd,SelectionDetail:ad,SelectionForeground:vc}=
sa;return Vc(()=>{jb({id:d,viewport:l,inputs:E,callbacks:Y,meta:la,components:{Brush:null===Ub?void 0:Xv,ContextBar:gc,DirectionIndicator:null===yc?void 0:Rt,Grid:null===Qc?void 0:tv,Handle:null===Jc?void 0:Yv,SelectionBackground:null===kd?void 0:uv,SelectionDetail:null===ad?void 0:pv,SelectionForeground:null===vc?void 0:Wv}})})},[]);const sb=nh(d);return(0,wb.jsx)(sb.Provider,{value:Ua,children:Ea})});wb=S(611);wb=S(611);var vA=We(function(d){const l=qf();return(0,wb.jsx)(Dm,me({viewport:l.viewport,
inputs:l.inputs,callbacks:l._events,brush:l.brush,editingShape:l.editingShape,hoveredShape:l.hoveredShape,bindingShapes:l.bindingShapes,selectionDirectionHint:l.selectionDirectionHint,selectionBounds:l.selectionBounds,selectedShapes:l.selectedShapesArray,erasingShapes:l.erasingShapesArray,shapes:l.shapes,assets:l.assets,showGrid:l.settings.showGrid,showSelection:l.showSelection,showSelectionRotation:l.showSelectionRotation,showResizeHandles:l.showResizeHandles,showRotateHandles:l.showRotateHandles,
showSelectionDetail:l.showSelectionDetail,showContextBar:l.showContextBar,cursor:l.cursors.cursor,cursorRotation:l.cursors.rotation,selectionRotation:l.selectionRotation,onEditingEnd:l.clearEditingState},d))});wb=S(611);var Bs=ff(S(3)),As=ff(S(3));wb=S(611);wb=S(611);var Iz="object-compact object-expanded block block-search page page-search references-hide references-show whiteboard whiteboard-element select-cursor text connector".split(" "),mi=d=>{var {name:l,className:E}=d;d=Wf(d,["name","className"]);
const Y=Iz.includes(l)?"tie tie-":"ti ti-";return(0,wb.jsx)("i",me({className:[Y+l,E].join(" ")},d))};wb=S(611);var Hn=S(3),wA=S(3),Vn=S(3),Cs=S(3),Ut=S(3),Tt=S(3),Lz=S(12),fm=S(3),Eq=(0,fm.forwardRef)((d,l)=>{var {children:E}=d;d=Wf(d,["children"]);const Y=fm.Children.toArray(E),la=Y.find(Jl);if(la){const sa=la.props.children;E=Y.map(Ea=>Ea===la?1<fm.Children.count(sa)?fm.Children.only(null):(0,fm.isValidElement)(sa)?sa.props.children:null:Ea);return(0,fm.createElement)(St,Uf({},d,{ref:l}),(0,fm.isValidElement)(sa)?
(0,fm.cloneElement)(sa,void 0,E):null)}return(0,fm.createElement)(St,Uf({},d,{ref:l}),E)});Eq.displayName="Slot";var St=(0,fm.forwardRef)((d,l)=>{const {children:E}=d;d=Wf(d,["children"]);return(0,fm.isValidElement)(E)?(0,fm.cloneElement)(E,Id(me({},lh(d,E.props)),{ref:sl(l,E.ref)})):1<fm.Children.count(E)?fm.Children.only(null):null});St.displayName="SlotClone";var Mz=({children:d})=>(0,fm.createElement)(fm.Fragment,null,d),Hk="a button div h2 h3 img li nav ol p span svg ul".split(" ").reduce((d,
l)=>{const E=(0,Tt.forwardRef)((Y,la)=>{var {asChild:sa}=Y;Y=Wf(Y,["asChild"]);sa=sa?Eq:l;(0,Tt.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Tt.createElement)(sa,Uf({},Y,{ref:la}))});E.displayName=`Primitive.${l}`;return Id(me({},d),{[l]:E})},{}),Rg=S(3),mo=ff(S(3)),bw=S(3),Kz=(0,bw.createContext)(void 0),Mm=S(3),Jz=S(3),Aw,aA=(0,Mm.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jw=(0,Mm.forwardRef)((d,l)=>{const {disableOutsidePointerEvents:E=
!1,onEscapeKeyDown:Y,onPointerDownOutside:la,onFocusOutside:sa,onInteractOutside:Ea,onDismiss:Ua}=d,jb=Wf(d,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),sb=(0,Mm.useContext)(aA),[Ub,gc]=(0,Mm.useState)(null),[,yc]=(0,Mm.useState)({});l=ai(l,md=>gc(md));var Qc=Array.from(sb.layers),[Jc]=[...sb.layersWithOutsidePointerEventsDisabled].slice(-1);Jc=Qc.indexOf(Jc);const kd=Ub?Qc.indexOf(Ub):-1;Qc=0<sb.layersWithOutsidePointerEventsDisabled.size;
const ad=kd>=Jc;Jc=ok(md=>{const Ad=md.target,qd=[...sb.branches].some(Bd=>Bd.contains(Ad));ad&&!qd&&(null===la||void 0===la||la(md),null===Ea||void 0===Ea||Ea(md),md.defaultPrevented||null===Ua||void 0===Ua||Ua())});const vc=hk(md=>{const Ad=md.target;[...sb.branches].some(qd=>qd.contains(Ad))||(null===sa||void 0===sa||sa(md),null===Ea||void 0===Ea||Ea(md),md.defaultPrevented||null===Ua||void 0===Ua||Ua())});Qi(md=>{kd===sb.layers.size-1&&(null===Y||void 0===Y||Y(md),!md.defaultPrevented&&Ua&&(md.preventDefault(),
Ua()))});(0,Mm.useEffect)(()=>{if(Ub)return E&&(0===sb.layersWithOutsidePointerEventsDisabled.size&&(Aw=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),sb.layersWithOutsidePointerEventsDisabled.add(Ub)),sb.layers.add(Ub),vl(),()=>{E&&1===sb.layersWithOutsidePointerEventsDisabled.size&&(document.body.style.pointerEvents=Aw)}},[Ub,E,sb]);(0,Mm.useEffect)(()=>()=>{Ub&&(sb.layers.delete(Ub),sb.layersWithOutsidePointerEventsDisabled.delete(Ub),vl())},[Ub,sb]);(0,Mm.useEffect)(()=>
{const md=()=>yc({});document.addEventListener("dismissableLayer.update",md);return()=>document.removeEventListener("dismissableLayer.update",md)},[]);return(0,Mm.createElement)(Hk.div,Uf({},jb,{ref:l,style:me({pointerEvents:Qc?ad?"auto":"none":void 0},d.style),onFocusCapture:Bg(d.onFocusCapture,vc.onFocusCapture),onBlurCapture:Bg(d.onBlurCapture,vc.onBlurCapture),onPointerDownCapture:Bg(d.onPointerDownCapture,Jc.onPointerDownCapture)}))}),bA=S(3),Zt=0,ep=S(3),kw={bubbles:!1,cancelable:!0},lw=(0,ep.forwardRef)((d,
l)=>{const {loop:E=!1,trapped:Y=!1,onMountAutoFocus:la,onUnmountAutoFocus:sa}=d;d=Wf(d,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [Ea,Ua]=(0,ep.useState)(null),jb=pj(la),sb=pj(sa),Ub=(0,ep.useRef)(null);l=ai(l,Qc=>Ua(Qc));const gc=(0,ep.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,ep.useEffect)(()=>{if(Y){let Qc=function(kd){!gc.paused&&Ea&&(kd=kd.target,Ea.contains(kd)?Ub.current=kd:Yf(Ub.current,{select:!0}))},Jc=function(kd){!gc.paused&&
Ea&&(Ea.contains(kd.relatedTarget)||Yf(Ub.current,{select:!0}))};document.addEventListener("focusin",Qc);document.addEventListener("focusout",Jc);return()=>{document.removeEventListener("focusin",Qc);document.removeEventListener("focusout",Jc)}}},[Y,Ea,gc.paused]);(0,ep.useEffect)(()=>{if(Ea){mw.add(gc);const Qc=document.activeElement;if(!Ea.contains(Qc)){const Jc=new CustomEvent("focusScope.autoFocusOnMount",kw);Ea.addEventListener("focusScope.autoFocusOnMount",jb);Ea.dispatchEvent(Jc);Jc.defaultPrevented||
(zk(Wk(Ig(Ea)),{select:!0}),document.activeElement===Qc&&Yf(Ea))}return()=>{Ea.removeEventListener("focusScope.autoFocusOnMount",jb);setTimeout(()=>{const Jc=new CustomEvent("focusScope.autoFocusOnUnmount",kw);Ea.addEventListener("focusScope.autoFocusOnUnmount",sb);Ea.dispatchEvent(Jc);Jc.defaultPrevented||Yf(null!==Qc&&void 0!==Qc?Qc:document.body,{select:!0});Ea.removeEventListener("focusScope.autoFocusOnUnmount",sb);mw.remove(gc)},0)}}},[Ea,jb,sb,gc]);const yc=(0,ep.useCallback)(Qc=>{if((E||Y)&&
!gc.paused){var Jc=document.activeElement;if("Tab"===Qc.key&&!Qc.altKey&&!Qc.ctrlKey&&!Qc.metaKey&&Jc){const ad=Qc.currentTarget;var kd=ad;const vc=Ig(kd),md=wl(vc,kd);kd=wl(vc.reverse(),kd);const [Ad,qd]=[md,kd];Ad&&qd?Qc.shiftKey||Jc!==qd?Qc.shiftKey&&Jc===Ad&&(Qc.preventDefault(),E&&Yf(qd,{select:!0})):(Qc.preventDefault(),E&&Yf(Ad,{select:!0})):Jc===ad&&Qc.preventDefault()}}},[E,Y,gc.paused]);return(0,ep.createElement)(Hk.div,Uf({tabIndex:-1},d,{ref:l,onKeyDown:yc}))}),mw=function(){let d=[];
return{add(l){const E=d[0];l===E||null!==E&&void 0!==E&&E.pause();d=Gi(d,l);d.unshift(l)},remove(l){var E;d=Gi(d,l);null===(E=d[0])||void 0===E||E.resume()}}}(),nw=ff(S(3)),cA=S(3),Ym=(null===globalThis||void 0===globalThis?0:globalThis.document)?cA.useLayoutEffect:()=>{},dA=nw["useId".toString()]||(()=>{}),eA=0,gm=S(3),$z=(d,l,E)=>Rf(void 0,null,function*(){const {placement:Y="bottom",strategy:la="absolute",middleware:sa=[],platform:Ea}=E,Ua=yield null==Ea.isRTL?void 0:Ea.isRTL(l);let jb=yield Ea.getElementRects({reference:d,
floating:l,strategy:la}),{x:sb,y:Ub}=mk(jb,Y,Ua),gc=Y,yc={},Qc=0;for(let Jc=0;Jc<sa.length;Jc++){const {name:kd,fn:ad}=sa[Jc],{x:vc,y:md,data:Ad,reset:qd}=yield ad({x:sb,y:Ub,initialPlacement:Y,placement:gc,strategy:la,middlewareData:yc,rects:jb,platform:Ea,elements:{reference:d,floating:l}});sb=null!=vc?vc:sb;Ub=null!=md?md:Ub;yc=Id(me({},yc),{[kd]:me(me({},yc[kd]),Ad)});qd&&50>=Qc&&(Qc++,"object"==typeof qd&&(qd.placement&&(gc=qd.placement),qd.rects&&(jb=!0===qd.rects?yield Ea.getElementRects({reference:d,
floating:l,strategy:la}):qd.rects),{x:sb,y:Ub}=mk(jb,gc,Ua)),Jc=-1)}return{x:sb,y:Ub,placement:gc,strategy:la,middlewareData:yc}}),$t=Math.min,Yt=Math.max,iw=d=>({name:"arrow",options:d,fn(l){return Rf(this,null,function*(){const {element:E,padding:Y=0}=null!=d?d:{},{x:la,y:sa,placement:Ea,rects:Ua,platform:jb}=l;if(null==E)return{};const sb=bm(Y),Ub={x:la,y:sa},gc=Fi(Ea),yc=Ea.split("-")[1],Qc=Ok(gc);var Jc=yield jb.getDimensions(E);const kd="y"===gc?"top":"left",ad="y"===gc?"bottom":"right";var vc=
Ua.reference[Qc]+Ua.reference[gc]-Ub[gc]-Ua.floating[Qc];const md=Ub[gc]-Ua.reference[gc];var Ad=yield null==jb.getOffsetParent?void 0:jb.getOffsetParent(E);let qd=Ad?"y"===gc?Ad.clientHeight||0:Ad.clientWidth||0:0;0===qd&&(qd=Ua.floating[Qc]);Ad=sb[kd];const Bd=qd-Jc[Qc]-sb[ad];Jc=qd/2-Jc[Qc]/2+(vc/2-md/2);vc=Yt(Ad,$t(Jc,Bd));return{[gc]:Ub[gc]-(0<("start"===yc?sb[kd]:sb[ad])&&Jc!==vc&&Ua.reference[Qc]<=Ua.floating[Qc]?Jc<Ad?Ad-Jc:Bd-Jc:0),data:{[gc]:vc,centerOffset:Jc-vc}}})}}),Zz={left:"right",
right:"left",bottom:"top",top:"bottom"},Xz={start:"end",end:"start"},hw=["top","right","bottom","left"];hw.reduce((d,l)=>d.concat(l,l+"-start",l+"-end"),[]);var Yz=function(d){return void 0===d&&(d={}),{name:"flip",options:d,fn(l){return Rf(this,null,function*(){var E;const {placement:Y,middlewareData:la,rects:sa,initialPlacement:Ea,platform:Ua,elements:jb}=l;var sb=d;const {mainAxis:Ub=!0,crossAxis:gc=!0,fallbackPlacements:yc,fallbackStrategy:Qc="bestFit",flipAlignment:Jc=!0}=sb;sb=Wf(sb,["mainAxis",
"crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const kd=hj(Y);var ad=yc||(kd!==Ea&&Jc?function(Fe){const ce=yk(Fe);return[Qk(Fe),ce,Qk(ce)]}(Ea):[yk(Ea)]);ad=[Ea,...ad];const vc=yield Zi(l,sb),md=[];sb=(null==(E=la.flip)?void 0:E.overflows)||[];if(Ub&&md.push(vc[kd]),gc){const {main:Fe,cross:ce}=pk(Y,sa,yield null==Ua.isRTL?void 0:Ua.isRTL(jb.floating));md.push(vc[Fe],vc[ce])}if(sb=[...sb,{placement:Y,overflows:md}],!md.every(Fe=>0>=Fe)){var Ad,qd;E=(null!=(Ad=null==(qd=la.flip)?
void 0:qd.index)?Ad:0)+1;if(Ad=ad[E])return{data:{index:E,overflows:sb},reset:{placement:Ad}};Ad="bottom";switch(Qc){case "bestFit":var Bd;(qd=null==(Bd=sb.map(Fe=>[Fe,Fe.overflows.filter(ce=>0<ce).reduce((ce,Ge)=>ce+Ge,0)]).sort((Fe,ce)=>Fe[1]-ce[1])[0])?void 0:Bd[0].placement)&&(Ad=qd);break;case "initialPlacement":Ad=Ea}if(Y!==Ad)return{reset:{placement:Ad}}}return{}})}}},Uz=function(d){d=void 0===d?{}:d;let {strategy:l="referenceHidden"}=d,E=Wf(d,["strategy"]);return{name:"hide",fn(Y){return Rf(this,
null,function*(){var {rects:la}=Y;switch(l){case "referenceHidden":return la=nm(yield Zi(Y,Id(me({},E),{elementContext:"reference"})),la.reference),{data:{referenceHiddenOffsets:la,referenceHidden:Fm(la)}};case "escaped":return la=nm(yield Zi(Y,Id(me({},E),{altBoundary:!0})),la.floating),{data:{escapedOffsets:la,escaped:Fm(la)}};default:return{}}})}}},Vz=function(d){return void 0===d&&(d=0),{name:"offset",options:d,fn(l){return Rf(this,null,function*(){const {x:E,y:Y}=l,la=yield function(sa,Ea){return Rf(this,
null,function*(){const {placement:Ua,platform:jb,elements:sb}=sa;var Ub=yield null==jb.isRTL?void 0:jb.isRTL(sb.floating),gc=hj(Ua);const yc=Ua.split("-")[1],Qc="x"===Fi(Ua);gc=["left","top"].includes(gc)?-1:1;Ub=Ub&&Qc?-1:1;const Jc="function"==typeof Ea?Ea(sa):Ea;let {mainAxis:kd,crossAxis:ad,alignmentAxis:vc}="number"==typeof Jc?{mainAxis:Jc,crossAxis:0,alignmentAxis:null}:me({mainAxis:0,crossAxis:0,alignmentAxis:null},Jc);return yc&&"number"==typeof vc&&(ad="end"===yc?-1*vc:vc),Qc?{x:ad*Ub,y:kd*
gc}:{x:kd*gc,y:ad*Ub}})}(l,d);return{x:E+la.x,y:Y+la.y,data:la}})}}},Sz=function(d){return void 0===d&&(d={}),{name:"shift",options:d,fn(l){return Rf(this,null,function*(){const {x:E,y:Y,placement:la}=l;var sa=d;const {mainAxis:Ea=!0,crossAxis:Ua=!1,limiter:jb={fn:Qc=>{let {x:Jc,y:kd}=Qc;return{x:Jc,y:kd}}}}=sa;var sb=Wf(sa,["mainAxis","crossAxis","limiter"]);sa={x:E,y:Y};sb=yield Zi(l,sb);const Ub=Fi(hj(la)),gc="x"===Ub?"y":"x";let yc=sa[Ub];sa=sa[gc];Ea&&(yc=Yt(yc+sb["y"===Ub?"top":"left"],$t(yc,
yc-sb["y"===Ub?"bottom":"right"])));Ua&&(sa=Yt(sa+sb["y"===gc?"top":"left"],$t(sa,sa-sb["y"===gc?"bottom":"right"])));sa=jb.fn(Id(me({},l),{[Ub]:yc,[gc]:sa}));return Id(me({},sa),{data:{x:sa.x-E,y:sa.y-Y}})})}}},Tz=function(d){return void 0===d&&(d={}),{options:d,fn(l){const {x:E,y:Y,placement:la,rects:sa,middlewareData:Ea}=l,{offset:Ua=0,mainAxis:jb=!0,crossAxis:sb=!0}=d;var Ub={x:E,y:Y};l=Fi(la);const gc="x"===l?"y":"x";let yc=Ub[l];Ub=Ub[gc];var Qc="function"==typeof Ua?Ua(Id(me({},sa),{placement:la})):
Ua;Qc="number"==typeof Qc?{mainAxis:Qc,crossAxis:0}:me({mainAxis:0,crossAxis:0},Qc);if(jb){var Jc="y"===l?"height":"width",kd=sa.reference[l]-sa.floating[Jc]+Qc.mainAxis;Jc=sa.reference[l]+sa.reference[Jc]-Qc.mainAxis;yc<kd?yc=kd:yc>Jc&&(yc=Jc)}if(sb){var ad,vc,md,Ad;const qd="y"===l?"width":"height";kd=["top","left"].includes(hj(la));Jc=sa.reference[gc]-sa.floating[qd]+(kd&&null!=(ad=null==(vc=Ea.offset)?void 0:vc[gc])?ad:0)+(kd?0:Qc.crossAxis);ad=sa.reference[gc]+sa.reference[qd]+(kd?0:null!=(md=
null==(Ad=Ea.offset)?void 0:Ad[gc])?md:0)-(kd?Qc.crossAxis:0);Ub<Jc?Ub=Jc:Ub>ad&&(Ub=ad)}return{[l]:yc,[gc]:Ub}}}},ew=Math.min,Cr=Math.max,Ds=Math.round,Rz={getClippingRect:function(d){let {element:l,boundary:E,rootBoundary:Y,strategy:la}=d;d=[...("clippingAncestors"===E?oj(l):[].concat(E)),Y];d=d.reduce((sa,Ea)=>{Ea=Gh(l,Ea,la);return sa.top=Cr(Ea.top,sa.top),sa.right=ew(Ea.right,sa.right),sa.bottom=ew(Ea.bottom,sa.bottom),sa.left=Cr(Ea.left,sa.left),sa},Gh(l,d[0],la));return{width:d.right-d.left,
height:d.bottom-d.top,x:d.left,y:d.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(d){let {rect:l,offsetParent:E,strategy:Y}=d;var la=Ri(E);const sa=ij(E);if(E===sa)return l;d={scrollLeft:0,scrollTop:0};var Ea=0,Ua=0;(la||!la&&"fixed"!==Y)&&(("body"!==jj(E)||Ck(sa))&&(d=qj(E)),Ri(E))&&(la=yj(E,!0),Ea=la.x+E.clientLeft,Ua=la.y+E.clientTop);return Id(me({},l),{x:l.x-d.scrollLeft+Ea,y:l.y-d.scrollTop+Ua})},isElement:Si,getDimensions:cm,getOffsetParent:gk,getDocumentElement:ij,getElementRects:d=>
{let {reference:l,floating:E,strategy:Y}=d;d=gk(E);var la=Ri(d);const sa=ij(d);var Ea;if(Ea=la)Ea=yj(d),Ea=Ds(Ea.width)!==d.offsetWidth||Ds(Ea.height)!==d.offsetHeight;Ea=yj(l,Ea,"fixed"===Y);let Ua={scrollLeft:0,scrollTop:0};var jb=0,sb=0;if(la||!la&&"fixed"!==Y)(("body"!==jj(d)||Ck(sa))&&(Ua=qj(d)),Ri(d))?(la=yj(d,!0),jb=la.x+d.clientLeft,sb=la.y+d.clientTop):sa&&(jb=Vl(sa));return{reference:{x:Ea.left+Ua.scrollLeft-jb,y:Ea.top+Ua.scrollTop-sb,width:Ea.width,height:Ea.height},floating:Id(me({},
cm(E)),{x:0,y:0})}},getClientRects:d=>Array.from(d.getClientRects()),isRTL:d=>"rtl"===ul(d).direction},Qz=(d,l,E)=>$z(d,l,me({platform:Rz},E)),nn=ff(S(3),1),dw=S(3),Pz=ff(S(12),1),Vt="undefined"!==typeof document?dw.useLayoutEffect:dw.useEffect,Do=d=>{const {element:l,padding:E}=d;return{name:"arrow",options:d,fn(Y){if(Object.prototype.hasOwnProperty.call(l,"current")){if(null!=l.current)return iw({element:l.current,padding:E}).fn(Y)}else if(l)return iw({element:l,padding:E}).fn(Y);return{}}}},Wn=
S(3),[Wt,cw]=Oi("Popper"),[Oz,Bw]=Wt("Popper"),xA=(0,gm.forwardRef)((d,l)=>{const {__scopePopper:E,virtualRef:Y}=d;d=Wf(d,["__scopePopper","virtualRef"]);const la=Bw("PopperAnchor",E),sa=(0,gm.useRef)(null);l=ai(l,sa);(0,gm.useEffect)(()=>{la.onAnchorChange((null===Y||void 0===Y?void 0:Y.current)||sa.current)});return Y?null:(0,gm.createElement)(Hk.div,Uf({},d,{ref:l}))}),[fw]=Wt("PopperContent"),[gw,Wz]=Wt("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Xt=(0,gm.forwardRef)((d,l)=>{var E,
Y,la,sa,Ea,Ua,jb,sb;const {__scopePopper:Ub,side:gc="bottom",sideOffset:yc=0,align:Qc="center",alignOffset:Jc=0,arrowPadding:kd=0,collisionBoundary:ad=[],collisionPadding:vc=0,sticky:md="partial",hideWhenDetached:Ad=!1,avoidCollisions:qd=!0}=d;d=Wf(d,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Bd=Bw("PopperContent",Ub),[Fe,ce]=(0,gm.useState)(null);l=ai(l,Nq=>ce(Nq));const [Ge,Bf]=(0,gm.useState)(null);
var bf=Eg(Ge),ze=null!==(E=null===bf||void 0===bf?void 0:bf.width)&&void 0!==E?E:0;E=null!==(Y=null===bf||void 0===bf?void 0:bf.height)&&void 0!==Y?Y:0;Y=gc+("center"!==Qc?"-"+Qc:"");bf="number"===typeof vc?vc:me({top:0,right:0,bottom:0,left:0},vc);const Ae=Array.isArray(ad)?ad:[ad],be=0<Ae.length;bf={padding:bf,boundary:Ae.filter(Ih),altBoundary:be};const {reference:rd,floating:Qd,strategy:vd,x:Td,y:Vd,placement:Re,middlewareData:$e,update:af}=eh({strategy:"fixed",placement:Y,whileElementsMounted:qk,
middleware:[Vz({mainAxis:yc+E,alignmentAxis:Jc}),qd?Sz(me({mainAxis:!0,crossAxis:!1,limiter:"partial"===md?Tz():void 0},bf)):void 0,Ge?Do({element:Ge,padding:kd}):void 0,qd?Yz(me({},bf)):void 0,Es({arrowWidth:ze,arrowHeight:E}),Ad?Uz({strategy:"referenceHidden"}):void 0].filter(Lj)});Ym(()=>{rd(Bd.anchor)},[rd,Bd.anchor]);const Ag=null!==Td&&null!==Vd,[Nf,Ph]=Hi(Re);ze=null===(la=$e.arrow)||void 0===la?void 0:la.x;la=null===(sa=$e.arrow)||void 0===sa?void 0:sa.y;sa=0!==(null===(Ea=$e.arrow)||void 0===
Ea?void 0:Ea.centerOffset);const [fi,kk]=(0,gm.useState)();Ym(()=>{Fe&&kk(window.getComputedStyle(Fe).zIndex)},[Fe]);const {hasParent:tm,positionUpdateFns:Zl}=Wz("PopperContent",Ub),qo=!tm;(0,gm.useLayoutEffect)(()=>{if(!qo)return Zl.add(af),()=>{Zl.delete(af)}},[qo,Zl,af]);(0,gm.useLayoutEffect)(()=>{qo&&Ag&&Array.from(Zl).reverse().forEach(Nq=>requestAnimationFrame(Nq))},[qo,Ag,Zl]);Ea=Id(me({"data-side":Nf,"data-align":Ph},d),{ref:l,style:Id(me({},d.style),{animation:Ag?void 0:"none",opacity:null!==
(Ua=$e.hide)&&void 0!==Ua&&Ua.referenceHidden?0:void 0})});return(0,gm.createElement)("div",{ref:Qd,"data-radix-popper-content-wrapper":"",style:{position:vd,left:0,top:0,transform:Ag?`translate3d(${Math.round(Td)}px, ${Math.round(Vd)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:fi,["--radix-popper-transform-origin"]:[null===(jb=$e.transformOrigin)||void 0===jb?void 0:jb.x,null===(sb=$e.transformOrigin)||void 0===sb?void 0:sb.y].join(" ")}},(0,gm.createElement)(fw,{scope:Ub,placedSide:Nf,
onArrowChange:Bf,arrowX:ze,arrowY:la,shouldHideArrow:sa},qo?(0,gm.createElement)(gw,{scope:Ub,hasParent:!0,positionUpdateFns:Zl},(0,gm.createElement)(Hk.div,Ea)):(0,gm.createElement)(Hk.div,Ea)))}),Es=d=>({name:"transformOrigin",options:d,fn(l){var E,Y,la,sa,Ea;const {placement:Ua,rects:jb,middlewareData:sb}=l,Ub=(l=0!==(null===(E=sb.arrow)||void 0===E?void 0:E.centerOffset))?0:d.arrowWidth;E=l?0:d.arrowHeight;const [gc,yc]=Hi(Ua),Qc={start:"0%",center:"50%",end:"100%"}[yc],Jc=(null!==(Y=null===(la=
sb.arrow)||void 0===la?void 0:la.x)&&void 0!==Y?Y:0)+Ub/2;Y=(null!==(sa=null===(Ea=sb.arrow)||void 0===Ea?void 0:Ea.y)&&void 0!==sa?sa:0)+E/2;Ea=sa="";"bottom"===gc?(sa=l?Qc:`${Jc}px`,Ea=`${-E}px`):"top"===gc?(sa=l?Qc:`${Jc}px`,Ea=`${jb.floating.height+E}px`):"right"===gc?(sa=`${-E}px`,Ea=l?Qc:`${Y}px`):"left"===gc&&(sa=`${jb.floating.width+E}px`,Ea=l?Qc:`${Y}px`);return{data:{x:sa,y:Ea}}}}),gA=d=>{const {__scopePopper:l,children:E}=d,[Y,la]=(0,gm.useState)(null);return(0,gm.createElement)(Oz,{scope:l,
anchor:Y,onAnchorChange:la},E)},Cw=S(3),pA=ff(S(12)),yA=(0,Cw.forwardRef)((d,l)=>{var E;const {container:Y=null===globalThis||void 0===globalThis?void 0:null===(E=globalThis.document)||void 0===E?void 0:E.body}=d;d=Wf(d,["container"]);return Y?pA.default.createPortal((0,Cw.createElement)(Hk.div,Uf({},d,{ref:l})),Y):null}),Eo=S(3),zA=S(12),Dw=d=>{const {present:l,children:E}=d;d=Ii(l);const Y="function"===typeof E?E({present:d.isPresent}):Eo.Children.only(E),la=ai(d.ref,Y.ref);return"function"===typeof E||
d.isPresent?(0,Eo.cloneElement)(Y,{ref:la}):null};Dw.displayName="Presence";var rm=S(3),AA={bubbles:!1,cancelable:!0},[eu,Ew,BA]=fk("RovingFocusGroup"),[CA,Is]=Oi("RovingFocusGroup",[BA]),[DA,nA]=CA("RovingFocusGroup"),uw=(0,rm.forwardRef)((d,l)=>(0,rm.createElement)(eu.Provider,{scope:d.__scopeRovingFocusGroup},(0,rm.createElement)(eu.Slot,{scope:d.__scopeRovingFocusGroup},(0,rm.createElement)(oA,Uf({},d,{ref:l}))))),oA=(0,rm.forwardRef)((d,l)=>{const {__scopeRovingFocusGroup:E,orientation:Y,loop:la=
!1,dir:sa,currentTabStopId:Ea,defaultCurrentTabStopId:Ua,onCurrentTabStopIdChange:jb,onEntryFocus:sb}=d,Ub=Wf(d,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),gc=(0,rm.useRef)(null);l=ai(l,gc);const yc=Pi(sa),[Qc=null,Jc]=Wi({prop:Ea,defaultProp:Ua,onChange:jb}),[kd,ad]=(0,rm.useState)(!1),vc=pj(sb),md=Ew(E),Ad=(0,rm.useRef)(!1);(0,rm.useEffect)(()=>{const qd=gc.current;if(qd)return qd.addEventListener("rovingFocusGroup.onEntryFocus",
vc),()=>qd.removeEventListener("rovingFocusGroup.onEntryFocus",vc)},[vc]);return(0,rm.createElement)(DA,{scope:E,orientation:Y,dir:yc,loop:la,currentTabStopId:Qc,onItemFocus:(0,rm.useCallback)(qd=>Jc(qd),[Jc]),onItemShiftTab:(0,rm.useCallback)(()=>ad(!0),[])},(0,rm.createElement)(Hk.div,Uf({tabIndex:kd?-1:0,"data-orientation":Y},Ub,{ref:l,style:me({outline:"none"},d.style),onMouseDown:Bg(d.onMouseDown,()=>{Ad.current=!0}),onFocus:Bg(d.onFocus,qd=>{var Bd=!Ad.current;if(qd.target===qd.currentTarget&&
Bd&&!kd&&(Bd=new CustomEvent("rovingFocusGroup.onEntryFocus",AA),qd.currentTarget.dispatchEvent(Bd),!Bd.defaultPrevented)){qd=md().filter(ce=>ce.focusable);Bd=qd.find(ce=>ce.active);const Fe=qd.find(ce=>ce.id===Qc);qd=[Bd,Fe,...qd].filter(Boolean).map(ce=>ce.ref.current);$i(qd)}Ad.current=!1}),onBlur:Bg(d.onBlur,()=>ad(!1))})))}),tw=(0,rm.forwardRef)((d,l)=>{const {__scopeRovingFocusGroup:E,focusable:Y=!0,active:la=!1}=d,sa=Wf(d,["__scopeRovingFocusGroup","focusable","active"]),Ea=uf(),Ua=nA("RovingFocusGroupItem",
E),jb=Ua.currentTabStopId===Ea,sb=Ew(E);return(0,rm.createElement)(eu.ItemSlot,{scope:E,id:Ea,focusable:Y,active:la},(0,rm.createElement)(Hk.span,Uf({tabIndex:jb?0:-1,"data-orientation":Ua.orientation},sa,{ref:l,onMouseDown:Bg(d.onMouseDown,Ub=>{if(Y)Ua.onItemFocus(Ea);else Ub.preventDefault()}),onFocus:Bg(d.onFocus,()=>Ua.onItemFocus(Ea)),onKeyDown:Bg(d.onKeyDown,Ub=>{if("Tab"===Ub.key&&Ub.shiftKey)Ua.onItemShiftTab();else if(Ub.target===Ub.currentTarget){var gc=Jg(Ub,Ua.orientation,Ua.dir);if(void 0!==
gc){Ub.preventDefault();let yc=sb().filter(Qc=>Qc.focusable).map(Qc=>Qc.ref.current);if("last"===gc)yc.reverse();else if("prev"===gc||"next"===gc)"prev"===gc&&yc.reverse(),Ub=yc.indexOf(Ub.currentTarget),yc=Ua.loop?bi(yc,Ub+1):yc.slice(Ub+1);setTimeout(()=>$i(yc))}}})})))}),lA={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},mA=function(d){return"undefined"===typeof document?null:(Array.isArray(d)?d[0]:d).ownerDocument.body},
Fq=new WeakMap,Fs=new WeakMap,Gs={},au=0,rw=function(d,l,E){void 0===l&&(l=mA(d));void 0===E&&(E="data-aria-hidden");var Y=Array.isArray(d)?d:[d];Gs[E]||(Gs[E]=new WeakMap);var la=Gs[E],sa=[],Ea=new Set,Ua=function(sb){sb&&!Ea.has(sb)&&(Ea.add(sb),Ua(sb.parentNode))};Y.forEach(Ua);var jb=function(sb){!sb||0<=Y.indexOf(sb)||Array.prototype.forEach.call(sb.children,function(Ub){if(Ea.has(Ub))jb(Ub);else{var gc=Ub.getAttribute("aria-hidden");gc=null!==gc&&"false"!==gc;var yc=(Fq.get(Ub)||0)+1,Qc=(la.get(Ub)||
0)+1;Fq.set(Ub,yc);la.set(Ub,Qc);sa.push(Ub);1===yc&&gc&&Fs.set(Ub,!0);1===Qc&&Ub.setAttribute(E,"true");gc||Ub.setAttribute("aria-hidden","true")}})};jb(l);Ea.clear();au++;return function(){sa.forEach(function(sb){var Ub=Fq.get(sb)-1,gc=la.get(sb)-1;Fq.set(sb,Ub);la.set(sb,gc);Ub||(Fs.has(sb)||sb.removeAttribute("aria-hidden"),Fs.delete(sb));gc||sb.removeAttribute(E)});au--;au||(Fq=new WeakMap,Fq=new WeakMap,Fs=new WeakMap,Gs={})}},jA=ff(Gf(),1),{__assign:fp,__rest:sw,__spreadArray:kA}=jA.default,
Fw=ff(S(3)),Fo=ff(S(3)),iA=S(3),hA=ff(S(3)),Gw=function(d){var l=d.sideCar;d=sw(d,["sideCar"]);if(!l)throw Error("Sidecar: please provide `sideCar` property to import the right car");l=l.read();if(!l)throw Error("Sidecar medium not found");return hA.createElement(l,fp({},d))};Gw.isSideCarExport=!0;var Hw=function(d){void 0===d&&(d={});var l=il(null);l.options=fp({async:!0,ssr:!1},d);return l}(),fu=function(){},Js=Fo.forwardRef(function(d,l){var E=Fo.useRef(null),Y=Fo.useState({onScrollCapture:fu,
onWheelCapture:fu,onTouchMoveCapture:fu}),la=Y[0];Y=Y[1];var sa=d.forwardProps,Ea=d.children,Ua=d.className,jb=d.removeScrollBar,sb=d.enabled,Ub=d.shards,gc=d.sideCar,yc=d.noIsolation,Qc=d.inert,Jc=d.allowPinchZoom,kd=d.as;kd=void 0===kd?"div":kd;d=sw(d,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));l=og([E,l]);la=fp(fp({},d),la);return Fo.createElement(Fo.Fragment,null,sb&&Fo.createElement(gc,{sideCar:Hw,removeScrollBar:jb,
shards:Ub,noIsolation:yc,inert:Qc,setCallbacks:Y,allowPinchZoom:!!Jc,lockRef:E}),sa?Fo.cloneElement(Fo.Children.only(Ea),fp(fp({},la),{ref:l})):Fo.createElement(kd,fp({},la,{className:Ua,ref:l}),Ea))});Js.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Js.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var Ol=ff(S(3)),qw=ff(S(3)),EA=ff(S(3)),FA=function(){var d=0,l=null;return{add:function(E){if(0==d){if(document){var Y=document.createElement("style");
Y.type="text/css";var la="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;la&&Y.setAttribute("nonce",la)}else Y=null;if(l=Y)Y=l,Y.styleSheet?Y.styleSheet.cssText=E:Y.appendChild(document.createTextNode(E)),E=l,(document.head||document.getElementsByTagName("head")[0]).appendChild(E)}d++},remove:function(){d--;!d&&l&&(l.parentNode&&l.parentNode.removeChild(l),l=null)}}},GA=function(){var d=FA();return function(l,E){EA.useEffect(function(){d.add(l);return function(){d.remove()}},[l&&E])}},
Iw=function(){var d=GA();return function(l){d(l.styles,l.dynamic);return null}},HA={left:0,top:0,right:0,gap:0},IA=Iw(),JA=function(d,l,E,Y){var la=d.left,sa=d.top,Ea=d.right;d=d.gap;void 0===E&&(E="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(Y,";\n   padding-right: ").concat(d,"px ").concat(Y,";\n  }\n  body {\n    overflow: hidden ").concat(Y,";\n    overscroll-behavior: contain;\n    ").concat([l&&"position: relative ".concat(Y,";"),"margin"===E&&
"\n    padding-left: ".concat(la,"px;\n    padding-top: ").concat(sa,"px;\n    padding-right: ").concat(Ea,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(d,"px ").concat(Y,";\n    "),"padding"===E&&"padding-right: ".concat(d,"px ").concat(Y,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(d,"px ").concat(Y,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(d,"px ").concat(Y,";\n  }\n  \n  .").concat("right-scroll-bar-position",
" .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(Y,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(Y,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(d,"px;\n  }\n")},KA=function(d){var l=d.noRelative,E=d.noImportant;d=d.gapMode;var Y=void 0===d?"margin":d;d=qw.useMemo(function(){var la=Y;void 0===la&&(la="margin");if("undefined"===typeof window)la=HA;else{var sa=window.getComputedStyle(document.body),
Ea=sa["padding"===la?"paddingTop":"marginTop"],Ua=sa["padding"===la?"paddingRight":"marginRight"];la=[parseInt(sa["padding"===la?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(Ea||"",10)||0,parseInt(Ua||"",10)||0];la={left:la[0],top:la[1],right:la[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+la[2]-la[0])}}return la},[Y]);return qw.createElement(IA,{styles:JA(d,!l,Y,E?"":"!important")})},gu=!1;if("undefined"!==typeof window)try{var Ks=Object.defineProperty({},"passive",
{get:function(){return gu=!0}});window.addEventListener("test",Ks,Ks);window.removeEventListener("test",Ks,Ks)}catch(d){gu=!1}var Gq=gu?{passive:!1}:!1,vw=function(d,l){do{"undefined"!==typeof ShadowRoot&&l instanceof ShadowRoot&&(l=l.host);if(yw(d,l)){var E=zw(d,l);if(E[1]>E[2])return!0}l=l.parentNode}while(l&&l!==document.body);return!1},yw=function(d,l){"v"===d?(d=window.getComputedStyle(l),d="hidden"!==d.overflowY&&!(d.overflowY===d.overflowX&&"visible"===d.overflowY)):(d=window.getComputedStyle(l),
d="hidden"!==d.overflowX&&!(d.overflowY===d.overflowX&&"visible"===d.overflowX));return d},zw=function(d,l){return"v"===d?[l.scrollTop,l.scrollHeight,l.clientHeight]:[l.scrollLeft,l.scrollWidth,l.clientWidth]},Hs=function(d){return"changedTouches"in d?[d.changedTouches[0].clientX,d.changedTouches[0].clientY]:[0,0]},ww=function(d){return d&&"current"in d?d.current:d},tA=function(d){return"\n  .block-interactivity-".concat(d," {pointer-events: none;}\n  .allow-interactivity-").concat(d," {pointer-events: all;}\n")},
sA=0,Hq=[];Hw.useMedium(function(d){var l=Ol.useRef([]),E=Ol.useRef([0,0]),Y=Ol.useRef(),la=Ol.useState(sA++)[0],sa=Ol.useState(function(){return Iw()})[0],Ea=Ol.useRef(d);Ol.useEffect(function(){Ea.current=d},[d]);Ol.useEffect(function(){if(d.inert){document.body.classList.add("block-interactivity-".concat(la));var Jc=kA([d.lockRef.current],(d.shards||[]).map(ww),!0).filter(Boolean);Jc.forEach(function(kd){return kd.classList.add("allow-interactivity-".concat(la))});return function(){document.body.classList.remove("block-interactivity-".concat(la));
Jc.forEach(function(kd){return kd.classList.remove("allow-interactivity-".concat(la))})}}},[d.inert,d.lockRef.current,d.shards]);var Ua=Ol.useCallback(function(Jc,kd){if("touches"in Jc&&2===Jc.touches.length)return!Ea.current.allowPinchZoom;var ad=Hs(Jc),vc=E.current,md="deltaX"in Jc?Jc.deltaX:vc[0]-ad[0];vc="deltaY"in Jc?Jc.deltaY:vc[1]-ad[1];var Ad=Jc.target,qd=Math.abs(md)>Math.abs(vc)?"h":"v";if("touches"in Jc&&"h"===qd&&"range"===Ad.type)return!1;var Bd=vw(qd,Ad);if(!Bd)return!0;Bd?ad=qd:(ad=
"v"===qd?"h":"v",Bd=vw(qd,Ad));if(!Bd)return!1;!Y.current&&"changedTouches"in Jc&&(md||vc)&&(Y.current=ad);if(!ad)return!0;ad=Y.current||ad;vc="h"===ad?md:vc;md=window.getComputedStyle(kd).direction;md="h"===ad&&"rtl"===md?-1:1;qd=md*vc;Jc=Jc.target;vc=kd.contains(Jc);Ad=!1;qd=0<qd;var Fe=Bd=0;do{var ce=zw(ad,Jc),Ge=ce[0];ce=ce[1]-ce[2]-md*Ge;(Ge||ce)&&yw(ad,Jc)&&(Bd+=ce,Fe+=Ge);Jc=Jc.parentNode}while(!vc&&Jc!==document.body||vc&&(kd.contains(Jc)||kd===Jc));qd&&0===Bd?Ad=!0:qd||0!==Fe||(Ad=!0);return Ad},
[]),jb=Ol.useCallback(function(Jc){if(Hq.length&&Hq[Hq.length-1]===sa){var kd="deltaY"in Jc?[Jc.deltaX,Jc.deltaY]:Hs(Jc),ad=l.current.filter(function(vc){var md;if(md=vc.name===Jc.type&&vc.target===Jc.target)vc=vc.delta,md=vc[0]===kd[0]&&vc[1]===kd[1];return md})[0];ad&&ad.should?Jc.preventDefault():ad||(ad=(Ea.current.shards||[]).map(ww).filter(Boolean).filter(function(vc){return vc.contains(Jc.target)}),(0<ad.length?Ua(Jc,ad[0]):!Ea.current.noIsolation)&&Jc.preventDefault())}},[]),sb=Ol.useCallback(function(Jc,
kd,ad,vc){var md={name:Jc,delta:kd,target:ad,should:vc};l.current.push(md);setTimeout(function(){l.current=l.current.filter(function(Ad){return Ad!==md})},1)},[]),Ub=Ol.useCallback(function(Jc){E.current=Hs(Jc);Y.current=void 0},[]),gc=Ol.useCallback(function(Jc){sb(Jc.type,[Jc.deltaX,Jc.deltaY],Jc.target,Ua(Jc,d.lockRef.current))},[]),yc=Ol.useCallback(function(Jc){sb(Jc.type,Hs(Jc),Jc.target,Ua(Jc,d.lockRef.current))},[]);Ol.useEffect(function(){Hq.push(sa);d.setCallbacks({onScrollCapture:gc,onWheelCapture:gc,
onTouchMoveCapture:yc});document.addEventListener("wheel",jb,Gq);document.addEventListener("touchmove",jb,Gq);document.addEventListener("touchstart",Ub,Gq);return function(){Hq=Hq.filter(function(Jc){return Jc!==sa});document.removeEventListener("wheel",jb,Gq);document.removeEventListener("touchmove",jb,Gq);document.removeEventListener("touchstart",Ub,Gq)}},[]);var Qc=d.removeScrollBar;return Ol.createElement(Ol.Fragment,null,d.inert?Ol.createElement(sa,{styles:tA(la)}):null,Qc?Ol.createElement(KA,
{gapMode:"margin"}):null)});var du=Fw.forwardRef(function(d,l){return Fw.createElement(Js,fp({},d,{ref:l,sideCar:Gw}))});du.classNames=Js.classNames;var cu=["Enter"," "],xw=["ArrowUp","PageDown","End"],rA=["ArrowDown","PageUp","Home",...xw];[...cu];[...cu];var [bu,qA,LA]=fk("Menu"),[Yp,Ls]=Oi("Menu",[LA,cw,Is]),hu=cw(),Jw=Is(),[MA,Ms]=Yp("Menu"),[NA,iu]=Yp("Menu"),Kw=(0,Rg.forwardRef)((d,l)=>{var {__scopeMenu:E}=d;d=Wf(d,["__scopeMenu"]);E=hu(E);return(0,Rg.createElement)(xA,Uf({},E,d,{ref:l}))}),
[,OA]=Yp("MenuPortal",{forceMount:void 0}),[PA,Lw]=Yp("MenuContent"),Mw=(0,Rg.forwardRef)((d,l)=>{var E=OA("MenuContent",d.__scopeMenu);({forceMount:E=E.forceMount}=d);const Y=Wf(d,["forceMount"]),la=Ms("MenuContent",d.__scopeMenu),sa=iu("MenuContent",d.__scopeMenu);return(0,Rg.createElement)(bu.Provider,{scope:d.__scopeMenu},(0,Rg.createElement)(Dw,{present:E||la.open},(0,Rg.createElement)(bu.Slot,{scope:d.__scopeMenu},sa.modal?(0,Rg.createElement)(QA,Uf({},Y,{ref:l})):(0,Rg.createElement)(RA,Uf({},
Y,{ref:l})))))}),QA=(0,Rg.forwardRef)((d,l)=>{const E=Ms("MenuContent",d.__scopeMenu),Y=(0,Rg.useRef)(null);l=ai(l,Y);(0,Rg.useEffect)(()=>{const la=Y.current;if(la)return rw(la)},[]);return(0,Rg.createElement)(Nw,Uf({},d,{ref:l,trapFocus:E.open,disableOutsidePointerEvents:E.open,disableOutsideScroll:!0,onFocusOutside:Bg(d.onFocusOutside,la=>la.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>E.onOpenChange(!1)}))}),RA=(0,Rg.forwardRef)((d,l)=>{const E=Ms("MenuContent",d.__scopeMenu);
return(0,Rg.createElement)(Nw,Uf({},d,{ref:l,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>E.onOpenChange(!1)}))}),Nw=(0,Rg.forwardRef)((d,l)=>{const {__scopeMenu:E,loop:Y=!1,trapFocus:la,onOpenAutoFocus:sa,onCloseAutoFocus:Ea,disableOutsidePointerEvents:Ua,onEscapeKeyDown:jb,onPointerDownOutside:sb,onFocusOutside:Ub,onInteractOutside:gc,onDismiss:yc,disableOutsideScroll:Qc}=d,Jc=Wf(d,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),
kd=Ms("MenuContent",E),ad=iu("MenuContent",E),vc=hu(E),md=Jw(E),Ad=qA(E),[qd,Bd]=(0,Rg.useState)(null),Fe=(0,Rg.useRef)(null);l=ai(l,Fe,kd.onContentChange);const ce=(0,Rg.useRef)(0),Ge=(0,Rg.useRef)(""),Bf=(0,Rg.useRef)(0),bf=(0,Rg.useRef)(null),ze=(0,Rg.useRef)("right"),Ae=(0,Rg.useRef)(0),be=Qc?du:Rg.Fragment,rd=Qc?{as:Eq,allowPinchZoom:!0}:void 0,Qd=Td=>{var Vd,Re;Td=Ge.current+Td;const $e=Ad().filter(fi=>!fi.disabled),af=document.activeElement,Ag=null===(Vd=$e.find(fi=>fi.ref.current===af))||
void 0===Vd?void 0:Vd.textValue;Vd=$e.map(fi=>fi.textValue);const Nf=Nb(Vd,Td,Ag),Ph=null===(Re=$e.find(fi=>fi.textValue===Nf))||void 0===Re?void 0:Re.ref.current;(function tm(kk){Ge.current=kk;window.clearTimeout(ce.current);""!==kk&&(ce.current=window.setTimeout(()=>tm(""),1E3))})(Td);Ph&&setTimeout(()=>Ph.focus())};(0,Rg.useEffect)(()=>()=>window.clearTimeout(ce.current),[]);Kl();const vd=(0,Rg.useCallback)(Td=>{var Vd,Re,$e;if($e=ze.current===(null===(Vd=bf.current)||void 0===Vd?void 0:Vd.side)){if(Vd=
null===(Re=bf.current)||void 0===Re?void 0:Re.area){const {x:af,y:Ag}={x:Td.clientX,y:Td.clientY};Td=!1;for(let Nf=0,Ph=Vd.length-1;Nf<Vd.length;Ph=Nf++){Re=Vd[Nf].x;$e=Vd[Nf].y;const fi=Vd[Ph].x,kk=Vd[Ph].y;$e>Ag!==kk>Ag&&af<(fi-Re)*(Ag-$e)/(kk-$e)+Re&&(Td=!Td)}Vd=Td}else Vd=!1;$e=Vd}return $e},[]);return(0,Rg.createElement)(PA,{scope:E,searchRef:Ge,onItemEnter:(0,Rg.useCallback)(Td=>{vd(Td)&&Td.preventDefault()},[vd]),onItemLeave:(0,Rg.useCallback)(Td=>{var Vd;vd(Td)||(null===(Vd=Fe.current)||void 0===
Vd||Vd.focus(),Bd(null))},[vd]),onTriggerLeave:(0,Rg.useCallback)(Td=>{vd(Td)&&Td.preventDefault()},[vd]),pointerGraceTimerRef:Bf,onPointerGraceIntentChange:(0,Rg.useCallback)(Td=>{bf.current=Td},[])},(0,Rg.createElement)(be,rd,(0,Rg.createElement)(lw,{asChild:!0,trapped:la,onMountAutoFocus:Bg(sa,Td=>{var Vd;Td.preventDefault();null===(Vd=Fe.current)||void 0===Vd||Vd.focus()}),onUnmountAutoFocus:Ea},(0,Rg.createElement)(jw,{asChild:!0,disableOutsidePointerEvents:Ua,onEscapeKeyDown:jb,onPointerDownOutside:sb,
onFocusOutside:Ub,onInteractOutside:gc,onDismiss:yc},(0,Rg.createElement)(uw,Uf({asChild:!0},md,{dir:ad.dir,orientation:"vertical",loop:Y,currentTabStopId:qd,onCurrentTabStopIdChange:Bd,onEntryFocus:Td=>{ad.isUsingKeyboardRef.current||Td.preventDefault()}}),(0,Rg.createElement)(Xt,Uf({role:"menu","aria-orientation":"vertical","data-state":kd.open?"open":"closed",dir:ad.dir},vc,Jc,{ref:l,style:me({outline:"none"},Jc.style),onKeyDown:Bg(Jc.onKeyDown,Td=>{var Vd=Td.target.closest('[role\x3d"menu"]')===
Td.currentTarget;const Re=Td.ctrlKey||Td.altKey||Td.metaKey,$e=1===Td.key.length;Vd&&("Tab"===Td.key&&Td.preventDefault(),!Re&&$e&&Qd(Td.key));Td.target===Fe.current&&rA.includes(Td.key)&&(Td.preventDefault(),Vd=Ad().filter(af=>!af.disabled).map(af=>af.ref.current),xw.includes(Td.key)&&Vd.reverse(),li(Vd))}),onBlur:Bg(d.onBlur,Td=>{Td.currentTarget.contains(Td.target)||(window.clearTimeout(ce.current),Ge.current="")}),onPointerMove:Bg(d.onPointerMove,$b(Td=>{const Vd=Ae.current!==Td.clientX;Td.currentTarget.contains(Td.target)&&
Vd&&(ze.current=Td.clientX>Ae.current?"right":"left",Ae.current=Td.clientX)}))})))))))}),Ow=(0,Rg.forwardRef)((d,l)=>{const {disabled:E=!1,onSelect:Y}=d,la=Wf(d,["disabled","onSelect"]),sa=(0,Rg.useRef)(null),Ea=iu("MenuItem",d.__scopeMenu),Ua=Lw("MenuItem",d.__scopeMenu);l=ai(l,sa);const jb=(0,Rg.useRef)(!1);return(0,Rg.createElement)(SA,Uf({},la,{ref:l,disabled:E,onClick:Bg(d.onClick,()=>{const sb=sa.current;if(!E&&sb){const Ub=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});sb.addEventListener("menu.itemSelect",
gc=>null===Y||void 0===Y?void 0:Y(gc),{once:!0});xi(sb,Ub);if(Ub.defaultPrevented)jb.current=!1;else Ea.onClose()}}),onPointerDown:sb=>{var Ub;null===(Ub=d.onPointerDown)||void 0===Ub||Ub.call(d,sb);jb.current=!0},onPointerUp:Bg(d.onPointerUp,sb=>{var Ub;jb.current||null===(Ub=sb.currentTarget)||void 0===Ub||Ub.click()}),onKeyDown:Bg(d.onKeyDown,sb=>{const Ub=""!==Ua.searchRef.current;E||Ub&&" "===sb.key||!cu.includes(sb.key)||(sb.currentTarget.click(),sb.preventDefault())})}))}),SA=(0,Rg.forwardRef)((d,
l)=>{const {__scopeMenu:E,disabled:Y=!1,textValue:la}=d,sa=Wf(d,["__scopeMenu","disabled","textValue"]),Ea=Lw("MenuItem",E),Ua=Jw(E),jb=(0,Rg.useRef)(null);l=ai(l,jb);const [sb,Ub]=(0,Rg.useState)(!1),[gc,yc]=(0,Rg.useState)("");(0,Rg.useEffect)(()=>{const Qc=jb.current;if(Qc){var Jc;yc((null!==(Jc=Qc.textContent)&&void 0!==Jc?Jc:"").trim())}},[sa.children]);return(0,Rg.createElement)(bu.ItemSlot,{scope:E,disabled:Y,textValue:null!==la&&void 0!==la?la:gc},(0,Rg.createElement)(tw,Uf({asChild:!0},Ua,
{focusable:!Y}),(0,Rg.createElement)(Hk.div,Uf({role:"menuitem","data-highlighted":sb?"":void 0,"aria-disabled":Y||void 0,"data-disabled":Y?"":void 0},sa,{ref:l,onPointerMove:Bg(d.onPointerMove,$b(Qc=>{if(Y)Ea.onItemLeave(Qc);else Ea.onItemEnter(Qc),Qc.defaultPrevented||Qc.currentTarget.focus()})),onPointerLeave:Bg(d.onPointerLeave,$b(Qc=>Ea.onItemLeave(Qc))),onFocus:Bg(d.onFocus,()=>Ub(!0)),onBlur:Bg(d.onBlur,()=>Ub(!1))}))))});Yp("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Yp("MenuItemIndicator",
{checked:!1});var TA=(0,Rg.forwardRef)((d,l)=>{d=Wf(d,["__scopeMenu"]);return(0,Rg.createElement)(Hk.div,Uf({role:"separator","aria-orientation":"horizontal"},d,{ref:l}))});Yp("MenuSub");var Pw=d=>{const {__scopeMenu:l,open:E=!1,children:Y,dir:la,onOpenChange:sa,modal:Ea=!0}=d;d=hu(l);const [Ua,jb]=(0,Rg.useState)(null),sb=(0,Rg.useRef)(!1),Ub=pj(sa),gc=Pi(la);(0,Rg.useEffect)(()=>{const yc=()=>{sb.current=!0;document.addEventListener("pointerdown",Qc,{capture:!0,once:!0});document.addEventListener("pointermove",
Qc,{capture:!0,once:!0})},Qc=()=>sb.current=!1;document.addEventListener("keydown",yc,{capture:!0});return()=>{document.removeEventListener("keydown",yc,{capture:!0});document.removeEventListener("pointerdown",Qc,{capture:!0});document.removeEventListener("pointermove",Qc,{capture:!0})}},[]);return(0,Rg.createElement)(gA,d,(0,Rg.createElement)(MA,{scope:l,open:E,onOpenChange:Ub,content:Ua,onContentChange:jb},(0,Rg.createElement)(NA,{scope:l,onClose:(0,Rg.useCallback)(()=>Ub(!1),[Ub]),isUsingKeyboardRef:sb,
dir:gc,modal:Ea},Y)))},[UA]=Oi("DropdownMenu",[Ls]),Ns=Ls(),[VA,Qw]=UA("DropdownMenu"),WA=(0,Hn.forwardRef)((d,l)=>{const {__scopeDropdownMenu:E,disabled:Y=!1}=d,la=Wf(d,["__scopeDropdownMenu","disabled"]),sa=Qw("DropdownMenuTrigger",E),Ea=Ns(E);return(0,Hn.createElement)(Kw,Uf({asChild:!0},Ea),(0,Hn.createElement)(Hk.button,Uf({type:"button",id:sa.triggerId,"aria-haspopup":"menu","aria-expanded":sa.open?!0:void 0,"aria-controls":sa.open?sa.contentId:void 0,"data-state":sa.open?"open":"closed","data-disabled":Y?
"":void 0,disabled:Y},la,{ref:sl(l,sa.triggerRef),onPointerDown:Bg(d.onPointerDown,Ua=>{Y||0!==Ua.button||!1!==Ua.ctrlKey||(sa.onOpenToggle(),sa.open||Ua.preventDefault())}),onKeyDown:Bg(d.onKeyDown,Ua=>{if(!Y){if(["Enter"," "].includes(Ua.key))sa.onOpenToggle();if("ArrowDown"===Ua.key)sa.onOpenChange(!0);[" ","ArrowDown"].includes(Ua.key)&&Ua.preventDefault()}})})))}),XA=(0,Hn.forwardRef)((d,l)=>{var {__scopeDropdownMenu:E}=d;const Y=Wf(d,["__scopeDropdownMenu"]),la=Qw("DropdownMenuContent",E);E=
Ns(E);const sa=(0,Hn.useRef)(!1);return(0,Hn.createElement)(Mw,Uf({id:la.contentId,"aria-labelledby":la.triggerId},E,Y,{ref:l,onCloseAutoFocus:Bg(d.onCloseAutoFocus,Ea=>{var Ua;sa.current||null===(Ua=la.triggerRef.current)||void 0===Ua||Ua.focus();sa.current=!1;Ea.preventDefault()}),onInteractOutside:Bg(d.onInteractOutside,Ea=>{Ea=Ea.detail.originalEvent;const Ua=0===Ea.button&&!0===Ea.ctrlKey;Ea=2===Ea.button||Ua;if(!la.modal||Ea)sa.current=!0}),style:Id(me({},d.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Dr=(0,Hn.forwardRef)((d,l)=>{var {__scopeDropdownMenu:E}=d;d=Wf(d,["__scopeDropdownMenu"]);E=Ns(E);return(0,Hn.createElement)(Ow,Uf({},E,d,{ref:l}))}),YA=d=>{const {__scopeDropdownMenu:l,children:E,dir:Y,open:la,defaultOpen:sa,onOpenChange:Ea,modal:Ua=!0}=d;d=Ns(l);const jb=(0,Hn.useRef)(null),[sb=!1,Ub]=Wi({prop:la,defaultProp:sa,onChange:Ea});return(0,Hn.createElement)(VA,{scope:l,triggerId:uf(),triggerRef:jb,contentId:uf(),open:sb,onOpenChange:Ub,onOpenToggle:(0,Hn.useCallback)(()=>Ub(gc=>!gc),
[Ub]),modal:Ua},(0,Hn.createElement)(Pw,Uf({},d,{open:sb,onOpenChange:Ub,dir:Y,modal:Ua}),E))};wb=S(611);var ZA=We(function(){const d=qf(),l=E=>{E.preventDefault()};return(0,wb.jsxs)(YA,{children:[(0,wb.jsx)(WA,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*d.viewport.camera.zoom).toFixed(0)+"%"}),(0,wb.jsxs)(XA,{className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,wb.jsxs)(Dr,{className:"tl-menu-item",onSelect:l,onClick:d.api.zoomToFit,children:["Zoom to fit",(0,wb.jsx)("div",
{className:"tl-menu-right-slot",children:(0,wb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,wb.jsx)("code",{children:""})," ",(0,wb.jsx)("code",{children:"1"})]})})]}),(0,wb.jsxs)(Dr,{className:"tl-menu-item",onSelect:l,onClick:d.api.zoomToSelection,children:["Zoom to selection",(0,wb.jsx)("div",{className:"tl-menu-right-slot",children:(0,wb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,wb.jsx)("code",{children:Ip})," ",(0,wb.jsx)("code",{children:""})," ",(0,wb.jsx)("code",
{children:"1"})]})})]}),(0,wb.jsxs)(Dr,{className:"tl-menu-item",onSelect:l,onClick:d.api.zoomIn,children:["Zoom in",(0,wb.jsx)("div",{className:"tl-menu-right-slot",children:(0,wb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,wb.jsx)("code",{children:Ip})," ",(0,wb.jsx)("code",{children:"+"})]})})]}),(0,wb.jsxs)(Dr,{className:"tl-menu-item",onSelect:l,onClick:d.api.zoomOut,children:["Zoom out",(0,wb.jsx)("div",{className:"tl-menu-right-slot",children:(0,wb.jsxs)("span",{className:"keyboard-shortcut",
children:[(0,wb.jsx)("code",{children:Ip})," ",(0,wb.jsx)("code",{children:"-"})]})})]}),(0,wb.jsxs)(Dr,{className:"tl-menu-item",onSelect:l,onClick:d.api.resetZoom,children:["Reset zoom",(0,wb.jsx)("div",{className:"tl-menu-right-slot",children:(0,wb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,wb.jsx)("code",{children:""})," ",(0,wb.jsx)("code",{children:"0"})]})})]})]})]})}),Rw=S(3),Sw=["horizontal","vertical"],Er=(0,Rw.forwardRef)((d,l)=>{const {decorative:E,orientation:Y="horizontal"}=
d;d=Wf(d,["decorative","orientation"]);const la=Sw.includes(Y)?Y:"horizontal";return(0,Rw.createElement)(Hk.div,Uf({"data-orientation":la},E?{role:"none"}:{"aria-orientation":"vertical"===la?la:void 0,role:"separator"},d,{ref:l}))});Er.propTypes={orientation(d,l,E){d=d[l];l=String(d);return d&&!Sw.includes(d)?Error(`Invalid prop \`orientation\` of value \`${l}\` supplied to \`${E}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};wb=S(611);var $A=We(function(){const d=qf(),l=As.useCallback(()=>{d.api.undo()},[d]),E=As.useCallback(()=>{d.api.redo()},[d]),Y=As.useCallback(()=>{d.api.zoomIn()},[d]),la=As.useCallback(()=>{d.api.zoomOut()},[d]);return(0,wb.jsxs)("div",{className:"tl-action-bar",children:[(0,wb.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,wb.jsx)($h,{title:"Undo",onClick:l,children:(0,wb.jsx)(mi,{name:"arrow-back-up"})}),(0,wb.jsx)($h,{title:"Redo",
onClick:E,children:(0,wb.jsx)(mi,{name:"arrow-forward-up"})})]}),(0,wb.jsxs)("div",{className:"tl-toolbar tl-zoom-bar",children:[(0,wb.jsx)($h,{title:"Zoom in",onClick:Y,id:"tl-zoom-in",children:(0,wb.jsx)(mi,{name:"plus"})}),(0,wb.jsx)($h,{title:"Zoom out",onClick:la,id:"tl-zoom-out",children:(0,wb.jsx)(mi,{name:"minus"})}),(0,wb.jsx)(Er,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,wb.jsx)(ZA,{})]})]})}),Zp=ff(S(3)),Tw=ff(S(12));wb=S(611);var Os=d=>`[${d.map(l=>l.toFixed(2)).join(", ")}]`,
aB=We(function(){const d=qf(),l=Zp.default.useRef(),[,E]=Zp.default.useState(0);Zp.default.useEffect(()=>{l.current=document.createElement("div");l.current.style.display="contents";document.body.append(l.current);E(Y=>Y+1);return()=>{var Y;null==(Y=l.current)?void 0:Y.remove()}},[]);Zp.default.useEffect(()=>{requestIdleCallback(()=>{var Y,la;null==(la=null==(Y=l.current)?void 0:Y.querySelector(`[data-item-index="${d.history.pointer}"]`))?void 0:la.scrollIntoView()})},[d.history.pointer]);return l.current?
Tw.default.createPortal((0,wb.jsx)("div",{className:"fixed z-[1000] left-4 max-w-[400px] top-4 overflow-scroll bg-gray-200 flex gap-2 p-2",children:d.history.stack.map((Y,la)=>(0,wb.jsx)("div",{"data-item-index":la,style:{background:d.history.pointer===la?"pink":"grey"},onClick:()=>d.history.setPointer(la),className:"flex items-center rounded-lg px-2 h-[32px] whitespace-nowrap",children:Y.pages[0].nonce},la))}),l.current):null});We(()=>{const {viewport:{bounds:d,camera:{point:l,zoom:E}},inputs:Y}=
Tg(),la=Zp.default.useRef(),sa=Zp.default.useRef();Zp.default.useEffect(()=>{var Ua=document.getElementById("tl-dev-tools-canvas-anchor");la.current=Ua;Ua=document.getElementById("tl-statusbar-anchor");sa.current=Ua},[]);var Ea=[["Z",E.toFixed(2)],["MP",Os(Y.currentPoint)],["MS",Os(Y.currentScreenPoint)],["VP",Os(l)],["VBR",Os([d.maxX,d.maxY])]].map(Ua=>Ua.join("")).join("|");Ea=sa.current?Tw.default.createPortal((0,wb.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:Ea}),sa.current):
null;return(0,wb.jsxs)(wb.Fragment,{children:[Ea,(0,wb.jsx)(aB,{})]})});var Ps=ff(S(3));wb=S(611);var no=We(d=>{var {id:l,icon:E,title:Y}=d;d=Wf(d,["id","icon","title"]);var la,sa;const Ea=qf(),Ua=Ps.useCallback(sb=>{(sb=sb.currentTarget.dataset.tool)&&Ea.selectTool(sb)},[Ea]),jb=null==(sa=(null==(la=[...Ea.Tools,Eb,Be])?void 0:la.find(sb=>sb.id===l)).shortcut)?void 0:sa[0];la=jb?`${Y} (${jb})`:Y;return(0,wb.jsx)($h,Id(me({},d),{title:la,"data-tool":l,"data-selected":l===Ea.selectedTool.id,onClick:Ua,
children:"string"===typeof E?(0,wb.jsx)(mi,{name:E}):E}))}),bB=We(()=>{const d=[{id:"box",icon:"square",title:"Rectangle"},{id:"ellipse",icon:"circle",title:"Circle"},{id:"polygon",icon:"triangle",title:"Triangle"}],l=qf(),[E,Y]=Ps.useState(()=>{var Ea;return(null!=(Ea=d.find(Ua=>Ua.id===l.selectedTool.id))?Ea:d[0]).id}),[la,sa]=Ps.useState(!1);Ps.useEffect(()=>{Y(Ea=>{var Ua,jb;return null!=(jb=null==(Ua=d.find(sb=>sb.id===l.selectedTool.id))?void 0:Ua.id)?jb:Ea})},[l.selectedTool.id]);return(0,wb.jsxs)("div",
{className:"tl-geometry-tools-pane-anchor",onMouseEnter:()=>sa(!0),onMouseLeave:()=>sa(!1),children:[(0,wb.jsx)(no,me({},d.find(Ea=>Ea.id===E))),la&&(0,wb.jsx)("div",{className:"tl-geometry-tools-pane",children:d.map(Ea=>(0,wb.jsx)(no,me({},Ea),Ea.id))})]})}),cB=We(function(){const d=qf();return(0,wb.jsx)("div",{className:"tl-primary-tools",children:(0,wb.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel","data-tool-locked":d.settings.isToolLocked,children:[(0,wb.jsx)(no,{title:"Select",
id:"select",icon:"select-cursor"}),(0,wb.jsx)(no,{title:"Move",id:"move",icon:d.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,wb.jsx)(no,{title:"Draw",id:"pencil",icon:"ballpen"}),(0,wb.jsx)(no,{title:"Highlight",id:"highlighter",icon:"highlight"}),(0,wb.jsx)(no,{title:"Eraser",id:"erase",icon:"eraser"}),(0,wb.jsx)(no,{title:"Connector",id:"line",icon:"connector"}),(0,wb.jsx)(no,{title:"Text",id:"text",icon:"text"}),(0,wb.jsx)(bB,{}),(0,wb.jsx)(no,{title:"Logseq Portal",id:"logseq-portal",icon:(0,wb.jsx)(nk,
{})})]})})}),dB=ff(S(3));wb=S(611);We(function(){const d=qf();dB.useEffect(()=>{const l=document.querySelector(".logseq-tldraw-wrapper .tl-canvas"),E=document.querySelector(".logseq-tldraw-wrapper .tl-action-bar");l&&(l.style.height="calc(100% - 32px)");E&&(E.style.marginBottom="32px");return()=>{l&&(l.style.height="100%");E&&(E.style.marginBottom="0px")}});return(0,wb.jsxs)("div",{className:"tl-statusbar",children:[d.selectedTool.id," | ",d.selectedTool.currentState.id,(0,wb.jsx)("div",{style:{flex:1}}),
(0,wb.jsx)("div",{id:"tl-statusbar-anchor",style:{display:"flex"}})]})});wb=S(611);var eB=We(function(){return(0,wb.jsxs)(wb.Fragment,{children:[!1,!1,(0,wb.jsx)(cB,{}),(0,wb.jsx)($A,{})]})}),Fr=ff(S(3)),Iq=ff(S(3)),Go=ff(S(3)).default.createContext({}),ju=ff(S(3));wb=S(611);var fB=ff(S(3)),xf=S(3),Uw=S(12),gB=S(3),[,hB]=function(d,l){function E(la){const {children:sa}=la,Ea=Wf(la,["children"]);la=(0,Vn.useMemo)(()=>Ea,Object.values(Ea));return(0,Vn.createElement)(Y.Provider,{value:la},sa)}const Y=
(0,Vn.createContext)(l);E.displayName=d+"Provider";return[E,function(la){const sa=(0,Vn.useContext)(Y);if(sa)return sa;if(void 0!==l)return l;throw Error(`\`${la}\` must be used within \`${d}\``);}]}("Label",{id:void 0,controlRef:{current:null}}),iB=d=>{const l=hB("LabelConsumer"),{controlRef:E}=l;(0,gB.useEffect)(()=>{d&&(E.current=d)},[d,E]);return l.id},Vw=S(3),Ww=S(3),jB=(0,Ww.forwardRef)((d,l)=>(0,Ww.createElement)(Hk.span,Uf({},d,{ref:l,style:me({position:"absolute",border:0,width:1,height:1,
padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},d.style)}))),Xw=[" ","Enter","ArrowUp","ArrowDown"],Yw=[" ","Enter"],[Gr,ku,kB]=fk("Select"),[Hr]=Oi("Select",[kB]),[lB,Jq]=Hr("Select"),[mB,nB]=Hr("Select"),oB=(0,xf.forwardRef)((d,l)=>{const {__scopeSelect:E,disabled:Y=!1,"aria-labelledby":la}=d;d=Wf(d,["__scopeSelect","disabled","aria-labelledby"]);const sa=Jq("SelectTrigger",E);l=ai(l,sa.onTriggerChange);const Ea=ku(E);var Ua=iB(sa.trigger);Ua=
la||Ua;const [jb,sb,Ub]=Pb(gc=>{const yc=Ea().filter(Jc=>!Jc.disabled),Qc=yc.find(Jc=>Jc.value===sa.value);gc=rb(yc,gc,Qc);if(void 0!==gc)sa.onValueChange(gc.value)});return(0,xf.createElement)(Hk.button,Uf({type:"button",role:"combobox","aria-controls":sa.contentId,"aria-expanded":sa.open,"aria-autocomplete":"none","aria-labelledby":Ua,dir:sa.dir,"data-state":sa.open?"open":"closed",disabled:Y,"data-disabled":Y?"":void 0,"data-placeholder":void 0===sa.value?"":void 0},d,{ref:l,onPointerDown:Bg(d.onPointerDown,
gc=>{gc.target.releasePointerCapture(gc.pointerId);0===gc.button&&!1===gc.ctrlKey&&(Y||(sa.onOpenChange(!0),Ub()),sa.triggerPointerDownPosRef.current={x:Math.round(gc.pageX),y:Math.round(gc.pageY)},gc.preventDefault())}),onKeyDown:Bg(d.onKeyDown,gc=>{const yc=""!==jb.current;gc.ctrlKey||gc.altKey||gc.metaKey||1!==gc.key.length||sb(gc.key);yc&&" "===gc.key||!Xw.includes(gc.key)||(Y||(sa.onOpenChange(!0),Ub()),gc.preventDefault())})}))}),pB=(0,xf.forwardRef)((d,l)=>{const {__scopeSelect:E,children:Y,
placeholder:la}=d;d=Wf(d,["__scopeSelect","className","style","children","placeholder"]);const sa=Jq("SelectValue",E),{onValueNodeHasChildrenChange:Ea}=sa,Ua=void 0!==Y;l=ai(l,sa.onValueNodeChange);Ym(()=>{Ea(Ua)},[Ea,Ua]);return(0,xf.createElement)(Hk.span,Uf({},d,{ref:l,style:{pointerEvents:"none"}}),void 0===sa.value&&void 0!==la?la:Y)}),qB=(0,xf.forwardRef)((d,l)=>{const {children:E}=d;d=Wf(d,["__scopeSelect","children"]);return(0,xf.createElement)(Hk.span,Uf({"aria-hidden":!0},d,{ref:l}),E||
"")}),rB=(0,xf.forwardRef)((d,l)=>{const E=Jq("SelectContent",d.__scopeSelect),[Y,la]=(0,xf.useState)();Ym(()=>{la(new DocumentFragment)},[]);return(0,xf.createElement)(xf.Fragment,null,E.open?(0,xf.createElement)(sB,Uf({},d,{ref:l})):Y?(0,Uw.createPortal)((0,xf.createElement)(Zw,{scope:d.__scopeSelect},(0,xf.createElement)(Gr.Slot,{scope:d.__scopeSelect},(0,xf.createElement)("div",null,d.children))),Y):null)}),[Zw,Kq]=Hr("SelectContent"),sB=(0,xf.forwardRef)((d,l)=>{const {__scopeSelect:E,onCloseAutoFocus:Y}=
d;d=Wf(d,["__scopeSelect","onCloseAutoFocus"]);const la=Jq("SelectContent",E),[sa,Ea]=(0,xf.useState)(null),[Ua,jb]=(0,xf.useState)(null),[sb,Ub]=(0,xf.useState)(null);l=ai(l,Vd=>jb(Vd));const [gc,yc]=(0,xf.useState)(null),[Qc,Jc]=(0,xf.useState)(null),kd=ku(E),[ad,vc]=(0,xf.useState)(!1),md=(0,xf.useRef)(!0),Ad=(0,xf.useRef)(!1),qd=(0,xf.useRef)(!1);(0,xf.useEffect)(()=>{if(Ua)return rw(Ua)},[Ua]);Kl();const [Bd,Fe]=(0,xf.useState)();Ym(()=>{Ua&&Fe(window.getComputedStyle(Ua).zIndex)},[Ua]);const ce=
(0,xf.useCallback)(Vd=>{const [Re,...$e]=kd().map(Nf=>Nf.ref.current),[af]=$e.slice(-1),Ag=document.activeElement;for(const Nf of Vd){if(Nf===Ag)break;null===Nf||void 0===Nf||Nf.scrollIntoView({block:"nearest"});Nf===Re&&sb&&(sb.scrollTop=0);Nf===af&&sb&&(sb.scrollTop=sb.scrollHeight);null===Nf||void 0===Nf||Nf.focus();if(document.activeElement!==Ag)break}},[kd,sb]),Ge=(0,xf.useCallback)(()=>{if(la.trigger&&la.valueNode&&sa&&Ua&&sb&&gc&&Qc){var Vd=la.trigger.getBoundingClientRect(),Re=Ua.getBoundingClientRect(),
$e=la.valueNode.getBoundingClientRect(),af=Qc.getBoundingClientRect();"rtl"!==la.dir?(af=$e.left-(af.left-Re.left),$e=Vd.width+(Vd.left-af),Re=ia(af,[10,window.innerWidth-10-Math.max($e,Re.width)]),sa.style.minWidth=$e+"px",sa.style.left=Re+"px"):(af=window.innerWidth-$e.right-(Re.right-af.right),$e=Vd.width+(window.innerWidth-Vd.right-af),Re=ia(af,[10,window.innerWidth-10-Math.max($e,Re.width)]),sa.style.minWidth=$e+"px",sa.style.right=Re+"px");const tm=kd();Re=window.innerHeight-20;var Ag=sb.scrollHeight,
Nf=window.getComputedStyle(Ua);$e=parseInt(Nf.borderTopWidth,10);var Ph=parseInt(Nf.paddingTop,10);af=parseInt(Nf.borderBottomWidth,10);Nf=parseInt(Nf.paddingBottom,10);var fi=$e+Ph+Ag+Nf+af;Ag=Math.min(5*gc.offsetHeight,fi);var kk=window.getComputedStyle(sb);Nf=parseInt(kk.paddingTop,10);kk=parseInt(kk.paddingBottom,10);const Zl=Vd.top+Vd.height/2-10,qo=Re-Zl;Vd=gc.offsetHeight/2;Ph=$e+Ph+(gc.offsetTop+Vd);fi-=Ph;Ph<=Zl?($e=gc===tm[tm.length-1].ref.current,sa.style.bottom="0px",sa.style.height=Ph+
Math.max(qo,Vd+($e?kk:0)+(Ua.clientHeight-sb.offsetTop-sb.offsetHeight)+af)+"px"):(af=gc===tm[0].ref.current,sa.style.top="0px",sa.style.height=Math.max(Zl,$e+sb.offsetTop+(af?Nf:0)+Vd)+fi+"px",sb.scrollTop=Ph-Zl+sb.offsetTop);sa.style.margin="10px 0";sa.style.minHeight=Ag+"px";sa.style.maxHeight=Re+"px";vc(!0);requestAnimationFrame(()=>Ad.current=!0)}},[kd,la.trigger,la.valueNode,sa,Ua,sb,gc,Qc,la.dir]);Ym(()=>Ge(),[Ge]);const Bf=(0,xf.useCallback)(()=>ce([gc,Ua]),[ce,gc,Ua]);(0,xf.useEffect)(()=>
{ad&&Bf()},[ad,Bf]);const bf=(0,xf.useCallback)(Vd=>{Vd&&!0===md.current&&(Ge(),Bf(),md.current=!1)},[Ge,Bf]),{onOpenChange:ze,triggerPointerDownPosRef:Ae}=la;(0,xf.useEffect)(()=>{if(Ua){var Vd=0,Re=0;const $e=Ag=>{var Nf,Ph,fi,kk;Vd=Math.abs(Math.round(Ag.pageX)-(null!==(Nf=null===(Ph=Ae.current)||void 0===Ph?void 0:Ph.x)&&void 0!==Nf?Nf:0));Re=Math.abs(Math.round(Ag.pageY)-(null!==(fi=null===(kk=Ae.current)||void 0===kk?void 0:kk.y)&&void 0!==fi?fi:0))},af=Ag=>{10>=Vd&&10>=Re?Ag.preventDefault():
Ua.contains(Ag.target)||ze(!1);document.removeEventListener("pointermove",$e);Ae.current=null};null!==Ae.current&&(document.addEventListener("pointermove",$e),document.addEventListener("pointerup",af,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",$e);document.removeEventListener("pointerup",af,{capture:!0})}}},[Ua,ze,Ae]);(0,xf.useEffect)(()=>{const Vd=()=>ze(!1);window.addEventListener("blur",Vd);window.addEventListener("resize",Vd);return()=>{window.removeEventListener("blur",
Vd);window.removeEventListener("resize",Vd)}},[ze]);const [be,rd]=Pb(Vd=>{const Re=kd().filter(Ag=>!Ag.disabled),$e=Re.find(Ag=>Ag.ref.current===document.activeElement),af=rb(Re,Vd,$e);af&&setTimeout(()=>af.ref.current.focus())}),Qd=(0,xf.useCallback)((Vd,Re,$e)=>{$e=!qd.current&&!$e;if(void 0!==la.value&&la.value===Re||$e)yc(Vd),$e&&(qd.current=!0)},[la.value]),vd=(0,xf.useCallback)(()=>null===Ua||void 0===Ua?void 0:Ua.focus(),[Ua]),Td=(0,xf.useCallback)((Vd,Re,$e)=>{$e=!qd.current&&!$e;(void 0!==
la.value&&la.value===Re||$e)&&Jc(Vd)},[la.value]);return(0,xf.createElement)(Zw,{scope:E,contentWrapper:sa,content:Ua,viewport:sb,onViewportChange:Ub,itemRefCallback:Qd,selectedItem:gc,onItemLeave:vd,itemTextRefCallback:Td,selectedItemText:Qc,onScrollButtonChange:bf,isPositioned:ad,shouldExpandOnScrollRef:Ad,searchRef:be},(0,xf.createElement)(du,{as:Eq,allowPinchZoom:!0},(0,xf.createElement)("div",{ref:Ea,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Bd}},(0,xf.createElement)(lw,
{asChild:!0,trapped:la.open,onMountAutoFocus:Vd=>{Vd.preventDefault()},onUnmountAutoFocus:Bg(Y,Vd=>{var Re;null===(Re=la.trigger)||void 0===Re||Re.focus({preventScroll:!0});Vd.preventDefault()})},(0,xf.createElement)(jw,Uf({role:"listbox",id:la.contentId,"data-state":la.open?"open":"closed",dir:la.dir,onContextMenu:Vd=>Vd.preventDefault()},d,{ref:l,style:me({display:"flex",flexDirection:"column",boxSizing:"border-box",maxHeight:"100%",outline:"none"},d.style),disableOutsidePointerEvents:!0,onFocusOutside:Vd=>
Vd.preventDefault(),onDismiss:()=>la.onOpenChange(!1),onKeyDown:Bg(d.onKeyDown,Vd=>{var Re=Vd.ctrlKey||Vd.altKey||Vd.metaKey;"Tab"===Vd.key&&Vd.preventDefault();Re||1!==Vd.key.length||rd(Vd.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Vd.key)){let $e=kd().filter(af=>!af.disabled).map(af=>af.ref.current);["ArrowUp","End"].includes(Vd.key)&&($e=$e.slice().reverse());["ArrowUp","ArrowDown"].includes(Vd.key)&&(Re=$e.indexOf(Vd.target),$e=$e.slice(Re+1));setTimeout(()=>ce($e));Vd.preventDefault()}})}))))))}),
tB=(0,xf.forwardRef)((d,l)=>{const {__scopeSelect:E}=d;d=Wf(d,["__scopeSelect"]);const Y=Kq("SelectViewport",E);l=ai(l,Y.onViewportChange);const la=(0,xf.useRef)(0);return(0,xf.createElement)(xf.Fragment,null,(0,xf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,xf.createElement)(Gr.Slot,{scope:E},(0,xf.createElement)(Hk.div,
Uf({"data-radix-select-viewport":"",role:"presentation"},d,{ref:l,style:me({position:"relative",flex:1,overflow:"auto"},d.style),onScroll:Bg(d.onScroll,sa=>{sa=sa.currentTarget;const {contentWrapper:Ea,shouldExpandOnScrollRef:Ua}=Y;if(null!==Ua&&void 0!==Ua&&Ua.current&&Ea){var jb=Math.abs(la.current-sa.scrollTop);if(0<jb){var sb=window.innerHeight-20,Ub=parseFloat(Ea.style.minHeight);const gc=parseFloat(Ea.style.height);Ub=Math.max(Ub,gc);Ub<sb&&(jb=Ub+jb,sb=Math.min(sb,jb),jb-=sb,Ea.style.height=
sb+"px","0px"===Ea.style.bottom&&(sa.scrollTop=0<jb?jb:0,Ea.style.justifyContent="flex-end"))}}la.current=sa.scrollTop})}))))});Hr("SelectGroup");var [uB,vB]=Hr("SelectItem"),wB=(0,xf.forwardRef)((d,l)=>{const {__scopeSelect:E,value:Y,disabled:la=!1,textValue:sa}=d;d=Wf(d,["__scopeSelect","value","disabled","textValue"]);const Ea=Jq("SelectItem",E),Ua=Kq("SelectItem",E),jb=Ea.value===Y,[sb,Ub]=(0,xf.useState)(null!==sa&&void 0!==sa?sa:""),[gc,yc]=(0,xf.useState)(!1);l=ai(l,kd=>{var ad;return null===
(ad=Ua.itemRefCallback)||void 0===ad?void 0:ad.call(Ua,kd,Y,la)});const Qc=uf(),Jc=()=>{la||(Ea.onValueChange(Y),Ea.onOpenChange(!1))};return(0,xf.createElement)(uB,{scope:E,value:Y,disabled:la,textId:Qc,isSelected:jb,onItemTextChange:(0,xf.useCallback)(kd=>{Ub(ad=>{var vc;return ad||(null!==(vc=null===kd||void 0===kd?void 0:kd.textContent)&&void 0!==vc?vc:"").trim()})},[])},(0,xf.createElement)(Gr.ItemSlot,{scope:E,value:Y,disabled:la,textValue:sb},(0,xf.createElement)(Hk.div,Uf({role:"option","aria-labelledby":Qc,
"data-highlighted":gc?"":void 0,"aria-selected":jb&&gc,"data-state":jb?"checked":"unchecked","aria-disabled":la||void 0,"data-disabled":la?"":void 0,tabIndex:la?void 0:-1},d,{ref:l,onFocus:Bg(d.onFocus,()=>yc(!0)),onBlur:Bg(d.onBlur,()=>yc(!1)),onPointerUp:Bg(d.onPointerUp,Jc),onPointerMove:Bg(d.onPointerMove,kd=>{if(la){var ad;null===(ad=Ua.onItemLeave)||void 0===ad||ad.call(Ua)}else kd.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Bg(d.onPointerLeave,kd=>{if(kd.currentTarget===document.activeElement){var ad;
null===(ad=Ua.onItemLeave)||void 0===ad||ad.call(Ua)}}),onKeyDown:Bg(d.onKeyDown,kd=>{var ad;if(""===(null===(ad=Ua.searchRef)||void 0===ad?void 0:ad.current)||" "!==kd.key)Yw.includes(kd.key)&&Jc()," "===kd.key&&kd.preventDefault()})}))))}),xB=(0,xf.forwardRef)((d,l)=>{var {__scopeSelect:E}=d;d=Wf(d,["__scopeSelect","className","style"]);const Y=Jq("SelectItemText",E),la=Kq("SelectItemText",E),sa=vB("SelectItemText",E);E=nB("SelectItemText",E);const [Ea,Ua]=(0,xf.useState)(null);l=ai(l,yc=>Ua(yc),
sa.onItemTextChange,yc=>{var Qc;return null===(Qc=la.itemTextRefCallback)||void 0===Qc?void 0:Qc.call(la,yc,sa.value,sa.disabled)});const jb=null===Ea||void 0===Ea?void 0:Ea.textContent,sb=(0,xf.useMemo)(()=>(0,xf.createElement)("option",{key:sa.value,value:sa.value,disabled:sa.disabled},jb),[sa.disabled,sa.value,jb]),{onNativeOptionAdd:Ub,onNativeOptionRemove:gc}=E;Ym(()=>{Ub(sb);return()=>gc(sb)},[Ub,gc,sb]);return(0,xf.createElement)(xf.Fragment,null,(0,xf.createElement)(Hk.span,Uf({id:sa.textId},
d,{ref:l})),sa.isSelected&&Y.valueNode&&!Y.valueNodeHasChildren?(0,Uw.createPortal)(d.children,Y.valueNode):null)}),yB=(0,xf.forwardRef)((d,l)=>{const E=Kq("SelectScrollUpButton",d.__scopeSelect),[Y,la]=(0,xf.useState)(!1);l=ai(l,E.onScrollButtonChange);Ym(()=>{if(E.viewport&&E.isPositioned){let sa=function(){la(0<Ea.scrollTop)};const Ea=E.viewport;sa();Ea.addEventListener("scroll",sa);return()=>Ea.removeEventListener("scroll",sa)}},[E.viewport,E.isPositioned]);return Y?(0,xf.createElement)($w,Uf({},
d,{ref:l,onAutoScroll:()=>{const {viewport:sa,selectedItem:Ea}=E;sa&&Ea&&(sa.scrollTop-=Ea.offsetHeight)}})):null}),zB=(0,xf.forwardRef)((d,l)=>{const E=Kq("SelectScrollDownButton",d.__scopeSelect),[Y,la]=(0,xf.useState)(!1);l=ai(l,E.onScrollButtonChange);Ym(()=>{if(E.viewport&&E.isPositioned){let sa=function(){la(Math.ceil(Ea.scrollTop)<Ea.scrollHeight-Ea.clientHeight)};const Ea=E.viewport;sa();Ea.addEventListener("scroll",sa);return()=>Ea.removeEventListener("scroll",sa)}},[E.viewport,E.isPositioned]);
return Y?(0,xf.createElement)($w,Uf({},d,{ref:l,onAutoScroll:()=>{const {viewport:sa,selectedItem:Ea}=E;sa&&Ea&&(sa.scrollTop+=Ea.offsetHeight)}})):null}),$w=(0,xf.forwardRef)((d,l)=>{const {__scopeSelect:E,onAutoScroll:Y}=d;d=Wf(d,["__scopeSelect","onAutoScroll"]);const la=Kq("SelectScrollButton",E),sa=(0,xf.useRef)(null),Ea=ku(E),Ua=(0,xf.useCallback)(()=>{null!==sa.current&&(window.clearInterval(sa.current),sa.current=null)},[]);(0,xf.useEffect)(()=>()=>Ua(),[Ua]);Ym(()=>{var jb;const sb=Ea().find(Ub=>
Ub.ref.current===document.activeElement);null===sb||void 0===sb||null===(jb=sb.ref.current)||void 0===jb||jb.scrollIntoView({block:"nearest"})},[Ea]);return(0,xf.createElement)(Hk.div,Uf({"aria-hidden":!0},d,{ref:l,style:me({flexShrink:0},d.style),onPointerMove:Bg(d.onPointerMove,()=>{var jb;null===(jb=la.onItemLeave)||void 0===jb||jb.call(la);null===sa.current&&(sa.current=window.setInterval(Y,50))}),onPointerLeave:Bg(d.onPointerLeave,()=>{Ua()})}))}),ax=(0,xf.forwardRef)((d,l)=>{const {value:E}=
d;d=Wf(d,["value"]);const Y=(0,xf.useRef)(null);l=ai(l,Y);const la=Db(E);(0,xf.useEffect)(()=>{const sa=Y.current,Ea=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(la!==E&&Ea){const Ua=new Event("change",{bubbles:!0});Ea.call(sa,E);sa.dispatchEvent(Ua)}},[la,E]);return(0,xf.createElement)(jB,{asChild:!0},(0,xf.createElement)("select",Uf({},d,{ref:l,defaultValue:E})))});ax.displayName="BubbleSelect";var AB=d=>{const {__scopeSelect:l,children:E,open:Y,defaultOpen:la,
onOpenChange:sa,value:Ea,defaultValue:Ua,onValueChange:jb,dir:sb,name:Ub,autoComplete:gc}=d,[yc,Qc]=(0,xf.useState)(null),[Jc,kd]=(0,xf.useState)(null),[ad,vc]=(0,xf.useState)(!1),md=Pi(sb),[Ad=!1,qd]=Wi({prop:Y,defaultProp:la,onChange:sa}),[Bd,Fe]=Wi({prop:Ea,defaultProp:Ua,onChange:jb}),ce=(0,xf.useRef)(null),Ge=yc?!!yc.closest("form"):!0,[Bf,bf]=(0,xf.useState)(new Set),ze=Array.from(Bf).map(Ae=>Ae.props.value).join(";");return(0,xf.createElement)(lB,{scope:l,trigger:yc,onTriggerChange:Qc,valueNode:Jc,
onValueNodeChange:kd,valueNodeHasChildren:ad,onValueNodeHasChildrenChange:vc,contentId:uf(),value:Bd,onValueChange:Fe,open:Ad,onOpenChange:qd,dir:md,triggerPointerDownPosRef:ce},(0,xf.createElement)(Gr.Provider,{scope:l},(0,xf.createElement)(mB,{scope:d.__scopeSelect,onNativeOptionAdd:(0,xf.useCallback)(Ae=>{bf(be=>(new Set(be)).add(Ae))},[]),onNativeOptionRemove:(0,xf.useCallback)(Ae=>{bf(be=>{be=new Set(be);be.delete(Ae);return be})},[])},E)),Ge?(0,xf.createElement)(ax,{key:ze,"aria-hidden":!0,
tabIndex:-1,name:Ub,autoComplete:gc,value:Bd,onChange:Ae=>Fe(Ae.target.value)},Array.from(Bf)):null)},BB=oB,CB=pB,DB=qB,EB=d=>(0,xf.createElement)(yA,Uf({asChild:!0},d)),FB=rB,GB=tB,HB=wB,IB=xB,JB=yB,KB=zB;wb=S(611);var LB=ff(S(3));wb=S(611);var lu=LB.forwardRef((d,l)=>{var {value:E,className:Y}=d;d=Wf(d,["autoResize","value","className"]);return(0,wb.jsx)("div",{className:"tl-input"+(Y?" "+Y:""),children:(0,wb.jsxs)("div",{className:"tl-input-sizer",children:[(0,wb.jsx)("div",{className:"tl-input-hidden",
children:E}),(0,wb.jsx)("input",me({ref:l,value:E,className:"tl-text-input",type:"text"},d))]})})}),Ik=ff(S(3)),bx=S(3),cx=(0,bx.forwardRef)((d,l)=>{const {pressed:E,defaultPressed:Y=!1,onPressedChange:la}=d,sa=Wf(d,["pressed","defaultPressed","onPressedChange"]),[Ea=!1,Ua]=Wi({prop:E,onChange:la,defaultProp:Y});return(0,bx.createElement)(Hk.button,Uf({type:"button","aria-pressed":Ea,"data-state":Ea?"on":"off","data-disabled":d.disabled?"":void 0},sa,{ref:l,onClick:Bg(d.onClick,()=>{d.disabled||Ua(!Ea)})}))}),
MB=cx,[dx]=Oi("ToggleGroup",[Is]),ex=Is(),NB=Ik.default.forwardRef((d,l)=>{const {type:E}=d;d=Wf(d,["type"]);if("single"===E)return Ik.default.createElement(OB,Uf({},d,{ref:l}));if("multiple"===E)return Ik.default.createElement(PB,Uf({},d,{ref:l}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[fx,gx]=dx("ToggleGroup"),OB=Ik.default.forwardRef((d,l)=>{const {value:E,defaultValue:Y,onValueChange:la=()=>{}}=d,sa=Wf(d,["value","defaultValue","onValueChange"]),[Ea,Ua]=Wi({prop:E,defaultProp:Y,
onChange:la});return Ik.default.createElement(fx,{scope:d.__scopeToggleGroup,type:"single",value:Ea?[Ea]:[],onItemActivate:Ua,onItemDeactivate:Ik.default.useCallback(()=>Ua(""),[Ua])},Ik.default.createElement(hx,Uf({},sa,{ref:l})))}),PB=Ik.default.forwardRef((d,l)=>{const {value:E,defaultValue:Y,onValueChange:la=()=>{}}=d,sa=Wf(d,["value","defaultValue","onValueChange"]),[Ea=[],Ua]=Wi({prop:E,defaultProp:Y,onChange:la}),jb=Ik.default.useCallback(Ub=>Ua((gc=[])=>[...gc,Ub]),[Ua]),sb=Ik.default.useCallback(Ub=>
Ua((gc=[])=>gc.filter(yc=>yc!==Ub)),[Ua]);return Ik.default.createElement(fx,{scope:d.__scopeToggleGroup,type:"multiple",value:Ea,onItemActivate:jb,onItemDeactivate:sb},Ik.default.createElement(hx,Uf({},sa,{ref:l})))}),[QB,RB]=dx("ToggleGroup"),hx=Ik.default.forwardRef((d,l)=>{const {__scopeToggleGroup:E,disabled:Y=!1,rovingFocus:la=!0,orientation:sa,dir:Ea,loop:Ua=!0}=d;var jb=Wf(d,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));d=ex(E);const sb=Pi(Ea);jb=me({role:"group",
dir:sb},jb);return Ik.default.createElement(QB,{scope:E,rovingFocus:la,disabled:Y},la?Ik.default.createElement(uw,Uf({asChild:!0},d,{orientation:sa,dir:sb,loop:Ua}),Ik.default.createElement(Hk.div,Uf({},jb,{ref:l}))):Ik.default.createElement(Hk.div,Uf({},jb,{ref:l})))}),SB=Ik.default.forwardRef((d,l)=>{var E=gx("ToggleGroupItem",d.__scopeToggleGroup);const Y=RB("ToggleGroupItem",d.__scopeToggleGroup),la=ex(d.__scopeToggleGroup);E=E.value.includes(d.value);const sa=Y.disabled||d.disabled;d=Id(me({},
d),{pressed:E,disabled:sa});const Ea=Ik.default.useRef(null);return Y.rovingFocus?Ik.default.createElement(tw,Uf({asChild:!0},la,{focusable:!sa,active:E,ref:Ea}),Ik.default.createElement(ix,Uf({},d,{ref:l}))):Ik.default.createElement(ix,Uf({},d,{ref:l}))}),ix=Ik.default.forwardRef((d,l)=>{const {__scopeToggleGroup:E,value:Y}=d,la=Wf(d,["__scopeToggleGroup","value"]),sa=gx("ToggleGroupItem",E);d={role:"radio","aria-checked":d.pressed,"aria-pressed":void 0};return Ik.default.createElement(cx,Uf({},
"single"===sa.type?d:void 0,la,{ref:l,onPressedChange:Ea=>{if(Ea)sa.onItemActivate(Y);else sa.onItemDeactivate(Y)}}))}),jx=NB,kx=SB;wb=S(611);wb=S(611);wb=S(611);var lx="Edit AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink IFrameSource LogseqPortalViewMode ArrowMode OpenPage".split(" "),TB=["Edit","YoutubeLink","IFrameSource","OpenPage"],on=new Map,mu={"logseq-portal":["Edit","LogseqPortalViewMode","ScaleLevel","OpenPage","AutoResizing"],youtube:["YoutubeLink"],iframe:["IFrameSource"],
box:["Swatch","NoFill","StrokeType"],ellipse:["Swatch","NoFill","StrokeType"],polygon:["Swatch","NoFill","StrokeType"],line:["Edit","Swatch","ArrowMode"],pencil:["Swatch"],highlighter:["Swatch"],text:["Edit","Swatch","ScaleLevel","AutoResizing","TextStyle"],html:["ScaleLevel","AutoResizing"]},UB=Object.entries(mu).filter(([,d])=>d.includes("NoFill")&&d.includes("Swatch")).map(([d])=>d),VB=We(()=>{const d=qf(),l=tc(d.selectedShapesArray,"Edit")[0];return(0,wb.jsx)($h,{type:"button",title:"Edit",onClick:()=>
{var E,Y,la,sa,Ea,Ua;d.api.editShape(l);if("logseq-portal"===l.props.type){let jb=l.props.pageId;"P"===l.props.blockType&&(jb=(null==(la=null==(Y=null==(E=window.logseq)?void 0:E.api)?void 0:Y.get_page_blocks_tree)?void 0:la.call(Y,l.props.pageId).find(sb=>!("propertiesOrder"in sb))).uuid);null==(Ua=null==(Ea=null==(sa=window.logseq)?void 0:sa.api)?void 0:Ea.edit_block)?void 0:Ua.call(Ea,jb)}},children:(0,wb.jsx)(mi,{name:"text"})})}),WB=We(()=>{const d=qf(),l=tc(d.selectedShapesArray,"AutoResizing"),
E=l.every(Y=>Y.props.isAutoResizing);return(0,wb.jsx)(Wb,{title:"Auto Resize",toggle:l.every(Y=>"logseq-portal"===Y.props.type),className:"tl-button",pressed:E,onPressedChange:Y=>{l.forEach(la=>{if("logseq-portal"===la.props.type)la.update({isAutoResizing:Y});else la.onResetBounds({zoom:d.viewport.camera.zoom})});d.persist()},children:(0,wb.jsx)(mi,{name:"dimensions"})})}),XB=We(()=>{const d=qf(),l=tc(d.selectedShapesArray,"LogseqPortalViewMode"),E=l.every(Y=>Y.collapsed);return(0,wb.jsx)(pb,{title:"View Mode",
options:[{value:"1",icon:"object-compact"},{value:"0",icon:"object-expanded"}],value:E?"1":"0",onValueChange:Y=>{l.forEach(la=>{la.setCollapsed("1"===Y?!0:!1)});d.persist()}})}),YB=We(()=>{const d=qf(),l=tc(d.selectedShapesArray,"ScaleLevel"),E=1<(new Set(l.map(Y=>Y.scaleLevel))).size?"":l[0].scaleLevel;return(0,wb.jsx)(Mb,{title:"Scale Level",options:[{label:"Extra Small",value:"xs"},{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"},{label:"Extra Large",value:"xl"},
{label:"Huge",value:"xxl"}],value:E,onValueChange:Y=>{l.forEach(la=>{la.setScaleLevel(Y)});d.persist()}})}),ZB=We(()=>{const {handlers:d}=Iq.default.useContext(Go);var l=qf();l=tc(l.selectedShapesArray,"OpenPage")[0];const {pageId:E,blockType:Y}=l.props;return(0,wb.jsxs)("span",{className:"flex gap-1",children:[(0,wb.jsx)($h,{title:"Open Page in Right Sidebar",type:"button",onClick:()=>null==d?void 0:d.sidebarAddBlock(E,"B"===Y?"block":"page"),children:(0,wb.jsx)(mi,{name:"layout-sidebar-right"})}),
(0,wb.jsx)($h,{title:"Open Page",type:"button",onClick:()=>null==d?void 0:d.redirectToPage(E),children:(0,wb.jsx)(mi,{name:"external-link"})})]})}),$B=We(()=>{const d=qf(),l=tc(d.selectedShapesArray,"IFrameSource")[0],E=Iq.default.useCallback(la=>{l.onIFrameSourceChange(la.target.value.trim().toLowerCase());d.persist()},[]),Y=Iq.default.useCallback(()=>{l.reload()},[]);return(0,wb.jsxs)("span",{className:"flex gap-3",children:[(0,wb.jsx)($h,{title:"Reload",type:"button",onClick:Y,children:(0,wb.jsx)(mi,
{name:"refresh"})}),(0,wb.jsx)(lu,{title:"Website Url",className:"tl-iframe-src",value:`${l.props.url}`,onChange:E}),(0,wb.jsx)($h,{title:"Open website url",type:"button",onClick:()=>window.open(l.props.url),children:(0,wb.jsx)(mi,{name:"external-link"})})]})}),aC=We(()=>{const d=qf(),l=tc(d.selectedShapesArray,"YoutubeLink")[0],E=Iq.default.useCallback(Y=>{l.onYoutubeLinkChange(Y.target.value);d.persist()},[]);return(0,wb.jsxs)("span",{className:"flex gap-3",children:[(0,wb.jsx)(lu,{title:"YouTube Link",
className:"tl-youtube-link",value:`${l.props.url}`,onChange:E}),(0,wb.jsx)($h,{title:"Open YouTube Link",type:"button",onClick:()=>{var Y,la,sa;return null==(sa=null==(la=null==(Y=window.logseq)?void 0:Y.api)?void 0:la.open_external_link)?void 0:sa.call(la,l.props.url)},children:(0,wb.jsx)(mi,{name:"external-link"})})]})}),bC=We(()=>{const d=qf(),l=tc(d.selectedShapesArray,"NoFill"),E=Iq.default.useCallback(la=>{l.forEach(sa=>sa.update({noFill:la}));d.persist()},[]),Y=l.every(la=>la.props.noFill);
return(0,wb.jsx)(Wb,{title:"Fill Toggle",className:"tl-button",pressed:Y,onPressedChange:E,children:Y?(0,wb.jsx)(mi,{name:"eye-off"}):(0,wb.jsx)(mi,{name:"eye"})})}),cC=We(()=>{const d=qf(),l=tc(d.selectedShapesArray,"Swatch"),E=Iq.default.useMemo(()=>{let Y="";return Af(la=>{l.forEach(sa=>{sa.update({fill:Y,stroke:Y})});d.persist()},100,la=>{Y=la.target.value})},[]);return(0,wb.jsx)(Zb,{title:"Color Picker",value:l[0].props.noFill?l[0].props.stroke:l[0].props.fill,onChange:E})}),dC=We(()=>{const d=
qf(),l=tc(d.selectedShapesArray,"StrokeType"),E=l.every(Y=>"dashed"===Y.props.strokeType)?"dashed":l.every(Y=>"line"===Y.props.strokeType)?"line":"mixed";return(0,wb.jsx)(pb,{title:"Stroke Type",options:[{value:"line",icon:"circle"},{value:"dashed",icon:"circle-dashed"}],value:E,onValueChange:Y=>{l.forEach(la=>{la.update({strokeType:Y})});d.persist()}})}),eC=We(()=>{const d=qf(),l=tc(d.selectedShapesArray,"ArrowMode");var E=l.every(la=>{var sa;return"arrow"===(null==(sa=la.props.decorations)?void 0:
sa.start)});const Y=l.every(la=>{var sa;return"arrow"===(null==(sa=la.props.decorations)?void 0:sa.end)});E=[E?"start":null,Y?"end":null].filter(zg);return(0,wb.jsx)(Jb,{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:E,onValueChange:la=>{l.forEach(sa=>{var Ea=sa.update;var Ua={start:la.includes("start")?"arrow":null,end:la.includes("end")?"arrow":null};Ea.call(sa,{decorations:Ua})});d.persist()}})}),fC=We(()=>{const d=qf(),l=tc(d.selectedShapesArray,
"TextStyle"),E=l.every(la=>500<la.props.fontWeight),Y=l.every(la=>la.props.italic);return(0,wb.jsxs)("span",{className:"flex gap-1",children:[(0,wb.jsx)(Wb,{title:"Bold",className:"tl-button",pressed:E,onPressedChange:la=>{l.forEach(sa=>{sa.update({fontWeight:la?700:400});sa.onResetBounds()});d.persist()},children:(0,wb.jsx)(mi,{name:"bold"})}),(0,wb.jsx)(Wb,{title:"Italic",className:"tl-button",pressed:Y,onPressedChange:la=>{l.forEach(sa=>{sa.update({italic:la});sa.onResetBounds()});d.persist()},
children:(0,wb.jsx)(mi,{name:"italic"})})]})});on.set("Edit",VB);on.set("AutoResizing",WB);on.set("LogseqPortalViewMode",XB);on.set("ScaleLevel",YB);on.set("OpenPage",ZB);on.set("YoutubeLink",aC);on.set("IFrameSource",$B);on.set("NoFill",bC);on.set("Swatch",cC);on.set("StrokeType",dC);on.set("ArrowMode",eC);on.set("TextStyle",fC);var mx=d=>{var l;return(null!=(l=mu[d])?l:[]).filter(zg)},gC=d=>{const l=d.map(Y=>Y.props.type),E=new Set(0<d.length?mx(l[0]):[]);for(let Y=1;Y<l.length&&0<E.size;Y++){const la=
mx(l[Y]);E.forEach(sa=>{la.includes(sa)||E.delete(sa)})}1<d.length&&TB.forEach(Y=>{E.has(Y)&&E.delete(Y)});return Array.from(E).sort((Y,la)=>lx.indexOf(Y)-lx.indexOf(la)).map(Y=>on.get(Y))};wb=S(611);var hC=We(({shapes:d,offsets:l,hidden:E})=>{const Y=qf(),la=Fr.useRef(null),sa=Fr.useRef(null);Fr.useLayoutEffect(()=>{setTimeout(()=>{const Ua=sa.current;if(Ua){var {offsetWidth:jb,offsetHeight:sb}=Ua;la.current=[jb,sb]}})});Fr.useLayoutEffect(()=>{var Ua;const jb=sa.current;if(jb){var sb=null!=(Ua=
la.current)?Ua:[0,0];Ua=Id(me({},l),{bottom:l.bottom-32});var Ub=0;if(116>Ua.top){var gc=Ua.height/2+72;140>Ua.bottom&&(gc+=Ua.bottom-140)}else gc=-(Ua.height/2+40);16>Ua.left+Ua.width/2-sb[0]/2?Ub+=-(Ua.left+Ua.width/2-sb[0]/2-16):16>Ua.right+Ua.width/2-sb[0]/2&&(Ub+=Ua.right+Ua.width/2-sb[0]/2-16);var [yc,Qc]=[Ub,gc];jb.style.setProperty("transform",`translateX(${yc}px) translateY(${Qc}px)`)}},[l]);if(!Y)return null;const Ea=gC(d);return(0,wb.jsx)(wo,{centered:!0,children:0<Ea.length&&(0,wb.jsx)("div",
{ref:sa,className:"tl-toolbar tl-context-bar",style:{visibility:E?"hidden":"visible",pointerEvents:E?"none":"all"},children:Ea.map((Ua,jb)=>(0,wb.jsxs)(Fr.Fragment,{children:[(0,wb.jsx)(Ua,{}),jb<Ea.length-1&&(0,wb.jsx)(Er,{className:"tl-toolbar-separator",orientation:"vertical"})]},jb))})})}),iC=ff(S(3)),nl=S(3),[jC]=Oi("ContextMenu",[Ls]),Ir=Ls(),[kC,nx]=jC("ContextMenu"),lC=(0,nl.forwardRef)((d,l)=>{var {__scopeContextMenu:E}=d;const Y=Wf(d,["__scopeContextMenu"]),la=nx("ContextMenuTrigger",E);
E=Ir(E);const sa=(0,nl.useRef)({x:0,y:0}),Ea=(0,nl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(me({width:0,height:0},sa.current))}),Ua=(0,nl.useRef)(0),jb=(0,nl.useCallback)(()=>window.clearTimeout(Ua.current),[]);(0,nl.useEffect)(()=>jb,[jb]);return(0,nl.createElement)(nl.Fragment,null,(0,nl.createElement)(Kw,Uf({},E,{virtualRef:Ea})),(0,nl.createElement)(Hk.span,Uf({"data-state":la.open?"open":"closed"},Y,{ref:l,style:me({WebkitTouchCallout:"none"},d.style),onContextMenu:Bg(d.onContextMenu,
sb=>{jb();sa.current={x:sb.clientX,y:sb.clientY};la.onOpenChange(!0);sb.preventDefault()}),onPointerDown:Bg(d.onPointerDown,Hc(sb=>{jb();Ua.current=window.setTimeout(()=>{sa.current={x:sb.clientX,y:sb.clientY};la.onOpenChange(!0)},700)})),onPointerMove:Bg(d.onPointerMove,Hc(jb)),onPointerCancel:Bg(d.onPointerCancel,Hc(jb)),onPointerUp:Bg(d.onPointerUp,Hc(jb))})))}),mC=(0,nl.forwardRef)((d,l)=>{var {__scopeContextMenu:E}=d;const Y=Wf(d,["__scopeContextMenu"]),la=nx("ContextMenuContent",E);E=Ir(E);
const sa=(0,nl.useRef)(!1);return(0,nl.createElement)(Mw,Uf({},E,Y,{ref:l,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:Ea=>{var Ua;null===(Ua=d.onCloseAutoFocus)||void 0===Ua||Ua.call(d,Ea);!Ea.defaultPrevented&&sa.current&&Ea.preventDefault();sa.current=!1},onInteractOutside:Ea=>{var Ua;null===(Ua=d.onInteractOutside)||void 0===Ua||Ua.call(d,Ea);Ea.defaultPrevented||la.modal||(sa.current=!0)},style:Id(me({},d.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
In=(0,nl.forwardRef)((d,l)=>{var {__scopeContextMenu:E}=d;d=Wf(d,["__scopeContextMenu"]);E=Ir(E);return(0,nl.createElement)(Ow,Uf({},E,d,{ref:l}))}),Jr=(0,nl.forwardRef)((d,l)=>{var {__scopeContextMenu:E}=d;d=Wf(d,["__scopeContextMenu"]);E=Ir(E);return(0,nl.createElement)(TA,Uf({},E,d,{ref:l}))}),nC=d=>{const {__scopeContextMenu:l,children:E,onOpenChange:Y,dir:la,modal:sa=!0}=d,[Ea,Ua]=(0,nl.useState)(!1);d=Ir(l);const jb=pj(Y),sb=(0,nl.useCallback)(Ub=>{Ua(Ub);jb(Ub)},[jb]);return(0,nl.createElement)(kC,
{scope:l,open:Ea,onOpenChange:sb,modal:sa},(0,nl.createElement)(Pw,Uf({},d,{dir:la,open:Ea,onOpenChange:sb,modal:sa}),E))};wb=S(611);var oC=We(function({children:d,collisionRef:l}){var E,Y,la,sa,Ea;const Ua=qf(),jb=iC.useRef(null),sb=Ub=>{Ub();Ua.transition("select")};return(0,wb.jsxs)(nC,{children:[(0,wb.jsx)(lC,{children:d}),(0,wb.jsx)(mC,{className:"tl-menu tl-context-menu",ref:jb,onEscapeKeyDown:()=>Ua.transition("select"),collisionBoundary:l.current,asChild:!0,tabIndex:-1,children:(0,wb.jsxs)("div",
{children:[1<(null==(E=Ua.selectedShapes)?void 0:E.size)&&(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsxs)(In,{children:[(0,wb.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,wb.jsx)($h,{title:"Align left",onClick:()=>sb(()=>Ua.align("left")),children:(0,wb.jsx)(mi,{name:"layout-align-left"})}),(0,wb.jsx)($h,{title:"Align center horizontally",onClick:()=>sb(()=>Ua.align("centerHorizontal")),children:(0,wb.jsx)(mi,{name:"layout-align-center"})}),(0,wb.jsx)($h,{title:"Align right",onClick:()=>
sb(()=>Ua.align("right")),children:(0,wb.jsx)(mi,{name:"layout-align-right"})}),(0,wb.jsx)(Er,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,wb.jsx)($h,{title:"Distribute horizontally",onClick:()=>sb(()=>Ua.distribute("horizontal")),children:(0,wb.jsx)(mi,{name:"layout-distribute-vertical"})})]}),(0,wb.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,wb.jsx)($h,{title:"Align top",onClick:()=>sb(()=>Ua.align("top")),children:(0,wb.jsx)(mi,{name:"layout-align-top"})}),(0,wb.jsx)($h,
{title:"Align center vertically",onClick:()=>sb(()=>Ua.align("centerVertical")),children:(0,wb.jsx)(mi,{name:"layout-align-middle"})}),(0,wb.jsx)($h,{title:"Align bottom",onClick:()=>sb(()=>Ua.align("bottom")),children:(0,wb.jsx)(mi,{name:"layout-align-bottom"})}),(0,wb.jsx)(Er,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,wb.jsx)($h,{title:"Distribute vertically",onClick:()=>sb(()=>Ua.distribute("vertical")),children:(0,wb.jsx)(mi,{name:"layout-distribute-horizontal"})})]})]}),(0,wb.jsx)(Jr,
{className:"menu-separator"}),(0,wb.jsxs)(In,{className:"tl-menu-item",onClick:()=>sb(Ua.packIntoRectangle),children:[(0,wb.jsx)(mi,{className:"tl-menu-icon",name:"layout-grid"}),"Pack into rectangle"]}),(0,wb.jsx)(Jr,{className:"menu-separator"})]}),0<(null==(Y=Ua.selectedShapes)?void 0:Y.size)&&(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsxs)(In,{className:"tl-menu-item",onClick:()=>sb(Ua.cut),children:[(0,wb.jsx)(mi,{className:"tl-menu-icon",name:"cut"}),"Cut",(0,wb.jsx)("div",{className:"tl-menu-right-slot",
children:(0,wb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,wb.jsx)("code",{children:Ip})," ",(0,wb.jsx)("code",{children:"X"})]})})]}),(0,wb.jsxs)(In,{className:"tl-menu-item",onClick:()=>sb(Ua.copy),children:[(0,wb.jsx)(mi,{className:"tl-menu-icon",name:"copy"}),"Copy",(0,wb.jsx)("div",{className:"tl-menu-right-slot",children:(0,wb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,wb.jsx)("code",{children:Ip})," ",(0,wb.jsx)("code",{children:"C"})]})})]})]}),(0,wb.jsxs)(In,{className:"tl-menu-item",
onClick:()=>sb(Ua.paste),children:[(0,wb.jsx)(mi,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,wb.jsx)("div",{className:"tl-menu-right-slot",children:(0,wb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,wb.jsx)("code",{children:Ip})," ",(0,wb.jsx)("code",{children:"V"})]})})]}),(0,wb.jsx)(Jr,{className:"menu-separator"}),(0,wb.jsxs)(In,{className:"tl-menu-item",onClick:()=>sb(Ua.api.selectAll),children:["Select all",(0,wb.jsx)("div",{className:"tl-menu-right-slot",children:(0,wb.jsxs)("span",
{className:"keyboard-shortcut",children:[(0,wb.jsx)("code",{children:Ip})," ",(0,wb.jsx)("code",{children:"A"})]})})]}),1<(null==(la=Ua.selectedShapes)?void 0:la.size)&&(0,wb.jsx)(In,{className:"tl-menu-item",onClick:()=>sb(Ua.api.deselectAll),children:"Deselect all"}),0<(null==(sa=Ua.selectedShapes)?void 0:sa.size)&&(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsxs)(In,{className:"tl-menu-item",onClick:()=>sb(Ua.api.deleteShapes),children:[(0,wb.jsx)(mi,{className:"tl-menu-icon",name:"backspace"}),"Delete",
(0,wb.jsx)("div",{className:"tl-menu-right-slot",children:(0,wb.jsx)("span",{className:"keyboard-shortcut",children:(0,wb.jsx)("code",{children:"Del"})})})]}),1<(null==(Ea=Ua.selectedShapes)?void 0:Ea.size)&&(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsx)(Jr,{className:"menu-separator"}),(0,wb.jsxs)(In,{className:"tl-menu-item",onClick:()=>sb(Ua.flipHorizontal),children:[(0,wb.jsx)(mi,{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,wb.jsxs)(In,{className:"tl-menu-item",
onClick:()=>sb(Ua.flipVertical),children:[(0,wb.jsx)(mi,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),(0,wb.jsx)(Jr,{className:"menu-separator"}),(0,wb.jsxs)(In,{className:"tl-menu-item",onClick:()=>sb(Ua.bringToFront),children:["Move to front",(0,wb.jsx)("div",{className:"tl-menu-right-slot",children:(0,wb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,wb.jsx)("code",{children:""})," ",(0,wb.jsx)("code",{children:"]"})]})})]}),(0,wb.jsxs)(In,{className:"tl-menu-item",
onClick:()=>sb(Ua.sendToBack),children:["Move to back",(0,wb.jsx)("div",{className:"tl-menu-right-slot",children:(0,wb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,wb.jsx)("code",{children:""})," ",(0,wb.jsx)("code",{children:"["})]})})]})]})]})})]})}),pC=ff(S(3)),ox=ff(S(3)),oo=function(d){function l(E){E=d.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+E+" for more information.")||this;if(void 0===E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return E}sd(l,d);return l}(Ed(Error)),px={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",
darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",
gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",
olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},qC=/^#[a-fA-F0-9]{6}$/,rC=/^#[a-fA-F0-9]{8}$/,sC=/^#[a-fA-F0-9]{3}$/,tC=/^#[a-fA-F0-9]{4}$/,nu=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,uC=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,
vC=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,wC=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,ou=function(d){return 7===d.length&&d[1]===d[2]&&d[3]===d[4]&&d[5]===d[6]?"#"+d[1]+d[3]+d[5]:d},xC=Pf(yi,yi.length,[]);wb=S(611);wb=S(611);var Qs=class extends hg{constructor(){super(...arguments);$a(this,"ReactComponent",We(({events:d,
isErasing:l,isBinding:E,isSelected:Y})=>{const {props:{size:[la,sa],stroke:Ea,fill:Ua,noFill:jb,strokeWidth:sb,strokeType:Ub,borderRadius:gc,opacity:yc}}=this;return(0,wb.jsxs)(Cn,Id(me({},d),{opacity:l?.2:yc,children:[E&&(0,wb.jsx)(Kg,{mode:"svg",strokeWidth:sb,size:[la,sa]}),(0,wb.jsx)("rect",{className:Y||!jb?"tl-hitarea-fill":"tl-hitarea-stroke",x:sb/2,y:sb/2,rx:gc,ry:gc,width:Math.max(.01,la-sb),height:Math.max(.01,sa-sb),pointerEvents:"all"}),(0,wb.jsx)("rect",{x:sb/2,y:sb/2,rx:gc,ry:gc,width:Math.max(.01,
la-sb),height:Math.max(.01,sa-sb),strokeWidth:sb,stroke:jb?Ua:Ea,strokeDasharray:"dashed"===Ub?"8 2":void 0,fill:jb?"none":Ua})]}))}));$a(this,"ReactIndicator",We(()=>{const {props:{size:[d,l],borderRadius:E}}=this;return(0,wb.jsx)("rect",{width:d,height:l,rx:E,ry:E,fill:"transparent"})}));$a(this,"validateProps",d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));void 0!==d.borderRadius&&(d.borderRadius=Math.max(0,d.borderRadius));return Gg(this,d)})}};$a(Qs,"id",
"box");$a(Qs,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"#000000",fill:"var(--ls-secondary-background-color)",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});wb=S(611);var pu=class extends Sj{constructor(){super(...arguments);$a(this,"ReactComponent",We(({events:d,isErasing:l})=>{const {radius:E,stroke:Y,fill:la,strokeWidth:sa,opacity:Ea}=this.props;return(0,wb.jsxs)(Cn,Id(me({},d),{opacity:l?.2:Ea,children:[(0,wb.jsx)("circle",{className:"tl-hitarea-fill",
cx:E,cy:E,r:E}),(0,wb.jsx)("circle",{cx:E,cy:E,r:E,stroke:Y,fill:la,strokeWidth:sa,pointerEvents:"none"})]}))}));$a(this,"ReactIndicator",We(()=>{const {radius:d}=this.props;return(0,wb.jsx)("circle",{cx:d,cy:d,r:d,pointerEvents:"all"})}));$a(this,"validateProps",d=>{void 0!==d.radius&&(d.radius=Math.max(d.radius,1));return Gg(this,d)})}};$a(pu,"id","dot");$a(pu,"defaultProps",{id:"dot",parentId:"page",type:"dot",point:[0,0],radius:4,stroke:"#000000",fill:"var(--ls-secondary-background-color)",noFill:!1,
strokeType:"line",strokeWidth:2,opacity:1});wb=S(611);var Rs=class extends Rj{constructor(){super(...arguments);$a(this,"ReactComponent",We(({isSelected:d,isErasing:l,events:E})=>{const {size:[Y,la],stroke:sa,fill:Ea,noFill:Ua,strokeWidth:jb,strokeType:sb,opacity:Ub}=this.props;return(0,wb.jsxs)(Cn,Id(me({},E),{opacity:l?.2:Ub,children:[(0,wb.jsx)("ellipse",{className:d||!Ua?"tl-hitarea-fill":"tl-hitarea-stroke",cx:Y/2,cy:la/2,rx:Math.max(.01,(Y-jb)/2),ry:Math.max(.01,(la-jb)/2)}),(0,wb.jsx)("ellipse",
{cx:Y/2,cy:la/2,rx:Math.max(.01,(Y-jb)/2),ry:Math.max(.01,(la-jb)/2),strokeWidth:jb,stroke:Ua?Ea:sa,strokeDasharray:"dashed"===sb?"8 2":void 0,fill:Ua?"none":Ea})]}))}));$a(this,"ReactIndicator",We(()=>{const {size:[d,l]}=this.props;return(0,wb.jsx)("ellipse",{cx:d/2,cy:l/2,rx:d/2,ry:l/2,strokeWidth:2,fill:"transparent"})}));$a(this,"validateProps",d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return Gg(this,d)})}getShapeSVGJsx(d){const {size:[l,E],stroke:Y,
fill:la,noFill:sa,strokeWidth:Ea,strokeType:Ua,opacity:jb}=this.props;return(0,wb.jsxs)("g",{opacity:jb,children:[(0,wb.jsx)("ellipse",{className:sa?"tl-hitarea-stroke":"tl-hitarea-fill",cx:l/2,cy:E/2,rx:Math.max(.01,(l-Ea)/2),ry:Math.max(.01,(E-Ea)/2)}),(0,wb.jsx)("ellipse",{cx:l/2,cy:E/2,rx:Math.max(.01,(l-Ea)/2),ry:Math.max(.01,(E-Ea)/2),strokeWidth:Ea,stroke:sa?la:Y,strokeDasharray:"dashed"===Ua?"8 2":void 0,fill:sa?"none":la})]})}};$a(Rs,"id","ellipse");$a(Rs,"defaultProps",{id:"ellipse",parentId:"page",
type:"ellipse",point:[0,0],size:[100,100],stroke:"#000000",fill:"var(--ls-secondary-background-color)",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});wb=S(611);var Kr=class extends Kh{constructor(d={}){super(d);$a(this,"ReactComponent",We(({events:l,isErasing:E})=>{const {pointsPath:Y,props:{stroke:la,strokeWidth:sa,opacity:Ea}}=this;return(0,wb.jsx)(Cn,Id(me({},l),{opacity:E?.2:Ea,children:(0,wb.jsx)("path",{d:Y,strokeWidth:16*sa,stroke:la,fill:"none",pointerEvents:"all",strokeLinejoin:"round",
strokeLinecap:"round",opacity:.5})}))}));$a(this,"ReactIndicator",We(()=>{const {pointsPath:l}=this;return(0,wb.jsx)("path",{d:l,fill:"none"})}));$a(this,"validateProps",l=>{l=Gg(this,l);void 0!==l.strokeWidth&&(l.strokeWidth=Math.max(l.strokeWidth,1));return l});vf(this)}get pointsPath(){const {points:d}=this.props;return mb.getCurvedPathForPoints(d)}getShapeSVGJsx(){const {pointsPath:d,props:{stroke:l,strokeWidth:E}}=this;return(0,wb.jsx)("path",{d,strokeWidth:16*E,stroke:l,fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:.5})}};$a(Kr,"id","highlighter");$a(Kr,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"#ffcc00",fill:"#ffcc00",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Xd([ng],Kr.prototype,"pointsPath",1);var qu=ff(S(3));wb=S(611);var ru={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},gp=class extends hg{constructor(){super(...arguments);$a(this,"canChangeAspectRatio",!0);$a(this,"canFlip",!1);$a(this,
"canEdit",!0);$a(this,"htmlAnchorRef",qu.createRef());$a(this,"setScaleLevel",d=>Rf(this,null,function*(){var l;const E=$d.mul(this.props.size,ru[null!=d?d:"md"]/ru[null!=(l=this.props.scaleLevel)?l:"md"]);this.update({scaleLevel:d});yield Yh();this.update({size:E})}));$a(this,"onResetBounds",d=>{var l;if(this.htmlAnchorRef.current){const E=this.htmlAnchorRef.current.getBoundingClientRect(),[Y,la]=$d.div([E.width,E.height],null!=(l=null==d?void 0:d.zoom)?l:1);this.update({size:[Math.max(Math.min(Y||
400,1400),10),Math.max(Math.min(la||400,1400),10)]})}return this});$a(this,"ReactComponent",We(({events:d,isErasing:l,isEditing:E})=>{const {props:{html:Y,scaleLevel:la}}=this,sa=Lg(),Ea=qf(),Ua=Ea.selectedIds.has(this.id),jb=sa||Ua&&!E||"select"!==Ea.selectedTool.id,sb=qu.useCallback(gc=>{jb||gc.stopPropagation()},[jb]),Ub=ru[null!=la?la:"md"];qu.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:Ea.viewport.camera.zoom}),Ea.persist(!0))},[]);return(0,wb.jsx)(wo,Id(me({style:{overflow:"hidden",
pointerEvents:"all",opacity:l?.2:1}},d),{children:(0,wb.jsx)("div",{onWheelCapture:sb,onPointerDown:sb,onPointerUp:sb,className:"tl-html-container",style:{pointerEvents:sa||!E&&!Ua?"none":"all",overflow:E?"auto":"hidden",width:`calc(100% / ${Ub})`,height:`calc(100% / ${Ub})`,transform:`scale(${Ub})`},children:(0,wb.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:Y.trim()}})})}))}));$a(this,"ReactIndicator",We(()=>{const {props:{size:[d,l]}}=this;return(0,wb.jsx)("rect",
{width:d,height:l,fill:"transparent"})}));$a(this,"validateProps",d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return Gg(this,d)})}get scaleLevel(){var d;return null!=(d=this.props.scaleLevel)?d:"md"}};$a(gp,"id","html");$a(gp,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});Xd([ng],gp.prototype,"scaleLevel",1);Xd([Vf],gp.prototype,"setScaleLevel",2);var yC=ff(S(3));wb=S(611);var Ss=class extends Dh{constructor(){super(...arguments);
$a(this,"ReactComponent",We(({events:d,isErasing:l,isBinding:E,asset:Y})=>{const {props:{opacity:la,objectFit:sa,clipping:Ea,size:[Ua,jb]}}=this,[sb,Ub,gc,yc]=Array.isArray(Ea)?Ea:[Ea,Ea,Ea,Ea],{handlers:Qc}=yC.useContext(Go);return(0,wb.jsxs)(wo,Id(me({},d),{opacity:l?.2:la,children:[E&&(0,wb.jsx)(Kg,{mode:"html",strokeWidth:4,size:[Ua,jb]}),(0,wb.jsx)("div",{style:{width:"100%",height:"100%",overflow:"hidden"},children:Y&&(0,wb.jsx)("img",{src:Qc?Qc.makeAssetUrl(Y.src):Y.src,draggable:!1,style:{position:"relative",
top:-sb,left:-yc,width:Ua+(yc-Ub),height:jb+(sb-gc),objectFit:sa,pointerEvents:"all"}})})]}))}));$a(this,"ReactIndicator",We(()=>{const {props:{size:[d,l]}}=this;return(0,wb.jsx)("rect",{width:d,height:l,fill:"transparent"})}))}getShapeSVGJsx({assets:d}){var l,E;const Y=this.getBounds(),{assetId:la,clipping:sa,size:[Ea,Ua]}=this.props;if(d=d.find(jb=>jb.id===la)){const [jb,sb,Ub,gc]=Array.isArray(sa)?sa:[sa,sa,sa,sa],yc=null==(E=null==(l=window.logseq)?void 0:l.api)?void 0:E.make_asset_url;return(0,wb.jsx)("foreignObject",
{width:Y.width,height:Y.height,children:(0,wb.jsx)("img",{src:yc?yc(d.src):d.src,draggable:!1,style:{position:"relative",top:-jb,left:-gc,width:Ea+(gc-sb),height:Ua+(jb-Ub),objectFit:this.props.objectFit,pointerEvents:"all"}})})}return super.getShapeSVGJsx({})}};$a(Ss,"id","image");$a(Ss,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var qx=ff(S(3));wb=S(611);var Ts=class extends hg{constructor(){super(...arguments);
$a(this,"canFlip",!1);$a(this,"canEdit",!0);$a(this,"canChangeAspectRatio",!1);$a(this,"ReactComponent",We(({events:d,isErasing:l,asset:E,isEditing:Y})=>{const {props:{opacity:la}}=this,sa=Lg();var Ea=qf();const Ua=Ea.selectedIds.has(this.id),jb=sa||Ua&&!Y||"select"!==Ea.selectedTool.id;Ea=qx.useCallback(Ub=>{jb||Ub.stopPropagation()},[jb]);const {handlers:sb}=qx.useContext(Go);return(0,wb.jsx)(wo,Id(me({style:{overflow:"hidden",pointerEvents:"all",opacity:l?.2:la}},d),{children:(0,wb.jsx)("div",
{onWheelCapture:Ea,onPointerDown:Ea,onPointerUp:Ea,className:"tl-video-container",style:{pointerEvents:sa||!Y&&!Ua?"none":"all",overflow:Y?"auto":"hidden"},children:E&&(0,wb.jsx)("video",{controls:!0,src:sb?sb.makeAssetUrl(E.src):E.src})})}))}));$a(this,"ReactIndicator",We(()=>{const {props:{size:[d,l]}}=this;return(0,wb.jsx)("rect",{width:d,height:l,fill:"transparent"})}))}};$a(Ts,"id","video");$a(Ts,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",
clipping:0,isAspectRatioLocked:!0});var rx=ff(S(3));wb=S(611);var $p=class extends hg{constructor(){super(...arguments);$a(this,"frameRef",rx.createRef());$a(this,"canEdit",!0);$a(this,"onIFrameSourceChange",d=>{this.update({url:d})});$a(this,"reload",()=>{var d,l;this.frameRef.current&&(this.frameRef.current.src=null==(l=null==(d=this.frameRef)?void 0:d.current)?void 0:l.src)});$a(this,"ReactComponent",We(({events:d,isErasing:l,isEditing:E})=>{rx.useRef(null);return(0,wb.jsx)(wo,Id(me({style:{overflow:"hidden",
pointerEvents:"all",opacity:l?.2:1}},d),{children:(0,wb.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:E?"all":"none",userSelect:"none"},children:this.props.url&&(0,wb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,wb.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts"})})})}))}));$a(this,"ReactIndicator",We(()=>{const {props:{size:[d,
l]}}=this;return(0,wb.jsx)("rect",{width:d,height:l,fill:"transparent",rx:8,ry:8})}))}};$a($p,"id","iframe");$a($p,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});Xd([Vf],$p.prototype,"onIFrameSourceChange",2);Xd([Vf],$p.prototype,"reload",2);var su=ff(S(3)),zC=ff(S(3));wb=S(611);wb=S(611);var AC=zC.memo(function({style:d,start:l,end:E,decorationStart:Y,decorationEnd:la}){var sa=$d.dist(l,E);if(2>sa)return null;const {strokeWidth:Ea}=d,Ua=1+1.618*Ea,jb=
"M"+$d.toFixed(l)+"L"+$d.toFixed(E);sa=Math.min(sa/3,16*Ea);Y=Y?tg(l,E,sa):null;la=la?tg(E,l,sa):null;return(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsx)("path",{className:"tl-stroke-hitarea",d:jb}),(0,wb.jsx)("path",{d:jb,strokeWidth:Ua,stroke:d.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===d.strokeType?"8 4":void 0,pointerEvents:"stroke"}),Y&&(0,wb.jsx)(bh,{left:Y.left,middle:l,right:Y.right,stroke:d.stroke,strokeWidth:Ua}),la&&(0,wb.jsx)(bh,{left:la.left,middle:E,
right:la.right,stroke:d.stroke,strokeWidth:Ua})]})});wb=S(611);var Xn=ff(S(3)),pn=class{static insertTextFirefox(d,l){d.setRangeText(l,d.selectionStart||0,d.selectionEnd||0,"end");d.dispatchEvent(new InputEvent("input",{data:l,inputType:"insertText",isComposing:!1}))}static insert(d,l){const E=d.ownerDocument,Y=E.activeElement;Y!==d&&d.focus();E.execCommand("insertText",!1,l)||pn.insertTextFirefox(d,l);Y===E.body?d.blur():Y instanceof HTMLElement&&Y!==d&&Y.focus()}static set(d,l){d.select();pn.insert(d,
l)}static getSelection(d){const {selectionStart:l,selectionEnd:E}=d;return d.value.slice(l?l:void 0,E?E:void 0)}static wrapSelection(d,l,E){const {selectionStart:Y,selectionEnd:la}=d,sa=pn.getSelection(d);pn.insert(d,l+sa+(null!=E?E:l));d.selectionStart=(Y||0)+l.length;d.selectionEnd=(la||0)+l.length}static replace(d,l,E){let Y=0;d.value.replace(l,(...la)=>{const sa=Y+la[la.length-2],Ea=la[0].length;d.selectionStart=sa;d.selectionEnd=sa+Ea;la="string"===typeof E?E:E(...la);pn.insert(d,la);d.selectionStart=
sa;Y+=la.length-Ea;return la})}static findLineEnd(d,l){const E=d.lastIndexOf("\n",l-1)+1;return"\t"!==d.charAt(E)?l:E+1}static indent(d){var l;const {selectionStart:E,selectionEnd:Y,value:la}=d;var sa=la.slice(E,Y);if((sa=null==(l=/\n/g.exec(sa))?void 0:l.length)&&0<sa){l=la.lastIndexOf("\n",E-1)+1;var Ea=d.value.slice(l,Y-1);sa=Ea.replace(/^|\n/g,"$\x26  ");Ea=sa.length-Ea.length;d.setSelectionRange(l,Y-1);pn.insert(d,sa);d.setSelectionRange(E+1,Y+Ea)}else pn.insert(d,"  ")}static unindent(d){const {selectionStart:l,
selectionEnd:E,value:Y}=d;var la=Y.lastIndexOf("\n",l-1)+1;const sa=pn.findLineEnd(Y,E);var Ea=d.value.slice(la,sa);const Ua=Ea.replace(/(^|\n)(\t| {1,2})/g,"$1");Ea=Ea.length-Ua.length;d.setSelectionRange(la,sa);pn.insert(d,Ua);la=(la=/\t| {1,2}/.exec(Y.slice(la,l)))?la[0].length:0;d.setSelectionRange(l-la,Math.max(l-la,E-Ea))}};wb=S(611);var Us=d=>d.stopPropagation(),BC=Xn.memo(function({font:d,text:l,color:E,offsetX:Y=0,offsetY:la=0,scale:sa=1,isEditing:Ea=!1,onBlur:Ua,onChange:jb}){const sb=Xn.useRef(null),
Ub=Xn.useRef(!1),gc=Xn.useCallback(vc=>{jb(oh.normalizeText(vc.currentTarget.value))},[jb]),yc=Xn.useCallback(vc=>{if("Escape"!==vc.key)if("Tab"===vc.key&&0===l.length)vc.preventDefault();else{if("Meta"!==vc.key&&!vc.metaKey)vc.stopPropagation();else if("z"===vc.key&&vc.metaKey){vc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);vc.stopPropagation();vc.preventDefault();return}"Tab"===vc.key&&(vc.preventDefault(),vc.shiftKey?pn.unindent(vc.currentTarget):pn.indent(vc.currentTarget),
null==jb?void 0:jb(oh.normalizeText(vc.currentTarget.value)))}},[jb]),Qc=Xn.useCallback(vc=>{Ea&&(vc.currentTarget.setSelectionRange(0,0),null==Ua?void 0:Ua())},[Ua]),Jc=Xn.useCallback(vc=>{Ea&&Ub.current&&document.activeElement===vc.currentTarget&&vc.currentTarget.select()},[Ea]),kd=Xn.useCallback(vc=>{Ea&&vc.stopPropagation()},[Ea]);Xn.useEffect(()=>{Ea&&requestAnimationFrame(()=>{Ub.current=!0;const vc=sb.current;vc&&(vc.focus(),vc.select())})},[Ea,Ua]);const ad=Xn.useRef(null);Xn.useLayoutEffect(()=>
{const vc=ad.current;if(vc){var md=Cf(l,d,4);vc.style.transform=`scale(${sa}, ${sa}) translate(${Y}px, ${la}px)`;vc.style.width=md[0]+1+"px";vc.style.height=md[1]+1+"px"}},[l,d,la,Y,sa]);return(0,wb.jsx)("div",{className:"tl-text-label-wrapper",children:(0,wb.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:ad,style:{font:d,color:E,pointerEvents:l?"all":"none",userSelect:Ea?"text":"none"},children:[Ea?(0,wb.jsx)("textarea",{ref:sb,style:{font:d,color:E},className:"tl-text-label-textarea",
name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:l,color:E,onFocus:Jc,onChange:gc,onKeyDown:yc,onBlur:Qc,onPointerDown:kd,onContextMenu:Us,onCopy:Us,onPaste:Us,onCut:Us}):l,""]})})});wb=S(611);var Vs=class extends Qn{constructor(){super(...arguments);$a(this,"hideSelection",!0);$a(this,"canEdit",!0);$a(this,"ReactComponent",We(({events:d,isErasing:l,
isEditing:E,onEditingEnd:Y})=>{const {stroke:la,handles:{start:sa,end:Ea},opacity:Ua,label:jb,id:sb}=this.props,Ub=jb||E?Cf(jb,"18px / 1 var(--ls-font-family)",4):[0,0],gc=$d.med(sa.point,Ea.point);var yc=$d.dist(sa.point,Ea.point);yc=Math.max(.5,Math.min(1,Math.max(yc/(Ub[1]+128),yc/(Ub[0]+128))));const Qc=this.getBounds(),Jc=su.useMemo(()=>$d.sub(gc,$d.toFixed([Qc.width/2,Qc.height/2])),[Qc,yc,gc]),kd=su.useCallback(ad=>{var vc;null==(vc=this.update)?void 0:vc.call(this,{label:ad})},[jb]);return(0,wb.jsxs)("div",
Id(me({},d),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,wb.jsx)(BC,{font:"18px / 1 var(--ls-font-family)",text:jb,color:la,offsetX:Jc[0],offsetY:Jc[1],scale:yc,isEditing:E,onChange:kd,onBlur:Y}),(0,wb.jsxs)(Cn,{opacity:l?.2:Ua,id:sb+"_svg",children:[(0,wb.jsx)(Hf,{id:sb,bounds:Qc,labelSize:Ub,offset:Jc,scale:yc}),(0,wb.jsx)("g",{pointerEvents:"none",mask:jb||E?`url(#${sb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));$a(this,"ReactIndicator",We(()=>{const {id:d,
decorations:l,label:E,strokeWidth:Y,handles:{start:la,end:sa}}=this.props,Ea=this.getBounds(),Ua=E?Cf(E,"18px / 1 var(--ls-font-family)",4):[0,0],jb=$d.med(la.point,sa.point);var sb=$d.dist(la.point,sa.point);sb=Math.max(.5,Math.min(1,Math.max(sb/(Ua[1]+128),sb/(Ua[0]+128))));const Ub=su.useMemo(()=>$d.sub(jb,$d.toFixed([Ea.width/2,Ea.height/2])),[Ea,sb,jb]);return(0,wb.jsxs)("g",{children:[(0,wb.jsx)(Hf,{id:d,bounds:Ea,labelSize:Ua,offset:Ub,scale:sb}),(0,wb.jsx)("path",{mask:E?`url(#${d}_clip)`:
"",d:Yg({strokeWidth:Y},la.point,sa.point,null==l?void 0:l.start,null==l?void 0:l.end)}),E&&(0,wb.jsx)("rect",{x:Ea.width/2-Ua[0]/2*sb+Ub[0],y:Ea.height/2-Ua[1]/2*sb+Ub[1],width:Ua[0]*sb,height:Ua[1]*sb,rx:4*sb,ry:4*sb,fill:"transparent"})]})}));$a(this,"validateProps",d=>Gg(this,d))}getShapeSVGJsx({preview:d}){const {stroke:l,fill:E,strokeWidth:Y,strokeType:la,decorations:sa,label:Ea,handles:{start:Ua,end:jb}}=this.props,sb=$d.med(Ua.point,jb.point);return(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsx)(AC,
{style:{stroke:l,fill:E,strokeWidth:Y,strokeType:la},start:Ua.point,end:jb.point,decorationStart:null==sa?void 0:sa.start,decorationEnd:null==sa?void 0:sa.end}),d&&(0,wb.jsx)(wb.Fragment,{children:(0,wb.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${sb[0]}, ${sb[1]})`,textAnchor:"middle",stroke:l,fill:l,children:Ea})})]})}};$a(Vs,"id","line");$a(Vs,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,
point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"var(--ls-primary-text-color, #000)",fill:"var(--ls-secondary-background-color)",noFill:!0,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});var ti=ff(S(3));wb=S(611);var Lr={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},aq=({type:d,active:l})=>(0,wb.jsx)("span",{className:"tl-type-tag","data-active":l,children:(0,wb.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BS:"block-search",PS:"page-search"})[d]}`})}),
CC=We(({children:d})=>(0,wb.jsx)("div",{className:"tl-logseq-portal-header",children:d})),sx=(d,l)=>(0,wb.jsx)("span",{children:d.split(new RegExp(`(${l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((E,Y)=>1===Y%2?(0,wb.jsx)("mark",{className:"tl-highlighted",children:E}):E).map((E,Y)=>(0,wb.jsx)(ti.Fragment,{children:E},Y))}),DC=(d,l)=>{const {handlers:E}=ti.useContext(Go),[Y,la]=ti.useState(null),sa=Mi(d,200);ti.useEffect(()=>{let Ea=!1;if(0<sa.length){const Ua={"pages?":!0,"blocks?":!0,
"files?":!1};"B"===l?Ua["pages?"]=!1:"P"===l&&(Ua["blocks?"]=!1);E.search(sa,Ua).then(jb=>{Ea||la(jb)})}else la(null);return()=>{Ea=!0}},[sa,null==E?void 0:E.search]);return Y},tx=({active:d,style:l,icon:E,otherIcon:Y,onClick:la})=>{const [sa,Ea]=ti.useState(!1);ti.useEffect(()=>{Ea(!0);const Ua=setTimeout(()=>{Ea(!1)},500);return()=>clearTimeout(Ua)},[d]);return(0,wb.jsx)("div",{"data-active":d,"data-recently-changed":sa,style:l,className:"tl-circle-button",onMouseDown:la,children:(0,wb.jsxs)("div",
{className:"tl-circle-button-icons-wrapper","data-icons-count":Y?2:1,children:[Y&&(0,wb.jsx)(mi,{name:Y}),(0,wb.jsx)(mi,{name:E})]})})},bq=class extends hg{constructor(d={}){var l;super(d);$a(this,"hideRotateHandle",!0);$a(this,"canChangeAspectRatio",!0);$a(this,"canFlip",!0);$a(this,"canEdit",!0);$a(this,"persist",null);$a(this,"initialHeightCalculated",!0);$a(this,"getInnerHeight",null);$a(this,"setCollapsed",E=>Rf(this,null,function*(){var Y;"B"===this.props.blockType?(this.update({compact:E}),
this.canResize[1]=!E,E||(yield Yh(),this.onResetBounds()),null==(Y=this.persist)?void 0:Y.call(this)):(Y=this.props.size[1],this.canResize[1]=!E,console.log(E,E?this.getHeaderHeight():this.props.collapsedHeight,this.getHeaderHeight(),this.props.collapsedHeight),this.update({isAutoResizing:!E,collapsed:E,size:[this.props.size[0],E?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:E?Y:this.props.collapsedHeight}))}));$a(this,"setScaleLevel",E=>Rf(this,null,function*(){var Y;const la=
$d.mul(this.props.size,Lr[null!=E?E:"md"]/Lr[null!=(Y=this.props.scaleLevel)?Y:"md"]);this.update({scaleLevel:E});yield Yh();this.update({size:la})}));$a(this,"onResetBounds",E=>{E=this.getAutoResizeHeight();null!==E&&1<Math.abs(E-this.props.size[1])&&(this.update({size:[this.props.size[0],E]}),this.initialHeightCalculated=!0);return this});$a(this,"onResize",(E,Y)=>{var la;const {bounds:sa,rotation:Ea,scale:[Ua,jb]}=Y;E=[...this.scale];0>Ua&&(E[0]*=-1);0>jb&&(E[1]*=-1);Y=sa.height;this.props.isAutoResizing&&
(Y=null!=(la=this.getAutoResizeHeight())?la:Y);return this.update({point:[sa.minX,sa.minY],size:[Math.max(1,sa.width),Math.max(1,Y)],scale:E,rotation:Ea})});$a(this,"LogseqQuickSearch",We(({onChange:E})=>{const [Y,la]=ti.useState(bq.defaultSearchQuery),[sa,Ea]=ti.useState(bq.defaultSearchFilter),Ua=ti.useRef(null),{handlers:jb,renderers:sb}=ti.useContext(Go),Ub=qf(),gc=ti.useCallback(qd=>{var Bd;E(qd);null==(Bd=Ua.current)?void 0:Bd.blur();qd&&(bq.defaultSearchQuery="",bq.defaultSearchFilter=null)},
[]),yc=ti.useCallback(qd=>{const Bd=null==jb?void 0:jb.addNewBlock(qd);Bd&&(gc(Bd),setTimeout(()=>{var Fe,ce,Ge;Ub.api.editShape(this);null==(Ge=null==(ce=null==(Fe=window.logseq)?void 0:Fe.api)?void 0:ce.edit_block)?void 0:Ge.call(ce,Bd)}));return Bd},[]),Qc=ti.useRef(null),[Jc,kd]=ti.useState(0),ad=DC(Y,sa),[vc,md]=ti.useState("circle-plus");ti.useEffect(()=>{setTimeout(()=>{var qd;null==(qd=Ua.current)?void 0:qd.focus()})},[sa]);ti.useEffect(()=>{bq.defaultSearchQuery=Y;bq.defaultSearchFilter=
sa},[Y,sa]);const Ad=ti.useMemo(()=>{var qd;const Bd=[],Fe=null==sb?void 0:sb.Breadcrumb;if(!Fe||!jb)return[];Bd.push({actionIcon:"circle-plus",onChosen:()=>!!yc(Y),element:(0,wb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,wb.jsx)(aq,{active:!0,type:"B"}),0<Y.length?(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsx)("strong",{children:"New whiteboard block:"}),Y]}):(0,wb.jsx)("strong",{children:"New whiteboard block"})]})});(null==(qd=null==ad?void 0:ad.pages)?0:qd.some(ce=>ce.toLowerCase()===
Y.toLowerCase()))||!Y||Bd.push({actionIcon:"circle-plus",onChosen:()=>{gc(Y);return!0},element:(0,wb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,wb.jsx)(aq,{active:!0,type:"P"}),(0,wb.jsx)("strong",{children:"New page:"}),Y]})});0===Y.length&&null===sa&&Bd.push({actionIcon:"search",onChosen:()=>{Ea("B");return!0},element:(0,wb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,wb.jsx)(aq,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{Ea("P");
return!0},element:(0,wb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,wb.jsx)(aq,{type:"PS"}),"Search only pages"]})});sa&&"P"!==sa||!ad||!ad.pages||Bd.push(...ad.pages.map(ce=>({actionIcon:"search",onChosen:()=>{gc(ce);return!0},element:(0,wb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,wb.jsx)(aq,{type:jb.isWhiteboardPage(ce)?"WP":"P"}),sx(ce,Y)]})})));sa&&"B"!==sa||!ad||!ad.blocks||Bd.push(...ad.blocks.filter(ce=>ce.content&&ce.uuid).map(({content:ce,uuid:Ge})=>
{const Bf=jb.queryBlockByUUID(Ge);return{actionIcon:"search",onChosen:()=>{var bf,ze,Ae;return Bf?(gc(Ge),null==(Ae=null==(ze=null==(bf=window.logseq)?void 0:bf.api)?void 0:ze.set_blocks_id)?void 0:Ae.call(ze,[Ge]),!0):!1},element:Bf?(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,wb.jsx)(aq,{type:"B"}),(0,wb.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,wb.jsx)(Fe,{blockId:Ge})})]}),(0,wb.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,wb.jsx)("div",{className:"tl-quick-search-option-placeholder"}),sx(ce,Y)]})]}):(0,wb.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));return Bd},[Y,sa,ad,null==sb?void 0:sb.Breadcrumb,jb]);ti.useEffect(()=>{const qd=Bd=>{var Fe,ce;let Ge=Jc;"ArrowDown"===Bd.key?Ge=Math.min(Ad.length-1,Jc+1):"ArrowUp"===Bd.key?Ge=Math.max(0,Jc-1):"Enter"===Bd.key?(null==(Fe=Ad[Jc])?void 0:Fe.onChosen(),
Bd.stopPropagation(),Bd.preventDefault()):"Backspace"===Bd.key&&0===Y.length?Ea(null):"Escape"===Bd.key&&gc("");Ge!==Jc&&(Fe=Ad[Ge],kd(Ge),md(Fe.actionIcon),Bd.stopPropagation(),Bd.preventDefault(),(Bd=null==(ce=Qc.current)?void 0:ce.querySelector(".tl-quick-search-option:nth-child("+(Ge+1)+")"))&&(null==Bd?void 0:Bd.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",qd,!0);return()=>{document.removeEventListener("keydown",qd,!0)}},[Ad,Jc,Y]);return(0,wb.jsxs)("div",{className:"tl-quick-search",
children:[(0,wb.jsx)(tx,{icon:vc,onClick:()=>{var qd;null==(qd=Ad[Jc])?void 0:qd.onChosen()}}),(0,wb.jsxs)("div",{className:"tl-quick-search-input-container",children:[sa&&(0,wb.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,wb.jsx)(aq,{type:sa}),"B"===sa?"Search blocks":"Search pages",(0,wb.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>Ea(null),children:(0,wb.jsx)(mi,{name:"x"})})]}),(0,wb.jsx)(lu,{ref:Ua,type:"text",value:Y,className:"tl-quick-search-input",
placeholder:"Create or search your graph...",onChange:qd=>la(qd.target.value),onKeyDown:qd=>{"Enter"===qd.key&&gc(Y)}})]}),(0,wb.jsx)("div",{className:"tl-quick-search-options",ref:Qc,children:Ad.map(({actionIcon:qd,onChosen:Bd,element:Fe},ce)=>(0,wb.jsx)("div",{"data-focused":ce===Jc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{md(qd);kd(ce)},onMouseDownCapture:Ge=>{Bd()&&(Ge.stopPropagation(),Ge.preventDefault())},children:Fe},ce))})]})}));$a(this,"PortalComponent",We(({})=>{const {props:{pageId:E}}=
this,{renderers:Y}=ti.useContext(Go),la=qf(),sa=ti.useRef(null),[,Ea]=this.useComponentSize(sa,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==Y||!Y.Page)return null;const {Page:Ua,Block:jb}=Y;ti.useEffect(()=>{var sb,Ub;if(this.props.isAutoResizing){const gc=(null!=(Ub=null==(sb=this.getInnerHeight)?void 0:sb.call(this))?Ub:Ea)+this.getHeaderHeight();Ea&&1<Math.abs(gc-this.props.size[1])&&(this.update({size:[this.props.size[0],gc]}),
la.persist(!0))}},[Ea,this.props.isAutoResizing]);ti.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();la.persist(!0)})},[this.initialHeightCalculated]);return(0,wb.jsx)("div",{ref:sa,className:"tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:"B"===this.props.blockType&&this.props.compact?(0,wb.jsx)(jb,{blockId:E}):(0,wb.jsx)(Ua,{pageName:E})})}));$a(this,"ReactComponent",We(E=>{var Y;const {events:la,isErasing:sa,isEditing:Ea,
isBinding:Ua}=E,{props:{opacity:jb,pageId:sb,stroke:Ub,fill:gc,scaleLevel:yc,strokeWidth:Qc,size:Jc}}=this,kd=qf(),{renderers:ad,handlers:vc}=ti.useContext(Go);this.persist=()=>kd.persist();const md=Lg(),Ad=kd.selectedIds.has(this.id)&&1===kd.selectedIds.size,qd=kd.isIn("logseq-portal.creating")&&!sb,Bd=(md||Ad&&!Ea||"select"!==kd.selectedTool.id)&&!qd,Fe=ti.useCallback(vd=>{Bd||vd.stopPropagation()},[Bd]),ce=1===kd.selectedShapesArray.length&&kd.selectedShapesArray.some(vd=>"logseq-portal"===vd.type&&
vd.props.id!==this.props.id&&sb&&vd.props.pageId===sb),Ge=Lr[null!=yc?yc:"md"];ti.useEffect(()=>this.props.collapsed&&Ea?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[Ea,this.props.collapsed]);const Bf=ti.useCallback(vd=>{this.initialHeightCalculated=!1;const Td=ag(vd)?"B":"P";this.update({pageId:vd,size:[400,320],blockType:Td,compact:"B"===Td});kd.selectTool("select");kd.history.resume();kd.history.persist()},
[]),bf=this.PortalComponent,ze=this.LogseqQuickSearch;var Ae=ti.useMemo(()=>{var vd;if(sb&&"B"===this.props.blockType)return null==(vd=null==vc?void 0:vc.queryBlockByUUID(sb))?void 0:vd.content},[null==vc?void 0:vc.queryBlockByUUID,sb]);Ae="B"===this.props.blockType&&"string"!==typeof Ae;const be=(!this.props.collapsed||Ea)&&!Ae;if(null==ad||!ad.Page)return null;const {Breadcrumb:rd,PageNameLink:Qd}=ad;return(0,wb.jsxs)(wo,Id(me({style:{pointerEvents:"all",opacity:sa?.2:jb}},la),{children:[Ua&&(0,wb.jsx)(Kg,
{mode:"html",strokeWidth:Qc,size:Jc}),(0,wb.jsx)("div",{onWheelCapture:Fe,onPointerDown:Fe,onPointerUp:Fe,style:{width:"100%",height:"100%",pointerEvents:md||!Ea&&!Ad?"none":"all"},children:qd?(0,wb.jsx)(ze,{onChange:Bf}):(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":sb,"data-portal-selected":ce,"data-editing":Ea,style:{background:this.props.compact?"transparent":gc,color:Ub,width:`calc(100% / ${Ge})`,height:`calc(100% / ${Ge})`,
transform:`scale(${Ge})`,"--ls-primary-background-color":(null==gc?0:gc.startsWith("var"))?void 0:gc,"--ls-primary-text-color":(null==Ub?0:Ub.startsWith("var"))?void 0:Ub,"--ls-title-text-color":(null==Ub?0:Ub.startsWith("var"))?void 0:Ub},children:[!this.props.compact&&!Ae&&(0,wb.jsx)(CC,{type:null!=(Y=this.props.blockType)?Y:"P",children:"P"===this.props.blockType?(0,wb.jsx)(Qd,{pageName:sb}):(0,wb.jsx)(rd,{blockId:sb})}),Ae&&(0,wb.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),
be&&(0,wb.jsx)(bf,me({},E))]}),(0,wb.jsx)(tx,{active:!!this.collapsed,style:{opacity:Ad?1:0},icon:"B"===this.props.blockType?"block":"page",onClick:()=>this.setCollapsed(!this.collapsed),otherIcon:"whiteboard-element"})]})})]}))}));$a(this,"ReactIndicator",We(()=>{const E=this.getBounds();return 1===qf().selectedShapesArray.length?null:(0,wb.jsx)("rect",{width:E.width,height:E.height,fill:"transparent",rx:8,ry:8})}));$a(this,"validateProps",E=>{var Y;if(void 0!==E.size){const la=Lr[null!=(Y=this.props.scaleLevel)?
Y:"md"];E.size[0]=Math.max(E.size[0],240*la);E.size[1]=Math.max(E.size[1],40*la)}return Gg(this,E)});vf(this);d.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(l=d.size)?void 0:l[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(d){return d?/^\(\(.*\)\)$/.test(d)&&40===d.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var d;return null!=(d=this.props.scaleLevel)?d:"md"}useComponentSize(d,l=""){const [E,
Y]=ti.useState([0,0]),la=qf();ti.useEffect(()=>{if(null==d?0:d.current){const sa=l?d.current.querySelector(l):d.current;if(sa){const Ea=()=>{const {width:jb,height:sb}=sa.getBoundingClientRect(),Ub=$d.div([jb,sb],la.viewport.camera.zoom);Y(Ub);return Ub};Ea();this.getInnerHeight=()=>Ea()[1];const Ua=new ResizeObserver(()=>{Ea()});Ua.observe(sa);return()=>{Ua.disconnect()}}}return()=>{}},[d,l]);return E}getHeaderHeight(){var d;const l=Lr[null!=(d=this.props.scaleLevel)?d:"md"];return this.props.compact?
0:40*l}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var d,l;const E=this.getBounds();return(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsx)("rect",{fill:this.props.fill,stroke:this.props.stroke,strokeWidth:null!=(d=this.props.strokeWidth)?d:2,fillOpacity:null!=(l=this.props.opacity)?l:.2,width:E.width,rx:8,ry:8,height:E.height}),!this.props.compact&&(0,wb.jsx)("rect",{fill:"#aaa",x:1,y:1,width:E.width-2,height:38,rx:8,ry:8}),(0,wb.jsx)("text",
{style:{transformOrigin:"top left"},transform:`translate(${E.width/2}, ${10+E.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:this.props.stroke,stroke:this.props.stroke,children:"P"===this.props.blockType?this.props.pageId:""})]})}},sm=bq;$a(sm,"id","logseq-portal");$a(sm,"defaultSearchQuery","");$a(sm,"defaultSearchFilter",null);$a(sm,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"var(--ls-primary-text-color)",
fill:"var(--ls-secondary-background-color)",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});Xd([ng],sm.prototype,"collapsed",1);Xd([Vf],sm.prototype,"setCollapsed",2);Xd([ng],sm.prototype,"scaleLevel",1);Xd([Vf],sm.prototype,"setScaleLevel",2);var {min:Lq,PI:EC}=Math,Mr=EC+1E-4;wb=S(611);var FC={easing:d=>Math.sin(d*Math.PI/2),simulatePressure:!0},GC={easing:d=>d*d,simulatePressure:!1},Nr=class extends Kh{constructor(d=
{}){super(d);$a(this,"ReactComponent",We(({events:l,isErasing:E})=>{const {props:{opacity:Y}}=this;return(0,wb.jsx)(Cn,Id(me({},l),{opacity:E?.2:Y,children:this.getShapeSVGJsx()}))}));$a(this,"ReactIndicator",We(()=>{const {pointsPath:l}=this;return(0,wb.jsx)("path",{d:l})}));$a(this,"validateProps",l=>{l=Gg(this,l);void 0!==l.strokeWidth&&(l.strokeWidth=Math.max(l.strokeWidth,1));return l});vf(this)}get pointsPath(){var d=this.props;if(2>d.points.length)var l="";else l=Id(me({size:1+1.5*d.strokeWidth,
thinning:.65,streamline:.65,smoothing:.65},.5===d.points[1][2]?FC:GC),{last:d.isComplete}),d=Kk(d.points,l),l=mb.getSvgPathFromStroke(Dl(d,l));return l}getShapeSVGJsx(){const {pointsPath:d,props:{stroke:l,strokeWidth:E,strokeType:Y}}=this;return(0,wb.jsx)("path",{pointerEvents:"none",d,strokeWidth:E/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:l,fill:l,strokeDasharray:"dashed"===Y?"12 4":void 0})}};$a(Nr,"id","pencil");$a(Nr,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,
0],points:[],isComplete:!1,stroke:"var(--tl-foreground, #000)",fill:"var(--tl-foreground, #000)",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Xd([ng],Nr.prototype,"pointsPath",1);wb=S(611);var Ws=class extends Em{constructor(){super(...arguments);$a(this,"ReactComponent",We(({events:d,isErasing:l,isSelected:E})=>{const {offset:[Y,la],props:{stroke:sa,fill:Ea,noFill:Ua,strokeWidth:jb,opacity:sb,strokeType:Ub}}=this,gc=this.getVertices(jb/2).join();return(0,wb.jsx)(Cn,Id(me({},d),{opacity:l?
.2:sb,children:(0,wb.jsxs)("g",{transform:`translate(${Y}, ${la})`,children:[(0,wb.jsx)("polygon",{className:E||!Ua?"tl-hitarea-fill":"tl-hitarea-stroke",points:gc}),(0,wb.jsx)("polygon",{points:gc,stroke:Ua?Ea:sa,fill:Ua?"none":Ea,strokeWidth:jb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Ub?"8 2":void 0})]})}))}));$a(this,"ReactIndicator",We(()=>{const {offset:[d,l],props:{strokeWidth:E}}=this;return(0,wb.jsx)("polygon",{transform:`translate(${d}, ${l})`,points:this.getVertices(E/
2).join()})}));$a(this,"validateProps",d=>{void 0!==d.sides&&(d.sides=Math.max(d.sides,3));return Gg(this,d)})}getShapeSVGJsx(d){const {offset:[l,E],props:{stroke:Y,fill:la,noFill:sa,strokeWidth:Ea,opacity:Ua,strokeType:jb}}=this;d=this.getVertices(Ea/2).join();return(0,wb.jsxs)("g",{transform:`translate(${l}, ${E})`,opacity:Ua,children:[(0,wb.jsx)("polygon",{className:sa?"tl-hitarea-stroke":"tl-hitarea-fill",points:d}),(0,wb.jsx)("polygon",{points:d,stroke:sa?la:Y,fill:sa?"none":la,strokeWidth:Ea,
rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===jb?"8 2":void 0})]})}};$a(Ws,"id","polygon");$a(Ws,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"#000000",fill:"var(--ls-secondary-background-color)",noFill:!1,strokeType:"line",strokeWidth:2,opacity:1});var po=ff(S(3));wb=S(611);var HC={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Mq=class extends io{constructor(){super(...arguments);$a(this,"ReactComponent",We(({events:d,
isErasing:l,isEditing:E,onEditingEnd:Y})=>{const {props:{opacity:la,fontFamily:sa,fontSize:Ea,fontWeight:Ua,italic:jb,lineHeight:sb,text:Ub,stroke:gc,padding:yc}}=this,Qc=po.useRef(null),Jc=po.useRef(!1),kd=po.useRef(null),ad=po.useCallback(Bd=>{const {isSizeLocked:Fe}=this.props;Bd=oh.normalizeText(Bd.currentTarget.value);Fe?this.update({text:Bd,size:this.getAutoSizedBoundingBox({text:Bd})}):this.update({text:Bd})},[]),vc=po.useCallback(Bd=>{if("Escape"!==Bd.key)if("Tab"===Bd.key&&0===Ub.length)Bd.preventDefault();
else{if("Meta"!==Bd.key&&!Bd.metaKey)Bd.stopPropagation();else if("z"===Bd.key&&Bd.metaKey){Bd.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Bd.stopPropagation();Bd.preventDefault();return}"Tab"===Bd.key&&(Bd.preventDefault(),Bd.shiftKey?pn.unindent(Bd.currentTarget):pn.indent(Bd.currentTarget),this.update({text:oh.normalizeText(Bd.currentTarget.value)}))}},[]),md=po.useCallback(Bd=>{Bd.currentTarget.setSelectionRange(0,0);null==Y?void 0:Y()},[Y]),Ad=po.useCallback(Bd=>
{E&&Jc.current&&document.activeElement===Bd.currentTarget&&Bd.currentTarget.select()},[E]),qd=po.useCallback(Bd=>{E&&Bd.stopPropagation()},[E]);po.useEffect(()=>{E?requestAnimationFrame(()=>{Jc.current=!0;const Bd=Qc.current;Bd&&(Bd.focus(),Bd.select())}):null==Y?void 0:Y()},[E,Y]);po.useLayoutEffect(()=>{const {fontFamily:Bd,fontSize:Fe,fontWeight:ce,lineHeight:Ge,padding:Bf}=this.props,[bf,ze]=Cf(Ub,{fontFamily:Bd,fontSize:Fe,fontWeight:ce,lineHeight:Ge},Bf);this.update({size:[bf,ze]})},[]);return(0,wb.jsx)(wo,
Id(me({},d),{opacity:l?.2:la,children:(0,wb.jsx)("div",{ref:kd,className:"tl-text-shape-wrapper","data-hastext":!!Ub,"data-isediting":E,style:{fontFamily:sa,fontStyle:jb?"italic":"normal",fontSize:Ea,fontWeight:Ua,padding:yc,lineHeight:sb,color:gc},children:E?(0,wb.jsx)("textarea",{ref:Qc,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",
defaultValue:Ub,onFocus:Ad,onChange:ad,onKeyDown:vc,onBlur:md,onPointerDown:qd}):(0,wb.jsxs)(wb.Fragment,{children:[Ub,""]})})}))}));$a(this,"setScaleLevel",d=>Rf(this,null,function*(){this.update({scaleLevel:d,fontSize:HC[null!=d?d:"md"]});this.onResetBounds()}));$a(this,"ReactIndicator",We(()=>{const {props:{borderRadius:d},bounds:l}=this;return(0,wb.jsx)("rect",{width:l.width,height:l.height,rx:d,ry:d,fill:"transparent"})}));$a(this,"validateProps",d=>Gg(this,d));$a(this,"getBounds",()=>{const [d,
l]=this.props.point,[E,Y]=this.props.size;return{minX:d,minY:l,maxX:d+E,maxY:l+Y,width:E,height:Y}});$a(this,"onResizeStart",({isSingle:d})=>{var l;if(!d)return this;this.scale=[...(null!=(l=this.props.scale)?l:[1,1])];return this.update({isSizeLocked:!1})});$a(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var d;return null!=(d=this.props.scaleLevel)?d:"md"}getAutoSizedBoundingBox(d={}){const {text:l=this.props.text,fontFamily:E=
this.props.fontFamily,fontSize:Y=this.props.fontSize,fontWeight:la=this.props.fontWeight,lineHeight:sa=this.props.lineHeight,padding:Ea=this.props.padding}=d,[Ua,jb]=Cf(l,{fontFamily:E,fontSize:Y,lineHeight:sa,fontWeight:la},Ea);return[Ua,jb]}getShapeSVGJsx(){const {props:{text:d,stroke:l,fontSize:E,fontFamily:Y}}=this,la=this.getBounds();return(0,wb.jsx)("foreignObject",{width:la.width,height:la.height,children:(0,wb.jsx)("div",{style:{color:l,fontSize:E,fontFamily:Y},children:d})})}};$a(Mq,"id",
"text");$a(Mq,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[100,100],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family), 'Helvetica Neue', Helvetica, Arial, sans-serif",borderRadius:0,stroke:"var(--tl-foreground, #000)",fill:"#ffffff",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Xd([ng],Mq.prototype,"scaleLevel",1);Xd([Vf],Mq.prototype,"setScaleLevel",2);wb=S(611);var ux=class extends hg{constructor(){super(...arguments);
$a(this,"aspectRatio",480/853);$a(this,"canChangeAspectRatio",!1);$a(this,"canFlip",!1);$a(this,"canEdit",!0);$a(this,"onYoutubeLinkChange",d=>{this.update({url:d,size:ux.defaultProps.size})});$a(this,"ReactComponent",We(({events:d,isErasing:l,isEditing:E})=>(0,wb.jsx)(wo,Id(me({style:{overflow:"hidden",pointerEvents:"all",opacity:l?.2:1}},d),{children:(0,wb.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl",style:{pointerEvents:E?"all":"none",userSelect:"none"},children:this.embedId?
(0,wb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,wb.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,wb.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},
children:(0,wb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,wb.jsxs)("g",{children:[(0,wb.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,wb.jsx)("g",{children:(0,wb.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,wb.jsxs)("g",{fill:"#fff",children:[(0,wb.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,wb.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))));$a(this,"ReactIndicator",We(()=>{const {props:{size:[d,l]}}=this;return(0,wb.jsx)("rect",{width:d,height:l,fill:"transparent",rx:8,ry:8})}));$a(this,"validateProps",d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[0]*this.aspectRatio,1));return Gg(this,d)})}get embedId(){var d,l;const E=this.props.url,Y=E.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/);
return null!=(l=null!=(d=null==Y?void 0:Y[1])?d:E)?l:""}},cq=ux;$a(cq,"id","youtube");$a(cq,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});Xd([ng],cq.prototype,"embedId",1);Xd([Vf],cq.prototype,"onYoutubeLinkChange",2);var vx=[Qs,pu,Rs,Kr,Ss,Ts,Vs,Nr,Ws,Mq,cq,$p,gp,sm],tu=class extends Sm{constructor(){super(...arguments);$a(this,"Shape",Qs)}};$a(tu,"id","box");$a(tu,"shortcut",["8"]);var wx=class extends Sm{constructor(){super(...arguments);$a(this,
"Shape",Rs)}};$a(wx,"id","ellipse");var uu=class extends Qo{};$a(uu,"id","erase");$a(uu,"shortcut",["5"]);var vu=class extends zn{constructor(){super(...arguments);$a(this,"Shape",Kr);$a(this,"simplify",!0);$a(this,"simplifyTolerance",.618)}};$a(vu,"id","highlighter");$a(vu,"shortcut",["4"]);var wu=class extends hn{constructor(){super(...arguments);$a(this,"Shape",Vs)}};$a(wu,"id","line");$a(wu,"shortcut",["6"]);var xu=class extends zn{constructor(){super(...arguments);$a(this,"Shape",Nr);$a(this,
"simplify",!1)}};$a(xu,"id","pencil");$a(xu,"shortcut",["3"]);var xx=class extends Sm{constructor(){super(...arguments);$a(this,"Shape",Ws)}};$a(xx,"id","polygon");var yu=class extends Vo{constructor(){super(...arguments);$a(this,"Shape",Mq)}};$a(yu,"id","text");$a(yu,"shortcut",["7"]);var yx=class extends Sm{constructor(){super(...arguments);$a(this,"Shape",cq)}};$a(yx,"id","youtube");var zx=class extends Xg{constructor(){super(...arguments);$a(this,"creatingShape");$a(this,"offset",[0,0]);$a(this,
"onEnter",()=>{this.app.history.pause();xc(()=>{const d=new sm({id:Pg(),parentId:this.app.currentPage.id,point:$d.sub(this.app.inputs.originPoint,this.offset),size:sm.defaultProps.size});this.creatingShape=d;this.app.currentPage.addShapes(d);this.app.setEditingShape(d);this.app.setSelectedShapes([d]);(.8>this.app.viewport.camera.zoom||1.2<this.app.viewport.camera.zoom)&&this.app.api.resetZoomToCursor()})});$a(this,"onPointerDown",d=>{switch(d.type){case "shape":if(d.shape===this.creatingShape)break;
this.app.selectTool("select");break;case "canvas":d.order||this.app.selectTool("select")}});$a(this,"onExit",()=>{var d;this.creatingShape&&(this.app.history.resume(),(null==(d=this.creatingShape)?0:d.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()))})}};$a(zx,"id","creating");var Ax=class extends Xg{constructor(){super(...arguments);$a(this,"cursor","crosshair");$a(this,"onPointerDown",d=>{this.tool.transition("creating")})}};
$a(Ax,"id","idle");var Or=class extends Hj{constructor(){super(...arguments);$a(this,"Shape",sm);$a(this,"onPinch",d=>{this.app.viewport.pinchCamera(d.point,[0,0],d.offset[0])})}};$a(Or,"id","logseq-portal");$a(Or,"shortcut",["9"]);$a(Or,"states",[Ax,zx]);$a(Or,"initial","idle");var Bx=class extends Sm{constructor(){super(...arguments);$a(this,"Shape",gp)}};$a(Bx,"id","youtube");var Cx=class extends Sm{constructor(){super(...arguments);$a(this,"Shape",$p)}};$a(Cx,"id","iframe");var IC=ff(S(614));
wb=S(611);var JC=new Map(vx.map(d=>[d.id,d])),zu=class{constructor(d){$a(this,"shapes");$a(this,"pageId");$a(this,"assets");d&&this.load(d)}load(d){const l=d.pages.find(E=>d.currentPageId===E.id);this.pageId=null==l?void 0:l.id;this.assets=d.assets;this.shapes=null==l?void 0:l.shapes.map(E=>{var Y=E.type;if(!Y)throw Error("No shape type provided.");const la=JC.get(Y);if(!la)throw Error(`Could not find shape class for ${Y}`);return new la(E)})}generatePreviewJsx(d){var l,E;const Y=[...(null!=(l=this.shapes)?
l:[]).map(jb=>jb.getRotatedBounds())];(l=null==d?void 0:d.currentView)&&Y.push(l);let la=gf.getCommonBounds(Y);if(!la)return null;la=gf.expandBounds(la,16);la=gf.ensureRatio(la,4/3);const sa=jb=>[(jb[0]-la.minX).toFixed(2),(jb[1]-la.minY).toFixed(2)],[Ea,Ua]=l?sa([l.minX,l.minY]):[0,0];return la&&(0,wb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":la.minX.toFixed(2),"data-common-bound-y":la.minY.toFixed(2),"data-common-bound-width":la.width.toFixed(2),"data-common-bound-height":la.height.toFixed(2),
viewBox:[0,0,la.width,la.height].join(" "),children:[(0,wb.jsx)("defs",{children:l&&(0,wb.jsxs)(wb.Fragment,{children:[(0,wb.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Ea}, ${Ua})`,width:l.width,height:l.height}),(0,wb.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,wb.jsx)("rect",{width:la.width,height:la.height,fill:"white"}),(0,wb.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,wb.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==
(E=this.shapes)?void 0:E.map(jb=>{var sb,Ub;const {bounds:gc,props:{rotation:yc}}=jb,[Qc,Jc]=sa([gc.minX,gc.minY]),kd=+(180*((null!=yc?yc:0)+(null!=(sb=gc.rotation)?sb:0))/Math.PI).toFixed(2),[ad,vc]=[(gc.width/2).toFixed(2),(gc.height/2).toFixed(2)];return(0,wb.jsx)("g",{transform:[`translate(${Qc}, ${Jc})`,`rotate(${kd}, ${ad}, ${vc})`].join(" "),children:jb.getShapeSVGJsx({assets:null!=(Ub=this.assets)?Ub:[]})},jb.id)})}),(0,wb.jsx)("rect",{mask:l?`url(#${this.pageId}-camera-mask)`:"",width:la.width,
height:la.height,fill:"transparent"}),l&&(0,wb.jsx)("use",{id:"minimap-camera-rect","data-x":Ea,"data-y":Ua,"data-width":l.width,"data-height":l.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/d.camera.zoom})]})}exportAsSVG(){const d=this.generatePreviewJsx();return d?IC.default.renderToString(d):""}},KC=[".png",".svg",".jpg",".jpeg",".gif"],LC=[".mp4",".webm",".ogg"],MC=ff(S(3));wb=S(611);var NC={ContextBar:hC},OC=[tu,wx,xx,uu,vu,wu,xu,yu,yx,Cx,Bx,Or],PC=d=>
{var {onPersist:l,model:E}=d;d=Wf(d,["onPersist","model"]);const Y=Ci(),la=El(),sa=cl(),Ea=Bs.useRef(null),Ua=Bs.useCallback((jb,sb)=>{(0,zh.default)(jb.serialized,E)||(null==l?void 0:l(jb,sb))},[E]);return(0,wb.jsx)(Dz,Id(me({Shapes:vx,Tools:OC,onDrop:Y,onPaste:la,onCanvasDBClick:sa,onPersist:Ua,model:E},d),{children:(0,wb.jsx)(oC,{collisionRef:Ea,children:(0,wb.jsx)("div",{ref:Ea,className:"logseq-tldraw logseq-tldraw-wrapper",children:(0,wb.jsx)(vA,{components:NC,children:(0,wb.jsx)(eB,{})})})})}))},
QC=function(d){var {renderers:l,handlers:E}=d;d=Wf(d,["renderers","handlers"]);const Y={renderers:Bs.useMemo(()=>Object.fromEntries(Object.entries(l).map(([la,sa])=>[la,Bs.memo(sa)])),[]),handlers:E};return(0,wb.jsx)(Go.Provider,{value:Y,children:(0,wb.jsx)(PC,me({},d))})}};
'use strict';
var $rum$core$use_layout_effect_BANG_$cljs$0core$0IFn$0_invoke$0arity$02$$ = function($setup_fn$jscomp$3$$, $deps$jscomp$6$$) {
  React.useLayoutEffect(function() {
    var $or__5043__auto__$jscomp$56$$ = $setup_fn$jscomp$3$$.$cljs$core$IFn$_invoke$arity$0$ ? $setup_fn$jscomp$3$$.$cljs$core$IFn$_invoke$arity$0$() : $setup_fn$jscomp$3$$.call(null);
    if ($APP.$cljs$core$truth_$$($or__5043__auto__$jscomp$56$$)) {
      return $or__5043__auto__$jscomp$56$$;
    }
  }, $APP.$cljs$core$array_QMARK_$$($deps$jscomp$6$$) ? $deps$jscomp$6$$ : $APP.$cljs$core$into_array$$.$cljs$core$IFn$_invoke$arity$1$($deps$jscomp$6$$));
}, $frontend$handler$whiteboard$get_whiteboard_blocks$$ = function($blocks$jscomp$118_page_name$jscomp$69$$) {
  $blocks$jscomp$118_page_name$jscomp$69$$ = $APP.$frontend$db$model$get_page_blocks_no_cache$cljs$0core$0IFn$0_invoke$0arity$01$$($blocks$jscomp$118_page_name$jscomp$69$$);
  return $APP.$cljs$core$remove$$.$cljs$core$IFn$_invoke$arity$2$($APP.$logseq$graph_parser$whiteboard$shape_block_QMARK_$$, $blocks$jscomp$118_page_name$jscomp$69$$);
}, $frontend$handler$whiteboard$get_last_root_block$$ = function($blocks$jscomp$119_blocks_with_no_next_page_name$jscomp$70_root_blocks$jscomp$1$$) {
  var $page_id$jscomp$30$$ = $APP.$cljs$cst$keyword$db_SLASH_id$$.$cljs$core$IFn$_invoke$arity$1$($APP.$frontend$db$model$get_page$$($blocks$jscomp$119_blocks_with_no_next_page_name$jscomp$70_root_blocks$jscomp$1$$));
  $blocks$jscomp$119_blocks_with_no_next_page_name$jscomp$70_root_blocks$jscomp$1$$ = $frontend$handler$whiteboard$get_whiteboard_blocks$$($blocks$jscomp$119_blocks_with_no_next_page_name$jscomp$70_root_blocks$jscomp$1$$);
  $blocks$jscomp$119_blocks_with_no_next_page_name$jscomp$70_root_blocks$jscomp$1$$ = $APP.$cljs$core$filter$$.$cljs$core$IFn$_invoke$arity$2$(function($block$jscomp$209$$) {
    return $APP.$cljs$core$_EQ_$$.$cljs$core$IFn$_invoke$arity$2$($page_id$jscomp$30$$, $APP.$cljs$cst$keyword$db_SLASH_id$$.$cljs$core$IFn$_invoke$arity$1$($APP.$cljs$cst$keyword$block_SLASH_parent$$.$cljs$core$IFn$_invoke$arity$1$($block$jscomp$209$$)));
  }, $blocks$jscomp$119_blocks_with_no_next_page_name$jscomp$70_root_blocks$jscomp$1$$);
  var $root_block_left_ids$$ = $APP.$cljs$core$set$$($APP.$cljs$core$remove$$.$cljs$core$IFn$_invoke$arity$2$($APP.$cljs$core$nil_QMARK_$$, $APP.$cljs$core$map$$.$cljs$core$IFn$_invoke$arity$2$(function($block$jscomp$210$$) {
    return $APP.$cljs$core$get_in$$.$cljs$core$IFn$_invoke$arity$3$($block$jscomp$210$$, new $APP.$cljs$core$PersistentVector$$(null, 2, 5, $APP.$cljs$core$PersistentVector$EMPTY_NODE$$, [$APP.$cljs$cst$keyword$block_SLASH_left$$, $APP.$cljs$cst$keyword$db_SLASH_id$$], null), null);
  }, $blocks$jscomp$119_blocks_with_no_next_page_name$jscomp$70_root_blocks$jscomp$1$$)));
  $blocks$jscomp$119_blocks_with_no_next_page_name$jscomp$70_root_blocks$jscomp$1$$ = $APP.$cljs$core$remove$$.$cljs$core$IFn$_invoke$arity$2$(function($G__74837_p1__74836_SHARP_$$) {
    $G__74837_p1__74836_SHARP_$$ = $APP.$cljs$cst$keyword$db_SLASH_id$$.$cljs$core$IFn$_invoke$arity$1$($G__74837_p1__74836_SHARP_$$);
    return $root_block_left_ids$$.$cljs$core$IFn$_invoke$arity$1$ ? $root_block_left_ids$$.$cljs$core$IFn$_invoke$arity$1$($G__74837_p1__74836_SHARP_$$) : $root_block_left_ids$$.call(null, $G__74837_p1__74836_SHARP_$$);
  }, $blocks$jscomp$119_blocks_with_no_next_page_name$jscomp$70_root_blocks$jscomp$1$$);
  return $APP.$cljs$core$seq$$($blocks$jscomp$119_blocks_with_no_next_page_name$jscomp$70_root_blocks$jscomp$1$$) ? $APP.$cljs$core$first$$($blocks$jscomp$119_blocks_with_no_next_page_name$jscomp$70_root_blocks$jscomp$1$$) : null;
}, $frontend$extensions$tldraw$search_handler$$ = function($q$jscomp$109$$, $filters$jscomp$11_map__85564_map__85564__$1$$) {
  $filters$jscomp$11_map__85564_map__85564__$1$$ = $APP.$cljs$core$js__GT_clj$$.$cljs$core$IFn$_invoke$arity$variadic$($filters$jscomp$11_map__85564_map__85564__$1$$, $APP.$cljs$core$prim_seq$cljs$0core$0IFn$0_invoke$0arity$02$$([new $APP.$cljs$core$PersistentArrayMap$$(null, 1, [$APP.$cljs$cst$keyword$keywordize_DASH_keys$$, !0], null)]));
  $filters$jscomp$11_map__85564_map__85564__$1$$ = $APP.$cljs$core$__destructure_map$$($filters$jscomp$11_map__85564_map__85564__$1$$);
  var $pages_QMARK_$$ = $APP.$cljs$core$get$$.$cljs$core$IFn$_invoke$arity$2$($filters$jscomp$11_map__85564_map__85564__$1$$, $cljs$cst$keyword$pages_QMARK_$$), $blocks_QMARK_$jscomp$5$$ = $APP.$cljs$core$get$$.$cljs$core$IFn$_invoke$arity$2$($filters$jscomp$11_map__85564_map__85564__$1$$, $APP.$cljs$cst$keyword$blocks_QMARK_$$), $files_QMARK_$$ = $APP.$cljs$core$get$$.$cljs$core$IFn$_invoke$arity$2$($filters$jscomp$11_map__85564_map__85564__$1$$, $cljs$cst$keyword$files_QMARK_$$), $repo$jscomp$488$$ = 
  $APP.$frontend$state$get_current_repo$$();
  return $APP.$promesa$core$bind$cljs$0core$0IFn$0_invoke$0arity$02$$(null, function() {
    return $APP.$promesa$core$bind$cljs$0core$0IFn$0_invoke$0arity$02$$($APP.$cljs$core$truth_$$($blocks_QMARK_$jscomp$5$$) ? $APP.$frontend$search$block_search$$($repo$jscomp$488$$, $q$jscomp$109$$, new $APP.$cljs$core$PersistentArrayMap$$(null, 1, [$APP.$cljs$cst$keyword$limit$$, 100], null)) : null, function($blocks$jscomp$154$$) {
      return $APP.$promesa$core$bind$cljs$0core$0IFn$0_invoke$0arity$02$$($APP.$cljs$core$truth_$$($pages_QMARK_$$) ? $APP.$frontend$search$page_search$cljs$0core$0IFn$0_invoke$0arity$02$$($q$jscomp$109$$, 10) : null, function($pages$jscomp$46$$) {
        return $APP.$promesa$core$bind$cljs$0core$0IFn$0_invoke$0arity$02$$($APP.$cljs$core$truth_$$($files_QMARK_$$) ? $APP.$frontend$search$file_search$cljs$0core$0IFn$0_invoke$0arity$02$$($q$jscomp$109$$, 100) : null, function($files$jscomp$57$$) {
          return $APP.$promesa$protocols$_promise$$($APP.$cljs$core$clj__GT_js$$(new $APP.$cljs$core$PersistentArrayMap$$(null, 3, [$APP.$cljs$cst$keyword$pages$$, $pages$jscomp$46$$, $APP.$cljs$cst$keyword$blocks$$, $blocks$jscomp$154$$, $APP.$cljs$cst$keyword$files$$, $files$jscomp$57$$], null)));
        });
      });
    });
  });
}, $frontend$extensions$tldraw$save_asset_handler$$ = function($file$jscomp$142$$) {
  return $APP.$promesa$core$then$cljs$0core$0IFn$0_invoke$0arity$02$$($APP.$frontend$handler$editor$save_assets_BANG_$cljs$0core$0IFn$0_invoke$0arity$03$$($APP.$frontend$state$get_current_repo$$(), new $APP.$cljs$core$PersistentVector$$(null, 1, 5, $APP.$cljs$core$PersistentVector$EMPTY_NODE$$, [$APP.$cljs$core$js__GT_clj$$.$cljs$core$IFn$_invoke$arity$1$($file$jscomp$142$$)], null)), function($asset_file_name$jscomp$1_res$jscomp$60$$) {
    var $and__5041__auto__$jscomp$inline_12382_full_file_path$jscomp$1_temp__5720__auto__$jscomp$1168$$ = ($and__5041__auto__$jscomp$inline_12382_full_file_path$jscomp$1_temp__5720__auto__$jscomp$1168$$ = $APP.$cljs$core$seq$$($asset_file_name$jscomp$1_res$jscomp$60$$)) ? $APP.$cljs$core$first$$($asset_file_name$jscomp$1_res$jscomp$60$$) : $and__5041__auto__$jscomp$inline_12382_full_file_path$jscomp$1_temp__5720__auto__$jscomp$1168$$;
    return $APP.$cljs$core$truth_$$($and__5041__auto__$jscomp$inline_12382_full_file_path$jscomp$1_temp__5720__auto__$jscomp$1168$$) ? ($asset_file_name$jscomp$1_res$jscomp$60$$ = $APP.$cljs$core$nth$$.$cljs$core$IFn$_invoke$arity$3$($and__5041__auto__$jscomp$inline_12382_full_file_path$jscomp$1_temp__5720__auto__$jscomp$1168$$, 0, null), $APP.$cljs$core$nth$$.$cljs$core$IFn$_invoke$arity$3$($and__5041__auto__$jscomp$inline_12382_full_file_path$jscomp$1_temp__5720__auto__$jscomp$1168$$, 1, null), 
    $and__5041__auto__$jscomp$inline_12382_full_file_path$jscomp$1_temp__5720__auto__$jscomp$1168$$ = $APP.$cljs$core$nth$$.$cljs$core$IFn$_invoke$arity$3$($and__5041__auto__$jscomp$inline_12382_full_file_path$jscomp$1_temp__5720__auto__$jscomp$1168$$, 2, null), $APP.$frontend$handler$editor$resolve_relative_path$$($APP.$cljs$core$truth_$$($and__5041__auto__$jscomp$inline_12382_full_file_path$jscomp$1_temp__5720__auto__$jscomp$1168$$) ? $and__5041__auto__$jscomp$inline_12382_full_file_path$jscomp$1_temp__5720__auto__$jscomp$1168$$ : 
    $asset_file_name$jscomp$1_res$jscomp$60$$)) : null;
  });
}, $frontend$extensions$tldraw$get_tldraw_handlers$$ = function($name$jscomp$360$$) {
  return new $APP.$cljs$core$PersistentArrayMap$$(null, 8, [$APP.$cljs$cst$keyword$search$$, $frontend$extensions$tldraw$search_handler$$, $cljs$cst$keyword$queryBlockByUUID$$, function($p1__85568_SHARP_$$) {
    return $APP.$cljs$core$clj__GT_js$$($APP.$frontend$db$model$query_block_by_uuid$$($APP.$cljs$core$parse_uuid$$($p1__85568_SHARP_$$)));
  }, $cljs$cst$keyword$isWhiteboardPage$$, $APP.$frontend$db$model$whiteboard_page_QMARK_$$, $cljs$cst$keyword$saveAsset$$, $frontend$extensions$tldraw$save_asset_handler$$, $cljs$cst$keyword$makeAssetUrl$$, $APP.$frontend$handler$editor$make_asset_url$$, $cljs$cst$keyword$addNewBlock$$, function($content$jscomp$329_tx$jscomp$inline_12879$$) {
    var $JSCompiler_temp_const$jscomp$12446$$ = $APP.$cljs$core$str$$, $JSCompiler_temp_const$jscomp$12445$$ = $JSCompiler_temp_const$jscomp$12446$$.$cljs$core$IFn$_invoke$arity$1$, $uuid$jscomp$inline_12875$$ = $APP.$datascript$core$squuid$cljs$0core$0IFn$0_invoke$0arity$01$$(), $page_entity$jscomp$inline_12876$$ = $APP.$frontend$db$model$get_page$$($name$jscomp$360$$), $or__5043__auto__$jscomp$inline_12878$$ = $frontend$handler$whiteboard$get_last_root_block$$($name$jscomp$360$$);
    $content$jscomp$329_tx$jscomp$inline_12879$$ = new $APP.$cljs$core$PersistentArrayMap$$(null, 6, [$APP.$cljs$cst$keyword$block_SLASH_left$$, $APP.$cljs$core$select_keys$$($APP.$cljs$core$truth_$$($or__5043__auto__$jscomp$inline_12878$$) ? $or__5043__auto__$jscomp$inline_12878$$ : $page_entity$jscomp$inline_12876$$, new $APP.$cljs$core$PersistentVector$$(null, 1, 5, $APP.$cljs$core$PersistentVector$EMPTY_NODE$$, [$APP.$cljs$cst$keyword$db_SLASH_id$$], null)), $APP.$cljs$cst$keyword$block_SLASH_uuid$$, 
    $uuid$jscomp$inline_12875$$, $APP.$cljs$cst$keyword$block_SLASH_content$$, $APP.$cljs$core$truth_$$($content$jscomp$329_tx$jscomp$inline_12879$$) ? $content$jscomp$329_tx$jscomp$inline_12879$$ : "", $APP.$cljs$cst$keyword$block_SLASH_format$$, $APP.$cljs$cst$keyword$markdown$$, $APP.$cljs$cst$keyword$block_SLASH_page$$, new $APP.$cljs$core$PersistentArrayMap$$(null, 1, [$APP.$cljs$cst$keyword$block_SLASH_name$$, $APP.$logseq$graph_parser$util$page_name_sanity_lc$$.$cljs$core$IFn$_invoke$arity$1$ ? 
    $APP.$logseq$graph_parser$util$page_name_sanity_lc$$.$cljs$core$IFn$_invoke$arity$1$($name$jscomp$360$$) : $APP.$logseq$graph_parser$util$page_name_sanity_lc$$.call(null, $name$jscomp$360$$)], null), $APP.$cljs$cst$keyword$block_SLASH_parent$$, new $APP.$cljs$core$PersistentArrayMap$$(null, 1, [$APP.$cljs$cst$keyword$block_SLASH_name$$, $name$jscomp$360$$], null)], null);
    $APP.$frontend$db$utils$transact_BANG_$cljs$0core$0IFn$0_invoke$0arity$01$$(new $APP.$cljs$core$PersistentVector$$(null, 1, 5, $APP.$cljs$core$PersistentVector$EMPTY_NODE$$, [$content$jscomp$329_tx$jscomp$inline_12879$$], null));
    return $JSCompiler_temp_const$jscomp$12445$$.call($JSCompiler_temp_const$jscomp$12446$$, $uuid$jscomp$inline_12875$$);
  }, $cljs$cst$keyword$sidebarAddBlock$$, function($uuid$jscomp$66$$, $type$jscomp$371$$) {
    return $APP.$frontend$state$sidebar_add_block_BANG_$$($APP.$frontend$state$get_current_repo$$(), $APP.$cljs$cst$keyword$db_SLASH_id$$.$cljs$core$IFn$_invoke$arity$1$($APP.$frontend$db$model$get_page$$($uuid$jscomp$66$$)), $APP.$cljs$core$keyword$$.$cljs$core$IFn$_invoke$arity$1$($type$jscomp$371$$));
  }, $cljs$cst$keyword$redirectToPage$$, function($page_name$jscomp$140$$) {
    return $APP.$cljs$core$truth_$$($APP.$frontend$db$model$whiteboard_page_QMARK_$$($page_name$jscomp$140$$)) ? $APP.$frontend$handler$route$redirect_to_whiteboard_BANG_$cljs$0core$0IFn$0_invoke$0arity$02$$($page_name$jscomp$140$$, null) : $APP.$frontend$handler$route$redirect_to_page_BANG_$cljs$0core$0IFn$0_invoke$0arity$01$$($page_name$jscomp$140$$);
  }], null);
}, $cljs$cst$keyword$queryBlockByUUID$$ = new $APP.$cljs$core$Keyword$$(null, "queryBlockByUUID", "queryBlockByUUID", 2091812895), $cljs$cst$keyword$addNewBlock$$ = new $APP.$cljs$core$Keyword$$(null, "addNewBlock", "addNewBlock", 1426762680), $cljs$cst$keyword$files_QMARK_$$ = new $APP.$cljs$core$Keyword$$(null, "files?", "files?", -1267491104), $cljs$cst$keyword$renderers$$ = new $APP.$cljs$core$Keyword$$(null, "renderers", "renderers", -1460292282), $cljs$cst$keyword$model$$ = new $APP.$cljs$core$Keyword$$(null, 
"model", "model", 331153215), $cljs$cst$keyword$PageNameLink$$ = new $APP.$cljs$core$Keyword$$(null, "PageNameLink", "PageNameLink", 10142086), $cljs$cst$keyword$onMount$$ = new $APP.$cljs$core$Keyword$$(null, "onMount", "onMount", -876858467), $cljs$cst$keyword$makeAssetUrl$$ = new $APP.$cljs$core$Keyword$$(null, "makeAssetUrl", "makeAssetUrl", 217779988), $cljs$cst$keyword$onPersist$$ = new $APP.$cljs$core$Keyword$$(null, "onPersist", "onPersist", -1848738852), $cljs$cst$keyword$Breadcrumb$$ = 
new $APP.$cljs$core$Keyword$$(null, "Breadcrumb", "Breadcrumb", -1351298906), $cljs$cst$keyword$redirectToPage$$ = new $APP.$cljs$core$Keyword$$(null, "redirectToPage", "redirectToPage", 87147838), $cljs$cst$keyword$saveAsset$$ = new $APP.$cljs$core$Keyword$$(null, "saveAsset", "saveAsset", -668047853), $cljs$cst$keyword$Block$$ = new $APP.$cljs$core$Keyword$$(null, "Block", "Block", -1959785792), $cljs$cst$keyword$sidebarAddBlock$$ = new $APP.$cljs$core$Keyword$$(null, "sidebarAddBlock", "sidebarAddBlock", 
-1204903203), $cljs$cst$keyword$Page$$ = new $APP.$cljs$core$Keyword$$(null, "Page", "Page", -1267059506), $cljs$cst$keyword$pages_QMARK_$$ = new $APP.$cljs$core$Keyword$$(null, "pages?", "pages?", -2065014049), $cljs$cst$keyword$isWhiteboardPage$$ = new $APP.$cljs$core$Keyword$$(null, "isWhiteboardPage", "isWhiteboardPage", -134150579);
$APP.$JSCompiler_StaticMethods_beforeLoadModuleCode$$("tldraw");
var $module$frontend$tldraw_logseq$$ = $APP.$shadow$js$require$$(615);
var $frontend$extensions$tldraw$tldraw$$, $frontend$extensions$tldraw$tldraw_renderers$$;
$APP.$frontend$extensions$tldraw$$ = {};
$frontend$extensions$tldraw$tldraw$$ = $APP.$frontend$rum$adapt_class$cljs$0core$0IFn$0_invoke$0arity$02$$($APP.$module$contents$goog$object_get$$($module$frontend$tldraw_logseq$$, "App"));
$APP.$frontend$extensions$tldraw$generate_preview$$ = $APP.$module$contents$goog$object_get$$($module$frontend$tldraw_logseq$$, "generateJSXFromApp");
$frontend$extensions$tldraw$tldraw_renderers$$ = new $APP.$cljs$core$PersistentArrayMap$$(null, 4, [$cljs$cst$keyword$Page$$, $APP.$rum$core$lazy_build$$($APP.$rum$core$build_defc$$, function($props$jscomp$16$$) {
  return (0,$APP.$frontend$components$page$page$$)(new $APP.$cljs$core$PersistentArrayMap$$(null, 2, [$APP.$cljs$cst$keyword$page_DASH_name$$, $APP.$module$contents$goog$object_get$$($props$jscomp$16$$, "pageName"), $APP.$cljs$cst$keyword$whiteboard_QMARK_$$, !0], null));
}, null, "frontend.extensions.tldraw/page-cp"), $cljs$cst$keyword$Block$$, $APP.$rum$core$lazy_build$$($APP.$rum$core$build_defc$$, function($G__85563$jscomp$inline_9381_JSCompiler_inline_result$jscomp$1971_props$jscomp$17$$) {
  $G__85563$jscomp$inline_9381_JSCompiler_inline_result$jscomp$1971_props$jscomp$17$$ = $APP.$cljs$core$uuid$$($APP.$module$contents$goog$object_get$$($G__85563$jscomp$inline_9381_JSCompiler_inline_result$jscomp$1971_props$jscomp$17$$, "blockId"));
  var $fexpr__85562$jscomp$inline_9382$$ = $APP.$frontend$state$get_component$$($APP.$cljs$cst$keyword$block_SLASH_single_DASH_block$$);
  $G__85563$jscomp$inline_9381_JSCompiler_inline_result$jscomp$1971_props$jscomp$17$$ = $fexpr__85562$jscomp$inline_9382$$.$cljs$core$IFn$_invoke$arity$1$ ? $fexpr__85562$jscomp$inline_9382$$.$cljs$core$IFn$_invoke$arity$1$($G__85563$jscomp$inline_9381_JSCompiler_inline_result$jscomp$1971_props$jscomp$17$$) : $fexpr__85562$jscomp$inline_9382$$.call(null, $G__85563$jscomp$inline_9381_JSCompiler_inline_result$jscomp$1971_props$jscomp$17$$);
  return $APP.$daiquiri$interpreter$interpret$$($G__85563$jscomp$inline_9381_JSCompiler_inline_result$jscomp$1971_props$jscomp$17$$);
}, null, "frontend.extensions.tldraw/block-cp"), $cljs$cst$keyword$Breadcrumb$$, $APP.$rum$core$lazy_build$$($APP.$rum$core$build_defc$$, function($props$jscomp$18$$) {
  return $APP.$daiquiri$interpreter$interpret$$($APP.$frontend$components$block$breadcrumb$$(new $APP.$cljs$core$PersistentArrayMap$$(null, 1, [$APP.$cljs$cst$keyword$preview_QMARK_$$, !0], null), $APP.$frontend$state$get_current_repo$$(), $APP.$cljs$core$uuid$$($APP.$module$contents$goog$object_get$$($props$jscomp$18$$, "blockId")), new $APP.$cljs$core$PersistentArrayMap$$(null, 1, [$APP.$cljs$cst$keyword$end_DASH_separator_QMARK_$$, !0], null)));
}, null, "frontend.extensions.tldraw/breadcrumb"), $cljs$cst$keyword$PageNameLink$$, $APP.$rum$core$lazy_build$$($APP.$rum$core$build_defc$$, function($props$jscomp$19$$) {
  return (0,$APP.$frontend$components$block$page_cp$$)(new $APP.$cljs$core$PersistentArrayMap$$(null, 1, [$APP.$cljs$cst$keyword$preview_QMARK_$$, !0], null), new $APP.$cljs$core$PersistentArrayMap$$(null, 1, [$APP.$cljs$cst$keyword$block_SLASH_name$$, $APP.$module$contents$goog$object_get$$($props$jscomp$19$$, "pageName")], null));
}, null, "frontend.extensions.tldraw/page-name-link")], null);
$APP.$frontend$extensions$tldraw$tldraw_app$$ = $APP.$rum$core$lazy_build$$($APP.$rum$core$build_defc$$, function($name$jscomp$361$$, $block_id$jscomp$101$$) {
  var $data$jscomp$223$$ = $APP.$frontend$handler$whiteboard$page_name__GT_tldr_BANG_$cljs$0core$0IFn$0_invoke$0arity$02$$($name$jscomp$361$$, $block_id$jscomp$101$$), $vec__85569$$ = $APP.$rum$core$use_state$$(null), $tln$$ = $APP.$cljs$core$nth$$.$cljs$core$IFn$_invoke$arity$3$($vec__85569$$, 0, null), $set_tln$$ = $APP.$cljs$core$nth$$.$cljs$core$IFn$_invoke$arity$3$($vec__85569$$, 1, null);
  $rum$core$use_layout_effect_BANG_$cljs$0core$0IFn$0_invoke$0arity$02$$(function() {
    if ($APP.$cljs$core$truth_$$($APP.$cljs$core$truth_$$($tln$$) ? $name$jscomp$361$$ : $tln$$)) {
      var $temp__5720__auto___85576$$ = $APP.$module$contents$goog$object_get$$($tln$$, "api");
      $APP.$cljs$core$truth_$$($temp__5720__auto___85576$$) && $APP.$cljs$core$truth_$$($APP.$cljs$core$truth_$$($block_id$jscomp$101$$) ? $APP.$cljs$core$parse_uuid$$($block_id$jscomp$101$$) : $block_id$jscomp$101$$) && ($temp__5720__auto___85576$$.selectShapes($block_id$jscomp$101$$), $temp__5720__auto___85576$$.zoomToSelection());
    }
    return null;
  }, new $APP.$cljs$core$PersistentVector$$(null, 3, 5, $APP.$cljs$core$PersistentVector$EMPTY_NODE$$, [$name$jscomp$361$$, $block_id$jscomp$101$$, $tln$$], null));
  return $APP.$cljs$core$truth_$$(function() {
    var $and__5041__auto__$jscomp$1087$$ = $APP.$cljs$core$not_empty$$($name$jscomp$361$$);
    return $APP.$cljs$core$truth_$$($and__5041__auto__$jscomp$1087$$) ? $APP.$cljs$core$not_empty$$($APP.$module$contents$goog$object_get$$($data$jscomp$223$$, "currentPageId")) : $and__5041__auto__$jscomp$1087$$;
  }()) ? $APP.$daiquiri$core$create_element$$("div", {style:{overscrollBehavior:"none"}, onBlur:function($G__85573$jscomp$inline_9384_JSCompiler_inline_result$jscomp$1972_e$jscomp$757$$) {
    $G__85573$jscomp$inline_9384_JSCompiler_inline_result$jscomp$1972_e$jscomp$757$$ = $APP.$module$contents$goog$object_get$$($G__85573$jscomp$inline_9384_JSCompiler_inline_result$jscomp$1972_e$jscomp$757$$, "target").tagName;
    var $fexpr__85572$jscomp$inline_9385$$ = new $APP.$cljs$core$PersistentHashSet$$(null, new $APP.$cljs$core$PersistentArrayMap$$(null, 2, ["INPUT", null, "TEXTAREA", null], null), null);
    $G__85573$jscomp$inline_9384_JSCompiler_inline_result$jscomp$1972_e$jscomp$757$$ = $fexpr__85572$jscomp$inline_9385$$.$cljs$core$IFn$_invoke$arity$1$ ? $fexpr__85572$jscomp$inline_9385$$.$cljs$core$IFn$_invoke$arity$1$($G__85573$jscomp$inline_9384_JSCompiler_inline_result$jscomp$1972_e$jscomp$757$$) : $fexpr__85572$jscomp$inline_9385$$.call(null, $G__85573$jscomp$inline_9384_JSCompiler_inline_result$jscomp$1972_e$jscomp$757$$);
    return $APP.$cljs$core$truth_$$($G__85573$jscomp$inline_9384_JSCompiler_inline_result$jscomp$1972_e$jscomp$757$$) ? $APP.$frontend$state$clear_edit_BANG_$$() : null;
  }, onWheel:$APP.$frontend$util$stop_propagation$$, className:"draw tldraw whiteboard relative w-full h-full"}, [$APP.$daiquiri$interpreter$interpret$$(function() {
    var $G__85575$$ = new $APP.$cljs$core$PersistentArrayMap$$(null, 5, [$cljs$cst$keyword$renderers$$, $frontend$extensions$tldraw$tldraw_renderers$$, $APP.$cljs$cst$keyword$handlers$$, $frontend$extensions$tldraw$get_tldraw_handlers$$($name$jscomp$361$$), $cljs$cst$keyword$onMount$$, function($app$jscomp$3$$) {
      return $set_tln$$.$cljs$core$IFn$_invoke$arity$1$ ? $set_tln$$.$cljs$core$IFn$_invoke$arity$1$($app$jscomp$3$$) : $set_tln$$.call(null, $app$jscomp$3$$);
    }, $cljs$cst$keyword$onPersist$$, function($app$jscomp$4$$) {
      return $APP.$frontend$handler$whiteboard$transact_tldr_BANG_$$($name$jscomp$361$$, $APP.$module$contents$goog$object_get$$($app$jscomp$4$$, "serialized"));
    }, $cljs$cst$keyword$model$$, $data$jscomp$223$$], null);
    return $frontend$extensions$tldraw$tldraw$$.$cljs$core$IFn$_invoke$arity$1$ ? $frontend$extensions$tldraw$tldraw$$.$cljs$core$IFn$_invoke$arity$1$($G__85575$$) : $frontend$extensions$tldraw$tldraw$$.call(null, $G__85575$$);
  }())]) : null;
}, null, "frontend.extensions.tldraw/tldraw-app");
$APP.$module$contents$shadow$loader_mm$$.$setLoaded$();

}).call(this);
//# sourceMappingURL=tldraw.js.map
